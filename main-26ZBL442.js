import{A as ct,B as di,C as Te,D as s_,E as eT,F as El,G as Tt,H as _i,I as Ah,J as o_,K as ki,L as br,M as xs,N as Sh,O as iT,P as $i,Q as he,a as q,b as Zo,c as Ih,d as Wx,e as Hx,f as ke,g as Eh,h as wl,i as i_,j as Kx,k as an,l as n_,m as xh,n as Qx,o as Yx,p as Th,q as ve,r as Xx,s as Zx,t as Si,u as vr,v as Ch,w as Il,x as r_,y as Jx,z as tT}from"./chunk-I3EMUCOK.js";import{$ as et,$a as pl,$b as vh,A as dr,Aa as Is,Ab as Nt,Ac as Gi,B as ur,Ba as Ct,Bb as St,Bc as yl,C as cl,Ca as dx,Cb as ei,Cc as ie,D as Bg,Da as hl,Db as Ot,Dc as qx,E as fi,Ea as ux,Eb as gi,Ec as Gx,F as rx,Fa as Fe,Fb as ci,Fc as _r,G as jo,Ga as Je,Gb as Zt,Gc as $x,H as Rn,Ha as ml,Hb as Jt,Hc as wh,I as rn,Ia as qo,Ib as Ax,J as zg,Ja as Go,Jb as Sx,K as sx,Ka as hx,Kb as Ho,Kc as kh,L as dh,La as mx,Lb as dt,Lc as xl,M as Dn,Ma as fx,Mb as kx,N as uh,Na as px,Nb as on,Nc as Ts,O as ll,Oa as gx,Ob as Ko,Oc as Jo,P as hh,Pa as _x,Pb as Qo,Pc as Tl,Q as ox,Qa as vx,Qb as Yo,R as hr,Ra as ti,Rb as li,S as Ht,Sa as Wg,Sb as oe,T as qg,Ta as bx,Tb as gl,U as Bi,Ua as fl,Ub as Xo,V as qt,Va as Y,Vb as Rx,W as ax,Wa as N,Wb as ph,X as jt,Xa as $o,Xb as Dx,Y as mr,Ya as yx,Yb as gh,Z as Uo,Za as wx,Zb as _h,_ as $,_a as mh,_b as Zg,a as Sn,aa as cx,ab as Ix,ac as Jg,b as ex,ba as G,bb as Hg,bc as t_,c as Oe,ca as Gg,cb as qi,cc as gr,d as Fg,da as k,db as Ex,dc as bh,e as Lg,ea as B,eb as Ge,ec as Px,f as Et,fa as Bo,fb as pi,fc as e_,g as qe,ga as $g,gb as xx,gc as Ln,h as Fo,ha as dl,hb as Kg,hc as Mx,i as ix,ia as xt,ib as _t,ic as Nx,j as nn,ja as it,jb as Tx,jc as Ox,k as vs,ka as ht,kb as Qg,kc as He,l as Lo,la as fr,lb as Vt,lc as _l,m as Xt,ma as lx,mb as ot,mc as Vn,n as tt,na as ys,nb as On,nc as jn,o as bs,oa as Ai,ob as Bt,oc as Fx,p as Vg,pa as sn,pb as $e,pc as Es,q as nx,qa as Pn,qb as We,qc as Lx,r as X,ra as Mn,rb as U,rc as Vx,s as Vo,sa as pr,sb as z,sc as kt,t as mi,ta as ws,tb as vt,tc as jx,u as jg,ua as Nn,ub as Yg,uc as vl,v as ch,va as zo,vb as Xg,vc as Ux,w as Ug,wa as zi,wb as fh,wc as Bx,x as lh,xa as ul,xb as Fn,xc as bl,y as kn,ya as Se,yb as Wo,yc as yh,z as xe,za as rt,zb as Cx,zc as zx}from"./chunk-F2QEWZ73.js";import{a as F,b as wt,e as Og,f as D}from"./chunk-2F6QYXKT.js";var Al=class{},Dh=class{},Wi=class n{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let i=e.indexOf(":");if(i>0){let r=e.slice(0,i),s=r.toLowerCase(),o=e.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,i)=>{this.setHeaderEntries(i,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,i])=>{this.setHeaderEntries(e,i)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new n;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(t.name,e);let r=(t.op==="a"?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":let s=t.value;if(!s)this.headers.delete(e),this.normalizedNames.delete(e);else{let o=this.headers.get(e);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}break}}setHeaderEntries(t,e){let i=(Array.isArray(e)?e:[e]).map(s=>s.toString()),r=t.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(t,r)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var c_=class{encodeKey(t){return nT(t)}encodeValue(t){return nT(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function lN(n,t){let e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let s=r.indexOf("="),[o,a]=s==-1?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,s)),t.decodeValue(r.slice(s+1))],c=e.get(o)||[];c.push(a),e.set(o,c)}),e}var dN=/%(\d[a-f0-9])/gi,uN={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function nT(n){return encodeURIComponent(n).replace(dN,(t,e)=>uN[e]??t)}function Rh(n){return`${n}`}var wr=class n{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new c_,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=lN(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{let i=t.fromObject[e],r=Array.isArray(i)?i.map(Rh):[Rh(i)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){let e=[];return Object.keys(t).forEach(i=>{let r=t[i];Array.isArray(r)?r.forEach(s=>{e.push({param:i,value:s,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let e=new n({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let e=(t.op==="a"?this.map.get(t.param):void 0)||[];e.push(Rh(t.value)),this.map.set(t.param,e);break;case"d":if(t.value!==void 0){let i=this.map.get(t.param)||[],r=i.indexOf(Rh(t.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var l_=class{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function hN(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function rT(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function sT(n){return typeof Blob<"u"&&n instanceof Blob}function oT(n){return typeof FormData<"u"&&n instanceof FormData}function mN(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Cl=class n{constructor(t,e,i,r){this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase();let s;if(hN(this.method)||r?(this.body=i!==void 0?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Wi,this.context??=new l_,!this.params)this.params=new wr,this.urlWithParams=e;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=e;else{let a=e.indexOf("?"),c=a===-1?"?":a<e.length-1?"&":"";this.urlWithParams=e+c+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||rT(this.body)||sT(this.body)||oT(this.body)||mN(this.body)?this.body:this.body instanceof wr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||oT(this.body)?null:sT(this.body)?this.body.type||null:rT(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof wr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(t={}){let e=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,s=t.transferCache??this.transferCache,o=t.body!==void 0?t.body:this.body,a=t.withCredentials??this.withCredentials,c=t.reportProgress??this.reportProgress,d=t.headers||this.headers,u=t.params||this.params,m=t.context??this.context;return t.setHeaders!==void 0&&(d=Object.keys(t.setHeaders).reduce((p,_)=>p.set(_,t.setHeaders[_]),d)),t.setParams&&(u=Object.keys(t.setParams).reduce((p,_)=>p.set(_,t.setParams[_]),u)),new n(e,i,o,{params:u,headers:d,context:m,reportProgress:c,responseType:r,withCredentials:a,transferCache:s})}},Ir=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Ir||{}),Sl=class{constructor(t,e=200,i="OK"){this.headers=t.headers||new Wi,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},Ph=class n extends Sl{constructor(t={}){super(t),this.type=Ir.ResponseHeader}clone(t={}){return new n({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},kl=class n extends Sl{constructor(t={}){super(t),this.type=Ir.Response,this.body=t.body!==void 0?t.body:null}clone(t={}){return new n({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},yr=class extends Sl{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},uT=200,fN=204;function a_(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Dl=(()=>{let t=class t{constructor(i){this.handler=i}request(i,r,s={}){let o;if(i instanceof Cl)o=i;else{let d;s.headers instanceof Wi?d=s.headers:d=new Wi(s.headers);let u;s.params&&(s.params instanceof wr?u=s.params:u=new wr({fromObject:s.params})),o=new Cl(i,r,s.body!==void 0?s.body:null,{headers:d,context:s.context,params:u,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let a=tt(o).pipe(ur(d=>this.handler.handle(d)));if(i instanceof Cl||s.observe==="events")return a;let c=a.pipe(xe(d=>d instanceof kl));switch(s.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return c.pipe(X(d=>{if(d.body!==null&&!(d.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return d.body}));case"blob":return c.pipe(X(d=>{if(d.body!==null&&!(d.body instanceof Blob))throw new Error("Response is not a Blob.");return d.body}));case"text":return c.pipe(X(d=>{if(d.body!==null&&typeof d.body!="string")throw new Error("Response is not a string.");return d.body}));case"json":default:return c.pipe(X(d=>d.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(i,r={}){return this.request("DELETE",i,r)}get(i,r={}){return this.request("GET",i,r)}head(i,r={}){return this.request("HEAD",i,r)}jsonp(i,r){return this.request("JSONP",i,{params:new wr().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(i,r={}){return this.request("OPTIONS",i,r)}patch(i,r,s={}){return this.request("PATCH",i,a_(s,r))}post(i,r,s={}){return this.request("POST",i,a_(s,r))}put(i,r,s={}){return this.request("PUT",i,a_(s,r))}};t.\u0275fac=function(r){return new(r||t)(k(Al))},t.\u0275prov=$({token:t,factory:t.\u0275fac});let n=t;return n})(),pN=/^\)\]\}',?\n/,gN="X-Request-URL";function aT(n){if(n.url)return n.url;let t=gN.toLocaleLowerCase();return n.headers.get(t)}var _N=(()=>{let t=class t{constructor(){this.fetchImpl=B(d_,{optional:!0})?.fetch??fetch.bind(globalThis),this.ngZone=B(rt)}handle(i){return new Oe(r=>{let s=new AbortController;return this.doRequest(i,s.signal,r).then(u_,o=>r.error(new yr({error:o}))),()=>s.abort()})}doRequest(i,r,s){return D(this,null,function*(){let o=this.createRequestInit(i),a;try{let w=this.ngZone.runOutsideAngular(()=>this.fetchImpl(i.urlWithParams,F({signal:r},o)));vN(w),s.next({type:Ir.Sent}),a=yield w}catch(w){s.error(new yr({error:w,status:w.status??0,statusText:w.statusText,url:i.urlWithParams,headers:w.headers}));return}let c=new Wi(a.headers),d=a.statusText,u=aT(a)??i.urlWithParams,m=a.status,p=null;if(i.reportProgress&&s.next(new Ph({headers:c,status:m,statusText:d,url:u})),a.body){let w=a.headers.get("content-length"),A=[],x=a.body.getReader(),V=0,H,j,Z=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>D(this,null,function*(){for(;;){let{done:at,value:I}=yield x.read();if(at)break;if(A.push(I),V+=I.length,i.reportProgress){j=i.responseType==="text"?(j??"")+(H??=new TextDecoder).decode(I,{stream:!0}):void 0;let v=()=>s.next({type:Ir.DownloadProgress,total:w?+w:void 0,loaded:V,partialText:j});Z?Z.run(v):v()}}}));let lt=this.concatChunks(A,V);try{let at=a.headers.get("Content-Type")??"";p=this.parseBody(i,lt,at)}catch(at){s.error(new yr({error:at,headers:new Wi(a.headers),status:a.status,statusText:a.statusText,url:aT(a)??i.urlWithParams}));return}}m===0&&(m=p?uT:0),m>=200&&m<300?(s.next(new kl({body:p,headers:c,status:m,statusText:d,url:u})),s.complete()):s.error(new yr({error:p,headers:c,status:m,statusText:d,url:u}))})}parseBody(i,r,s){switch(i.responseType){case"json":let o=new TextDecoder().decode(r).replace(pN,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(r);case"blob":return new Blob([r],{type:s});case"arraybuffer":return r.buffer}}createRequestInit(i){let r={},s=i.withCredentials?"include":void 0;if(i.headers.forEach((o,a)=>r[o]=a.join(",")),i.headers.has("Accept")||(r.Accept="application/json, text/plain, */*"),!i.headers.has("Content-Type")){let o=i.detectContentTypeHeader();o!==null&&(r["Content-Type"]=o)}return{body:i.serializeBody(),method:i.method,headers:r,credentials:s}}concatChunks(i,r){let s=new Uint8Array(r),o=0;for(let a of i)s.set(a,o),o+=a.length;return s}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=$({token:t,factory:t.\u0275fac});let n=t;return n})(),d_=class{};function u_(){}function vN(n){n.then(u_,u_)}function hT(n,t){return t(n)}function bN(n,t){return(e,i)=>t.intercept(e,{handle:r=>n(r,i)})}function yN(n,t,e){return(i,r)=>Ai(e,()=>t(i,s=>n(s,r)))}var wN=new G(""),h_=new G(""),IN=new G(""),mT=new G("",{providedIn:"root",factory:()=>!0});function EN(){let n=null;return(t,e)=>{n===null&&(n=(B(wN,{optional:!0})??[]).reduceRight(bN,hT));let i=B(ul);if(B(mT)){let s=i.add();return n(t,e).pipe(Rn(()=>i.remove(s)))}else return n(t,e)}}var cT=(()=>{let t=class t extends Al{constructor(i,r){super(),this.backend=i,this.injector=r,this.chain=null,this.pendingTasks=B(ul),this.contributeToStability=B(mT)}handle(i){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(h_),...this.injector.get(IN,[])]));this.chain=r.reduceRight((s,o)=>yN(s,o,this.injector),hT)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(i,s=>this.backend.handle(s)).pipe(Rn(()=>this.pendingTasks.remove(r)))}else return this.chain(i,r=>this.backend.handle(r))}};t.\u0275fac=function(r){return new(r||t)(k(Dh),k(ys))},t.\u0275prov=$({token:t,factory:t.\u0275fac});let n=t;return n})();var xN=/^\)\]\}',?\n/;function TN(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var lT=(()=>{let t=class t{constructor(i){this.xhrFactory=i}handle(i){if(i.method==="JSONP")throw new jt(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?Xt(r.\u0275loadImpl()):tt(null)).pipe(Ht(()=>new Oe(o=>{let a=r.build();if(a.open(i.method,i.urlWithParams),i.withCredentials&&(a.withCredentials=!0),i.headers.forEach((x,V)=>a.setRequestHeader(x,V.join(","))),i.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!i.headers.has("Content-Type")){let x=i.detectContentTypeHeader();x!==null&&a.setRequestHeader("Content-Type",x)}if(i.responseType){let x=i.responseType.toLowerCase();a.responseType=x!=="json"?x:"text"}let c=i.serializeBody(),d=null,u=()=>{if(d!==null)return d;let x=a.statusText||"OK",V=new Wi(a.getAllResponseHeaders()),H=TN(a)||i.url;return d=new Ph({headers:V,status:a.status,statusText:x,url:H}),d},m=()=>{let{headers:x,status:V,statusText:H,url:j}=u(),Z=null;V!==fN&&(Z=typeof a.response>"u"?a.responseText:a.response),V===0&&(V=Z?uT:0);let lt=V>=200&&V<300;if(i.responseType==="json"&&typeof Z=="string"){let at=Z;Z=Z.replace(xN,"");try{Z=Z!==""?JSON.parse(Z):null}catch(I){Z=at,lt&&(lt=!1,Z={error:I,text:Z})}}lt?(o.next(new kl({body:Z,headers:x,status:V,statusText:H,url:j||void 0})),o.complete()):o.error(new yr({error:Z,headers:x,status:V,statusText:H,url:j||void 0}))},p=x=>{let{url:V}=u(),H=new yr({error:x,status:a.status||0,statusText:a.statusText||"Unknown Error",url:V||void 0});o.error(H)},_=!1,w=x=>{_||(o.next(u()),_=!0);let V={type:Ir.DownloadProgress,loaded:x.loaded};x.lengthComputable&&(V.total=x.total),i.responseType==="text"&&a.responseText&&(V.partialText=a.responseText),o.next(V)},A=x=>{let V={type:Ir.UploadProgress,loaded:x.loaded};x.lengthComputable&&(V.total=x.total),o.next(V)};return a.addEventListener("load",m),a.addEventListener("error",p),a.addEventListener("timeout",p),a.addEventListener("abort",p),i.reportProgress&&(a.addEventListener("progress",w),c!==null&&a.upload&&a.upload.addEventListener("progress",A)),a.send(c),o.next({type:Ir.Sent}),()=>{a.removeEventListener("error",p),a.removeEventListener("abort",p),a.removeEventListener("load",m),a.removeEventListener("timeout",p),i.reportProgress&&(a.removeEventListener("progress",w),c!==null&&a.upload&&a.upload.removeEventListener("progress",A)),a.readyState!==a.DONE&&a.abort()}})))}};t.\u0275fac=function(r){return new(r||t)(k(wh))},t.\u0275prov=$({token:t,factory:t.\u0275fac});let n=t;return n})(),fT=new G(""),CN="XSRF-TOKEN",AN=new G("",{providedIn:"root",factory:()=>CN}),SN="X-XSRF-TOKEN",kN=new G("",{providedIn:"root",factory:()=>SN}),Mh=class{},RN=(()=>{let t=class t{constructor(i,r,s){this.doc=i,this.platform=r,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let i=this.doc.cookie||"";return i!==this.lastCookieString&&(this.parseCount++,this.lastToken=yh(i,this.cookieName),this.lastCookieString=i),this.lastToken}};t.\u0275fac=function(r){return new(r||t)(k(kt),k(Fe),k(AN))},t.\u0275prov=$({token:t,factory:t.\u0275fac});let n=t;return n})();function DN(n,t){let e=n.url.toLowerCase();if(!B(fT)||n.method==="GET"||n.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return t(n);let i=B(Mh).getToken(),r=B(kN);return i!=null&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),t(n)}var pT=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(pT||{});function PN(n,t){return{\u0275kind:n,\u0275providers:t}}function MN(...n){let t=[Dl,lT,cT,{provide:Al,useExisting:cT},{provide:Dh,useFactory:()=>B(_N,{optional:!0})??B(lT)},{provide:h_,useValue:DN,multi:!0},{provide:fT,useValue:!0},{provide:Mh,useClass:RN}];for(let e of n)t.push(...e.\u0275providers);return fr(t)}var dT=new G("");function NN(){return PN(pT.LegacyInterceptors,[{provide:dT,useFactory:EN},{provide:h_,useExisting:dT,multi:!0}])}var gT=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=it({type:t}),t.\u0275inj=et({providers:[MN(NN())]});let n=t;return n})();var p_=class extends Vx{constructor(){super(...arguments),this.supportsDOMEvents=!0}},g_=class n extends p_{static makeCurrent(){Lx(new n)}onAndCancel(t,e,i){return t.addEventListener(e,i),()=>{t.removeEventListener(e,i)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=FN();return e==null?null:LN(e)}resetBaseElement(){Pl=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return yh(document.cookie,t)}},Pl=null;function FN(){return Pl=Pl||document.querySelector("base"),Pl?Pl.getAttribute("href"):null}function LN(n){return new URL(n,document.baseURI).pathname}var __=class{addToWindow(t){mr.getAngularTestability=(i,r=!0)=>{let s=t.findTestabilityInTree(i,r);if(s==null)throw new jt(5103,!1);return s},mr.getAllAngularTestabilities=()=>t.getAllTestabilities(),mr.getAllAngularRootElements=()=>t.getAllRootElements();let e=i=>{let r=mr.getAllAngularTestabilities(),s=r.length,o=function(){s--,s==0&&i()};r.forEach(a=>{a.whenStable(o)})};mr.frameworkStabilizers||(mr.frameworkStabilizers=[]),mr.frameworkStabilizers.push(e)}findTestabilityInTree(t,e,i){if(e==null)return null;let r=t.getTestability(e);return r??(i?Es().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},VN=(()=>{let t=class t{build(){return new XMLHttpRequest}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=$({token:t,factory:t.\u0275fac});let n=t;return n})(),Nh=new G(""),yT=(()=>{let t=class t{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(s=>{s.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,s){return this._findPluginFor(r).addEventListener(i,r,s)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(o=>o.supports(i)),!r)throw new jt(5101,!1);return this._eventNameToPlugin.set(i,r),r}};t.\u0275fac=function(r){return new(r||t)(k(Nh),k(rt))},t.\u0275prov=$({token:t,factory:t.\u0275fac});let n=t;return n})(),Ml=class{constructor(t){this._doc=t}},m_="ng-app-id",wT=(()=>{let t=class t{constructor(i,r,s,o={}){this.doc=i,this.appId=r,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=_r(o),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(s=>s.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${m_}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(s=>{s.textContent!=null&&r.set(s.textContent,s)}),r}return null}changeUsageCount(i,r){let s=this.styleRef;if(s.has(i)){let o=s.get(i);return o.usage+=r,o.usage}return s.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let s=this.styleNodesInDOM,o=s?.get(r);if(o?.parentNode===i)return s.delete(r),o.removeAttribute(m_),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(m_,this.appId),i.appendChild(a),a}}addStyleToHost(i,r){let s=this.getStyleElement(i,r),o=this.styleRef,a=o.get(r)?.elements;a?a.push(s):o.set(r,{elements:[s],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};t.\u0275fac=function(r){return new(r||t)(k(kt),k(hl),k(ml,8),k(Fe))},t.\u0275prov=$({token:t,factory:t.\u0275fac});let n=t;return n})(),f_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},b_=/%COMP%/g,IT="%COMP%",jN=`_nghost-${IT}`,UN=`_ngcontent-${IT}`,BN=!0,zN=new G("",{providedIn:"root",factory:()=>BN});function qN(n){return UN.replace(b_,n)}function GN(n){return jN.replace(b_,n)}function ET(n,t){return t.map(e=>e.replace(b_,n))}var Oh=(()=>{let t=class t{constructor(i,r,s,o,a,c,d,u=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=d,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=_r(c),this.defaultRenderer=new Nl(i,a,d,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===dl.ShadowDom&&(r=wt(F({},r),{encapsulation:dl.Emulated}));let s=this.getOrCreateRenderer(i,r);return s instanceof Fh?s.applyToHost(i):s instanceof Ol&&s.applyStyles(),s}getOrCreateRenderer(i,r){let s=this.rendererByCompId,o=s.get(r.id);if(!o){let a=this.doc,c=this.ngZone,d=this.eventManager,u=this.sharedStylesHost,m=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case dl.Emulated:o=new Fh(d,u,r,this.appId,m,a,c,p);break;case dl.ShadowDom:return new v_(d,u,i,r,a,c,this.nonce,p);default:o=new Ol(d,u,r,m,a,c,p);break}s.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};t.\u0275fac=function(r){return new(r||t)(k(yT),k(wT),k(hl),k(zN),k(kt),k(Fe),k(rt),k(ml))},t.\u0275prov=$({token:t,factory:t.\u0275fac});let n=t;return n})(),Nl=class{constructor(t,e,i,r){this.eventManager=t,this.doc=e,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,e){return e?this.doc.createElementNS(f_[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(vT(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(vT(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){e.remove()}selectRootElement(t,e){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new jt(-5104,!1);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;let s=f_[r];s?t.setAttributeNS(s,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){let r=f_[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(fl.DashCase|fl.Important)?t.style.setProperty(e,i,r&fl.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&fl.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t!=null&&(t[e]=i)}setValue(t,e){t.nodeValue=e}listen(t,e,i){if(typeof t=="string"&&(t=Es().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(i))}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function vT(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var v_=class extends Nl{constructor(t,e,i,r,s,o,a,c){super(t,s,o,c),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=ET(r.id,r.styles);for(let u of d){let m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=u,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ol=class extends Nl{constructor(t,e,i,r,s,o,a,c){super(t,s,o,a),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r,this.styles=c?ET(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Fh=class extends Ol{constructor(t,e,i,r,s,o,a,c){let d=r+"-"+i.id;super(t,e,i,s,o,a,c,d),this.contentAttr=qN(d),this.hostAttr=GN(d)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}},$N=(()=>{let t=class t extends Ml{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,s){return i.addEventListener(r,s,!1),()=>this.removeEventListener(i,r,s)}removeEventListener(i,r,s){return i.removeEventListener(r,s)}};t.\u0275fac=function(r){return new(r||t)(k(kt))},t.\u0275prov=$({token:t,factory:t.\u0275fac});let n=t;return n})(),WN=(()=>{let t=class t extends Ml{constructor(i){super(i),this.delegate=B(Ox,{optional:!0})}supports(i){return this.delegate?this.delegate.supports(i):!1}addEventListener(i,r,s){return this.delegate.addEventListener(i,r,s)}removeEventListener(i,r,s){return this.delegate.removeEventListener(i,r,s)}};t.\u0275fac=function(r){return new(r||t)(k(kt))},t.\u0275prov=$({token:t,factory:t.\u0275fac});let n=t;return n})(),bT=["alt","control","meta","shift"],HN={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},KN={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},QN=(()=>{let t=class t extends Ml{constructor(i){super(i)}supports(i){return t.parseEventName(i)!=null}addEventListener(i,r,s){let o=t.parseEventName(r),a=t.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Es().onAndCancel(i,o.domEventName,a))}static parseEventName(i){let r=i.toLowerCase().split("."),s=r.shift();if(r.length===0||!(s==="keydown"||s==="keyup"))return null;let o=t._normalizeKey(r.pop()),a="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),a="code."),bT.forEach(u=>{let m=r.indexOf(u);m>-1&&(r.splice(m,1),a+=u+".")}),a+=o,r.length!=0||o.length===0)return null;let d={};return d.domEventName=s,d.fullKey=a,d}static matchEventFullKeyCode(i,r){let s=HN[i.key]||i.key,o="";return r.indexOf("code.")>-1&&(s=i.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),bT.forEach(a=>{if(a!==s){let c=KN[a];c(i)&&(o+=a+".")}}),o+=s,o===r)}static eventCallback(i,r,s){return o=>{t.matchEventFullKeyCode(o,i)&&s.runGuarded(()=>r(o))}}static _normalizeKey(i){return i==="esc"?"escape":i}};t.\u0275fac=function(r){return new(r||t)(k(kt))},t.\u0275prov=$({token:t,factory:t.\u0275fac});let n=t;return n})();function YN(){g_.makeCurrent()}function XN(){return new Is}function ZN(){return dx(document),document}var JN=[{provide:Fe,useValue:qx},{provide:ux,useValue:YN,multi:!0},{provide:kt,useFactory:ZN,deps:[]}],xT=Px(Mx,"browser",JN),tO=new G(""),eO=[{provide:gh,useClass:__,deps:[]},{provide:Dx,useClass:_h,deps:[rt,Zg,gh]},{provide:_h,useClass:_h,deps:[rt,Zg,gh]}],iO=[{provide:lx,useValue:"root"},{provide:Is,useFactory:XN,deps:[]},{provide:Nh,useClass:$N,multi:!0,deps:[kt,rt,Fe]},{provide:Nh,useClass:QN,multi:!0,deps:[kt]},{provide:Nh,useClass:WN,multi:!0},Oh,wT,yT,{provide:mh,useExisting:Oh},{provide:wh,useClass:VN,deps:[]},[]],TT=(()=>{let t=class t{constructor(i){}static withServerTransition(i){return{ngModule:t,providers:[{provide:hl,useValue:i.appId}]}}};t.\u0275fac=function(r){return new(r||t)(k(tO,12))},t.\u0275mod=it({type:t}),t.\u0275inj=et({providers:[...iO,...eO],imports:[ie,Nx]});let n=t;return n})();var CT=(()=>{let t=class t{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};t.\u0275fac=function(r){return new(r||t)(k(kt))},t.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var Fl=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=$({token:t,factory:function(r){let s=null;return r?s=new(r||t):s=k(nO),s},providedIn:"root"});let n=t;return n})(),nO=(()=>{let t=class t extends Fl{constructor(i){super(),this._doc=i}sanitize(i,r){if(r==null)return null;switch(i){case ti.NONE:return r;case ti.HTML:return Go(r,"HTML")?qo(r):vx(this._doc,String(r)).toString();case ti.STYLE:return Go(r,"Style")?qo(r):r;case ti.SCRIPT:if(Go(r,"Script"))return qo(r);throw new jt(5200,!1);case ti.URL:return Go(r,"URL")?qo(r):_x(String(r));case ti.RESOURCE_URL:if(Go(r,"ResourceURL"))return qo(r);throw new jt(5201,!1);default:throw new jt(5202,!1)}}bypassSecurityTrustHtml(i){return hx(i)}bypassSecurityTrustStyle(i){return mx(i)}bypassSecurityTrustScript(i){return fx(i)}bypassSecurityTrustUrl(i){return px(i)}bypassSecurityTrustResourceUrl(i){return gx(i)}};t.\u0275fac=function(r){return new(r||t)(k(kt))},t.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var gt="primary",Yl=Symbol("RouteTitle"),x_=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function sa(n){return new x_(n)}function rO(n,t,e){let i=e.path.split("/");if(i.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||i.length<n.length))return null;let r={};for(let s=0;s<i.length;s++){let o=i[s],a=n[s];if(o[0]===":")r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function sO(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!cn(n[e],t[e]))return!1;return!0}function cn(n,t){let e=n?T_(n):void 0,i=t?T_(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!LT(n[r],t[r]))return!1;return!0}function T_(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function LT(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),i=[...t].sort();return e.every((r,s)=>i[s]===r)}else return n===t}function VT(n){return n.length>0?n[n.length-1]:null}function xr(n){return Vg(n)?n:vh(n)?Xt(Promise.resolve(n)):tt(n)}var oO={exact:UT,subset:BT},jT={exact:aO,subset:cO,ignored:()=>!0};function AT(n,t,e){return oO[e.paths](n.root,t.root,e.matrixParams)&&jT[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function aO(n,t){return cn(n,t)}function UT(n,t,e){if(!As(n.segments,t.segments)||!Uh(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let i in t.children)if(!n.children[i]||!UT(n.children[i],t.children[i],e))return!1;return!0}function cO(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>LT(n[e],t[e]))}function BT(n,t,e){return zT(n,t,t.segments,e)}function zT(n,t,e,i){if(n.segments.length>e.length){let r=n.segments.slice(0,e.length);return!(!As(r,e)||t.hasChildren()||!Uh(r,e,i))}else if(n.segments.length===e.length){if(!As(n.segments,e)||!Uh(n.segments,e,i))return!1;for(let r in t.children)if(!n.children[r]||!BT(n.children[r],t.children[r],i))return!1;return!0}else{let r=e.slice(0,n.segments.length),s=e.slice(n.segments.length);return!As(n.segments,r)||!Uh(n.segments,r,i)||!n.children[gt]?!1:zT(n.children[gt],t,s,i)}}function Uh(n,t,e){return t.every((i,r)=>jT[e](n[r].parameters,i.parameters))}var Bn=class{constructor(t=new Ut([],{}),e={},i=null){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap??=sa(this.queryParams),this._queryParamMap}toString(){return uO.serialize(this)}},Ut=class{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Bh(this)}},Cs=class{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=sa(this.parameters),this._parameterMap}toString(){return GT(this)}};function lO(n,t){return As(n,t)&&n.every((e,i)=>cn(e.parameters,t[i].parameters))}function As(n,t){return n.length!==t.length?!1:n.every((e,i)=>e.path===t[i].path)}function dO(n,t){let e=[];return Object.entries(n.children).forEach(([i,r])=>{i===gt&&(e=e.concat(t(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==gt&&(e=e.concat(t(r,i)))}),e}var Xl=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=$({token:t,factory:()=>new oa,providedIn:"root"});let n=t;return n})(),oa=class{parse(t){let e=new A_(t);return new Bn(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${Ll(t.root,!0)}`,i=fO(t.queryParams),r=typeof t.fragment=="string"?`#${hO(t.fragment)}`:"";return`${e}${i}${r}`}},uO=new oa;function Bh(n){return n.segments.map(t=>GT(t)).join("/")}function Ll(n,t){if(!n.hasChildren())return Bh(n);if(t){let e=n.children[gt]?Ll(n.children[gt],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==gt&&i.push(`${r}:${Ll(s,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}else{let e=dO(n,(i,r)=>r===gt?[Ll(n.children[gt],!1)]:[`${r}:${Ll(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[gt]!=null?`${Bh(n)}/${e[0]}`:`${Bh(n)}/(${e.join("//")})`}}function qT(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Vh(n){return qT(n).replace(/%3B/gi,";")}function hO(n){return encodeURI(n)}function C_(n){return qT(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function zh(n){return decodeURIComponent(n)}function ST(n){return zh(n.replace(/\+/g,"%20"))}function GT(n){return`${C_(n.path)}${mO(n.parameters)}`}function mO(n){return Object.entries(n).map(([t,e])=>`;${C_(t)}=${C_(e)}`).join("")}function fO(n){let t=Object.entries(n).map(([e,i])=>Array.isArray(i)?i.map(r=>`${Vh(e)}=${Vh(r)}`).join("&"):`${Vh(e)}=${Vh(i)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var pO=/^[^\/()?;#]+/;function y_(n){let t=n.match(pO);return t?t[0]:""}var gO=/^[^\/()?;=#]+/;function _O(n){let t=n.match(gO);return t?t[0]:""}var vO=/^[^=?&#]+/;function bO(n){let t=n.match(vO);return t?t[0]:""}var yO=/^[^&#]+/;function wO(n){let t=n.match(yO);return t?t[0]:""}var A_=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ut([],{}):new Ut([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[gt]=new Ut(t,e)),i}parseSegment(){let t=y_(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new jt(4009,!1);return this.capture(t),new Cs(zh(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=_O(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let r=y_(this.remaining);r&&(i=r,this.capture(i))}t[zh(e)]=zh(i)}parseQueryParam(t){let e=bO(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let o=wO(this.remaining);o&&(i=o,this.capture(i))}let r=ST(e),s=ST(i);if(t.hasOwnProperty(r)){let o=t[r];Array.isArray(o)||(o=[o],t[r]=o),o.push(s)}else t[r]=s}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=y_(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new jt(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=gt);let o=this.parseChildren();e[s]=Object.keys(o).length===1?o[gt]:new Ut([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new jt(4011,!1)}};function $T(n){return n.segments.length>0?new Ut([],{[gt]:n}):n}function WT(n){let t={};for(let[i,r]of Object.entries(n.children)){let s=WT(r);if(i===gt&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))t[o]=a;else(s.segments.length>0||s.hasChildren())&&(t[i]=s)}let e=new Ut(n.segments,t);return IO(e)}function IO(n){if(n.numberOfChildren===1&&n.children[gt]){let t=n.children[gt];return new Ut(n.segments.concat(t.segments),t.children)}return n}function Ss(n){return n instanceof Bn}function EO(n,t,e=null,i=null){let r=HT(n);return KT(r,t,e,i)}function HT(n){let t;function e(s){let o={};for(let c of s.children){let d=e(c);o[c.outlet]=d}let a=new Ut(s.url,o);return s===n&&(t=a),a}let i=e(n.root),r=$T(i);return t??r}function KT(n,t,e,i){let r=n;for(;r.parent;)r=r.parent;if(t.length===0)return w_(r,r,r,e,i);let s=xO(t);if(s.toRoot())return w_(r,r,new Ut([],{}),e,i);let o=TO(s,r,n),a=o.processChildren?Ul(o.segmentGroup,o.index,s.commands):YT(o.segmentGroup,o.index,s.commands);return w_(r,o.segmentGroup,a,e,i)}function qh(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function ql(n){return typeof n=="object"&&n!=null&&n.outlets}function w_(n,t,e,i,r){let s={};i&&Object.entries(i).forEach(([c,d])=>{s[c]=Array.isArray(d)?d.map(u=>`${u}`):`${d}`});let o;n===t?o=e:o=QT(n,t,e);let a=$T(WT(o));return new Bn(a,s,r)}function QT(n,t,e){let i={};return Object.entries(n.children).forEach(([r,s])=>{s===t?i[r]=e:i[r]=QT(s,t,e)}),new Ut(n.segments,i)}var Gh=class{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&qh(i[0]))throw new jt(4003,!1);let r=i.find(ql);if(r&&r!==VT(i))throw new jt(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function xO(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Gh(!0,0,n);let t=0,e=!1,i=n.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,d])=>{a[c]=typeof d=="string"?d.split("/"):d}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?e=!0:a===".."?t++:a!=""&&r.push(a))}),r):[...r,s]},[]);return new Gh(e,t,i)}var ia=class{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}};function TO(n,t,e){if(n.isAbsolute)return new ia(t,!0,0);if(!e)return new ia(t,!1,NaN);if(e.parent===null)return new ia(e,!0,0);let i=qh(n.commands[0])?0:1,r=e.segments.length-1+i;return CO(e,r,n.numberOfDoubleDots)}function CO(n,t,e){let i=n,r=t,s=e;for(;s>r;){if(s-=r,i=i.parent,!i)throw new jt(4005,!1);r=i.segments.length}return new ia(i,!1,r-s)}function AO(n){return ql(n[0])?n[0].outlets:{[gt]:n}}function YT(n,t,e){if(n??=new Ut([],{}),n.segments.length===0&&n.hasChildren())return Ul(n,t,e);let i=SO(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let s=new Ut(n.segments.slice(0,i.pathIndex),{});return s.children[gt]=new Ut(n.segments.slice(i.pathIndex),n.children),Ul(s,0,r)}else return i.match&&r.length===0?new Ut(n.segments,{}):i.match&&!n.hasChildren()?S_(n,t,e):i.match?Ul(n,0,r):S_(n,t,e)}function Ul(n,t,e){if(e.length===0)return new Ut(n.segments,{});{let i=AO(e),r={};if(Object.keys(i).some(s=>s!==gt)&&n.children[gt]&&n.numberOfChildren===1&&n.children[gt].segments.length===0){let s=Ul(n.children[gt],t,e);return new Ut(n.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=YT(n.children[s],t,o))}),Object.entries(n.children).forEach(([s,o])=>{i[s]===void 0&&(r[s]=o)}),new Ut(n.segments,r)}}function SO(n,t,e){let i=0,r=t,s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return s;let o=n.segments[r],a=e[i];if(ql(a))break;let c=`${a}`,d=i<e.length-1?e[i+1]:null;if(r>0&&c===void 0)break;if(c&&d&&typeof d=="object"&&d.outlets===void 0){if(!RT(c,d,o))return s;i+=2}else{if(!RT(c,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function S_(n,t,e){let i=n.segments.slice(0,t),r=0;for(;r<e.length;){let s=e[r];if(ql(s)){let c=kO(s.outlets);return new Ut(i,c)}if(r===0&&qh(e[0])){let c=n.segments[t];i.push(new Cs(c.path,kT(e[0]))),r++;continue}let o=ql(s)?s.outlets[gt]:`${s}`,a=r<e.length-1?e[r+1]:null;o&&a&&qh(a)?(i.push(new Cs(o,kT(a))),r+=2):(i.push(new Cs(o,{})),r++)}return new Ut(i,{})}function kO(n){let t={};return Object.entries(n).forEach(([e,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(t[e]=S_(new Ut([],{}),0,i))}),t}function kT(n){let t={};return Object.entries(n).forEach(([e,i])=>t[e]=`${i}`),t}function RT(n,t,e){return n==e.path&&cn(t,e.parameters)}var Bl="imperative",De=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(De||{}),Ri=class{constructor(t,e){this.id=t,this.url=e}},aa=class extends Ri{constructor(t,e,i="imperative",r=null){super(t,e),this.type=De.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ln=class extends Ri{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i,this.type=De.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},bi=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(bi||{}),$h=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}($h||{}),Un=class extends Ri{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=De.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Er=class extends Ri{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=De.NavigationSkipped}},Gl=class extends Ri{constructor(t,e,i,r){super(t,e),this.error=i,this.target=r,this.type=De.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Wh=class extends Ri{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=De.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},k_=class extends Ri{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=De.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},R_=class extends Ri{constructor(t,e,i,r,s){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=De.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},D_=class extends Ri{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=De.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},P_=class extends Ri{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=De.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},M_=class{constructor(t){this.route=t,this.type=De.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},N_=class{constructor(t){this.route=t,this.type=De.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},O_=class{constructor(t){this.snapshot=t,this.type=De.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},F_=class{constructor(t){this.snapshot=t,this.type=De.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},L_=class{constructor(t){this.snapshot=t,this.type=De.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},V_=class{constructor(t){this.snapshot=t,this.type=De.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Hh=class{constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i,this.type=De.Scroll}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},$l=class{},ca=class{constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function RO(n,t){return n.providers&&!n._injector&&(n._injector=Kg(n.providers,t,`Route: ${n.path}`)),n._injector??t}function Hi(n){return n.outlet||gt}function DO(n,t){let e=n.filter(i=>Hi(i)===t);return e.push(...n.filter(i=>Hi(i)!==t)),e}function Zl(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var j_=class{get injector(){return Zl(this.route?.snapshot)??this.rootInjector}set injector(t){}constructor(t){this.rootInjector=t,this.outlet=null,this.route=null,this.children=new Jl(this.rootInjector),this.attachRef=null}},Jl=(()=>{let t=class t{constructor(i){this.rootInjector=i,this.contexts=new Map}onChildOutletCreated(i,r){let s=this.getOrCreateContext(i);s.outlet=r,this.contexts.set(i,s)}onChildOutletDestroyed(i){let r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new j_(this.rootInjector),this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};t.\u0275fac=function(r){return new(r||t)(k(ys))},t.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),Kh=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=U_(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){let e=U_(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=B_(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return B_(t,this._root).map(e=>e.value)}};function U_(n,t){if(n===t.value)return t;for(let e of t.children){let i=U_(n,e);if(i)return i}return null}function B_(n,t){if(n===t.value)return[t];for(let e of t.children){let i=B_(n,e);if(i.length)return i.unshift(t),i}return[]}var vi=class{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function ea(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var Qh=class extends Kh{constructor(t,e){super(t),this.snapshot=e,Y_(this,t)}toString(){return this.snapshot.toString()}};function XT(n){let t=PO(n),e=new qe([new Cs("",{})]),i=new qe({}),r=new qe({}),s=new qe({}),o=new qe(""),a=new ks(e,i,s,o,r,gt,n,t.root);return a.snapshot=t.root,new Qh(new vi(a,[]),t)}function PO(n){let t={},e={},i={},r="",s=new na([],t,i,r,e,gt,n,null,{});return new Xh("",new vi(s,[]))}var ks=class{constructor(t,e,i,r,s,o,a,c){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(X(d=>d[Yl]))??tt(void 0),this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(X(t=>sa(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(X(t=>sa(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Yh(n,t,e="emptyOnly"){let i,{routeConfig:r}=n;return t!==null&&(e==="always"||r?.path===""||!t.component&&!t.routeConfig?.loadComponent)?i={params:F(F({},t.params),n.params),data:F(F({},t.data),n.data),resolve:F(F(F(F({},n.data),t.data),r?.data),n._resolvedData)}:i={params:F({},n.params),data:F({},n.data),resolve:F(F({},n.data),n._resolvedData??{})},r&&JT(r)&&(i.resolve[Yl]=r.title),i}var na=class{get title(){return this.data?.[Yl]}constructor(t,e,i,r,s,o,a,c,d){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=sa(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=sa(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(i=>i.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},Xh=class extends Kh{constructor(t,e){super(e),this.url=t,Y_(this,e)}toString(){return ZT(this._root)}};function Y_(n,t){t.value._routerState=n,t.children.forEach(e=>Y_(n,e))}function ZT(n){let t=n.children.length>0?` { ${n.children.map(ZT).join(", ")} } `:"";return`${n.value}${t}`}function I_(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,cn(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),cn(t.params,e.params)||n.paramsSubject.next(e.params),sO(t.url,e.url)||n.urlSubject.next(e.url),cn(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function z_(n,t){let e=cn(n.params,t.params)&&lO(n.url,t.url),i=!n.parent!=!t.parent;return e&&!i&&(!n.parent||z_(n.parent,t.parent))}function JT(n){return typeof n.title=="string"||n.title===null}var td=(()=>{let t=class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=gt,this.activateEvents=new Se,this.deactivateEvents=new Se,this.attachEvents=new Se,this.detachEvents=new Se,this.parentContexts=B(Jl),this.location=B(Ix),this.changeDetector=B(Ln),this.inputBinder=B(im,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:r,previousValue:s}=i.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new jt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new jt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new jt(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new jt(4013,!1);this._activatedRoute=i;let s=this.location,a=i.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,d=new q_(i,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:d,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=ht({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[sn]});let n=t;return n})(),q_=class n{__ngOutletInjector(t){return new n(this.route,this.childContexts,t)}constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===ks?this.route:t===Jl?this.childContexts:this.parent.get(t,e)}},im=new G(""),DT=(()=>{let t=class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(i){this.unsubscribeFromRouteData(i),this.subscribeToRouteData(i)}unsubscribeFromRouteData(i){this.outletDataSubscriptions.get(i)?.unsubscribe(),this.outletDataSubscriptions.delete(i)}subscribeToRouteData(i){let{activatedRoute:r}=i,s=Vo([r.queryParams,r.params,r.data]).pipe(Ht(([o,a,c],d)=>(c=F(F(F({},o),a),c),d===0?tt(c):Promise.resolve(c)))).subscribe(o=>{if(!i.isActivated||!i.activatedComponentRef||i.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(i);return}let a=Fx(r.component);if(!a){this.unsubscribeFromRouteData(i);return}for(let{templateName:c}of a.inputs)i.activatedComponentRef.setInput(c,o[c])});this.outletDataSubscriptions.set(i,s)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=$({token:t,factory:t.\u0275fac});let n=t;return n})();function MO(n,t,e){let i=Wl(n,t._root,e?e._root:void 0);return new Qh(i,t)}function Wl(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let i=e.value;i._futureSnapshot=t.value;let r=NO(n,t,e);return new vi(i,r)}else{if(n.shouldAttach(t.value)){let s=n.retrieve(t.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(a=>Wl(n,a)),o}}let i=OO(t.value),r=t.children.map(s=>Wl(n,s));return new vi(i,r)}}function NO(n,t,e){return t.children.map(i=>{for(let r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Wl(n,i,r);return Wl(n,i)})}function OO(n){return new ks(new qe(n.url),new qe(n.params),new qe(n.queryParams),new qe(n.fragment),new qe(n.data),n.outlet,n.component,n)}var Hl=class{constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},tC="ngNavigationCancelingError";function Zh(n,t){let{redirectTo:e,navigationBehaviorOptions:i}=Ss(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=eC(!1,bi.Redirect);return r.url=e,r.navigationBehaviorOptions=i,r}function eC(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[tC]=!0,e.cancellationCode=t,e}function FO(n){return iC(n)&&Ss(n.url)}function iC(n){return!!n&&n[tC]}var LO=(n,t,e,i)=>X(r=>(new G_(t,r.targetRouterState,r.currentRouterState,e,i).activate(n),r)),G_=class{constructor(t,e,i,r,s){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(t){let e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),I_(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){let r=ea(e);t.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,e,i){let r=t.value,s=e?e.value:null;if(r===s)if(r.component){let o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,i);else s&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=ea(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(i&&i.outlet){let o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=ea(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,e,i){let r=ea(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new V_(s.value.snapshot))}),t.children.length&&this.forwardEvent(new F_(t.value.snapshot))}activateRoutes(t,e,i){let r=t.value,s=e?e.value:null;if(I_(r),r===s)if(r.component){let o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,i);else if(r.component){let o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),I_(a.route.value),this.activateChildRoutes(t,null,o.children)}else o.attachRef=null,o.route=r,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(t,null,o.children)}else this.activateChildRoutes(t,null,i)}},Jh=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},ra=class{constructor(t,e){this.component=t,this.route=e}};function VO(n,t,e){let i=n._root,r=t?t._root:null;return Vl(i,r,e,[i.value])}function jO(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function da(n,t){let e=Symbol(),i=t.get(n,e);return i===e?typeof n=="function"&&!cx(n)?n:t.get(n):i}function Vl(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=ea(t);return n.children.forEach(o=>{UO(o,s[o.value.outlet],e,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>zl(a,e.getContext(o),r)),r}function UO(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=BO(o,s,s.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new Jh(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Vl(n,t,a?a.children:null,i,r):Vl(n,t,e,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new ra(a.outlet.component,o))}else o&&zl(t,a,r),r.canActivateChecks.push(new Jh(i)),s.component?Vl(n,null,a?a.children:null,i,r):Vl(n,null,e,i,r);return r}function BO(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!As(n.url,t.url);case"pathParamsOrQueryParamsChange":return!As(n.url,t.url)||!cn(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!z_(n,t)||!cn(n.queryParams,t.queryParams);case"paramsChange":default:return!z_(n,t)}}function zl(n,t,e){let i=ea(n),r=n.value;Object.entries(i).forEach(([s,o])=>{r.component?t?zl(o,t.children.getContext(s),e):zl(o,null,e):zl(o,t,e)}),r.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new ra(t.outlet.component,r)):e.canDeactivateChecks.push(new ra(null,r)):e.canDeactivateChecks.push(new ra(null,r))}function ed(n){return typeof n=="function"}function zO(n){return typeof n=="boolean"}function qO(n){return n&&ed(n.canLoad)}function GO(n){return n&&ed(n.canActivate)}function $O(n){return n&&ed(n.canActivateChild)}function WO(n){return n&&ed(n.canDeactivate)}function HO(n){return n&&ed(n.canMatch)}function nC(n){return n instanceof nx||n?.name==="EmptyError"}var jh=Symbol("INITIAL_VALUE");function la(){return Ht(n=>Vo(n.map(t=>t.pipe(fi(1),hr(jh)))).pipe(X(t=>{for(let e of t)if(e!==!0){if(e===jh)return jh;if(e===!1||KO(e))return e}return!0}),xe(t=>t!==jh),fi(1)))}function KO(n){return Ss(n)||n instanceof Hl}function QO(n,t){return mi(e=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=e;return o.length===0&&s.length===0?tt(wt(F({},e),{guardsResult:!0})):YO(o,i,r,n).pipe(mi(a=>a&&zO(a)?XO(i,s,n,t):tt(a)),X(a=>wt(F({},e),{guardsResult:a})))})}function YO(n,t,e,i){return Xt(n).pipe(mi(r=>iF(r.component,r.route,e,t,i)),rn(r=>r!==!0,!0))}function XO(n,t,e,i){return Xt(t).pipe(ur(r=>ch(JO(r.route.parent,i),ZO(r.route,i),eF(n,r.path,e),tF(n,r.route,e))),rn(r=>r!==!0,!0))}function ZO(n,t){return n!==null&&t&&t(new L_(n)),tt(!0)}function JO(n,t){return n!==null&&t&&t(new O_(n)),tt(!0)}function tF(n,t,e){let i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||i.length===0)return tt(!0);let r=i.map(s=>Ug(()=>{let o=Zl(t)??e,a=da(s,o),c=GO(a)?a.canActivate(t,n):Ai(o,()=>a(t,n));return xr(c).pipe(rn())}));return tt(r).pipe(la())}function eF(n,t,e){let i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>jO(o)).filter(o=>o!==null).map(o=>Ug(()=>{let a=o.guards.map(c=>{let d=Zl(o.node)??e,u=da(c,d),m=$O(u)?u.canActivateChild(i,n):Ai(d,()=>u(i,n));return xr(m).pipe(rn())});return tt(a).pipe(la())}));return tt(s).pipe(la())}function iF(n,t,e,i,r){let s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||s.length===0)return tt(!0);let o=s.map(a=>{let c=Zl(t)??r,d=da(a,c),u=WO(d)?d.canDeactivate(n,t,e,i):Ai(c,()=>d(n,t,e,i));return xr(u).pipe(rn())});return tt(o).pipe(la())}function nF(n,t,e,i){let r=t.canLoad;if(r===void 0||r.length===0)return tt(!0);let s=r.map(o=>{let a=da(o,n),c=qO(a)?a.canLoad(t,e):Ai(n,()=>a(t,e));return xr(c)});return tt(s).pipe(la(),rC(i))}function rC(n){return ex(qt(t=>{if(typeof t!="boolean")throw Zh(n,t)}),X(t=>t===!0))}function rF(n,t,e,i){let r=t.canMatch;if(!r||r.length===0)return tt(!0);let s=r.map(o=>{let a=da(o,n),c=HO(a)?a.canMatch(t,e):Ai(n,()=>a(t,e));return xr(c)});return tt(s).pipe(la(),rC(i))}var Kl=class{constructor(t){this.segmentGroup=t||null}},Ql=class extends Error{constructor(t){super(),this.urlTree=t}};function ta(n){return bs(new Kl(n))}function sF(n){return bs(new jt(4e3,!1))}function oF(n){return bs(eC(!1,bi.GuardRejected))}var $_=class{constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return tt(i);if(r.numberOfChildren>1||!r.children[gt])return sF(`${t.redirectTo}`);r=r.children[gt]}}applyRedirectCommands(t,e,i,r,s){if(typeof e!="string"){let a=e,{queryParams:c,fragment:d,routeConfig:u,url:m,outlet:p,params:_,data:w,title:A}=r,x=Ai(s,()=>a({params:_,data:w,queryParams:c,fragment:d,routeConfig:u,url:m,outlet:p,title:A}));if(x instanceof Bn)throw new Ql(x);e=x}let o=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i);if(e[0]==="/")throw new Ql(o);return o}applyRedirectCreateUrlTree(t,e,i,r){let s=this.createSegmentGroup(t,e.root,i,r);return new Bn(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let i={};return Object.entries(t).forEach(([r,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);i[r]=e[a]}else i[r]=s}),i}createSegmentGroup(t,e,i,r){let s=this.createSegments(t,e.segments,i,r),o={};return Object.entries(e.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(t,c,i,r)}),new Ut(s,o)}createSegments(t,e,i,r){return e.map(s=>s.path[0]===":"?this.findPosParam(t,s,r):this.findOrReturn(s,i))}findPosParam(t,e,i){let r=i[e.path.substring(1)];if(!r)throw new jt(4001,!1);return r}findOrReturn(t,e){let i=0;for(let r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}},W_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function aF(n,t,e,i,r){let s=sC(n,t,e);return s.matched?(i=RO(t,i),rF(i,t,e,r).pipe(X(o=>o===!0?s:F({},W_)))):tt(s)}function sC(n,t,e){if(t.path==="**")return cF(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?F({},W_):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let r=(t.matcher||rO)(e,n,t);if(!r)return F({},W_);let s={};Object.entries(r.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=r.consumed.length>0?F(F({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function cF(n){return{matched:!0,parameters:n.length>0?VT(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function PT(n,t,e,i){return e.length>0&&uF(n,e,i)?{segmentGroup:new Ut(t,dF(i,new Ut(e,n.children))),slicedSegments:[]}:e.length===0&&hF(n,e,i)?{segmentGroup:new Ut(n.segments,lF(n,e,i,n.children)),slicedSegments:e}:{segmentGroup:new Ut(n.segments,n.children),slicedSegments:e}}function lF(n,t,e,i){let r={};for(let s of e)if(nm(n,t,s)&&!i[Hi(s)]){let o=new Ut([],{});r[Hi(s)]=o}return F(F({},i),r)}function dF(n,t){let e={};e[gt]=t;for(let i of n)if(i.path===""&&Hi(i)!==gt){let r=new Ut([],{});e[Hi(i)]=r}return e}function uF(n,t,e){return e.some(i=>nm(n,t,i)&&Hi(i)!==gt)}function hF(n,t,e){return e.some(i=>nm(n,t,i))}function nm(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function mF(n,t,e){return t.length===0&&!n.children[e]}var H_=class{};function fF(n,t,e,i,r,s,o="emptyOnly"){return new K_(n,t,e,i,r,o,s).recognize()}var pF=31,K_=class{constructor(t,e,i,r,s,o,a){this.injector=t,this.configLoader=e,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new $_(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new jt(4002,`'${t.segmentGroup}'`)}recognize(){let t=PT(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(X(({children:e,rootSnapshot:i})=>{let r=new vi(i,e),s=new Xh("",r),o=EO(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(t){let e=new na([],Object.freeze({}),Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),gt,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,gt,e).pipe(X(i=>({children:i,rootSnapshot:e})),dr(i=>{if(i instanceof Ql)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Kl?this.noMatchError(i):i}))}processSegmentGroup(t,e,i,r,s){return i.segments.length===0&&i.hasChildren()?this.processChildren(t,e,i,s):this.processSegment(t,e,i,i.segments,r,!0,s).pipe(X(o=>o instanceof vi?[o]:[]))}processChildren(t,e,i,r){let s=[];for(let o of Object.keys(i.children))o==="primary"?s.unshift(o):s.push(o);return Xt(s).pipe(ur(o=>{let a=i.children[o],c=DO(e,o);return this.processSegmentGroup(t,c,a,o,r)}),Dn((o,a)=>(o.push(...a),o)),Bg(null),sx(),mi(o=>{if(o===null)return ta(i);let a=oC(o);return gF(a),tt(a)}))}processSegment(t,e,i,r,s,o,a){return Xt(e).pipe(ur(c=>this.processSegmentAgainstRoute(c._injector??t,e,c,i,r,s,o,a).pipe(dr(d=>{if(d instanceof Kl)return tt(null);throw d}))),rn(c=>!!c),dr(c=>{if(nC(c))return mF(i,r,s)?tt(new H_):ta(i);throw c}))}processSegmentAgainstRoute(t,e,i,r,s,o,a,c){return Hi(i)!==o&&(o===gt||!nm(r,s,i))?ta(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(t,r,i,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,r,e,i,s,o,c):ta(r)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,o,a){let{matched:c,parameters:d,consumedSegments:u,positionalParamSegments:m,remainingSegments:p}=sC(e,r,s);if(!c)return ta(e);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>pF&&(this.allowRedirects=!1));let _=new na(s,d,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,MT(r),Hi(r),r.component??r._loadedComponent??null,r,NT(r)),w=Yh(_,a,this.paramsInheritanceStrategy);_.params=Object.freeze(w.params),_.data=Object.freeze(w.data);let A=this.applyRedirects.applyRedirectCommands(u,r.redirectTo,m,_,t);return this.applyRedirects.lineralizeSegments(r,A).pipe(mi(x=>this.processSegment(t,i,e,x.concat(p),o,!1,a)))}matchSegmentAgainstRoute(t,e,i,r,s,o){let a=aF(e,i,r,t,this.urlSerializer);return i.path==="**"&&(e.children={}),a.pipe(Ht(c=>c.matched?(t=i._injector??t,this.getChildConfig(t,i,r).pipe(Ht(({routes:d})=>{let u=i._loadedInjector??t,{parameters:m,consumedSegments:p,remainingSegments:_}=c,w=new na(p,m,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,MT(i),Hi(i),i.component??i._loadedComponent??null,i,NT(i)),A=Yh(w,o,this.paramsInheritanceStrategy);w.params=Object.freeze(A.params),w.data=Object.freeze(A.data);let{segmentGroup:x,slicedSegments:V}=PT(e,p,_,d);if(V.length===0&&x.hasChildren())return this.processChildren(u,d,x,w).pipe(X(j=>new vi(w,j)));if(d.length===0&&V.length===0)return tt(new vi(w,[]));let H=Hi(i)===s;return this.processSegment(u,d,x,V,H?gt:s,!0,w).pipe(X(j=>new vi(w,j instanceof vi?[j]:[])))}))):ta(e)))}getChildConfig(t,e,i){return e.children?tt({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?tt({routes:e._loadedRoutes,injector:e._loadedInjector}):nF(t,e,i,this.urlSerializer).pipe(mi(r=>r?this.configLoader.loadChildren(t,e).pipe(qt(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):oF(e))):tt({routes:[],injector:t})}};function gF(n){n.sort((t,e)=>t.value.outlet===gt?-1:e.value.outlet===gt?1:t.value.outlet.localeCompare(e.value.outlet))}function _F(n){let t=n.value.routeConfig;return t&&t.path===""}function oC(n){let t=[],e=new Set;for(let i of n){if(!_F(i)){t.push(i);continue}let r=t.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),e.add(r)):t.push(i)}for(let i of e){let r=oC(i.children);t.push(new vi(i.value,r))}return t.filter(i=>!e.has(i))}function MT(n){return n.data||{}}function NT(n){return n.resolve||{}}function vF(n,t,e,i,r,s){return mi(o=>fF(n,t,e,i,o.extractedUrl,r,s).pipe(X(({state:a,tree:c})=>wt(F({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function bF(n,t){return mi(e=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return tt(e);let s=new Set(r.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let d of aC(c))o.add(d);let a=0;return Xt(o).pipe(ur(c=>s.has(c)?yF(c,i,n,t):(c.data=Yh(c,c.parent,n).resolve,tt(void 0))),qt(()=>a++),zg(1),mi(c=>a===o.size?tt(e):nn))})}function aC(n){let t=n.children.map(e=>aC(e)).flat();return[n,...t]}function yF(n,t,e,i){let r=n.routeConfig,s=n._resolve;return r?.title!==void 0&&!JT(r)&&(s[Yl]=r.title),wF(s,n,t,i).pipe(X(o=>(n._resolvedData=o,n.data=Yh(n,n.parent,e).resolve,null)))}function wF(n,t,e,i){let r=T_(n);if(r.length===0)return tt({});let s={};return Xt(r).pipe(mi(o=>IF(n[o],t,e,i).pipe(rn(),qt(a=>{if(a instanceof Hl)throw Zh(new oa,a);s[o]=a}))),zg(1),rx(s),dr(o=>nC(o)?nn:bs(o)))}function IF(n,t,e,i){let r=Zl(t)??i,s=da(n,r),o=s.resolve?s.resolve(t,e):Ai(r,()=>s(t,e));return xr(o)}function E_(n){return Ht(t=>{let e=n(t);return e?Xt(e).pipe(X(()=>t)):tt(t)})}var cC=(()=>{let t=class t{buildTitle(i){let r,s=i.root;for(;s!==void 0;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(o=>o.outlet===gt);return r}getResolvedTitleForRoute(i){return i.data[Yl]}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=$({token:t,factory:()=>B(EF),providedIn:"root"});let n=t;return n})(),EF=(()=>{let t=class t extends cC{constructor(i){super(),this.title=i}updateTitle(i){let r=this.buildTitle(i);r!==void 0&&this.title.setTitle(r)}};t.\u0275fac=function(r){return new(r||t)(k(CT))},t.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),id=new G("",{providedIn:"root",factory:()=>({})}),xF=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=xt({type:t,selectors:[["ng-component"]],standalone:!0,features:[oe],decls:1,vars:0,template:function(r,s){r&1&&vt(0,"router-outlet")},dependencies:[td],encapsulation:2});let n=t;return n})();function X_(n){let t=n.children&&n.children.map(X_),e=t?wt(F({},n),{children:t}):F({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==gt&&(e.component=xF),e}var tm=new G(""),Z_=(()=>{let t=class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=B(bh)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return tt(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=xr(i.loadComponent()).pipe(X(lC),qt(o=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=o}),Rn(()=>{this.componentLoaders.delete(i)})),s=new Lg(r,()=>new Et).pipe(Fg());return this.componentLoaders.set(i,s),s}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return tt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=TF(r,this.compiler,i,this.onLoadEndListener).pipe(Rn(()=>{this.childrenLoaders.delete(r)})),a=new Lg(o,()=>new Et).pipe(Fg());return this.childrenLoaders.set(r,a),a}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function TF(n,t,e,i){return xr(n.loadChildren()).pipe(X(lC),mi(r=>r instanceof xx||Array.isArray(r)?tt(r):Xt(t.compileModuleAsync(r))),X(r=>{i&&i(n);let s,o,a=!1;return Array.isArray(r)?(o=r,a=!0):(s=r.create(e).injector,o=s.get(tm,[],{optional:!0,self:!0}).flat()),{routes:o.map(X_),injector:s}}))}function CF(n){return n&&typeof n=="object"&&"default"in n}function lC(n){return CF(n)?n.default:n}var J_=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=$({token:t,factory:()=>B(AF),providedIn:"root"});let n=t;return n})(),AF=(()=>{let t=class t{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),dC=new G(""),uC=new G("");function SF(n,t,e){let i=n.get(uC),r=n.get(kt);return n.get(rt).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(d=>setTimeout(d));let s,o=new Promise(d=>{s=d}),a=r.startViewTransition(()=>(s(),kF(n))),{onViewTransitionCreated:c}=i;return c&&Ai(n,()=>c({transition:a,from:t,to:e})),o})}function kF(n){return new Promise(t=>{Qg({read:()=>setTimeout(t)},{injector:n})})}var RF=new G(""),tv=(()=>{let t=class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Et,this.transitionAbortSubject=new Et,this.configLoader=B(Z_),this.environmentInjector=B(ys),this.urlSerializer=B(Xl),this.rootContexts=B(Jl),this.location=B(bl),this.inputBindingEnabled=B(im,{optional:!0})!==null,this.titleStrategy=B(cC),this.options=B(id,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=B(J_),this.createViewTransition=B(dC,{optional:!0}),this.navigationErrorHandler=B(RF,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>tt(void 0),this.rootComponentType=null;let i=s=>this.events.next(new M_(s)),r=s=>this.events.next(new N_(s));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let r=++this.navigationId;this.transitions?.next(wt(F(F({},this.transitions.value),i),{id:r}))}setupNavigations(i,r,s){return this.transitions=new qe({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Bl,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(xe(o=>o.id!==0),X(o=>wt(F({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Ht(o=>{let a=!1,c=!1;return tt(o).pipe(Ht(d=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",bi.SupersededByNewNavigation),nn;this.currentTransition=o,this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,targetBrowserUrl:typeof d.extras.browserUrl=="string"?this.urlSerializer.parse(d.extras.browserUrl):d.extras.browserUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?wt(F({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),m=d.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!u&&m!=="reload"){let p="";return this.events.next(new Er(d.id,this.urlSerializer.serialize(d.rawUrl),p,$h.IgnoredSameUrlNavigation)),d.resolve(!1),nn}if(this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return tt(d).pipe(Ht(p=>{let _=this.transitions?.getValue();return this.events.next(new aa(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),_!==this.transitions?.getValue()?nn:Promise.resolve(p)}),vF(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),qt(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=wt(F({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let _=new Wh(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(_)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(d.currentRawUrl)){let{id:p,extractedUrl:_,source:w,restoredState:A,extras:x}=d,V=new aa(p,this.urlSerializer.serialize(_),w,A);this.events.next(V);let H=XT(this.rootComponentType).snapshot;return this.currentTransition=o=wt(F({},d),{targetSnapshot:H,urlAfterRedirects:_,extras:wt(F({},x),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=_,tt(o)}else{let p="";return this.events.next(new Er(d.id,this.urlSerializer.serialize(d.extractedUrl),p,$h.IgnoredByUrlHandlingStrategy)),d.resolve(!1),nn}}),qt(d=>{let u=new k_(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(u)}),X(d=>(this.currentTransition=o=wt(F({},d),{guards:VO(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),o)),QO(this.environmentInjector,d=>this.events.next(d)),qt(d=>{if(o.guardsResult=d.guardsResult,d.guardsResult&&typeof d.guardsResult!="boolean")throw Zh(this.urlSerializer,d.guardsResult);let u=new R_(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.events.next(u)}),xe(d=>d.guardsResult?!0:(this.cancelNavigationTransition(d,"",bi.GuardRejected),!1)),E_(d=>{if(d.guards.canActivateChecks.length)return tt(d).pipe(qt(u=>{let m=new D_(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(m)}),Ht(u=>{let m=!1;return tt(u).pipe(bF(this.paramsInheritanceStrategy,this.environmentInjector),qt({next:()=>m=!0,complete:()=>{m||this.cancelNavigationTransition(u,"",bi.NoDataFromResolver)}}))}),qt(u=>{let m=new P_(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(m)}))}),E_(d=>{let u=m=>{let p=[];m.routeConfig?.loadComponent&&!m.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(m.routeConfig).pipe(qt(_=>{m.component=_}),X(()=>{})));for(let _ of m.children)p.push(...u(_));return p};return Vo(u(d.targetSnapshot.root)).pipe(Bg(null),fi(1))}),E_(()=>this.afterPreactivation()),Ht(()=>{let{currentSnapshot:d,targetSnapshot:u}=o,m=this.createViewTransition?.(this.environmentInjector,d.root,u.root);return m?Xt(m).pipe(X(()=>o)):tt(o)}),X(d=>{let u=MO(i.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return this.currentTransition=o=wt(F({},d),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),qt(()=>{this.events.next(new $l)}),LO(this.rootContexts,i.routeReuseStrategy,d=>this.events.next(d),this.inputBindingEnabled),fi(1),qt({next:d=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ln(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects))),this.titleStrategy?.updateTitle(d.targetRouterState.snapshot),d.resolve(!0)},complete:()=>{a=!0}}),Bi(this.transitionAbortSubject.pipe(qt(d=>{throw d}))),Rn(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",bi.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),dr(d=>{if(c=!0,iC(d))this.events.next(new Un(o.id,this.urlSerializer.serialize(o.extractedUrl),d.message,d.cancellationCode)),FO(d)?this.events.next(new ca(d.url,d.navigationBehaviorOptions)):o.resolve(!1);else{let u=new Gl(o.id,this.urlSerializer.serialize(o.extractedUrl),d,o.targetSnapshot??void 0);try{let m=Ai(this.environmentInjector,()=>this.navigationErrorHandler?.(u));if(m instanceof Hl){let{message:p,cancellationCode:_}=Zh(this.urlSerializer,m);this.events.next(new Un(o.id,this.urlSerializer.serialize(o.extractedUrl),p,_)),this.events.next(new ca(m.redirectTo,m.navigationBehaviorOptions))}else{this.events.next(u);let p=i.errorHandler(d);o.resolve(!!p)}}catch(m){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(m)}}return nn}))}))}cancelNavigationTransition(i,r,s){let o=new Un(i.id,this.urlSerializer.serialize(i.extractedUrl),r,s);this.events.next(o),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let i=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return i.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function DF(n){return n!==Bl}var PF=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=$({token:t,factory:()=>B(MF),providedIn:"root"});let n=t;return n})(),Q_=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},MF=(()=>{let t=class t extends Q_{};t.\u0275fac=(()=>{let i;return function(s){return(i||(i=Nn(t)))(s||t)}})(),t.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),hC=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=$({token:t,factory:()=>B(NF),providedIn:"root"});let n=t;return n})(),NF=(()=>{let t=class t extends hC{constructor(){super(...arguments),this.location=B(bl),this.urlSerializer=B(Xl),this.options=B(id,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=B(J_),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Bn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=XT(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(r=>{r.type==="popstate"&&i(r.url,r.state)})}handleRouterEvent(i,r){if(i instanceof aa)this.stateMemento=this.createStateMemento();else if(i instanceof Er)this.rawUrlTree=r.initialUrl;else if(i instanceof Wh){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??s,r)}}else i instanceof $l?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):i instanceof Un&&(i.code===bi.GuardRejected||i.code===bi.NoDataFromResolver)?this.restoreHistory(r):i instanceof Gl?this.restoreHistory(r,!0):i instanceof ln&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){let s=i instanceof Bn?this.urlSerializer.serialize(i):i;if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){let o=this.browserPageId,a=F(F({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(s,"",a)}else{let o=F(F({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(i,r=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===i.finalUrl&&o===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};t.\u0275fac=(()=>{let i;return function(s){return(i||(i=Nn(t)))(s||t)}})(),t.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),jl=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(jl||{});function mC(n,t){n.events.pipe(xe(e=>e instanceof ln||e instanceof Un||e instanceof Gl||e instanceof Er),X(e=>e instanceof ln||e instanceof Er?jl.COMPLETE:(e instanceof Un?e.code===bi.Redirect||e.code===bi.SupersededByNewNavigation:!1)?jl.REDIRECTING:jl.FAILED),xe(e=>e!==jl.REDIRECTING),fi(1)).subscribe(()=>{t()})}function OF(n){throw n}var FF={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},LF={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Re=(()=>{let t=class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=B(ph),this.stateManager=B(hC),this.options=B(id,{optional:!0})||{},this.pendingTasks=B(ul),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=B(tv),this.urlSerializer=B(Xl),this.location=B(bl),this.urlHandlingStrategy=B(J_),this._events=new Et,this.errorHandler=this.options.errorHandler||OF,this.navigated=!1,this.routeReuseStrategy=B(PF),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=B(tm,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!B(im,{optional:!0}),this.eventsSubscription=new Sn,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(r=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Un&&r.code!==bi.Redirect&&r.code!==bi.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof ln)this.navigated=!0;else if(r instanceof ca){let a=r.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),d=F({browserUrl:s.extras.browserUrl,info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||DF(s.source)},a);this.scheduleNavigation(c,Bl,null,d,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}jF(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Bl,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",r)},0)})}navigateToSyncWithBrowser(i,r,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let d=F({},s);delete d.navigationId,delete d.\u0275routerPageId,Object.keys(d).length!==0&&(o.state=d)}let c=this.parseUrl(i);this.scheduleNavigation(c,r,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(X_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:d}=r,u=d?this.currentUrlTree.fragment:a,m=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":m=F(F({},this.currentUrlTree.queryParams),o);break;case"preserve":m=this.currentUrlTree.queryParams;break;default:m=o||null}m!==null&&(m=this.removeEmptyProps(m));let p;try{let _=s?s.snapshot:this.routerState.snapshot.root;p=HT(_)}catch{(typeof i[0]!="string"||i[0][0]!=="/")&&(i=[]),p=this.currentUrlTree.root}return KT(p,i,m,u??null)}navigateByUrl(i,r={skipLocationChange:!1}){let s=Ss(i)?i:this.parseUrl(i),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,Bl,null,r)}navigate(i,r={skipLocationChange:!1}){return VF(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let s;if(r===!0?s=F({},FF):r===!1?s=F({},LF):s=r,Ss(i))return AT(this.currentUrlTree,i,s);let o=this.parseUrl(i);return AT(this.currentUrlTree,o,s)}removeEmptyProps(i){return Object.entries(i).reduce((r,[s,o])=>(o!=null&&(r[s]=o),r),{})}scheduleNavigation(i,r,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,d,u;a?(c=a.resolve,d=a.reject,u=a.promise):u=new Promise((p,_)=>{c=p,d=_});let m=this.pendingTasks.add();return mC(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(m))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:o,resolve:c,reject:d,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(p=>Promise.reject(p))}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function VF(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new jt(4008,!1)}function jF(n){return!(n instanceof $l)&&!(n instanceof ca)}var fC=(()=>{let t=class t{constructor(i,r,s,o,a,c){this.router=i,this.route=r,this.tabIndexAttribute=s,this.renderer=o,this.el=a,this.locationStrategy=c,this.href=null,this.onChanges=new Et,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let d=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=d==="a"||d==="area",this.isAnchorElement?this.subscription=i.events.subscribe(u=>{u instanceof ln&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(i){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",i)}ngOnChanges(i){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(i){i==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Ss(i)?this.routerLinkInput=i:this.routerLinkInput=Array.isArray(i)?i:[i],this.setTabIndexIfNotOnNativeEl("0"))}onClick(i,r,s,o,a){let c=this.urlTree;if(c===null||this.isAnchorElement&&(i!==0||r||s||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let d={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,d),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let i=this.urlTree;this.href=i!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(i)):null;let r=this.href===null?null:bx(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(i,r){let s=this.renderer,o=this.el.nativeElement;r!==null?s.setAttribute(o,i,r):s.removeAttribute(o,i)}get urlTree(){return this.routerLinkInput===null?null:Ss(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};t.\u0275fac=function(r){return new(r||t)(N(Re),N(ks),zo("tabindex"),N(pl),N(Ct),N(vl))},t.\u0275dir=ht({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,s){r&1&&Nt("click",function(a){return s.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),r&2&&Vt("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",He],skipLocationChange:[2,"skipLocationChange","skipLocationChange",He],replaceUrl:[2,"replaceUrl","replaceUrl",He],routerLink:"routerLink"},standalone:!0,features:[pi,sn]});let n=t;return n})();var em=class{};var UF=(()=>{let t=class t{constructor(i,r,s,o,a){this.router=i,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(xe(i=>i instanceof ln),ur(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(i,r){let s=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Kg(o.providers,i,`Route: ${o.path}`));let a=o._injector??i,c=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(c,o.children??o._loadedRoutes))}return Xt(s).pipe(jg())}preloadConfig(i,r){return this.preloadingStrategy.preload(r,()=>{let s;r.loadChildren&&r.canLoad===void 0?s=this.loader.loadChildren(i,r):s=tt(null);let o=s.pipe(mi(a=>a===null?tt(void 0):(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,this.processRoutes(a.injector??i,a.routes))));if(r.loadComponent&&!r._loadedComponent){let a=this.loader.loadComponent(r);return Xt([o,a]).pipe(jg())}else return o})}};t.\u0275fac=function(r){return new(r||t)(k(Re),k(bh),k(ys),k(em),k(Z_))},t.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),pC=new G(""),BF=(()=>{let t=class t{constructor(i,r,s,o,a={}){this.urlSerializer=i,this.transitions=r,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof aa?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=i.navigationTrigger,this.restoredId=i.restoredState?i.restoredState.navigationId:0):i instanceof ln?(this.lastId=i.id,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.urlAfterRedirects).fragment)):i instanceof Er&&i.code===$h.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof Hh&&(i.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(i.position):i.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(i.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(i,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Hh(i,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};t.\u0275fac=function(r){$o()},t.\u0275prov=$({token:t,factory:t.\u0275fac});let n=t;return n})();function zF(n){return n.routerState.root}function nd(n,t){return{\u0275kind:n,\u0275providers:t}}function qF(){let n=B(zi);return t=>{let e=n.get(gr);if(t!==e.components[0])return;let i=n.get(Re),r=n.get(gC);n.get(ev)===1&&i.initialNavigation(),n.get(_C,null,Gg.Optional)?.setUpPreloading(),n.get(pC,null,Gg.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var gC=new G("",{factory:()=>new Et}),ev=new G("",{providedIn:"root",factory:()=>1});function GF(){return nd(2,[{provide:ev,useValue:0},{provide:Jg,multi:!0,deps:[zi],useFactory:t=>{let e=t.get(jx,Promise.resolve());return()=>e.then(()=>new Promise(i=>{let r=t.get(Re),s=t.get(gC);mC(r,()=>{i(!0)}),t.get(tv).afterPreactivation=()=>(i(!0),s.closed?tt(void 0):s),r.initialNavigation()}))}}])}function $F(){return nd(3,[{provide:Jg,multi:!0,useFactory:()=>{let t=B(Re);return()=>{t.setUpLocationChangeListener()}}},{provide:ev,useValue:2}])}var _C=new G("");function WF(n){return nd(0,[{provide:_C,useExisting:UF},{provide:em,useExisting:n}])}function HF(){return nd(8,[DT,{provide:im,useExisting:DT}])}function KF(n){let t=[{provide:dC,useValue:SF},{provide:uC,useValue:F({skipNextTransition:!!n?.skipInitialTransition},n)}];return nd(9,t)}var OT=new G("ROUTER_FORROOT_GUARD"),QF=[bl,{provide:Xl,useClass:oa},Re,Jl,{provide:ks,useFactory:zF,deps:[Re]},Z_,[]],iv=(()=>{let t=class t{constructor(i){}static forRoot(i,r){return{ngModule:t,providers:[QF,[],{provide:tm,multi:!0,useValue:i},{provide:OT,useFactory:JF,deps:[[Re,new Bo,new $g]]},{provide:id,useValue:r||{}},r?.useHash?XF():ZF(),YF(),r?.preloadingStrategy?WF(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?tL(r):[],r?.bindToComponentInputs?HF().\u0275providers:[],r?.enableViewTransitions?KF().\u0275providers:[],eL()]}}static forChild(i){return{ngModule:t,providers:[{provide:tm,multi:!0,useValue:i}]}}};t.\u0275fac=function(r){return new(r||t)(k(OT,8))},t.\u0275mod=it({type:t}),t.\u0275inj=et({});let n=t;return n})();function YF(){return{provide:pC,useFactory:()=>{let n=B($x),t=B(rt),e=B(id),i=B(tv),r=B(Xl);return e.scrollOffset&&n.setOffset(e.scrollOffset),new BF(r,i,n,t,e)}}}function XF(){return{provide:vl,useClass:Bx}}function ZF(){return{provide:vl,useClass:Ux}}function JF(n){return"guarded"}function tL(n){return[n.initialNavigation==="disabled"?$F().\u0275providers:[],n.initialNavigation==="enabledBlocking"?GF().\u0275providers:[]]}var FT=new G("");function eL(){return[{provide:FT,useFactory:qF},{provide:t_,multi:!0,useExisting:FT}]}var TC=(()=>{let t=class t{constructor(i,r){this._renderer=i,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(i,r){this._renderer.setProperty(this._elementRef.nativeElement,i,r)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};t.\u0275fac=function(r){return new(r||t)(N(pl),N(Ct))},t.\u0275dir=ht({type:t});let n=t;return n})(),iL=(()=>{let t=class t extends TC{};t.\u0275fac=(()=>{let i;return function(s){return(i||(i=Nn(t)))(s||t)}})(),t.\u0275dir=ht({type:t,features:[Ge]});let n=t;return n})(),CC=new G("");var nL={provide:CC,useExisting:Uo(()=>Sr),multi:!0};function rL(){let n=Es()?Es().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var sL=new G(""),Sr=(()=>{let t=class t extends TC{constructor(i,r,s){super(i,r),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!rL())}writeValue(i){let r=i??"";this.setProperty("value",r)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};t.\u0275fac=function(r){return new(r||t)(N(pl),N(Ct),N(sL,8))},t.\u0275dir=ht({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,s){r&1&&Nt("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[li([nL]),Ge]});let n=t;return n})();function Tr(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function AC(n){return n!=null&&typeof n.length=="number"}var lv=new G(""),dv=new G(""),oL=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Le=class{static min(t){return aL(t)}static max(t){return cL(t)}static required(t){return lL(t)}static requiredTrue(t){return dL(t)}static email(t){return uL(t)}static minLength(t){return hL(t)}static maxLength(t){return mL(t)}static pattern(t){return fL(t)}static nullValidator(t){return SC(t)}static compose(t){return NC(t)}static composeAsync(t){return OC(t)}};function aL(n){return t=>{if(Tr(t.value)||Tr(n))return null;let e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}function cL(n){return t=>{if(Tr(t.value)||Tr(n))return null;let e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}function lL(n){return Tr(n.value)?{required:!0}:null}function dL(n){return n.value===!0?null:{required:!0}}function uL(n){return Tr(n.value)||oL.test(n.value)?null:{email:!0}}function hL(n){return t=>Tr(t.value)||!AC(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}function mL(n){return t=>AC(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}function fL(n){if(!n)return SC;let t,e;return typeof n=="string"?(e="",n.charAt(0)!=="^"&&(e+="^"),e+=n,n.charAt(n.length-1)!=="$"&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),i=>{if(Tr(i.value))return null;let r=i.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}function SC(n){return null}function kC(n){return n!=null}function RC(n){return vh(n)?Xt(n):n}function DC(n){let t={};return n.forEach(e=>{t=e!=null?F(F({},t),e):t}),Object.keys(t).length===0?null:t}function PC(n,t){return t.map(e=>e(n))}function pL(n){return!n.validate}function MC(n){return n.map(t=>pL(t)?t:e=>t.validate(e))}function NC(n){if(!n)return null;let t=n.filter(kC);return t.length==0?null:function(e){return DC(PC(e,t))}}function uv(n){return n!=null?NC(MC(n)):null}function OC(n){if(!n)return null;let t=n.filter(kC);return t.length==0?null:function(e){let i=PC(e,t).map(RC);return lh(i).pipe(X(DC))}}function hv(n){return n!=null?OC(MC(n)):null}function vC(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function FC(n){return n._rawValidators}function LC(n){return n._rawAsyncValidators}function nv(n){return n?Array.isArray(n)?n:[n]:[]}function om(n,t){return Array.isArray(n)?n.includes(t):n===t}function bC(n,t){let e=nv(t);return nv(n).forEach(r=>{om(e,r)||e.push(r)}),e}function yC(n,t){return nv(t).filter(e=>!om(n,e))}var am=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=uv(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=hv(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},Cr=class extends am{get formDirective(){return null}get path(){return null}},Ds=class extends am{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},cm=class{constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},gL={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},TG=wt(F({},gL),{"[class.ng-submitted]":"isSubmitted"}),pa=(()=>{let t=class t extends cm{constructor(i){super(i)}};t.\u0275fac=function(r){return new(r||t)(N(Ds,2))},t.\u0275dir=ht({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,s){r&2&&Bt("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[Ge]});let n=t;return n})(),ga=(()=>{let t=class t extends cm{constructor(i){super(i)}};t.\u0275fac=function(r){return new(r||t)(N(Cr,10))},t.\u0275dir=ht({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,s){r&2&&Bt("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[Ge]});let n=t;return n})();var rd="VALID",rm="INVALID",ua="PENDING",sd="DISABLED",Ar=class{},lm=class extends Ar{constructor(t,e){super(),this.value=t,this.source=e}},ad=class extends Ar{constructor(t,e){super(),this.pristine=t,this.source=e}},cd=class extends Ar{constructor(t,e){super(),this.touched=t,this.source=e}},ha=class extends Ar{constructor(t,e){super(),this.status=t,this.source=e}},rv=class extends Ar{constructor(t){super(),this.source=t}},sv=class extends Ar{constructor(t){super(),this.source=t}};function mv(n){return(hm(n)?n.validators:n)||null}function _L(n){return Array.isArray(n)?uv(n):n||null}function fv(n,t){return(hm(t)?t.asyncValidators:n)||null}function vL(n){return Array.isArray(n)?hv(n):n||null}function hm(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function VC(n,t,e){let i=n.controls;if(!(t?Object.keys(i):i).length)throw new jt(1e3,"");if(!i[e])throw new jt(1001,"")}function jC(n,t,e){n._forEachChild((i,r)=>{if(e[r]===void 0)throw new jt(1002,"")})}var ma=class{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Vn(()=>this.statusReactive()),this.statusReactive=qi(void 0),this._pristine=Vn(()=>this.pristineReactive()),this.pristineReactive=qi(!0),this._touched=Vn(()=>this.touchedReactive()),this.touchedReactive=qi(!1),this._events=new Et,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return jn(this.statusReactive)}set status(t){jn(()=>this.statusReactive.set(t))}get valid(){return this.status===rd}get invalid(){return this.status===rm}get pending(){return this.status==ua}get disabled(){return this.status===sd}get enabled(){return this.status!==sd}get pristine(){return jn(this.pristineReactive)}set pristine(t){jn(()=>this.pristineReactive.set(t))}get dirty(){return!this.pristine}get touched(){return jn(this.touchedReactive)}set touched(t){jn(()=>this.touchedReactive.set(t))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(bC(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(bC(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(yC(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(yC(t,this._rawAsyncValidators))}hasValidator(t){return om(this._rawValidators,t)}hasAsyncValidator(t){return om(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(wt(F({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new cd(!0,i))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:i})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,i),e&&t.emitEvent!==!1&&this._events.next(new cd(!1,i))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(wt(F({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new ad(!1,i))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,i),e&&t.emitEvent!==!1&&this._events.next(new ad(!0,i))}markAsPending(t={}){this.status=ua;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new ha(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(wt(F({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=sd,this.errors=null,this._forEachChild(r=>{r.disable(wt(F({},t),{onlySelf:!0}))}),this._updateValue();let i=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new lm(this.value,i)),this._events.next(new ha(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(wt(F({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=rd,this._forEachChild(i=>{i.enable(wt(F({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(wt(F({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===rd||this.status===ua)&&this._runAsyncValidator(i,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new lm(this.value,e)),this._events.next(new ha(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(wt(F({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?sd:rd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=ua,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let i=RC(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){let i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,i){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||i)&&this._events.next(new ha(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,i)}_initObservables(){this.valueChanges=new Se,this.statusChanges=new Se}_calculateStatus(){return this._allControlsDisabled()?sd:this.errors?rm:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ua)?ua:this._anyControlsHaveStatus(rm)?rm:rd}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),r&&this._events.next(new ad(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new cd(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){hm(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=_L(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=vL(this._rawAsyncValidators)}},fa=class extends ma{constructor(t,e,i){super(mv(e),fv(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){jC(this,!0,t),Object.keys(t).forEach(i=>{VC(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(i=>{let r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t?t[r]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>i._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,s)=>{i=e(i,r,s)}),i}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var ov=class extends fa{};var pv=new G("CallSetDisabledState",{providedIn:"root",factory:()=>gv}),gv="always";function bL(n,t){return[...t.path,n]}function av(n,t,e=gv){_v(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),wL(n,t),EL(n,t),IL(n,t),yL(n,t)}function wC(n,t,e=!0){let i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),um(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function dm(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function yL(n,t){if(t.valueAccessor.setDisabledState){let e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function _v(n,t){let e=FC(n);t.validator!==null?n.setValidators(vC(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let i=LC(n);t.asyncValidator!==null?n.setAsyncValidators(vC(i,t.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();dm(t._rawValidators,r),dm(t._rawAsyncValidators,r)}function um(n,t){let e=!1;if(n!==null){if(t.validator!==null){let r=FC(n);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==t.validator);s.length!==r.length&&(e=!0,n.setValidators(s))}}if(t.asyncValidator!==null){let r=LC(n);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==t.asyncValidator);s.length!==r.length&&(e=!0,n.setAsyncValidators(s))}}}let i=()=>{};return dm(t._rawValidators,i),dm(t._rawAsyncValidators,i),e}function wL(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&UC(n,t)})}function IL(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&UC(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function UC(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function EL(n,t){let e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function BC(n,t){n==null,_v(n,t)}function xL(n,t){return um(n,t)}function TL(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function CL(n){return Object.getPrototypeOf(n.constructor)===iL}function zC(n,t){n._syncPendingControls(),t.forEach(e=>{let i=e.control;i.updateOn==="submit"&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function AL(n,t){if(!t)return null;Array.isArray(t);let e,i,r;return t.forEach(s=>{s.constructor===Sr?e=s:CL(s)?i=s:r=s}),r||i||e||null}function SL(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}var kL={provide:Cr,useExisting:Uo(()=>vv)},od=Promise.resolve(),vv=(()=>{let t=class t extends Cr{get submitted(){return jn(this.submittedReactive)}constructor(i,r,s){super(),this.callSetDisabledState=s,this._submitted=Vn(()=>this.submittedReactive()),this.submittedReactive=qi(!1),this._directives=new Set,this.ngSubmit=new Se,this.form=new fa({},uv(i),hv(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(i){od.then(()=>{let r=this._findContainer(i.path);i.control=r.registerControl(i.name,i.control),av(i.control,i,this.callSetDisabledState),i.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(i)})}getControl(i){return this.form.get(i.path)}removeControl(i){od.then(()=>{let r=this._findContainer(i.path);r&&r.removeControl(i.name),this._directives.delete(i)})}addFormGroup(i){od.then(()=>{let r=this._findContainer(i.path),s=new fa({});BC(s,i),r.registerControl(i.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(i){od.then(()=>{let r=this._findContainer(i.path);r&&r.removeControl(i.name)})}getFormGroup(i){return this.form.get(i.path)}updateModel(i,r){od.then(()=>{this.form.get(i.path).setValue(r)})}setValue(i){this.control.setValue(i)}onSubmit(i){return this.submittedReactive.set(!0),zC(this.form,this._directives),this.ngSubmit.emit(i),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(i){return i.pop(),i.length?this.form.get(i):this.form}};t.\u0275fac=function(r){return new(r||t)(N(lv,10),N(dv,10),N(pv,8))},t.\u0275dir=ht({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,s){r&1&&Nt("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[li([kL]),Ge]});let n=t;return n})();function IC(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function EC(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var sm=class extends ma{constructor(t=null,e,i){super(mv(e),fv(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),hm(e)&&(e.nonNullable||e.initialValueIsDefault)&&(EC(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){IC(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){IC(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){EC(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var RL=n=>n instanceof sm;var _a=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=ht({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let n=t;return n})();var qC=new G("");var DL={provide:Cr,useExisting:Uo(()=>zn)},zn=(()=>{let t=class t extends Cr{get submitted(){return jn(this._submittedReactive)}set submitted(i){this._submittedReactive.set(i)}constructor(i,r,s){super(),this.callSetDisabledState=s,this._submitted=Vn(()=>this._submittedReactive()),this._submittedReactive=qi(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Se,this._setValidators(i),this._setAsyncValidators(r)}ngOnChanges(i){this._checkFormPresent(),i.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(um(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(i){let r=this.form.get(i.path);return av(r,i,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(i),r}getControl(i){return this.form.get(i.path)}removeControl(i){wC(i.control||null,i,!1),SL(this.directives,i)}addFormGroup(i){this._setUpFormContainer(i)}removeFormGroup(i){this._cleanUpFormContainer(i)}getFormGroup(i){return this.form.get(i.path)}addFormArray(i){this._setUpFormContainer(i)}removeFormArray(i){this._cleanUpFormContainer(i)}getFormArray(i){return this.form.get(i.path)}updateModel(i,r){this.form.get(i.path).setValue(r)}onSubmit(i){return this._submittedReactive.set(!0),zC(this.form,this.directives),this.ngSubmit.emit(i),this.form._events.next(new rv(this.control)),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this._submittedReactive.set(!1),this.form._events.next(new sv(this.form))}_updateDomValue(){this.directives.forEach(i=>{let r=i.control,s=this.form.get(i.path);r!==s&&(wC(r||null,i),RL(s)&&(av(s,i,this.callSetDisabledState),i.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(i){let r=this.form.get(i.path);BC(r,i),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(i){if(this.form){let r=this.form.get(i.path);r&&xL(r,i)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){_v(this.form,this),this._oldForm&&um(this._oldForm,this)}_checkFormPresent(){this.form}};t.\u0275fac=function(r){return new(r||t)(N(lv,10),N(dv,10),N(pv,8))},t.\u0275dir=ht({type:t,selectors:[["","formGroup",""]],hostBindings:function(r,s){r&1&&Nt("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[li([DL]),Ge,sn]});let n=t;return n})();var PL={provide:Ds,useExisting:Uo(()=>Ps)},Ps=(()=>{let t=class t extends Ds{set isDisabled(i){}constructor(i,r,s,o,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new Se,this._ngModelWarningSent=!1,this._parent=i,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=AL(this,o)}ngOnChanges(i){this._added||this._setUpControl(),TL(i,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}get path(){return bL(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};t._ngModelWarningSentOnce=!1,t.\u0275fac=function(r){return new(r||t)(N(Cr,13),N(lv,10),N(dv,10),N(CC,10),N(qC,8))},t.\u0275dir=ht({type:t,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[li([PL]),Ge,sn]});let n=t;return n})();var ML=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=it({type:t}),t.\u0275inj=et({});let n=t;return n})(),cv=class extends ma{constructor(t,e,i){super(mv(e),fv(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[this._adjustIndex(t)]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,i={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(t,e={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,i={}){let r=this._adjustIndex(t);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),e&&(this.controls.splice(r,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){jC(this,!1,t),t.forEach((i,r)=>{VC(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(t.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((e,i)=>i._syncPendingControls()?!0:e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,i)=>{t(e,i)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};function xC(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var va=(()=>{let t=class t{constructor(){this.useNonNullable=!1}get nonNullable(){let i=new t;return i.useNonNullable=!0,i}group(i,r=null){let s=this._reduceControls(i),o={};return xC(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new fa(s,o)}record(i,r=null){let s=this._reduceControls(i);return new ov(s,r)}control(i,r,s){let o={};return this.useNonNullable?(xC(r)?o=r:(o.validators=r,o.asyncValidators=s),new sm(i,wt(F({},o),{nonNullable:!0}))):new sm(i,r,s)}array(i,r,s){let o=i.map(a=>this._createControl(a));return new cv(o,r,s)}_reduceControls(i){let r={};return Object.keys(i).forEach(s=>{r[s]=this._createControl(i[s])}),r}_createControl(i){if(i instanceof sm)return i;if(i instanceof ma)return i;if(Array.isArray(i)){let r=i[0],s=i.length>1?i[1]:null,o=i.length>2?i[2]:null;return this.control(r,s,o)}else return this.control(i)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var ba=(()=>{let t=class t{static withConfig(i){return{ngModule:t,providers:[{provide:qC,useValue:i.warnOnNgModelWithFormControl??"always"},{provide:pv,useValue:i.callSetDisabledState??gv}]}}};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=it({type:t}),t.\u0275inj=et({imports:[ML]});let n=t;return n})();var NL="firebase",OL="10.13.1";he.registerVersion(NL,OL,"app-compat");var FL="firebase",LL="10.13.1";$i(FL,LL,"app");var Gn=new Xo("ANGULARFIRE2_VERSION");var VL=(n,t)=>{let e=t?[t]:iT(),i=[];return e.forEach(r=>{r.container.getProvider(n).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i},qn=class{constructor(){return VL(jL)}},jL="app-check";function bv(){}var fm=class{zone;delegate;constructor(t,e=ix){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,i){let r=this.zone,s=function(o){r.runGuarded(()=>{t.apply(this,[o])})};return this.delegate.schedule(s,e,i)}},yv=class{zone;task=null;constructor(t){this.zone=t}call(t,e){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",bv,{},bv,bv)),e.pipe(qt({next:i,complete:i,error:i})).subscribe(t).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},ya=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(e){this.ngZone=e,this.outsideAngular=e.runOutsideAngular(()=>new fm(Zone.current)),this.insideAngular=e.run(()=>new fm(Zone.current,Fo)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||n)(k(rt))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function UL(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function me(n){return BL(UL())(n)}function BL(n){return function(e){return e=e.lift(new yv(n.ngZone)),e.pipe(Lo(n.outsideAngular),vs(n.insideAngular))}}var zL=new Map,qL={activated:!1,tokenObservers:[]},GL={initialized:!1,enabled:!1};function Ki(n){return zL.get(n)||Object.assign({},qL)}function YC(){return GL}var $L="https://content-firebaseappcheck.googleapis.com/v1";var WL="exchangeDebugToken",GC={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},HG=24*60*60*1e3;var Ev=class{constructor(t,e,i,r,s){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){return D(this,null,function*(){this.stop();try{this.pending=new ke,this.pending.promise.catch(e=>{}),yield HL(this.getNextRun(t)),this.pending.resolve(),yield this.pending.promise,this.pending=new ke,this.pending.promise.catch(e=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(e){this.retryPolicy(e)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}};function HL(n){return new Promise(t=>{setTimeout(t,n)})}var KL={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},kr=new Yx("appCheck","AppCheck",KL);function XC(n){if(!Ki(n).activated)throw kr.create("use-before-activation",{appName:n.name})}function ZC(i,r){return D(this,arguments,function*({url:n,body:t},e){let s={"Content-Type":"application/json"},o=e.getImmediate({optional:!0});if(o){let _=yield o.getHeartbeatsHeader();_&&(s["X-Firebase-Client"]=_)}let a={method:"POST",body:JSON.stringify(t),headers:s},c;try{c=yield fetch(n,a)}catch(_){throw kr.create("fetch-network-error",{originalErrorMessage:_?.message})}if(c.status!==200)throw kr.create("fetch-status-error",{httpStatus:c.status});let d;try{d=yield c.json()}catch(_){throw kr.create("fetch-parse-error",{originalErrorMessage:_?.message})}let u=d.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw kr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${d.ttl}`});let m=Number(u[1])*1e3,p=Date.now();return{token:d.token,expireTimeMillis:p+m,issuedAtTimeMillis:p}})}function JC(n,t){let{projectId:e,appId:i,apiKey:r}=n.options;return{url:`${$L}/projects/${e}/apps/${i}:${WL}?key=${r}`,body:{debug_token:t}}}var QL="firebase-app-check-database",YL=1,xv="firebase-app-check-store";var pm=null;function XL(){return pm||(pm=new Promise((n,t)=>{try{let e=indexedDB.open(QL,YL);e.onsuccess=i=>{n(i.target.result)},e.onerror=i=>{var r;t(kr.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},e.onupgradeneeded=i=>{let r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(xv,{keyPath:"compositeKey"})}}}catch(e){t(kr.create("storage-open",{originalErrorMessage:e?.message}))}}),pm)}function ZL(n,t){return JL(tV(n),t)}function JL(n,t){return D(this,null,function*(){let i=(yield XL()).transaction(xv,"readwrite"),s=i.objectStore(xv).put({compositeKey:n,value:t});return new Promise((o,a)=>{s.onsuccess=c=>{o()},i.onerror=c=>{var d;a(kr.create("storage-set",{originalErrorMessage:(d=c.target.error)===null||d===void 0?void 0:d.message}))}})})}function tV(n){return`${n.options.appId}-${n.name}`}var Tv=new br("@firebase/app-check");function Iv(n,t){return xh()?ZL(n,t).catch(e=>{Tv.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function tA(){return YC().enabled}function eA(){return D(this,null,function*(){let n=YC();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var eV={error:"UNKNOWN_ERROR"};function iV(n){return Ih.encodeString(JSON.stringify(n),!1)}function Cv(n,t=!1){return D(this,null,function*(){let e=n.app;XC(e);let i=Ki(e),r=i.token,s;if(r&&!ld(r)&&(i.token=void 0,r=void 0),!r){let c=yield i.cachedTokenPromise;c&&(ld(c)?r=c:yield Iv(e,void 0))}if(!t&&r&&ld(r))return{token:r.token};let o=!1;if(tA()){i.exchangeTokenPromise||(i.exchangeTokenPromise=ZC(JC(e,yield eA()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),o=!0);let c=yield i.exchangeTokenPromise;return yield Iv(e,c),i.token=c,{token:c.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),o=!0),r=yield Ki(e).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?Tv.warn(c.message):Tv.error(c),s=c}let a;return r?s?ld(r)?a={token:r.token,internalError:s}:a=WC(s):(a={token:r.token},i.token=r,yield Iv(e,r)):a=WC(s),o&&oV(e,a),a})}function nV(n){return D(this,null,function*(){let t=n.app;XC(t);let{provider:e}=Ki(t);if(tA()){let i=yield eA(),{token:r}=yield ZC(JC(t,i),n.heartbeatServiceProvider);return{token:r}}else{let{token:i}=yield e.getToken();return{token:i}}})}function rV(n,t,e,i){let{app:r}=n,s=Ki(r),o={next:e,error:i,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&ld(s.token)){let a=s.token;Promise.resolve().then(()=>{e({token:a.token}),$C(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>$C(n))}function iA(n,t){let e=Ki(n),i=e.tokenObservers.filter(r=>r.next!==t);i.length===0&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),e.tokenObservers=i}function $C(n){let{app:t}=n,e=Ki(t),i=e.tokenRefresher;i||(i=sV(n),e.tokenRefresher=i),!i.isRunning()&&e.isTokenAutoRefreshEnabled&&i.start()}function sV(n){let{app:t}=n;return new Ev(()=>D(this,null,function*(){let e=Ki(t),i;if(e.token?i=yield Cv(n,!0):i=yield Cv(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{let e=Ki(t);if(e.token){let i=e.token.issuedAtTimeMillis+(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)*.5+3e5,r=e.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},GC.RETRIAL_MIN_WAIT,GC.RETRIAL_MAX_WAIT)}function oV(n,t){let e=Ki(n).tokenObservers;for(let i of e)try{i.type==="EXTERNAL"&&t.error!=null?i.error(t.error):i.next(t)}catch{}}function ld(n){return n.expireTimeMillis-Date.now()>0}function WC(n){return{token:iV(eV),error:n}}var Av=class{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){let{tokenObservers:t}=Ki(this.app);for(let e of t)iA(this.app,e.next);return Promise.resolve()}};function aV(n,t){return new Av(n,t)}function cV(n){return{getToken:t=>Cv(n,t),getLimitedUseToken:()=>nV(n),addTokenListener:t=>rV(n,"INTERNAL",t),removeTokenListener:t=>iA(n.app,t)}}var lV="@firebase/app-check",dV="0.8.7";var uV="app-check",HC="app-check-internal";function hV(){xs(new _i(uV,n=>{let t=n.getProvider("app").getImmediate(),e=n.getProvider("heartbeat");return aV(t,e)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,t,e)=>{n.getProvider(HC).initialize()})),xs(new _i(HC,n=>{let t=n.getProvider("app-check").getImmediate();return cV(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),$i(lV,dV)}hV();var mV=["localhost","0.0.0.0","127.0.0.1"],s$=typeof window<"u"&&mV.includes(window.location.hostname);var fV=["ngOnDestroy"],rA=(n,t,e,i={})=>new Proxy(n,{get:(r,s)=>e.runOutsideAngular(()=>{if(n[s])return i?.spy?.get&&i.spy.get(s,n[s]),n[s];if(fV.indexOf(s)>-1)return()=>{};let o=t.toPromise().then(a=>{let c=a?.[s];return typeof c=="function"?c.bind(a):c?.then?c.then(d=>e.run(()=>d)):e.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>o[c],apply:(a,c,d)=>o.then(u=>{let m=u?.(...d);return i?.spy?.apply&&i.spy.apply(s,d,m),m})})})});var gm=class{constructor(t){return t}},Rr=new G("angularfire2.app.options"),Dr=new G("angularfire2.app.name");function Ms(n,t,e){let i=typeof e=="string"&&e||"[DEFAULT]",r=typeof e=="object"&&e||{};r.name=r.name||i;let o=he.apps.filter(a=>a&&a.name===r.name)[0]||t.runOutsideAngular(()=>he.initializeApp(n,r));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){let a=!!module.hot;pV("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new gm(o)}var pV=(n,...t)=>{e_()&&typeof console<"u"&&console[n](...t)},gV={provide:gm,useFactory:Ms,deps:[Rr,rt,[new Bo,Dr]]},sA=(()=>{class n{static initializeApp(e,i){return{ngModule:n,providers:[{provide:Rr,useValue:e},{provide:Dr,useValue:i}]}}constructor(e){he.registerVersion("angularfire",Gn.full,"core"),he.registerVersion("angularfire",Gn.full,"app-compat"),he.registerVersion("angular",Rx.full,e.toString())}static \u0275fac=function(i){return new(i||n)(k(Fe))};static \u0275mod=it({type:n});static \u0275inj=et({providers:[gV]})}return n})();function wa(n,t,e,i,r){let[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return _V(r,o)||(nA("error",`${t} was already initialized on the ${e} Firebase App with different settings.${vV?" You may need to reload as Firebase is not HMR aware.":""}`),nA("warn",{is:r,was:o})),s;{let a=i();return globalThis.\u0275AngularfireInstanceCache.push([n,a,r]),a}}function _V(n,t){try{return n.toString()===t.toString()}catch{return n===t}}var vV=typeof module<"u"&&!!module.hot,nA=(n,...t)=>{e_()&&typeof console<"u"&&console[n](...t)};globalThis.\u0275AngularfireInstanceCache||=[];var dd=new G("angularfire2.auth.use-emulator"),ud=new G("angularfire2.auth.settings"),hd=new G("angularfire2.auth.tenant-id"),md=new G("angularfire2.auth.langugage-code"),fd=new G("angularfire2.auth.use-device-language"),pd=new G("angularfire.auth.persistence"),gd=(n,t,e,i,r,s,o,a)=>wa(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let c=t.runOutsideAngular(()=>n.auth());if(e&&c.useEmulator(...e),i&&(c.tenantId=i),c.languageCode=r,s&&c.useDeviceLanguage(),o)for(let[d,u]of Object.entries(o))c.settings[d]=u;return a&&c.setPersistence(a),c},[e,i,r,s,o,a]),Qi=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(e,i,r,s,o,a,c,d,u,m,p,_){let w=new Et,A=tt(void 0).pipe(vs(o.outsideAngular),Ht(()=>s.runOutsideAngular(()=>import("./chunk-2TYKB7VM.js"))),X(()=>Ms(e,s,i)),X(x=>gd(x,s,a,d,u,m,c,p)),ll({bufferSize:1,refCount:!1}));if(_r(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=tt(null);else{A.pipe(rn()).subscribe();let x=A.pipe(Ht(j=>j.getRedirectResult().then(Z=>Z,()=>null)),me,ll({bufferSize:1,refCount:!1})),V=A.pipe(Ht(j=>new Oe(Z=>({unsubscribe:s.runOutsideAngular(()=>j.onAuthStateChanged(lt=>Z.next(lt),lt=>Z.error(lt),()=>Z.complete()))})))),H=A.pipe(Ht(j=>new Oe(Z=>({unsubscribe:s.runOutsideAngular(()=>j.onIdTokenChanged(lt=>Z.next(lt),lt=>Z.error(lt),()=>Z.complete()))}))));this.authState=x.pipe(qg(V),Lo(o.outsideAngular),vs(o.insideAngular)),this.user=x.pipe(qg(H),Lo(o.outsideAngular),vs(o.insideAngular)),this.idToken=this.user.pipe(Ht(j=>j?Xt(j.getIdToken()):tt(null))),this.idTokenResult=this.user.pipe(Ht(j=>j?Xt(j.getIdTokenResult()):tt(null))),this.credential=kn(x,w,this.authState.pipe(xe(j=>!j))).pipe(X(j=>j?.user?j:null),Lo(o.outsideAngular),vs(o.insideAngular))}return rA(this,A,s,{spy:{apply:(x,V,H)=>{(x.startsWith("signIn")||x.startsWith("createUser"))&&H.then(j=>w.next(j))}}})}static \u0275fac=function(i){return new(i||n)(k(Rr),k(Dr,8),k(Fe),k(rt),k(ya),k(dd,8),k(ud,8),k(hd,8),k(md,8),k(fd,8),k(pd,8),k(qn,8))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),oA=(()=>{class n{constructor(){he.registerVersion("angularfire",Gn.full,"auth-compat")}static \u0275fac=function(i){return new(i||n)};static \u0275mod=it({type:n});static \u0275inj=et({providers:[Qi]})}return n})();var aA=["toast-component",""];function bV(n,t){if(n&1){let e=Fn();U(0,"button",5),Nt("click",function(){Pn(e);let r=St();return Mn(r.remove())}),U(1,"span",6),dt(2,"\xD7"),z()()}}function yV(n,t){if(n&1&&(Yg(0),dt(1),Xg()),n&2){let e=St(2);Y(),on("[",e.duplicatesCount+1,"]")}}function wV(n,t){if(n&1&&(U(0,"div"),dt(1),_t(2,yV,2,1,"ng-container",4),z()),n&2){let e=St();$e(e.options.titleClass),Vt("aria-label",e.title),Y(),on(" ",e.title," "),Y(),ot("ngIf",e.duplicatesCount)}}function IV(n,t){if(n&1&&vt(0,"div",7),n&2){let e=St();$e(e.options.messageClass),ot("innerHTML",e.message,Wg)}}function EV(n,t){if(n&1&&(U(0,"div",8),dt(1),z()),n&2){let e=St();$e(e.options.messageClass),Vt("aria-label",e.message),Y(),on(" ",e.message," ")}}function xV(n,t){if(n&1&&(U(0,"div"),vt(1,"div",9),z()),n&2){let e=St();Y(),On("width",e.width()+"%")}}function TV(n,t){if(n&1){let e=Fn();U(0,"button",5),Nt("click",function(){Pn(e);let r=St();return Mn(r.remove())}),U(1,"span",6),dt(2,"\xD7"),z()()}}function CV(n,t){if(n&1&&(Yg(0),dt(1),Xg()),n&2){let e=St(2);Y(),on("[",e.duplicatesCount+1,"]")}}function AV(n,t){if(n&1&&(U(0,"div"),dt(1),_t(2,CV,2,1,"ng-container",4),z()),n&2){let e=St();$e(e.options.titleClass),Vt("aria-label",e.title),Y(),on(" ",e.title," "),Y(),ot("ngIf",e.duplicatesCount)}}function SV(n,t){if(n&1&&vt(0,"div",7),n&2){let e=St();$e(e.options.messageClass),ot("innerHTML",e.message,Wg)}}function kV(n,t){if(n&1&&(U(0,"div",8),dt(1),z()),n&2){let e=St();$e(e.options.messageClass),Vt("aria-label",e.message),Y(),on(" ",e.message," ")}}function RV(n,t){if(n&1&&(U(0,"div"),vt(1,"div",9),z()),n&2){let e=St();Y(),On("width",e.width()+"%")}}var kv=class{_attachedHost;component;viewContainerRef;injector;constructor(t,e){this.component=t,this.injector=e}attach(t,e){return this._attachedHost=t,t.attach(this,e)}detach(){let t=this._attachedHost;if(t)return this._attachedHost=void 0,t.detach()}get isAttached(){return this._attachedHost!=null}setAttachedHost(t){this._attachedHost=t}},Rv=class{_attachedPortal;_disposeFn;attach(t,e){return this._attachedPortal=t,this.attachComponentPortal(t,e)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(t){this._disposeFn=t}},Dv=class{_overlayRef;componentInstance;duplicatesCount=0;_afterClosed=new Et;_activate=new Et;_manualClose=new Et;_resetTimeout=new Et;_countDuplicate=new Et;constructor(t){this._overlayRef=t}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(t,e){t&&this._resetTimeout.next(),e&&this._countDuplicate.next(++this.duplicatesCount)}},Ia=class{toastId;config;message;title;toastType;toastRef;_onTap=new Et;_onAction=new Et;constructor(t,e,i,r,s,o){this.toastId=t,this.config=e,this.message=i,this.title=r,this.toastType=s,this.toastRef=o,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(t){this._onAction.next(t)}onAction(){return this._onAction.asObservable()}},cA={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing"},lA=new G("ToastConfig"),Pv=class extends Rv{_hostDomElement;_componentFactoryResolver;_appRef;constructor(t,e,i){super(),this._hostDomElement=t,this._componentFactoryResolver=e,this._appRef=i}attachComponentPortal(t,e){let i=this._componentFactoryResolver.resolveComponentFactory(t.component),r;return r=i.create(t.injector),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.detachView(r.hostView),r.destroy()}),e?this._hostDomElement.insertBefore(this._getComponentRootNode(r),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(r)),r}_getComponentRootNode(t){return t.hostView.rootNodes[0]}},DV=(()=>{class n{_document=B(kt);_containerElement;ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let e=this._document.createElement("div");e.classList.add("overlay-container"),e.setAttribute("aria-live","polite"),this._document.body.appendChild(e),this._containerElement=e}static \u0275fac=function(i){return new(i||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Mv=class{_portalHost;constructor(t){this._portalHost=t}attach(t,e=!0){return this._portalHost.attach(t,e)}detach(){return this._portalHost.detach()}},PV=(()=>{class n{_overlayContainer=B(DV);_componentFactoryResolver=B(wx);_appRef=B(gr);_document=B(kt);_paneElements=new Map;create(e,i){return this._createOverlayRef(this.getPaneElement(e,i))}getPaneElement(e="",i){return this._paneElements.get(i)||this._paneElements.set(i,{}),this._paneElements.get(i)[e]||(this._paneElements.get(i)[e]=this._createPaneElement(e,i)),this._paneElements.get(i)[e]}_createPaneElement(e,i){let r=this._document.createElement("div");return r.id="toast-container",r.classList.add(e),r.classList.add("toast-container"),i?i.getContainerElement().appendChild(r):this._overlayContainer.getContainerElement().appendChild(r),r}_createPortalHost(e){return new Pv(e,this._componentFactoryResolver,this._appRef)}_createOverlayRef(e){return new Mv(this._createPortalHost(e))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),_m=(()=>{class n{overlay;_injector;sanitizer;ngZone;toastrConfig;currentlyActive=0;toasts=[];overlayContainer;previousToastMessage;index=0;constructor(e,i,r,s,o){this.overlay=i,this._injector=r,this.sanitizer=s,this.ngZone=o,this.toastrConfig=F(F({},e.default),e.config),e.config.iconClasses&&(this.toastrConfig.iconClasses=F(F({},e.default.iconClasses),e.config.iconClasses))}show(e,i,r={},s=""){return this._preBuildNotification(s,e,i,this.applyConfig(r))}success(e,i,r={}){let s=this.toastrConfig.iconClasses.success||"";return this._preBuildNotification(s,e,i,this.applyConfig(r))}error(e,i,r={}){let s=this.toastrConfig.iconClasses.error||"";return this._preBuildNotification(s,e,i,this.applyConfig(r))}info(e,i,r={}){let s=this.toastrConfig.iconClasses.info||"";return this._preBuildNotification(s,e,i,this.applyConfig(r))}warning(e,i,r={}){let s=this.toastrConfig.iconClasses.warning||"";return this._preBuildNotification(s,e,i,this.applyConfig(r))}clear(e){for(let i of this.toasts)if(e!==void 0){if(i.toastId===e){i.toastRef.manualClose();return}}else i.toastRef.manualClose()}remove(e){let i=this._findToast(e);if(!i||(i.activeToast.toastRef.close(),this.toasts.splice(i.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){let r=this.toasts[this.currentlyActive].toastRef;r.isInactive()||(this.currentlyActive=this.currentlyActive+1,r.activate())}return!0}findDuplicate(e="",i="",r,s){let{includeTitleDuplicates:o}=this.toastrConfig;for(let a of this.toasts){let c=o&&a.title===e;if((!o||c)&&a.message===i)return a.toastRef.onDuplicate(r,s),a}return null}applyConfig(e={}){return F(F({},this.toastrConfig),e)}_findToast(e){for(let i=0;i<this.toasts.length;i++)if(this.toasts[i].toastId===e)return{index:i,activeToast:this.toasts[i]};return null}_preBuildNotification(e,i,r,s){return s.onActivateTick?this.ngZone.run(()=>this._buildNotification(e,i,r,s)):this._buildNotification(e,i,r,s)}_buildNotification(e,i,r,s){if(!s.toastComponent)throw new Error("toastComponent required");let o=this.findDuplicate(r,i,this.toastrConfig.resetTimeoutOnDuplicate&&s.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&r||i)&&this.toastrConfig.preventDuplicates&&o!==null)return o;this.previousToastMessage=i;let a=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(a=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));let c=this.overlay.create(s.positionClass,this.overlayContainer);this.index=this.index+1;let d=i;i&&s.enableHtml&&(d=this.sanitizer.sanitize(ti.HTML,i));let u=new Dv(c),m=new Ia(this.index,s,d,r,e,u),p=[{provide:Ia,useValue:m}],_=zi.create({providers:p,parent:this._injector}),w=new kv(s.toastComponent,_),A=c.attach(w,s.newestOnTop);u.componentInstance=A.instance;let x={toastId:this.index,title:r||"",message:i||"",toastRef:u,onShown:u.afterActivate(),onHidden:u.afterClosed(),onTap:m.onTap(),onAction:m.onAction(),portal:A};return a||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{x.toastRef.activate()})),this.toasts.push(x),x}static \u0275fac=function(i){return new(i||n)(k(lA),k(PV),k(zi),k(Fl),k(rt))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),MV=(()=>{class n{toastrService;toastPackage;ngZone;message;title;options;duplicatesCount;originalTimeout;width=qi(-1);toastClasses="";state;get _state(){return this.state()}get displayStyle(){if(this.state().value==="inactive")return"none"}timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(e,i,r){this.toastrService=e,this.toastPackage=i,this.ngZone=r,this.message=i.message,this.title=i.title,this.options=i.config,this.originalTimeout=i.config.timeOut,this.toastClasses=`${i.toastType} ${i.config.toastClass}`,this.sub=i.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=i.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=i.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=i.toastRef.countDuplicate().subscribe(s=>{this.duplicatesCount=s}),this.state=qi({value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state.update(e=>wt(F({},e),{value:"active"})),!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(this.width()===0||this.width()===100||!this.options.timeOut)return;let e=new Date().getTime(),i=this.hideTime-e;this.width.set(i/this.options.timeOut*100),this.options.progressAnimation==="increasing"&&this.width.update(r=>100-r),this.width()<=0&&this.width.set(0),this.width()>=100&&this.width.set(100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state.update(e=>wt(F({},e),{value:"active"})),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){this.state().value!=="removed"&&(clearTimeout(this.timeout),this.state.update(e=>wt(F({},e),{value:"removed"})),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){this.state().value!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state().value!=="removed"&&this.options.disableTimeOut!=="extendedTimeOut"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width.set(0))}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state().value==="removed"||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(e,i){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(e),i)):this.timeout=setTimeout(()=>e(),i)}outsideInterval(e,i){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(e),i)):this.intervalId=setInterval(()=>e(),i)}runInsideAngular(e){this.ngZone?this.ngZone.run(()=>e()):e()}static \u0275fac=function(i){return new(i||n)(N(_m),N(Ia),N(rt))};static \u0275cmp=xt({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(i,r){i&1&&Nt("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),i&2&&(Cx("@flyInOut",r._state),$e(r.toastClasses),On("display",r.displayStyle))},standalone:!0,features:[oe],attrs:aA,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(i,r){i&1&&_t(0,bV,3,0,"button",0)(1,wV,3,5,"div",1)(2,IV,1,3,"div",2)(3,EV,2,4,"div",3)(4,xV,2,2,"div",4),i&2&&(ot("ngIf",r.options.closeButton),Y(),ot("ngIf",r.title),Y(),ot("ngIf",r.message&&r.options.enableHtml),Y(),ot("ngIf",r.message&&!r.options.enableHtml),Y(),ot("ngIf",r.options.progressBar))},dependencies:[Gi],encapsulation:2,data:{animation:[kh("flyInOut",[Jo("inactive",Ts({opacity:0})),Jo("active",Ts({opacity:1})),Jo("removed",Ts({opacity:0})),Tl("inactive => active",xl("{{ easeTime }}ms {{ easing }}")),Tl("active => removed",xl("{{ easeTime }}ms {{ easing }}"))])]},changeDetection:0})}return n})(),NV=wt(F({},cA),{toastComponent:MV}),OV=(n={})=>fr([{provide:lA,useValue:{default:NV,config:n}}]),dA=(()=>{class n{static forRoot(e={}){return{ngModule:n,providers:[OV(e)]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=it({type:n});static \u0275inj=et({})}return n})();var FV=(()=>{class n{toastrService;toastPackage;appRef;message;title;options;duplicatesCount;originalTimeout;width=qi(-1);toastClasses="";get displayStyle(){return this.state()==="inactive"?"none":null}state=qi("inactive");timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(e,i,r){this.toastrService=e,this.toastPackage=i,this.appRef=r,this.message=i.message,this.title=i.title,this.options=i.config,this.originalTimeout=i.config.timeOut,this.toastClasses=`${i.toastType} ${i.config.toastClass}`,this.sub=i.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=i.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=i.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=i.toastRef.countDuplicate().subscribe(s=>{this.duplicatesCount=s})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state.set("active"),!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(this.width()===0||this.width()===100||!this.options.timeOut)return;let e=new Date().getTime(),i=this.hideTime-e;this.width.set(i/this.options.timeOut*100),this.options.progressAnimation==="increasing"&&this.width.update(r=>100-r),this.width()<=0&&this.width.set(0),this.width()>=100&&this.width.set(100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state.set("active"),this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=new Date().getTime()+(this.originalTimeout||0),this.width.set(-1),this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){this.state()!=="removed"&&(clearTimeout(this.timeout),this.state.set("removed"),this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){this.state()!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state()!=="removed"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width.set(0))}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state()==="removed"||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}static \u0275fac=function(i){return new(i||n)(N(_m),N(Ia),N(gr))};static \u0275cmp=xt({type:n,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(i,r){i&1&&Nt("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),i&2&&($e(r.toastClasses),On("display",r.displayStyle))},standalone:!0,features:[oe],attrs:aA,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(i,r){i&1&&_t(0,TV,3,0,"button",0)(1,AV,3,5,"div",1)(2,SV,1,3,"div",2)(3,kV,2,4,"div",3)(4,RV,2,2,"div",4),i&2&&(ot("ngIf",r.options.closeButton),Y(),ot("ngIf",r.title),Y(),ot("ngIf",r.message&&r.options.enableHtml),Y(),ot("ngIf",r.message&&!r.options.enableHtml),Y(),ot("ngIf",r.options.progressBar))},dependencies:[Gi],encapsulation:2,changeDetection:0})}return n})(),j$=wt(F({},cA),{toastComponent:FV});var Ns=class Ns{constructor(t){this.toastr=t}success(t,e){this.toastr.success(t,e,{positionClass:"toast-top-right",timeOut:3e3,closeButton:!0,progressBar:!0,progressAnimation:"increasing",tapToDismiss:!0,easing:"ease-in-out"})}error(t,e){this.toastr.error(t,e,{positionClass:"toast-top-right",timeOut:5e3,closeButton:!0,progressBar:!0,progressAnimation:"increasing",tapToDismiss:!0,easing:"ease-in-out"})}info(t,e){this.toastr.info(t,e,{positionClass:"toast-top-right",timeOut:3e3,closeButton:!0,progressBar:!0,progressAnimation:"increasing",tapToDismiss:!0,easing:"ease-in-out"})}warning(t,e){this.toastr.warning(t,e,{positionClass:"toast-top-right",timeOut:3e3,closeButton:!0,progressBar:!0,progressAnimation:"increasing",tapToDismiss:!0,easing:"ease-in-out"})}};Ns.\u0275fac=function(e){return new(e||Ns)(k(_m))},Ns.\u0275prov=$({token:Ns,factory:Ns.\u0275fac,providedIn:"root"});var Pr=Ns;var Os=class Os{constructor(t,e,i,r){this.http=t;this.afAuth=e;this.toastr=i;this.router=r;this.apiUrl="https://yourapi.com/api/auth";this.tokenKey="authToken";this.user$=e.authState}googleSignIn(){return this.afAuth.signInWithPopup(new he.auth.GoogleAuthProvider).then(t=>{this.router.navigate(["/todos"])}).catch(t=>{this.toastr.error("Login failed. Please try again.")})}login(t,e){return D(this,null,function*(){return this.afAuth.signInWithEmailAndPassword(t,e)})}register(t,e){return D(this,null,function*(){return this.afAuth.createUserWithEmailAndPassword(t,e)})}logout(){return D(this,null,function*(){return this.afAuth.signOut()})}getToken(){return localStorage.getItem(this.tokenKey)}isAuthenticated(){return!!this.getToken()}getAuthHeaders(){let t=this.getToken();return new Wi({Authorization:`Bearer ${t}`})}};Os.\u0275fac=function(e){return new(e||Os)(k(Dl),k(Qi),k(Pr),k(Re))},Os.\u0275prov=$({token:Os,factory:Os.\u0275fac,providedIn:"root"});var Mr=Os;var Lv;try{Lv=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Lv=!1}var ae=(()=>{let t=class t{constructor(i){this._platformId=i,this.isBrowser=this._platformId?Gx(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||Lv)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};t.\u0275fac=function(r){return new(r||t)(k(Fe))},t.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var Ea,uA=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function Vv(){if(Ea)return Ea;if(typeof document!="object"||!document)return Ea=new Set(uA),Ea;let n=document.createElement("input");return Ea=new Set(uA.filter(t=>(n.setAttribute("type",t),n.type===t))),Ea}var vd;function VV(){if(vd==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>vd=!0}))}finally{vd=vd||!1}return vd}function Nr(n){return VV()?n:!!n.capture}var Fv;function jV(){if(Fv==null){let n=typeof document<"u"?document.head:null;Fv=!!(n&&(n.createShadowRoot||n.attachShadow))}return Fv}function hA(n){if(jV()){let t=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function $n(n){return n.composedPath?n.composedPath()[0]:n.target}function mA(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function yi(n){return n!=null&&`${n}`!="false"}function xa(n,t=0){return UV(n)?Number(n):arguments.length===2?t:0}function UV(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}function jv(n){return Array.isArray(n)?n:[n]}function Di(n){return n instanceof Ct?n.nativeElement:n}function BV(n){if(n.type==="characterData"&&n.target instanceof Comment)return!0;if(n.type==="childList"){for(let t=0;t<n.addedNodes.length;t++)if(!(n.addedNodes[t]instanceof Comment))return!1;for(let t=0;t<n.removedNodes.length;t++)if(!(n.removedNodes[t]instanceof Comment))return!1;return!0}return!1}var fA=(()=>{let t=class t{create(i){return typeof MutationObserver>"u"?null:new MutationObserver(i)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),zV=(()=>{let t=class t{constructor(i){this._mutationObserverFactory=i,this._observedElements=new Map,this._ngZone=B(rt)}ngOnDestroy(){this._observedElements.forEach((i,r)=>this._cleanupObserver(r))}observe(i){let r=Di(i);return new Oe(s=>{let a=this._observeElement(r).pipe(X(c=>c.filter(d=>!BV(d))),xe(c=>!!c.length)).subscribe(c=>{this._ngZone.run(()=>{s.next(c)})});return()=>{a.unsubscribe(),this._unobserveElement(r)}})}_observeElement(i){return this._ngZone.runOutsideAngular(()=>{if(this._observedElements.has(i))this._observedElements.get(i).count++;else{let r=new Et,s=this._mutationObserverFactory.create(o=>r.next(o));s&&s.observe(i,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(i,{observer:s,stream:r,count:1})}return this._observedElements.get(i).stream})}_unobserveElement(i){this._observedElements.has(i)&&(this._observedElements.get(i).count--,this._observedElements.get(i).count||this._cleanupObserver(i))}_cleanupObserver(i){if(this._observedElements.has(i)){let{observer:r,stream:s}=this._observedElements.get(i);r&&r.disconnect(),s.complete(),this._observedElements.delete(i)}}};t.\u0275fac=function(r){return new(r||t)(k(fA))},t.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),pA=(()=>{let t=class t{get disabled(){return this._disabled}set disabled(i){this._disabled=i,this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(i){this._debounce=xa(i),this._subscribe()}constructor(i,r){this._contentObserver=i,this._elementRef=r,this.event=new Se,this._disabled=!1,this._currentSubscription=null}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();let i=this._contentObserver.observe(this._elementRef);this._currentSubscription=(this.debounce?i.pipe(cl(this.debounce)):i).subscribe(this.event)}_unsubscribe(){this._currentSubscription?.unsubscribe()}};t.\u0275fac=function(r){return new(r||t)(N(zV),N(Ct))},t.\u0275dir=ht({type:t,selectors:[["","cdkObserveContent",""]],inputs:{disabled:[2,"cdkObserveContentDisabled","disabled",He],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"],standalone:!0,features:[pi]});let n=t;return n})(),vm=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=it({type:t}),t.\u0275inj=et({providers:[fA]});let n=t;return n})();var gA=new Set,Fs,qV=(()=>{let t=class t{constructor(i,r){this._platform=i,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):$V}matchMedia(i){return(this._platform.WEBKIT||this._platform.BLINK)&&GV(i,this._nonce),this._matchMedia(i)}};t.\u0275fac=function(r){return new(r||t)(k(ae),k(ml,8))},t.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function GV(n,t){if(!gA.has(n))try{Fs||(Fs=document.createElement("style"),t&&Fs.setAttribute("nonce",t),Fs.setAttribute("type","text/css"),document.head.appendChild(Fs)),Fs.sheet&&(Fs.sheet.insertRule(`@media ${n} {body{ }}`,0),gA.add(n))}catch(e){console.error(e)}}function $V(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}var vA=(()=>{let t=class t{constructor(i,r){this._mediaMatcher=i,this._zone=r,this._queries=new Map,this._destroySubject=new Et}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(i){return _A(jv(i)).some(s=>this._registerQuery(s).mql.matches)}observe(i){let s=_A(jv(i)).map(a=>this._registerQuery(a).observable),o=Vo(s);return o=ch(o.pipe(fi(1)),o.pipe(hh(1),cl(0))),o.pipe(X(a=>{let c={matches:!1,breakpoints:{}};return a.forEach(({matches:d,query:u})=>{c.matches=c.matches||d,c.breakpoints[u]=d}),c}))}_registerQuery(i){if(this._queries.has(i))return this._queries.get(i);let r=this._mediaMatcher.matchMedia(i),o={observable:new Oe(a=>{let c=d=>this._zone.run(()=>a.next(d));return r.addListener(c),()=>{r.removeListener(c)}}).pipe(hr(r),X(({matches:a})=>({query:i,matches:a})),Bi(this._destroySubject)),mql:r};return this._queries.set(i,o),o}};t.\u0275fac=function(r){return new(r||t)(k(qV),k(rt))},t.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function _A(n){return n.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}function Bv(n){return n.buttons===0||n.detail===0}function zv(n){let t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!t&&t.identifier===-1&&(t.radiusX==null||t.radiusX===1)&&(t.radiusY==null||t.radiusY===1)}var WV=new G("cdk-input-modality-detector-options"),HV={ignoreKeys:[18,17,224,91,16]},wA=650,Ta=Nr({passive:!0,capture:!0}),KV=(()=>{let t=class t{get mostRecentModality(){return this._modality.value}constructor(i,r,s,o){this._platform=i,this._mostRecentTarget=null,this._modality=new qe(null),this._lastTouchMs=0,this._onKeydown=a=>{this._options?.ignoreKeys?.some(c=>c===a.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=$n(a))},this._onMousedown=a=>{Date.now()-this._lastTouchMs<wA||(this._modality.next(Bv(a)?"keyboard":"mouse"),this._mostRecentTarget=$n(a))},this._onTouchstart=a=>{if(zv(a)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=$n(a)},this._options=F(F({},HV),o),this.modalityDetected=this._modality.pipe(hh(1)),this.modalityChanged=this.modalityDetected.pipe(jo()),i.isBrowser&&r.runOutsideAngular(()=>{s.addEventListener("keydown",this._onKeydown,Ta),s.addEventListener("mousedown",this._onMousedown,Ta),s.addEventListener("touchstart",this._onTouchstart,Ta)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Ta),document.removeEventListener("mousedown",this._onMousedown,Ta),document.removeEventListener("touchstart",this._onTouchstart,Ta))}};t.\u0275fac=function(r){return new(r||t)(k(ae),k(rt),k(kt),k(WV,8))},t.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var ym=function(n){return n[n.IMMEDIATE=0]="IMMEDIATE",n[n.EVENTUAL=1]="EVENTUAL",n}(ym||{}),QV=new G("cdk-focus-monitor-default-options"),bm=Nr({passive:!0,capture:!0}),IA=(()=>{let t=class t{constructor(i,r,s,o,a){this._ngZone=i,this._platform=r,this._inputModalityDetector=s,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Et,this._rootNodeFocusAndBlurListener=c=>{let d=$n(c);for(let u=d;u;u=u.parentElement)c.type==="focus"?this._onFocus(c,u):this._onBlur(c,u)},this._document=o,this._detectionMode=a?.detectionMode||ym.IMMEDIATE}monitor(i,r=!1){let s=Di(i);if(!this._platform.isBrowser||s.nodeType!==1)return tt();let o=hA(s)||this._getDocument(),a=this._elementInfo.get(s);if(a)return r&&(a.checkChildren=!0),a.subject;let c={checkChildren:r,subject:new Et,rootNode:o};return this._elementInfo.set(s,c),this._registerGlobalListeners(c),c.subject}stopMonitoring(i){let r=Di(i),s=this._elementInfo.get(r);s&&(s.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(s))}focusVia(i,r,s){let o=Di(i),a=this._getDocument().activeElement;o===a?this._getClosestElementsInfo(o).forEach(([c,d])=>this._originChanged(c,r,d)):(this._setOrigin(r),typeof o.focus=="function"&&o.focus(s))}ngOnDestroy(){this._elementInfo.forEach((i,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(i){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(i)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:i&&this._isLastInteractionFromInputLabel(i)?"mouse":"program"}_shouldBeAttributedToTouch(i){return this._detectionMode===ym.EVENTUAL||!!i?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(i,r){i.classList.toggle("cdk-focused",!!r),i.classList.toggle("cdk-touch-focused",r==="touch"),i.classList.toggle("cdk-keyboard-focused",r==="keyboard"),i.classList.toggle("cdk-mouse-focused",r==="mouse"),i.classList.toggle("cdk-program-focused",r==="program")}_setOrigin(i,r=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=i,this._originFromTouchInteraction=i==="touch"&&r,this._detectionMode===ym.IMMEDIATE){clearTimeout(this._originTimeoutId);let s=this._originFromTouchInteraction?wA:1;this._originTimeoutId=setTimeout(()=>this._origin=null,s)}})}_onFocus(i,r){let s=this._elementInfo.get(r),o=$n(i);!s||!s.checkChildren&&r!==o||this._originChanged(r,this._getFocusOrigin(o),s)}_onBlur(i,r){let s=this._elementInfo.get(r);!s||s.checkChildren&&i.relatedTarget instanceof Node&&r.contains(i.relatedTarget)||(this._setClasses(r),this._emitOrigin(s,null))}_emitOrigin(i,r){i.subject.observers.length&&this._ngZone.run(()=>i.subject.next(r))}_registerGlobalListeners(i){if(!this._platform.isBrowser)return;let r=i.rootNode,s=this._rootNodeFocusListenerCount.get(r)||0;s||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,bm),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,bm)}),this._rootNodeFocusListenerCount.set(r,s+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Bi(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(i){let r=i.rootNode;if(this._rootNodeFocusListenerCount.has(r)){let s=this._rootNodeFocusListenerCount.get(r);s>1?this._rootNodeFocusListenerCount.set(r,s-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,bm),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,bm),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(i,r,s){this._setClasses(i,r),this._emitOrigin(s,r),this._lastFocusOrigin=r}_getClosestElementsInfo(i){let r=[];return this._elementInfo.forEach((s,o)=>{(o===i||s.checkChildren&&o.contains(i))&&r.push([o,s])}),r}_isLastInteractionFromInputLabel(i){let{_mostRecentTarget:r,mostRecentModality:s}=this._inputModalityDetector;if(s!=="mouse"||!r||r===i||i.nodeName!=="INPUT"&&i.nodeName!=="TEXTAREA"||i.disabled)return!1;let o=i.labels;if(o){for(let a=0;a<o.length;a++)if(o[a].contains(r))return!0}return!1}};t.\u0275fac=function(r){return new(r||t)(k(rt),k(ae),k(KV),k(kt,8),k(QV,8))},t.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var Ls=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(Ls||{}),bA="cdk-high-contrast-black-on-white",yA="cdk-high-contrast-white-on-black",Uv="cdk-high-contrast-active",EA=(()=>{let t=class t{constructor(i,r){this._platform=i,this._document=r,this._breakpointSubscription=B(vA).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Ls.NONE;let i=this._document.createElement("div");i.style.backgroundColor="rgb(1,2,3)",i.style.position="absolute",this._document.body.appendChild(i);let r=this._document.defaultView||window,s=r&&r.getComputedStyle?r.getComputedStyle(i):null,o=(s&&s.backgroundColor||"").replace(/ /g,"");switch(i.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Ls.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Ls.BLACK_ON_WHITE}return Ls.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let i=this._document.body.classList;i.remove(Uv,bA,yA),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===Ls.BLACK_ON_WHITE?i.add(Uv,bA):r===Ls.WHITE_ON_BLACK&&i.add(Uv,yA)}}};t.\u0275fac=function(r){return new(r||t)(k(ae),k(kt))},t.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var XV=new G("cdk-dir-doc",{providedIn:"root",factory:ZV});function ZV(){return B(kt)}var JV=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function t2(n){let t=n?.toLowerCase()||"";return t==="auto"&&typeof navigator<"u"&&navigator?.language?JV.test(navigator.language)?"rtl":"ltr":t==="rtl"?"rtl":"ltr"}var xA=(()=>{let t=class t{constructor(i){if(this.value="ltr",this.change=new Se,i){let r=i.body?i.body.dir:null,s=i.documentElement?i.documentElement.dir:null;this.value=t2(r||s||"ltr")}}ngOnDestroy(){this.change.complete()}};t.\u0275fac=function(r){return new(r||t)(k(XV,8))},t.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var qv=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=it({type:t}),t.\u0275inj=et({});let n=t;return n})();function i2(){return!0}var n2=new G("mat-sanity-checks",{providedIn:"root",factory:i2}),te=(()=>{let t=class t{constructor(i,r,s){this._sanityChecks=r,this._document=s,this._hasDoneGlobalChecks=!1,i._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(i){return mA()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[i]}};t.\u0275fac=function(r){return new(r||t)(k(EA),k(n2,8),k(kt))},t.\u0275mod=it({type:t}),t.\u0275inj=et({imports:[qv,qv]});let n=t;return n})();var Im=class{constructor(t,e,i,r,s){this._defaultMatcher=t,this.ngControl=e,this._parentFormGroup=i,this._parentForm=r,this._stateChanges=s,this.errorState=!1}updateErrorState(){let t=this.errorState,e=this._parentFormGroup||this._parentForm,i=this.matcher||this._defaultMatcher,r=this.ngControl?this.ngControl.control:null,s=i?.isErrorState(r,e)??!1;s!==t&&(this.errorState=s,this._stateChanges.next())}};var MA=(()=>{let t=class t{isErrorState(i,r){return!!(i&&i.invalid&&(i.touched||r&&r.submitted))}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var Pi=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(Pi||{}),Wv=class{constructor(t,e,i,r=!1){this._renderer=t,this.element=e,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=Pi.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},TA=Nr({passive:!0,capture:!0}),Hv=class{constructor(){this._events=new Map,this._delegateEventHandler=t=>{let e=$n(t);e&&this._events.get(t.type)?.forEach((i,r)=>{(r===e||r.contains(e))&&i.forEach(s=>s.handleEvent(t))})}}addHandler(t,e,i,r){let s=this._events.get(e);if(s){let o=s.get(i);o?o.add(r):s.set(i,new Set([r]))}else this._events.set(e,new Map([[i,new Set([r])]])),t.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,TA)})}removeHandler(t,e,i){let r=this._events.get(t);if(!r)return;let s=r.get(e);s&&(s.delete(i),s.size===0&&r.delete(e),r.size===0&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,TA)))}},CA={enterDuration:225,exitDuration:150},r2=800,AA=Nr({passive:!0,capture:!0}),SA=["mousedown","touchstart"],kA=["mouseup","mouseleave","touchend","touchcancel"],bd=class bd{constructor(t,e,i,r){this._target=t,this._ngZone=e,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Di(i))}fadeInRipple(t,e,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=F(F({},CA),i.animation);i.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);let o=i.radius||s2(t,e,r),a=t-r.left,c=e-r.top,d=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=`${a-o}px`,u.style.top=`${c-o}px`,u.style.height=`${o*2}px`,u.style.width=`${o*2}px`,i.color!=null&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${d}ms`,this._containerElement.appendChild(u);let m=window.getComputedStyle(u),p=m.transitionProperty,_=m.transitionDuration,w=p==="none"||_==="0s"||_==="0s, 0s"||r.width===0&&r.height===0,A=new Wv(this,u,i,w);u.style.transform="scale3d(1, 1, 1)",A.state=Pi.FADING_IN,i.persistent||(this._mostRecentTransientRipple=A);let x=null;return!w&&(d||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let V=()=>{x&&(x.fallbackTimer=null),clearTimeout(j),this._finishRippleTransition(A)},H=()=>this._destroyRipple(A),j=setTimeout(H,d+100);u.addEventListener("transitionend",V),u.addEventListener("transitioncancel",H),x={onTransitionEnd:V,onTransitionCancel:H,fallbackTimer:j}}),this._activeRipples.set(A,x),(w||!d)&&this._finishRippleTransition(A),A}fadeOutRipple(t){if(t.state===Pi.FADING_OUT||t.state===Pi.HIDDEN)return;let e=t.element,i=F(F({},CA),t.config.animation);e.style.transitionDuration=`${i.exitDuration}ms`,e.style.opacity="0",t.state=Pi.FADING_OUT,(t._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){let e=Di(t);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,SA.forEach(i=>{bd._eventManager.addHandler(this._ngZone,i,e,this)}))}handleEvent(t){t.type==="mousedown"?this._onMousedown(t):t.type==="touchstart"?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{kA.forEach(e=>{this._triggerElement.addEventListener(e,this,AA)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){t.state===Pi.FADING_IN?this._startFadeOutTransition(t):t.state===Pi.FADING_OUT&&this._destroyRipple(t)}_startFadeOutTransition(t){let e=t===this._mostRecentTransientRipple,{persistent:i}=t.config;t.state=Pi.VISIBLE,!i&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){let e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=Pi.HIDDEN,e!==null&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel),e.fallbackTimer!==null&&clearTimeout(e.fallbackTimer)),t.element.remove()}_onMousedown(t){let e=Bv(t),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+r2;!this._target.rippleDisabled&&!e&&!i&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!zv(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let e=t.changedTouches;if(e)for(let i=0;i<e.length;i++)this.fadeInRipple(e[i].clientX,e[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{let e=t.state===Pi.VISIBLE||t.config.terminateOnPointerUp&&t.state===Pi.FADING_IN;!t.config.persistent&&e&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let t=this._triggerElement;t&&(SA.forEach(e=>bd._eventManager.removeHandler(e,t,this)),this._pointerUpEventsRegistered&&(kA.forEach(e=>t.removeEventListener(e,this,AA)),this._pointerUpEventsRegistered=!1))}};bd._eventManager=new Hv;var yd=bd;function s2(n,t,e){let i=Math.max(Math.abs(n-e.left),Math.abs(n-e.right)),r=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(i*i+r*r)}var wd=new G("mat-ripple-global-options"),o2=(()=>{let t=class t{get disabled(){return this._disabled}set disabled(i){i&&this.fadeOutAllNonPersistent(),this._disabled=i,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(i){this._trigger=i,this._setupTriggerEventsIfEnabled()}constructor(i,r,s,o,a){this._elementRef=i,this._animationMode=a,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new yd(this,r,i,s)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:F(F(F({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(i,r=0,s){return typeof i=="number"?this._rippleRenderer.fadeInRipple(i,r,F(F({},this.rippleConfig),s)):this._rippleRenderer.fadeInRipple(0,0,F(F({},this.rippleConfig),i))}};t.\u0275fac=function(r){return new(r||t)(N(Ct),N(rt),N(ae),N(wd,8),N(Je,8))},t.\u0275dir=ht({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,s){r&2&&Bt("mat-ripple-unbounded",s.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0});let n=t;return n})(),Em=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=it({type:t}),t.\u0275inj=et({imports:[te,te]});let n=t;return n})();var NA=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=it({type:t}),t.\u0275inj=et({imports:[te]});let n=t;return n})();var RA={capture:!0},DA=["focus","mousedown","mouseenter","touchstart"],Gv="mat-ripple-loader-uninitialized",$v="mat-ripple-loader-class-name",PA="mat-ripple-loader-centered",wm="mat-ripple-loader-disabled",OA=(()=>{let t=class t{constructor(){this._document=B(kt,{optional:!0}),this._animationMode=B(Je,{optional:!0}),this._globalRippleOptions=B(wd,{optional:!0}),this._platform=B(ae),this._ngZone=B(rt),this._hosts=new Map,this._onInteraction=i=>{let r=$n(i);if(r instanceof HTMLElement){let s=r.closest(`[${Gv}="${this._globalRippleOptions?.namespace??""}"]`);s&&this._createRipple(s)}},this._ngZone.runOutsideAngular(()=>{for(let i of DA)this._document?.addEventListener(i,this._onInteraction,RA)})}ngOnDestroy(){let i=this._hosts.keys();for(let r of i)this.destroyRipple(r);for(let r of DA)this._document?.removeEventListener(r,this._onInteraction,RA)}configureRipple(i,r){i.setAttribute(Gv,this._globalRippleOptions?.namespace??""),(r.className||!i.hasAttribute($v))&&i.setAttribute($v,r.className||""),r.centered&&i.setAttribute(PA,""),r.disabled&&i.setAttribute(wm,"")}getRipple(i){return this._hosts.get(i)||this._createRipple(i)}setDisabled(i,r){let s=this._hosts.get(i);if(s){s.disabled=r;return}r?i.setAttribute(wm,""):i.removeAttribute(wm)}_createRipple(i){if(!this._document)return;let r=this._hosts.get(i);if(r)return r;i.querySelector(".mat-ripple")?.remove();let s=this._document.createElement("span");s.classList.add("mat-ripple",i.getAttribute($v)),i.append(s);let o=new o2(new Ct(s),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return o._isInitialized=!0,o.trigger=i,o.centered=i.hasAttribute(PA),o.disabled=i.hasAttribute(wm),this.attachRipple(i,o),o}attachRipple(i,r){i.removeAttribute(Gv),this._hosts.set(i,r)}destroyRipple(i){let r=this._hosts.get(i);r&&(r.ngOnDestroy(),this._hosts.delete(i))}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var c2=["mat-button",""],l2=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],d2=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var u2=".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}";var h2=["mat-icon-button",""],m2=["*"];var f2=new G("MAT_BUTTON_CONFIG");var p2=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],FA=(()=>{let t=class t{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(i){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,i)}get disableRipple(){return this._disableRipple}set disableRipple(i){this._disableRipple=i,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(i){this._disabled=i,this._updateRippleDisabled()}constructor(i,r,s,o){this._elementRef=i,this._platform=r,this._ngZone=s,this._animationMode=o,this._focusMonitor=B(IA),this._rippleLoader=B(OA),this._isFab=!1,this._disableRipple=!1,this._disabled=!1;let a=B(f2,{optional:!0}),c=i.nativeElement,d=c.classList;this.disabledInteractive=a?.disabledInteractive??!1,this.color=a?.color??null,this._rippleLoader?.configureRipple(c,{className:"mat-mdc-button-ripple"});for(let{attribute:u,mdcClasses:m}of p2)c.hasAttribute(u)&&d.add(...m)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(i="program",r){i?this._focusMonitor.focusVia(this._elementRef.nativeElement,i,r):this._elementRef.nativeElement.focus(r)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}};t.\u0275fac=function(r){$o()},t.\u0275dir=ht({type:t,inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",He],disabled:[2,"disabled","disabled",He],ariaDisabled:[2,"aria-disabled","ariaDisabled",He],disabledInteractive:[2,"disabledInteractive","disabledInteractive",He]},features:[pi]});let n=t;return n})();var Fr=(()=>{let t=class t extends FA{constructor(i,r,s,o){super(i,r,s,o)}};t.\u0275fac=function(r){return new(r||t)(N(Ct),N(ae),N(rt),N(Je,8))},t.\u0275cmp=xt({type:t,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(r,s){r&2&&(Vt("disabled",s._getDisabledAttribute())("aria-disabled",s._getAriaDisabled()),$e(s.color?"mat-"+s.color:""),Bt("mat-mdc-button-disabled",s.disabled)("mat-mdc-button-disabled-interactive",s.disabledInteractive)("_mat-animation-noopable",s._animationMode==="NoopAnimations")("mat-unthemed",!s.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[Ge,oe],attrs:c2,ngContentSelectors:d2,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,s){r&1&&(ei(l2),vt(0,"span",0),Ot(1),U(2,"span",1),Ot(3,1),z(),Ot(4,2),vt(5,"span",2)(6,"span",3)),r&2&&Bt("mdc-button__ripple",!s._isFab)("mdc-fab__ripple",s._isFab)},styles:['.mat-mdc-button-base{text-decoration:none}.mdc-button{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0);padding:0 8px}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__label{position:relative}.mat-mdc-button{padding:0 var(--mat-text-button-horizontal-padding, 8px);height:var(--mdc-text-button-container-height);font-family:var(--mdc-text-button-label-text-font, var(--mat-app-label-large-font));font-size:var(--mdc-text-button-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mdc-text-button-label-text-tracking, var(--mat-app-label-large-tracking));text-transform:var(--mdc-text-button-label-text-transform);font-weight:var(--mdc-text-button-label-text-weight, var(--mat-app-label-large-weight))}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 8px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color)}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color, var(--mat-app-primary))}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display)}.mat-mdc-button,.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mat-app-corner-full))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, var(--mat-app-primary))}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-unelevated-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 var(--mat-filled-button-horizontal-padding, 16px);height:var(--mdc-filled-button-container-height);font-family:var(--mdc-filled-button-label-text-font, var(--mat-app-label-large-font));font-size:var(--mdc-filled-button-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mdc-filled-button-label-text-tracking, var(--mat-app-label-large-tracking));text-transform:var(--mdc-filled-button-label-text-transform);font-weight:var(--mdc-filled-button-label-text-weight, var(--mat-app-label-large-weight))}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color)}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color, var(--mat-app-on-primary))}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, var(--mat-app-on-primary));background-color:var(--mdc-filled-button-container-color, var(--mat-app-primary))}.mat-mdc-unelevated-button,.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mat-app-corner-full))}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color);background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 var(--mat-protected-button-horizontal-padding, 16px);box-shadow:var(--mdc-protected-button-container-elevation-shadow, var(--mat-app-level1));height:var(--mdc-protected-button-container-height);font-family:var(--mdc-protected-button-label-text-font, var(--mat-app-label-large-font));font-size:var(--mdc-protected-button-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mdc-protected-button-label-text-tracking, var(--mat-app-label-large-tracking));text-transform:var(--mdc-protected-button-label-text-transform);font-weight:var(--mdc-protected-button-label-text-weight, var(--mat-app-label-large-weight))}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color)}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color, var(--mat-app-primary))}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, var(--mat-app-primary));background-color:var(--mdc-protected-button-container-color, var(--mat-app-surface))}.mat-mdc-raised-button,.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mat-app-corner-full))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow, var(--mat-app-level2))}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow, var(--mat-app-level1))}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow, var(--mat-app-level1))}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color);background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow, var(--mat-app-level0))}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 var(--mat-outlined-button-horizontal-padding, 15px);height:var(--mdc-outlined-button-container-height);font-family:var(--mdc-outlined-button-label-text-font, var(--mat-app-label-large-font));font-size:var(--mdc-outlined-button-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mdc-outlined-button-label-text-tracking, var(--mat-app-label-large-tracking));text-transform:var(--mdc-outlined-button-label-text-transform);font-weight:var(--mdc-outlined-button-label-text-weight, var(--mat-app-label-large-weight));border-radius:var(--mdc-outlined-button-container-shape, var(--mat-app-corner-full));border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color)}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color, var(--mat-app-primary))}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, var(--mat-app-primary));border-color:var(--mdc-outlined-button-outline-color, var(--mat-app-outline))}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color);border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button .mdc-button__ripple{border-width:var(--mdc-outlined-button-outline-width);border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-button .mat-icon,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-unelevated-button .mat-icon,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-raised-button .mat-icon,.mat-mdc-outlined-button .mdc-button__label,.mat-mdc-outlined-button .mat-icon{z-index:1;position:relative}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px)*-1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0});let n=t;return n})();var LA=(()=>{let t=class t extends FA{constructor(i,r,s,o){super(i,r,s,o),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}};t.\u0275fac=function(r){return new(r||t)(N(Ct),N(ae),N(rt),N(Je,8))},t.\u0275cmp=xt({type:t,selectors:[["button","mat-icon-button",""]],hostVars:14,hostBindings:function(r,s){r&2&&(Vt("disabled",s._getDisabledAttribute())("aria-disabled",s._getAriaDisabled()),$e(s.color?"mat-"+s.color:""),Bt("mat-mdc-button-disabled",s.disabled)("mat-mdc-button-disabled-interactive",s.disabledInteractive)("_mat-animation-noopable",s._animationMode==="NoopAnimations")("mat-unthemed",!s.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[Ge,oe],attrs:h2,ngContentSelectors:m2,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,s){r&1&&(ei(),vt(0,"span",0),Ot(1),vt(2,"span",1)(3,"span",2))},styles:['.mat-mdc-icon-button{-webkit-user-select:none;user-select:none;display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;z-index:0;overflow:visible;border-radius:50%;flex-shrink:0;text-align:center;width:var(--mdc-icon-button-state-layer-size, 48px);height:var(--mdc-icon-button-state-layer-size, 48px);padding:calc(calc(var(--mdc-icon-button-state-layer-size, 48px) - var(--mdc-icon-button-icon-size, 24px)) / 2);font-size:var(--mdc-icon-button-icon-size);color:var(--mdc-icon-button-icon-color, var(--mat-app-on-surface-variant));-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button img,.mat-mdc-icon-button svg{width:var(--mdc-icon-button-icon-size);height:var(--mdc-icon-button-icon-size);vertical-align:baseline}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label,.mat-mdc-icon-button .mat-icon{z-index:1;position:relative}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color)}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-icon-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-icon-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-icon-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-icon-button-touch-target-display)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button[hidden]{display:none}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',u2],encapsulation:2,changeDetection:0});let n=t;return n})();var Lr=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=it({type:t}),t.\u0275inj=et({imports:[te,Em,te]});let n=t;return n})();function g2(n,t){n&1&&(U(0,"small",20),dt(1,"Username is required."),z())}function _2(n,t){n&1&&(U(0,"small",20),dt(1,"Username must be at least 3 characters long."),z())}function v2(n,t){if(n&1&&(U(0,"div"),_t(1,g2,2,0,"small",19)(2,_2,2,0,"small",19),z()),n&2){let e,i,r=St();Y(),ot("ngIf",(e=r.loginForm.get("username"))==null||e.errors==null?null:e.errors.required),Y(),ot("ngIf",(i=r.loginForm.get("username"))==null||i.errors==null?null:i.errors.minlength)}}function b2(n,t){n&1&&(U(0,"small",20),dt(1,"Password is required."),z())}function y2(n,t){n&1&&(U(0,"small",20),dt(1,"Password must be at least 6 characters long."),z())}function w2(n,t){if(n&1&&(U(0,"div"),_t(1,b2,2,0,"small",19)(2,y2,2,0,"small",19),z()),n&2){let e,i,r=St();Y(),ot("ngIf",(e=r.loginForm.get("password"))==null||e.errors==null?null:e.errors.required),Y(),ot("ngIf",(i=r.loginForm.get("password"))==null||i.errors==null?null:i.errors.minlength)}}var Ca=class Ca{constructor(t,e,i){this.fb=t;this.authService=e;this.router=i;this.email="";this.password="";this.loginForm=this.fb.group({username:["",[Le.required,Le.minLength(3)]],password:["",[Le.required,Le.minLength(6)]]})}login(){return D(this,null,function*(){try{yield this.authService.login(this.email,this.password),this.router.navigate(["/todos"])}catch(t){console.error("Login failed",t)}})}googleLogin(){this.authService.googleSignIn()}navigateToRegister(){this.router.navigate(["/register"])}};Ca.\u0275fac=function(e){return new(e||Ca)(N(va),N(Mr),N(Re))},Ca.\u0275cmp=xt({type:Ca,selectors:[["app-login"]],decls:28,vars:6,consts:[[1,"login-container"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","username"],["type","email","id","username","formControlName","username",1,"form-control",3,"ngModelChange","ngModel"],[4,"ngIf"],["for","password"],["type","password","id","password","formControlName","password",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-primary",3,"disabled"],[2,"margin","25px"],["mat-button","","type","button",1,"w-100",2,"background-color","white","box-shadow","0 4px 4px rgba(0, 0, 0, 0.1)","padding","15px",3,"click"],[2,"display","flex","align-items","center","justify-content","center","padding-left","25px","width","100%"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 32 32","aria-hidden","true","role","presentation","focusable","false",2,"display","block","height","20px","width","20px"],["fill","#4285f4","d","M24.12 25c2.82-2.63 4.07-7 3.32-11.19H16.25v4.63h6.37A5.26 5.26 0 0 1 20.25 22z"],["fill","#34a853","d","M5.62 21.31A12 12 0 0 0 24.12 25l-3.87-3a7.16 7.16 0 0 1-10.69-3.75z"],["fill","#fbbc02","d","M9.56 18.25c-.5-1.56-.5-3 0-4.56l-3.94-3.07a12.08 12.08 0 0 0 0 10.7z"],["fill","#ea4335","d","M9.56 13.69c1.38-4.32 7.25-6.82 11.19-3.13l3.44-3.37a11.8 11.8 0 0 0-18.57 3.43l3.94 3.07z"],[2,"font-size","15px","color","black","width","300px"],["mat-button","",2,"width","100%","background-color","white","box-shadow","0 4px 4px rgba(0, 0, 0, 0.1)","padding","15px","margin-top","25px",3,"click"],["class","text-danger",4,"ngIf"],[1,"text-danger"]],template:function(e,i){if(e&1&&(U(0,"div",0)(1,"h2"),dt(2,"Login"),z(),U(3,"form",1),Nt("ngSubmit",function(){return i.login()}),U(4,"div",2)(5,"label",3),dt(6,"Username"),z(),U(7,"input",4),Yo("ngModelChange",function(s){return Qo(i.email,s)||(i.email=s),s}),z(),_t(8,v2,3,2,"div",5),z(),U(9,"div",2)(10,"label",6),dt(11,"Password"),z(),U(12,"input",7),Yo("ngModelChange",function(s){return Qo(i.password,s)||(i.password=s),s}),z(),_t(13,w2,3,2,"div",5),z(),U(14,"button",8),dt(15,"Login"),z()(),U(16,"div",9)(17,"button",10),Nt("click",function(){return i.googleLogin()}),U(18,"div",11),pr(),U(19,"svg",12),vt(20,"path",13)(21,"path",14)(22,"path",15)(23,"path",16),z(),ws(),U(24,"span",17),dt(25,"Login with Google"),z()()(),U(26,"button",18),Nt("click",function(){return i.navigateToRegister()}),dt(27,"Don't have an account? Register"),z()()()),e&2){let r,s;Y(3),ot("formGroup",i.loginForm),Y(4),Ko("ngModel",i.email),Y(),ot("ngIf",((r=i.loginForm.get("username"))==null?null:r.invalid)&&(((r=i.loginForm.get("username"))==null?null:r.touched)||((r=i.loginForm.get("username"))==null?null:r.dirty))),Y(4),Ko("ngModel",i.password),Y(),ot("ngIf",((s=i.loginForm.get("password"))==null?null:s.invalid)&&(((s=i.loginForm.get("password"))==null?null:s.touched)||((s=i.loginForm.get("password"))==null?null:s.dirty))),Y(),ot("disabled",i.loginForm.invalid)}},dependencies:[Gi,_a,Sr,pa,ga,zn,Ps,Fr],styles:[".login-container[_ngcontent-%COMP%]{max-width:400px;margin:0 auto;padding:20px;border:1px solid #ccc;border-radius:8px;background-color:#f9f9f9}.login-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;font-size:24px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #ccc;border-radius:4px}.form-group[_ngcontent-%COMP%]   .text-danger[_ngcontent-%COMP%]{color:#dc3545;font-size:.875em}button[_ngcontent-%COMP%]{width:100%;padding:10px;background-color:#007bff;color:#fff;border:none;border-radius:4px;font-size:16px;cursor:pointer}button[_ngcontent-%COMP%]:disabled{background-color:#6c757d}button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0056b3}.google-login-btn[_ngcontent-%COMP%]{background-color:#4285f4;color:#fff;width:100%;height:48px;border-radius:4px;font-size:16px;display:flex;align-items:center;justify-content:center}.google-icon[_ngcontent-%COMP%]{font-size:24px;margin-right:8px}.google-login-btn[_ngcontent-%COMP%]:hover{background-color:#357ae8}.mdc-button__label[_ngcontent-%COMP%]{width:100%!important}"]});var Tm=Ca;function I2(n,t){n&1&&(U(0,"small"),dt(1,"Email is required"),z())}function E2(n,t){n&1&&(U(0,"small"),dt(1,"Invalid email format"),z())}function x2(n,t){if(n&1&&(U(0,"div"),_t(1,I2,2,0,"small",5)(2,E2,2,0,"small",5),z()),n&2){let e,i,r=St();Y(),ot("ngIf",(e=r.registerForm.get("email"))==null?null:e.hasError("required")),Y(),ot("ngIf",(i=r.registerForm.get("email"))==null?null:i.hasError("email"))}}function T2(n,t){n&1&&(U(0,"small"),dt(1,"Password is required"),z())}function C2(n,t){n&1&&(U(0,"small"),dt(1,"Password must be at least 6 characters long"),z())}function A2(n,t){if(n&1&&(U(0,"div"),_t(1,T2,2,0,"small",5)(2,C2,2,0,"small",5),z()),n&2){let e,i,r=St();Y(),ot("ngIf",(e=r.registerForm.get("password"))==null?null:e.hasError("required")),Y(),ot("ngIf",(i=r.registerForm.get("password"))==null?null:i.hasError("minlength"))}}function S2(n,t){n&1&&(U(0,"div")(1,"small"),dt(2,"Passwords do not match"),z()())}var Sa=class Sa{constructor(t,e,i){this.fb=t;this.authService=e;this.router=i;this.loading=!1;this.error=null;this.email="";this.password="";this.registerForm=this.fb.group({email:["",[Le.required,Le.email]],password:["",[Le.required,Le.minLength(6)]],confirmPassword:["",[Le.required]]},{validators:this.passwordMatchValidator})}passwordMatchValidator(t){let e=t.get("password")?.value,i=t.get("confirmPassword")?.value;return e===i?null:{mismatch:!0}}onSubmit(){return D(this,null,function*(){if(this.registerForm.invalid)return;this.loading=!0,this.error=null;let{email:t,password:e}=this.registerForm.value;try{yield this.authService.register(t,e),this.router.navigate(["/todos"])}catch(i){this.error="Registration failed. Please try again.",console.error(i)}finally{this.loading=!1}})}googleRegister(){this.authService.googleSignIn()}navigateToLogin(){this.router.navigate(["/login"])}};Sa.\u0275fac=function(e){return new(e||Sa)(N(va),N(Mr),N(Re))},Sa.\u0275cmp=xt({type:Sa,selectors:[["app-register"]],decls:33,vars:7,consts:[[1,"register-container"],[1,"register-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","email"],["id","email","formControlName","email","type","email","placeholder","Email",3,"ngModelChange","ngModel"],[4,"ngIf"],["for","password"],["id","password","formControlName","password","type","password","placeholder","Password",3,"ngModelChange","ngModel"],["for","confirmPassword"],["id","confirmPassword","formControlName","confirmPassword","type","password","placeholder","Confirm Password"],["type","submit",3,"disabled"],[2,"margin","25px"],["mat-button","","type","button",1,"w-100",2,"background-color","white","box-shadow","0 4px 4px rgba(0, 0, 0, 0.1)","padding","15px",3,"click"],[2,"display","flex","align-items","center","justify-content","center","padding-left","25px","width","100%"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 32 32","aria-hidden","true","role","presentation","focusable","false",2,"display","block","height","20px","width","20px"],["fill","#4285f4","d","M24.12 25c2.82-2.63 4.07-7 3.32-11.19H16.25v4.63h6.37A5.26 5.26 0 0 1 20.25 22z"],["fill","#34a853","d","M5.62 21.31A12 12 0 0 0 24.12 25l-3.87-3a7.16 7.16 0 0 1-10.69-3.75z"],["fill","#fbbc02","d","M9.56 18.25c-.5-1.56-.5-3 0-4.56l-3.94-3.07a12.08 12.08 0 0 0 0 10.7z"],["fill","#ea4335","d","M9.56 13.69c1.38-4.32 7.25-6.82 11.19-3.13l3.44-3.37a11.8 11.8 0 0 0-18.57 3.43l3.94 3.07z"],[2,"font-size","15px","color","black","width","300px"],["mat-button","",2,"background-color","white","box-shadow","0 4px 4px rgba(0, 0, 0, 0.1)","padding","15px","margin-top","25px",3,"click"]],template:function(e,i){if(e&1&&(U(0,"div",0)(1,"h2"),dt(2,"Register"),z(),U(3,"form",1),Nt("ngSubmit",function(){return i.onSubmit()}),U(4,"div",2)(5,"label",3),dt(6,"Email"),z(),U(7,"input",4),Yo("ngModelChange",function(s){return Qo(i.email,s)||(i.email=s),s}),z(),_t(8,x2,3,2,"div",5),z(),U(9,"div",2)(10,"label",6),dt(11,"Password"),z(),U(12,"input",7),Yo("ngModelChange",function(s){return Qo(i.password,s)||(i.password=s),s}),z(),_t(13,A2,3,2,"div",5),z(),U(14,"div",2)(15,"label",8),dt(16,"Confirm Password"),z(),vt(17,"input",9),_t(18,S2,3,0,"div",5),z(),U(19,"button",10),dt(20,"Register"),z()(),U(21,"div",11)(22,"button",12),Nt("click",function(){return i.googleRegister()}),U(23,"div",13),pr(),U(24,"svg",14),vt(25,"path",15)(26,"path",16)(27,"path",17)(28,"path",18),z(),ws(),U(29,"span",19),dt(30,"Register with Google"),z()()(),U(31,"button",20),Nt("click",function(){return i.navigateToLogin()}),dt(32,"Already have an account? Login"),z()()()),e&2){let r,s,o;Y(3),ot("formGroup",i.registerForm),Y(4),Ko("ngModel",i.email),Y(),ot("ngIf",((r=i.registerForm.get("email"))==null?null:r.invalid)&&((r=i.registerForm.get("email"))==null?null:r.touched)),Y(4),Ko("ngModel",i.password),Y(),ot("ngIf",((s=i.registerForm.get("password"))==null?null:s.invalid)&&((s=i.registerForm.get("password"))==null?null:s.touched)),Y(5),ot("ngIf",(i.registerForm.errors==null?null:i.registerForm.errors.mismatch)&&((o=i.registerForm.get("confirmPassword"))==null?null:o.touched)),Y(),ot("disabled",i.registerForm.invalid)}},dependencies:[Gi,_a,Sr,pa,ga,zn,Ps,Fr],styles:[".register-container[_ngcontent-%COMP%]{max-width:400px;margin:20px auto;padding:20px;border:1px solid #ddd;border-radius:8px;background-color:#f9f9f9;box-shadow:0 4px 8px #0000001a}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.register-form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #ddd;border-radius:4px}.form-group[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#dc3545}button[_ngcontent-%COMP%]{padding:10px 15px;background-color:#007bff;color:#fff;border:none;border-radius:4px;cursor:pointer}button[_ngcontent-%COMP%]:disabled{background-color:#6c757d}button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0056b3}.google-login-btn[_ngcontent-%COMP%]{background-color:#4285f4;color:#fff;width:100%;height:48px;border-radius:4px;font-size:16px;display:flex;align-items:center;justify-content:center}.google-icon[_ngcontent-%COMP%]{font-size:24px;margin-right:8px}.google-login-btn[_ngcontent-%COMP%]:hover{background-color:#357ae8}.mdc-button__label[_ngcontent-%COMP%]{width:100%!important}"]});var Cm=Sa;var VA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},jA={};var Vr,Kv;(function(){var n;function t(I,v){function y(){}y.prototype=v.prototype,I.D=v.prototype,I.prototype=new y,I.prototype.constructor=I,I.C=function(E,T,S){for(var b=Array(arguments.length-2),Tn=2;Tn<arguments.length;Tn++)b[Tn-2]=arguments[Tn];return v.prototype[T].apply(E,b)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,e),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,v,y){y||(y=0);var E=Array(16);if(typeof v=="string")for(var T=0;16>T;++T)E[T]=v.charCodeAt(y++)|v.charCodeAt(y++)<<8|v.charCodeAt(y++)<<16|v.charCodeAt(y++)<<24;else for(T=0;16>T;++T)E[T]=v[y++]|v[y++]<<8|v[y++]<<16|v[y++]<<24;v=I.g[0],y=I.g[1],T=I.g[2];var S=I.g[3],b=v+(S^y&(T^S))+E[0]+3614090360&4294967295;v=y+(b<<7&4294967295|b>>>25),b=S+(T^v&(y^T))+E[1]+3905402710&4294967295,S=v+(b<<12&4294967295|b>>>20),b=T+(y^S&(v^y))+E[2]+606105819&4294967295,T=S+(b<<17&4294967295|b>>>15),b=y+(v^T&(S^v))+E[3]+3250441966&4294967295,y=T+(b<<22&4294967295|b>>>10),b=v+(S^y&(T^S))+E[4]+4118548399&4294967295,v=y+(b<<7&4294967295|b>>>25),b=S+(T^v&(y^T))+E[5]+1200080426&4294967295,S=v+(b<<12&4294967295|b>>>20),b=T+(y^S&(v^y))+E[6]+2821735955&4294967295,T=S+(b<<17&4294967295|b>>>15),b=y+(v^T&(S^v))+E[7]+4249261313&4294967295,y=T+(b<<22&4294967295|b>>>10),b=v+(S^y&(T^S))+E[8]+1770035416&4294967295,v=y+(b<<7&4294967295|b>>>25),b=S+(T^v&(y^T))+E[9]+2336552879&4294967295,S=v+(b<<12&4294967295|b>>>20),b=T+(y^S&(v^y))+E[10]+4294925233&4294967295,T=S+(b<<17&4294967295|b>>>15),b=y+(v^T&(S^v))+E[11]+2304563134&4294967295,y=T+(b<<22&4294967295|b>>>10),b=v+(S^y&(T^S))+E[12]+1804603682&4294967295,v=y+(b<<7&4294967295|b>>>25),b=S+(T^v&(y^T))+E[13]+4254626195&4294967295,S=v+(b<<12&4294967295|b>>>20),b=T+(y^S&(v^y))+E[14]+2792965006&4294967295,T=S+(b<<17&4294967295|b>>>15),b=y+(v^T&(S^v))+E[15]+1236535329&4294967295,y=T+(b<<22&4294967295|b>>>10),b=v+(T^S&(y^T))+E[1]+4129170786&4294967295,v=y+(b<<5&4294967295|b>>>27),b=S+(y^T&(v^y))+E[6]+3225465664&4294967295,S=v+(b<<9&4294967295|b>>>23),b=T+(v^y&(S^v))+E[11]+643717713&4294967295,T=S+(b<<14&4294967295|b>>>18),b=y+(S^v&(T^S))+E[0]+3921069994&4294967295,y=T+(b<<20&4294967295|b>>>12),b=v+(T^S&(y^T))+E[5]+3593408605&4294967295,v=y+(b<<5&4294967295|b>>>27),b=S+(y^T&(v^y))+E[10]+38016083&4294967295,S=v+(b<<9&4294967295|b>>>23),b=T+(v^y&(S^v))+E[15]+3634488961&4294967295,T=S+(b<<14&4294967295|b>>>18),b=y+(S^v&(T^S))+E[4]+3889429448&4294967295,y=T+(b<<20&4294967295|b>>>12),b=v+(T^S&(y^T))+E[9]+568446438&4294967295,v=y+(b<<5&4294967295|b>>>27),b=S+(y^T&(v^y))+E[14]+3275163606&4294967295,S=v+(b<<9&4294967295|b>>>23),b=T+(v^y&(S^v))+E[3]+4107603335&4294967295,T=S+(b<<14&4294967295|b>>>18),b=y+(S^v&(T^S))+E[8]+1163531501&4294967295,y=T+(b<<20&4294967295|b>>>12),b=v+(T^S&(y^T))+E[13]+2850285829&4294967295,v=y+(b<<5&4294967295|b>>>27),b=S+(y^T&(v^y))+E[2]+4243563512&4294967295,S=v+(b<<9&4294967295|b>>>23),b=T+(v^y&(S^v))+E[7]+1735328473&4294967295,T=S+(b<<14&4294967295|b>>>18),b=y+(S^v&(T^S))+E[12]+2368359562&4294967295,y=T+(b<<20&4294967295|b>>>12),b=v+(y^T^S)+E[5]+4294588738&4294967295,v=y+(b<<4&4294967295|b>>>28),b=S+(v^y^T)+E[8]+2272392833&4294967295,S=v+(b<<11&4294967295|b>>>21),b=T+(S^v^y)+E[11]+1839030562&4294967295,T=S+(b<<16&4294967295|b>>>16),b=y+(T^S^v)+E[14]+4259657740&4294967295,y=T+(b<<23&4294967295|b>>>9),b=v+(y^T^S)+E[1]+2763975236&4294967295,v=y+(b<<4&4294967295|b>>>28),b=S+(v^y^T)+E[4]+1272893353&4294967295,S=v+(b<<11&4294967295|b>>>21),b=T+(S^v^y)+E[7]+4139469664&4294967295,T=S+(b<<16&4294967295|b>>>16),b=y+(T^S^v)+E[10]+3200236656&4294967295,y=T+(b<<23&4294967295|b>>>9),b=v+(y^T^S)+E[13]+681279174&4294967295,v=y+(b<<4&4294967295|b>>>28),b=S+(v^y^T)+E[0]+3936430074&4294967295,S=v+(b<<11&4294967295|b>>>21),b=T+(S^v^y)+E[3]+3572445317&4294967295,T=S+(b<<16&4294967295|b>>>16),b=y+(T^S^v)+E[6]+76029189&4294967295,y=T+(b<<23&4294967295|b>>>9),b=v+(y^T^S)+E[9]+3654602809&4294967295,v=y+(b<<4&4294967295|b>>>28),b=S+(v^y^T)+E[12]+3873151461&4294967295,S=v+(b<<11&4294967295|b>>>21),b=T+(S^v^y)+E[15]+530742520&4294967295,T=S+(b<<16&4294967295|b>>>16),b=y+(T^S^v)+E[2]+3299628645&4294967295,y=T+(b<<23&4294967295|b>>>9),b=v+(T^(y|~S))+E[0]+4096336452&4294967295,v=y+(b<<6&4294967295|b>>>26),b=S+(y^(v|~T))+E[7]+1126891415&4294967295,S=v+(b<<10&4294967295|b>>>22),b=T+(v^(S|~y))+E[14]+2878612391&4294967295,T=S+(b<<15&4294967295|b>>>17),b=y+(S^(T|~v))+E[5]+4237533241&4294967295,y=T+(b<<21&4294967295|b>>>11),b=v+(T^(y|~S))+E[12]+1700485571&4294967295,v=y+(b<<6&4294967295|b>>>26),b=S+(y^(v|~T))+E[3]+2399980690&4294967295,S=v+(b<<10&4294967295|b>>>22),b=T+(v^(S|~y))+E[10]+4293915773&4294967295,T=S+(b<<15&4294967295|b>>>17),b=y+(S^(T|~v))+E[1]+2240044497&4294967295,y=T+(b<<21&4294967295|b>>>11),b=v+(T^(y|~S))+E[8]+1873313359&4294967295,v=y+(b<<6&4294967295|b>>>26),b=S+(y^(v|~T))+E[15]+4264355552&4294967295,S=v+(b<<10&4294967295|b>>>22),b=T+(v^(S|~y))+E[6]+2734768916&4294967295,T=S+(b<<15&4294967295|b>>>17),b=y+(S^(T|~v))+E[13]+1309151649&4294967295,y=T+(b<<21&4294967295|b>>>11),b=v+(T^(y|~S))+E[4]+4149444226&4294967295,v=y+(b<<6&4294967295|b>>>26),b=S+(y^(v|~T))+E[11]+3174756917&4294967295,S=v+(b<<10&4294967295|b>>>22),b=T+(v^(S|~y))+E[2]+718787259&4294967295,T=S+(b<<15&4294967295|b>>>17),b=y+(S^(T|~v))+E[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(T+(b<<21&4294967295|b>>>11))&4294967295,I.g[2]=I.g[2]+T&4294967295,I.g[3]=I.g[3]+S&4294967295}i.prototype.u=function(I,v){v===void 0&&(v=I.length);for(var y=v-this.blockSize,E=this.B,T=this.h,S=0;S<v;){if(T==0)for(;S<=y;)r(this,I,S),S+=this.blockSize;if(typeof I=="string"){for(;S<v;)if(E[T++]=I.charCodeAt(S++),T==this.blockSize){r(this,E),T=0;break}}else for(;S<v;)if(E[T++]=I[S++],T==this.blockSize){r(this,E),T=0;break}}this.h=T,this.o+=v},i.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;var y=8*this.o;for(v=I.length-8;v<I.length;++v)I[v]=y&255,y/=256;for(this.u(I),I=Array(16),v=y=0;4>v;++v)for(var E=0;32>E;E+=8)I[y++]=this.g[v]>>>E&255;return I};function s(I,v){var y=a;return Object.prototype.hasOwnProperty.call(y,I)?y[I]:y[I]=v(I)}function o(I,v){this.h=v;for(var y=[],E=!0,T=I.length-1;0<=T;T--){var S=I[T]|0;E&&S==v||(y[T]=S,E=!1)}this.g=y}var a={};function c(I){return-128<=I&&128>I?s(I,function(v){return new o([v|0],0>v?-1:0)}):new o([I|0],0>I?-1:0)}function d(I){if(isNaN(I)||!isFinite(I))return m;if(0>I)return x(d(-I));for(var v=[],y=1,E=0;I>=y;E++)v[E]=I/y|0,y*=4294967296;return new o(v,0)}function u(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return x(u(I.substring(1),v));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=d(Math.pow(v,8)),E=m,T=0;T<I.length;T+=8){var S=Math.min(8,I.length-T),b=parseInt(I.substring(T,T+S),v);8>S?(S=d(Math.pow(v,S)),E=E.j(S).add(d(b))):(E=E.j(y),E=E.add(d(b)))}return E}var m=c(0),p=c(1),_=c(16777216);n=o.prototype,n.m=function(){if(A(this))return-x(this).m();for(var I=0,v=1,y=0;y<this.g.length;y++){var E=this.i(y);I+=(0<=E?E:4294967296+E)*v,v*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(w(this))return"0";if(A(this))return"-"+x(this).toString(I);for(var v=d(Math.pow(I,6)),y=this,E="";;){var T=Z(y,v).g;y=V(y,T.j(v));var S=((0<y.g.length?y.g[0]:y.h)>>>0).toString(I);if(y=T,w(y))return S+E;for(;6>S.length;)S="0"+S;E=S+E}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function w(I){if(I.h!=0)return!1;for(var v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function A(I){return I.h==-1}n.l=function(I){return I=V(this,I),A(I)?-1:w(I)?0:1};function x(I){for(var v=I.g.length,y=[],E=0;E<v;E++)y[E]=~I.g[E];return new o(y,~I.h).add(p)}n.abs=function(){return A(this)?x(this):this},n.add=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],E=0,T=0;T<=v;T++){var S=E+(this.i(T)&65535)+(I.i(T)&65535),b=(S>>>16)+(this.i(T)>>>16)+(I.i(T)>>>16);E=b>>>16,S&=65535,b&=65535,y[T]=b<<16|S}return new o(y,y[y.length-1]&-2147483648?-1:0)};function V(I,v){return I.add(x(v))}n.j=function(I){if(w(this)||w(I))return m;if(A(this))return A(I)?x(this).j(x(I)):x(x(this).j(I));if(A(I))return x(this.j(x(I)));if(0>this.l(_)&&0>I.l(_))return d(this.m()*I.m());for(var v=this.g.length+I.g.length,y=[],E=0;E<2*v;E++)y[E]=0;for(E=0;E<this.g.length;E++)for(var T=0;T<I.g.length;T++){var S=this.i(E)>>>16,b=this.i(E)&65535,Tn=I.i(T)>>>16,qc=I.i(T)&65535;y[2*E+2*T]+=b*qc,H(y,2*E+2*T),y[2*E+2*T+1]+=S*qc,H(y,2*E+2*T+1),y[2*E+2*T+1]+=b*Tn,H(y,2*E+2*T+1),y[2*E+2*T+2]+=S*Tn,H(y,2*E+2*T+2)}for(E=0;E<v;E++)y[E]=y[2*E+1]<<16|y[2*E];for(E=v;E<2*v;E++)y[E]=0;return new o(y,0)};function H(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function j(I,v){this.g=I,this.h=v}function Z(I,v){if(w(v))throw Error("division by zero");if(w(I))return new j(m,m);if(A(I))return v=Z(x(I),v),new j(x(v.g),x(v.h));if(A(v))return v=Z(I,x(v)),new j(x(v.g),v.h);if(30<I.g.length){if(A(I)||A(v))throw Error("slowDivide_ only works with positive integers.");for(var y=p,E=v;0>=E.l(I);)y=lt(y),E=lt(E);var T=at(y,1),S=at(E,1);for(E=at(E,2),y=at(y,2);!w(E);){var b=S.add(E);0>=b.l(I)&&(T=T.add(y),S=b),E=at(E,1),y=at(y,1)}return v=V(I,T.j(v)),new j(T,v)}for(T=m;0<=I.l(v);){for(y=Math.max(1,Math.floor(I.m()/v.m())),E=Math.ceil(Math.log(y)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),S=d(y),b=S.j(v);A(b)||0<b.l(I);)y-=E,S=d(y),b=S.j(v);w(S)&&(S=p),T=T.add(S),I=V(I,b)}return new j(T,I)}n.A=function(I){return Z(this,I).h},n.and=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],E=0;E<v;E++)y[E]=this.i(E)&I.i(E);return new o(y,this.h&I.h)},n.or=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],E=0;E<v;E++)y[E]=this.i(E)|I.i(E);return new o(y,this.h|I.h)},n.xor=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],E=0;E<v;E++)y[E]=this.i(E)^I.i(E);return new o(y,this.h^I.h)};function lt(I){for(var v=I.g.length+1,y=[],E=0;E<v;E++)y[E]=I.i(E)<<1|I.i(E-1)>>>31;return new o(y,I.h)}function at(I,v){var y=v>>5;v%=32;for(var E=I.g.length-y,T=[],S=0;S<E;S++)T[S]=0<v?I.i(S+y)>>>v|I.i(S+y+1)<<32-v:I.i(S+y);return new o(T,I.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Kv=jA.Md5=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=u,Vr=jA.Integer=o}).apply(typeof VA<"u"?VA:typeof self<"u"?self:typeof window<"u"?window:{});var Am=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Wn={};var Qv,Yv,ka,Xv,Id,Sm,Zv,Jv,tb;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,f){return l==Array.prototype||l==Object.prototype||(l[h]=f.value),l};function e(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Am=="object"&&Am];for(var h=0;h<l.length;++h){var f=l[h];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var i=e(this);function r(l,h){if(h)t:{var f=i;l=l.split(".");for(var g=0;g<l.length-1;g++){var C=l[g];if(!(C in f))break t;f=f[C]}l=l[l.length-1],g=f[l],h=h(g),h!=g&&h!=null&&t(f,l,{configurable:!0,writable:!0,value:h})}}function s(l,h){l instanceof String&&(l+="");var f=0,g=!1,C={next:function(){if(!g&&f<l.length){var M=f++;return{value:h(M,l[M]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}r("Array.prototype.values",function(l){return l||function(){return s(this,function(h,f){return f})}});var o=o||{},a=this||self;function c(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function d(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function u(l,h,f){return l.call.apply(l.bind,arguments)}function m(l,h,f){if(!l)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),l.apply(h,C)}}return function(){return l.apply(h,arguments)}}function p(l,h,f){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:m,p.apply(null,arguments)}function _(l,h){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),l.apply(this,g)}}function w(l,h){function f(){}f.prototype=h.prototype,l.aa=h.prototype,l.prototype=new f,l.prototype.constructor=l,l.Qb=function(g,C,M){for(var W=Array(arguments.length-2),Gt=2;Gt<arguments.length;Gt++)W[Gt-2]=arguments[Gt];return h.prototype[C].apply(g,W)}}function A(l){let h=l.length;if(0<h){let f=Array(h);for(let g=0;g<h;g++)f[g]=l[g];return f}return[]}function x(l,h){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(c(g)){let C=l.length||0,M=g.length||0;l.length=C+M;for(let W=0;W<M;W++)l[C+W]=g[W]}else l.push(g)}}class V{constructor(h,f){this.i=h,this.j=f,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function H(l){return/^[\s\xa0]*$/.test(l)}function j(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function Z(l){return Z[" "](l),l}Z[" "]=function(){};var lt=j().indexOf("Gecko")!=-1&&!(j().toLowerCase().indexOf("webkit")!=-1&&j().indexOf("Edge")==-1)&&!(j().indexOf("Trident")!=-1||j().indexOf("MSIE")!=-1)&&j().indexOf("Edge")==-1;function at(l,h,f){for(let g in l)h.call(f,l[g],g,l)}function I(l,h){for(let f in l)h.call(void 0,l[f],f,l)}function v(l){let h={};for(let f in l)h[f]=l[f];return h}let y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(l,h){let f,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(f in g)l[f]=g[f];for(let M=0;M<y.length;M++)f=y[M],Object.prototype.hasOwnProperty.call(g,f)&&(l[f]=g[f])}}function T(l){var h=1;l=l.split(":");let f=[];for(;0<h&&l.length;)f.push(l.shift()),h--;return l.length&&f.push(l.join(":")),f}function S(l){a.setTimeout(()=>{throw l},0)}function b(){var l=dg;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class Tn{constructor(){this.h=this.g=null}add(h,f){let g=qc.get();g.set(h,f),this.h?this.h.next=g:this.g=g,this.h=g}}var qc=new V(()=>new SM,l=>l.reset());class SM{constructor(){this.next=this.g=this.h=null}set(h,f){this.h=h,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Gc,$c=!1,dg=new Tn,tE=()=>{let l=a.Promise.resolve(void 0);Gc=()=>{l.then(kM)}};var kM=()=>{for(var l;l=b();){try{l.h.call(l.g)}catch(f){S(f)}var h=qc;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}$c=!1};function or(){this.s=this.s,this.C=this.C}or.prototype.s=!1,or.prototype.ma=function(){this.s||(this.s=!0,this.N())},or.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function je(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}je.prototype.h=function(){this.defaultPrevented=!0};var RM=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let f=()=>{};a.addEventListener("test",f,h),a.removeEventListener("test",f,h)}catch{}return l}();function Wc(l,h){if(je.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var f=this.type=l.type,g=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(lt){t:{try{Z(h.nodeName);var C=!0;break t}catch{}C=!1}C||(h=null)}}else f=="mouseover"?h=l.fromElement:f=="mouseout"&&(h=l.toElement);this.relatedTarget=h,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:DM[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Wc.aa.h.call(this)}}w(Wc,je);var DM={2:"touch",3:"pen",4:"mouse"};Wc.prototype.h=function(){Wc.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Hc="closure_listenable_"+(1e6*Math.random()|0),PM=0;function MM(l,h,f,g,C){this.listener=l,this.proxy=null,this.src=h,this.type=f,this.capture=!!g,this.ha=C,this.key=++PM,this.da=this.fa=!1}function $u(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Wu(l){this.src=l,this.g={},this.h=0}Wu.prototype.add=function(l,h,f,g,C){var M=l.toString();l=this.g[M],l||(l=this.g[M]=[],this.h++);var W=hg(l,h,g,C);return-1<W?(h=l[W],f||(h.fa=!1)):(h=new MM(h,this.src,M,!!g,C),h.fa=f,l.push(h)),h};function ug(l,h){var f=h.type;if(f in l.g){var g=l.g[f],C=Array.prototype.indexOf.call(g,h,void 0),M;(M=0<=C)&&Array.prototype.splice.call(g,C,1),M&&($u(h),l.g[f].length==0&&(delete l.g[f],l.h--))}}function hg(l,h,f,g){for(var C=0;C<l.length;++C){var M=l[C];if(!M.da&&M.listener==h&&M.capture==!!f&&M.ha==g)return C}return-1}var mg="closure_lm_"+(1e6*Math.random()|0),fg={};function eE(l,h,f,g,C){if(g&&g.once)return nE(l,h,f,g,C);if(Array.isArray(h)){for(var M=0;M<h.length;M++)eE(l,h[M],f,g,C);return null}return f=vg(f),l&&l[Hc]?l.K(h,f,d(g)?!!g.capture:!!g,C):iE(l,h,f,!1,g,C)}function iE(l,h,f,g,C,M){if(!h)throw Error("Invalid event type");var W=d(C)?!!C.capture:!!C,Gt=gg(l);if(Gt||(l[mg]=Gt=new Wu(l)),f=Gt.add(h,f,g,W,M),f.proxy)return f;if(g=NM(),f.proxy=g,g.src=l,g.listener=f,l.addEventListener)RM||(C=W),C===void 0&&(C=!1),l.addEventListener(h.toString(),g,C);else if(l.attachEvent)l.attachEvent(sE(h.toString()),g);else if(l.addListener&&l.removeListener)l.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function NM(){function l(f){return h.call(l.src,l.listener,f)}let h=OM;return l}function nE(l,h,f,g,C){if(Array.isArray(h)){for(var M=0;M<h.length;M++)nE(l,h[M],f,g,C);return null}return f=vg(f),l&&l[Hc]?l.L(h,f,d(g)?!!g.capture:!!g,C):iE(l,h,f,!0,g,C)}function rE(l,h,f,g,C){if(Array.isArray(h))for(var M=0;M<h.length;M++)rE(l,h[M],f,g,C);else g=d(g)?!!g.capture:!!g,f=vg(f),l&&l[Hc]?(l=l.i,h=String(h).toString(),h in l.g&&(M=l.g[h],f=hg(M,f,g,C),-1<f&&($u(M[f]),Array.prototype.splice.call(M,f,1),M.length==0&&(delete l.g[h],l.h--)))):l&&(l=gg(l))&&(h=l.g[h.toString()],l=-1,h&&(l=hg(h,f,g,C)),(f=-1<l?h[l]:null)&&pg(f))}function pg(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[Hc])ug(h.i,l);else{var f=l.type,g=l.proxy;h.removeEventListener?h.removeEventListener(f,g,l.capture):h.detachEvent?h.detachEvent(sE(f),g):h.addListener&&h.removeListener&&h.removeListener(g),(f=gg(h))?(ug(f,l),f.h==0&&(f.src=null,h[mg]=null)):$u(l)}}}function sE(l){return l in fg?fg[l]:fg[l]="on"+l}function OM(l,h){if(l.da)l=!0;else{h=new Wc(h,this);var f=l.listener,g=l.ha||l.src;l.fa&&pg(l),l=f.call(g,h)}return l}function gg(l){return l=l[mg],l instanceof Wu?l:null}var _g="__closure_events_fn_"+(1e9*Math.random()>>>0);function vg(l){return typeof l=="function"?l:(l[_g]||(l[_g]=function(h){return l.handleEvent(h)}),l[_g])}function Ue(){or.call(this),this.i=new Wu(this),this.M=this,this.F=null}w(Ue,or),Ue.prototype[Hc]=!0,Ue.prototype.removeEventListener=function(l,h,f,g){rE(this,l,h,f,g)};function Xe(l,h){var f,g=l.F;if(g)for(f=[];g;g=g.F)f.push(g);if(l=l.M,g=h.type||h,typeof h=="string")h=new je(h,l);else if(h instanceof je)h.target=h.target||l;else{var C=h;h=new je(g,l),E(h,C)}if(C=!0,f)for(var M=f.length-1;0<=M;M--){var W=h.g=f[M];C=Hu(W,g,!0,h)&&C}if(W=h.g=l,C=Hu(W,g,!0,h)&&C,C=Hu(W,g,!1,h)&&C,f)for(M=0;M<f.length;M++)W=h.g=f[M],C=Hu(W,g,!1,h)&&C}Ue.prototype.N=function(){if(Ue.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var f=l.g[h],g=0;g<f.length;g++)$u(f[g]);delete l.g[h],l.h--}}this.F=null},Ue.prototype.K=function(l,h,f,g){return this.i.add(String(l),h,!1,f,g)},Ue.prototype.L=function(l,h,f,g){return this.i.add(String(l),h,!0,f,g)};function Hu(l,h,f,g){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var C=!0,M=0;M<h.length;++M){var W=h[M];if(W&&!W.da&&W.capture==f){var Gt=W.listener,Ne=W.ha||W.src;W.fa&&ug(l.i,W),C=Gt.call(Ne,g)!==!1&&C}}return C&&!g.defaultPrevented}function oE(l,h,f){if(typeof l=="function")f&&(l=p(l,f));else if(l&&typeof l.handleEvent=="function")l=p(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(l,h||0)}function aE(l){l.g=oE(()=>{l.g=null,l.i&&(l.i=!1,aE(l))},l.l);let h=l.h;l.h=null,l.m.apply(null,h)}class FM extends or{constructor(h,f){super(),this.m=h,this.l=f,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:aE(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Kc(l){or.call(this),this.h=l,this.g={}}w(Kc,or);var cE=[];function lE(l){at(l.g,function(h,f){this.g.hasOwnProperty(f)&&pg(h)},l),l.g={}}Kc.prototype.N=function(){Kc.aa.N.call(this),lE(this)},Kc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bg=a.JSON.stringify,LM=a.JSON.parse,VM=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function yg(){}yg.prototype.h=null;function dE(l){return l.h||(l.h=l.i())}function uE(){}var Qc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function wg(){je.call(this,"d")}w(wg,je);function Ig(){je.call(this,"c")}w(Ig,je);var fs={},hE=null;function Ku(){return hE=hE||new Ue}fs.La="serverreachability";function mE(l){je.call(this,fs.La,l)}w(mE,je);function Yc(l){let h=Ku();Xe(h,new mE(h))}fs.STAT_EVENT="statevent";function fE(l,h){je.call(this,fs.STAT_EVENT,l),this.stat=h}w(fE,je);function Ze(l){let h=Ku();Xe(h,new fE(h,l))}fs.Ma="timingevent";function pE(l,h){je.call(this,fs.Ma,l),this.size=h}w(pE,je);function Xc(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},h)}function Zc(){this.g=!0}Zc.prototype.xa=function(){this.g=!1};function jM(l,h,f,g,C,M){l.info(function(){if(l.g)if(M)for(var W="",Gt=M.split("&"),Ne=0;Ne<Gt.length;Ne++){var Mt=Gt[Ne].split("=");if(1<Mt.length){var Be=Mt[0];Mt=Mt[1];var ze=Be.split("_");W=2<=ze.length&&ze[1]=="type"?W+(Be+"="+Mt+"&"):W+(Be+"=redacted&")}}else W=null;else W=M;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+h+`
`+f+`
`+W})}function UM(l,h,f,g,C,M,W){l.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+h+`
`+f+`
`+M+" "+W})}function Po(l,h,f,g){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+zM(l,f)+(g?" "+g:"")})}function BM(l,h){l.info(function(){return"TIMEOUT: "+h})}Zc.prototype.info=function(){};function zM(l,h){if(!l.g)return h;if(!h)return null;try{var f=JSON.parse(h);if(f){for(l=0;l<f.length;l++)if(Array.isArray(f[l])){var g=f[l];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var M=C[0];if(M!="noop"&&M!="stop"&&M!="close")for(var W=1;W<C.length;W++)C[W]=""}}}}return bg(f)}catch{return h}}var Qu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},gE={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Eg;function Yu(){}w(Yu,yg),Yu.prototype.g=function(){return new XMLHttpRequest},Yu.prototype.i=function(){return{}},Eg=new Yu;function ar(l,h,f,g){this.j=l,this.i=h,this.l=f,this.R=g||1,this.U=new Kc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new _E}function _E(){this.i=null,this.g="",this.h=!1}var vE={},xg={};function Tg(l,h,f){l.L=1,l.v=th(Cn(h)),l.m=f,l.P=!0,bE(l,null)}function bE(l,h){l.F=Date.now(),Xu(l),l.A=Cn(l.v);var f=l.A,g=l.R;Array.isArray(g)||(g=[String(g)]),ME(f.i,"t",g),l.C=0,f=l.j.J,l.h=new _E,l.g=XE(l.j,f?h:null,!l.m),0<l.O&&(l.M=new FM(p(l.Y,l,l.g),l.O)),h=l.U,f=l.g,g=l.ca;var C="readystatechange";Array.isArray(C)||(C&&(cE[0]=C.toString()),C=cE);for(var M=0;M<C.length;M++){var W=eE(f,C[M],g||h.handleEvent,!1,h.h||h);if(!W)break;h.g[W.key]=W}h=l.H?v(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),Yc(),jM(l.i,l.u,l.A,l.l,l.R,l.m)}ar.prototype.ca=function(l){l=l.target;let h=this.M;h&&An(l)==3?h.j():this.Y(l)},ar.prototype.Y=function(l){try{if(l==this.g)t:{let ze=An(this.g);var h=this.g.Ba();let Oo=this.g.Z();if(!(3>ze)&&(ze!=3||this.g&&(this.h.h||this.g.oa()||UE(this.g)))){this.J||ze!=4||h==7||(h==8||0>=Oo?Yc(3):Yc(2)),Cg(this);var f=this.g.Z();this.X=f;e:if(yE(this)){var g=UE(this.g);l="";var C=g.length,M=An(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ps(this),Jc(this);var W="";break e}this.h.i=new a.TextDecoder}for(h=0;h<C;h++)this.h.h=!0,l+=this.h.i.decode(g[h],{stream:!(M&&h==C-1)});g.length=0,this.h.g+=l,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=f==200,UM(this.i,this.u,this.A,this.l,this.R,ze,f),this.o){if(this.T&&!this.K){e:{if(this.g){var Gt,Ne=this.g;if((Gt=Ne.g?Ne.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(Gt)){var Mt=Gt;break e}}Mt=null}if(f=Mt)Po(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ag(this,f);else{this.o=!1,this.s=3,Ze(12),ps(this),Jc(this);break t}}if(this.P){f=!0;let Ui;for(;!this.J&&this.C<W.length;)if(Ui=qM(this,W),Ui==xg){ze==4&&(this.s=4,Ze(14),f=!1),Po(this.i,this.l,null,"[Incomplete Response]");break}else if(Ui==vE){this.s=4,Ze(15),Po(this.i,this.l,W,"[Invalid Chunk]"),f=!1;break}else Po(this.i,this.l,Ui,null),Ag(this,Ui);if(yE(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ze!=4||W.length!=0||this.h.h||(this.s=1,Ze(16),f=!1),this.o=this.o&&f,!f)Po(this.i,this.l,W,"[Invalid Chunked Response]"),ps(this),Jc(this);else if(0<W.length&&!this.W){this.W=!0;var Be=this.j;Be.g==this&&Be.ba&&!Be.M&&(Be.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),Mg(Be),Be.M=!0,Ze(11))}}else Po(this.i,this.l,W,null),Ag(this,W);ze==4&&ps(this),this.o&&!this.J&&(ze==4?HE(this.j,this):(this.o=!1,Xu(this)))}else oN(this.g),f==400&&0<W.indexOf("Unknown SID")?(this.s=3,Ze(12)):(this.s=0,Ze(13)),ps(this),Jc(this)}}}catch{}finally{}};function yE(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function qM(l,h){var f=l.C,g=h.indexOf(`
`,f);return g==-1?xg:(f=Number(h.substring(f,g)),isNaN(f)?vE:(g+=1,g+f>h.length?xg:(h=h.slice(g,g+f),l.C=g+f,h)))}ar.prototype.cancel=function(){this.J=!0,ps(this)};function Xu(l){l.S=Date.now()+l.I,wE(l,l.I)}function wE(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Xc(p(l.ba,l),h)}function Cg(l){l.B&&(a.clearTimeout(l.B),l.B=null)}ar.prototype.ba=function(){this.B=null;let l=Date.now();0<=l-this.S?(BM(this.i,this.A),this.L!=2&&(Yc(),Ze(17)),ps(this),this.s=2,Jc(this)):wE(this,this.S-l)};function Jc(l){l.j.G==0||l.J||HE(l.j,l)}function ps(l){Cg(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,lE(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function Ag(l,h){try{var f=l.j;if(f.G!=0&&(f.g==l||Sg(f.h,l))){if(!l.K&&Sg(f.h,l)&&f.G==3){try{var g=f.Da.g.parse(h)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){t:if(!f.u){if(f.g)if(f.g.F+3e3<l.F)sh(f),nh(f);else break t;Pg(f),Ze(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=Xc(p(f.Za,f),6e3));if(1>=xE(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else _s(f,11)}else if((l.K||f.g==l)&&sh(f),!H(h))for(C=f.Da.g.parse(h),h=0;h<C.length;h++){let Mt=C[h];if(f.T=Mt[0],Mt=Mt[1],f.G==2)if(Mt[0]=="c"){f.K=Mt[1],f.ia=Mt[2];let Be=Mt[3];Be!=null&&(f.la=Be,f.j.info("VER="+f.la));let ze=Mt[4];ze!=null&&(f.Aa=ze,f.j.info("SVER="+f.Aa));let Oo=Mt[5];Oo!=null&&typeof Oo=="number"&&0<Oo&&(g=1.5*Oo,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Ui=l.g;if(Ui){let ah=Ui.g?Ui.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ah){var M=g.h;M.g||ah.indexOf("spdy")==-1&&ah.indexOf("quic")==-1&&ah.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(kg(M,M.h),M.h=null))}if(g.D){let Ng=Ui.g?Ui.g.getResponseHeader("X-HTTP-Session-Id"):null;Ng&&(g.ya=Ng,Yt(g.I,g.D,Ng))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-l.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var W=l;if(g.qa=YE(g,g.J?g.ia:null,g.W),W.K){TE(g.h,W);var Gt=W,Ne=g.L;Ne&&(Gt.I=Ne),Gt.B&&(Cg(Gt),Xu(Gt)),g.g=W}else $E(g);0<f.i.length&&rh(f)}else Mt[0]!="stop"&&Mt[0]!="close"||_s(f,7);else f.G==3&&(Mt[0]=="stop"||Mt[0]=="close"?Mt[0]=="stop"?_s(f,7):Dg(f):Mt[0]!="noop"&&f.l&&f.l.ta(Mt),f.v=0)}}Yc(4)}catch{}}var GM=class{constructor(l,h){this.g=l,this.map=h}};function IE(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function EE(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function xE(l){return l.h?1:l.g?l.g.size:0}function Sg(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function kg(l,h){l.g?l.g.add(h):l.h=h}function TE(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}IE.prototype.cancel=function(){if(this.i=CE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function CE(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(let f of l.g.values())h=h.concat(f.D);return h}return A(l.i)}function $M(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var h=[],f=l.length,g=0;g<f;g++)h.push(l[g]);return h}h=[],f=0;for(g in l)h[f++]=l[g];return h}function WM(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var h=[];l=l.length;for(var f=0;f<l;f++)h.push(f);return h}h=[],f=0;for(let g in l)h[f++]=g;return h}}}function AE(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var f=WM(l),g=$M(l),C=g.length,M=0;M<C;M++)h.call(void 0,g[M],f&&f[M],l)}var SE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function HM(l,h){if(l){l=l.split("&");for(var f=0;f<l.length;f++){var g=l[f].indexOf("="),C=null;if(0<=g){var M=l[f].substring(0,g);C=l[f].substring(g+1)}else M=l[f];h(M,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function gs(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof gs){this.h=l.h,Zu(this,l.j),this.o=l.o,this.g=l.g,Ju(this,l.s),this.l=l.l;var h=l.i,f=new il;f.i=h.i,h.g&&(f.g=new Map(h.g),f.h=h.h),kE(this,f),this.m=l.m}else l&&(h=String(l).match(SE))?(this.h=!1,Zu(this,h[1]||"",!0),this.o=tl(h[2]||""),this.g=tl(h[3]||"",!0),Ju(this,h[4]),this.l=tl(h[5]||"",!0),kE(this,h[6]||"",!0),this.m=tl(h[7]||"")):(this.h=!1,this.i=new il(null,this.h))}gs.prototype.toString=function(){var l=[],h=this.j;h&&l.push(el(h,RE,!0),":");var f=this.g;return(f||h=="file")&&(l.push("//"),(h=this.o)&&l.push(el(h,RE,!0),"@"),l.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&l.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&l.push("/"),l.push(el(f,f.charAt(0)=="/"?YM:QM,!0))),(f=this.i.toString())&&l.push("?",f),(f=this.m)&&l.push("#",el(f,ZM)),l.join("")};function Cn(l){return new gs(l)}function Zu(l,h,f){l.j=f?tl(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function Ju(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function kE(l,h,f){h instanceof il?(l.i=h,JM(l.i,l.h)):(f||(h=el(h,XM)),l.i=new il(h,l.h))}function Yt(l,h,f){l.i.set(h,f)}function th(l){return Yt(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function tl(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function el(l,h,f){return typeof l=="string"?(l=encodeURI(l).replace(h,KM),f&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function KM(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var RE=/[#\/\?@]/g,QM=/[#\?:]/g,YM=/[#\?]/g,XM=/[#\?@]/g,ZM=/#/g;function il(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function cr(l){l.g||(l.g=new Map,l.h=0,l.i&&HM(l.i,function(h,f){l.add(decodeURIComponent(h.replace(/\+/g," ")),f)}))}n=il.prototype,n.add=function(l,h){cr(this),this.i=null,l=Mo(this,l);var f=this.g.get(l);return f||this.g.set(l,f=[]),f.push(h),this.h+=1,this};function DE(l,h){cr(l),h=Mo(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function PE(l,h){return cr(l),h=Mo(l,h),l.g.has(h)}n.forEach=function(l,h){cr(this),this.g.forEach(function(f,g){f.forEach(function(C){l.call(h,C,g,this)},this)},this)},n.na=function(){cr(this);let l=Array.from(this.g.values()),h=Array.from(this.g.keys()),f=[];for(let g=0;g<h.length;g++){let C=l[g];for(let M=0;M<C.length;M++)f.push(h[g])}return f},n.V=function(l){cr(this);let h=[];if(typeof l=="string")PE(this,l)&&(h=h.concat(this.g.get(Mo(this,l))));else{l=Array.from(this.g.values());for(let f=0;f<l.length;f++)h=h.concat(l[f])}return h},n.set=function(l,h){return cr(this),this.i=null,l=Mo(this,l),PE(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},n.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function ME(l,h,f){DE(l,h),0<f.length&&(l.i=null,l.g.set(Mo(l,h),A(f)),l.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],h=Array.from(this.g.keys());for(var f=0;f<h.length;f++){var g=h[f];let M=encodeURIComponent(String(g)),W=this.V(g);for(g=0;g<W.length;g++){var C=M;W[g]!==""&&(C+="="+encodeURIComponent(String(W[g]))),l.push(C)}}return this.i=l.join("&")};function Mo(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function JM(l,h){h&&!l.j&&(cr(l),l.i=null,l.g.forEach(function(f,g){var C=g.toLowerCase();g!=C&&(DE(this,g),ME(this,C,f))},l)),l.j=h}function tN(l,h){let f=new Zc;if(a.Image){let g=new Image;g.onload=_(lr,f,"TestLoadImage: loaded",!0,h,g),g.onerror=_(lr,f,"TestLoadImage: error",!1,h,g),g.onabort=_(lr,f,"TestLoadImage: abort",!1,h,g),g.ontimeout=_(lr,f,"TestLoadImage: timeout",!1,h,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=l}else h(!1)}function eN(l,h){let f=new Zc,g=new AbortController,C=setTimeout(()=>{g.abort(),lr(f,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:g.signal}).then(M=>{clearTimeout(C),M.ok?lr(f,"TestPingServer: ok",!0,h):lr(f,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(C),lr(f,"TestPingServer: error",!1,h)})}function lr(l,h,f,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(f)}catch{}}function iN(){this.g=new VM}function nN(l,h,f){let g=f||"";try{AE(l,function(C,M){let W=C;d(C)&&(W=bg(C)),h.push(g+M+"="+encodeURIComponent(W))})}catch(C){throw h.push(g+"type="+encodeURIComponent("_badmap")),C}}function nl(l){this.l=l.Ub||null,this.j=l.eb||!1}w(nl,yg),nl.prototype.g=function(){return new eh(this.l,this.j)},nl.prototype.i=function(l){return function(){return l}}({});function eh(l,h){Ue.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(eh,Ue),n=eh.prototype,n.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,sl(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,rl(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,sl(this)),this.g&&(this.readyState=3,sl(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;NE(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function NE(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?rl(this):sl(this),this.readyState==3&&NE(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,rl(this))},n.Qa=function(l){this.g&&(this.response=l,rl(this))},n.ga=function(){this.g&&rl(this)};function rl(l){l.readyState=4,l.l=null,l.j=null,l.v=null,sl(l)}n.setRequestHeader=function(l,h){this.u.append(l,h)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],h=this.h.entries();for(var f=h.next();!f.done;)f=f.value,l.push(f[0]+": "+f[1]),f=h.next();return l.join(`\r
`)};function sl(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(eh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function OE(l){let h="";return at(l,function(f,g){h+=g,h+=":",h+=f,h+=`\r
`}),h}function Rg(l,h,f){t:{for(g in f){var g=!1;break t}g=!0}g||(f=OE(f),typeof l=="string"?f!=null&&encodeURIComponent(String(f)):Yt(l,h,f))}function de(l){Ue.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(de,Ue);var rN=/^https?$/i,sN=["POST","PUT"];n=de.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,h,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Eg.g(),this.v=this.o?dE(this.o):dE(Eg),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(M){FE(this,M);return}if(l=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)f.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let M of g.keys())f.set(M,g.get(M));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(M=>M.toLowerCase()=="content-type"),C=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(sN,h,void 0))||g||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[M,W]of f)this.g.setRequestHeader(M,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{jE(this),this.u=!0,this.g.send(l),this.u=!1}catch(M){FE(this,M)}};function FE(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,LE(l),ih(l)}function LE(l){l.A||(l.A=!0,Xe(l,"complete"),Xe(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Xe(this,"complete"),Xe(this,"abort"),ih(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ih(this,!0)),de.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?VE(this):this.bb())},n.bb=function(){VE(this)};function VE(l){if(l.h&&typeof o<"u"&&(!l.v[1]||An(l)!=4||l.Z()!=2)){if(l.u&&An(l)==4)oE(l.Ea,0,l);else if(Xe(l,"readystatechange"),An(l)==4){l.h=!1;try{let W=l.Z();t:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break t;default:h=!1}var f;if(!(f=h)){var g;if(g=W===0){var C=String(l.D).match(SE)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),g=!rN.test(C?C.toLowerCase():"")}f=g}if(f)Xe(l,"complete"),Xe(l,"success");else{l.m=6;try{var M=2<An(l)?l.g.statusText:""}catch{M=""}l.l=M+" ["+l.Z()+"]",LE(l)}}finally{ih(l)}}}}function ih(l,h){if(l.g){jE(l);let f=l.g,g=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||Xe(l,"ready");try{f.onreadystatechange=g}catch{}}}function jE(l){l.I&&(a.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function An(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<An(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),LM(h)}};function UE(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function oN(l){let h={};l=(l.g&&2<=An(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<l.length;g++){if(H(l[g]))continue;var f=T(l[g]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let M=h[C]||[];h[C]=M,M.push(f)}I(h,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ol(l,h,f){return f&&f.internalChannelParams&&f.internalChannelParams[l]||h}function BE(l){this.Aa=0,this.i=[],this.j=new Zc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ol("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ol("baseRetryDelayMs",5e3,l),this.cb=ol("retryDelaySeedMs",1e4,l),this.Wa=ol("forwardChannelMaxRetries",2,l),this.wa=ol("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new IE(l&&l.concurrentRequestLimit),this.Da=new iN,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=BE.prototype,n.la=8,n.G=1,n.connect=function(l,h,f,g){Ze(0),this.W=l,this.H=h||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=YE(this,null,this.W),rh(this)};function Dg(l){if(zE(l),l.G==3){var h=l.U++,f=Cn(l.I);if(Yt(f,"SID",l.K),Yt(f,"RID",h),Yt(f,"TYPE","terminate"),al(l,f),h=new ar(l,l.j,h),h.L=2,h.v=th(Cn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=h.v,f=!0),f||(h.g=XE(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Xu(h)}QE(l)}function nh(l){l.g&&(Mg(l),l.g.cancel(),l.g=null)}function zE(l){nh(l),l.u&&(a.clearTimeout(l.u),l.u=null),sh(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function rh(l){if(!EE(l.h)&&!l.s){l.s=!0;var h=l.Ga;Gc||tE(),$c||(Gc(),$c=!0),dg.add(h,l),l.B=0}}function aN(l,h){return xE(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Xc(p(l.Ga,l,h),KE(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;let C=new ar(this,this.j,l),M=this.o;if(this.S&&(M?(M=v(M),E(M,this.S)):M=this.S),this.m!==null||this.O||(C.H=M,M=null),this.P)t:{for(var h=0,f=0;f<this.i.length;f++){e:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break e}g=void 0}if(g===void 0)break;if(h+=g,4096<h){h=f;break t}if(h===4096||f===this.i.length-1){h=f+1;break t}}h=1e3}else h=1e3;h=GE(this,C,h),f=Cn(this.I),Yt(f,"RID",l),Yt(f,"CVER",22),this.D&&Yt(f,"X-HTTP-Session-Id",this.D),al(this,f),M&&(this.O?h="headers="+encodeURIComponent(String(OE(M)))+"&"+h:this.m&&Rg(f,this.m,M)),kg(this.h,C),this.Ua&&Yt(f,"TYPE","init"),this.P?(Yt(f,"$req",h),Yt(f,"SID","null"),C.T=!0,Tg(C,f,null)):Tg(C,f,h),this.G=2}}else this.G==3&&(l?qE(this,l):this.i.length==0||EE(this.h)||qE(this))};function qE(l,h){var f;h?f=h.l:f=l.U++;let g=Cn(l.I);Yt(g,"SID",l.K),Yt(g,"RID",f),Yt(g,"AID",l.T),al(l,g),l.m&&l.o&&Rg(g,l.m,l.o),f=new ar(l,l.j,f,l.B+1),l.m===null&&(f.H=l.o),h&&(l.i=h.D.concat(l.i)),h=GE(l,f,1e3),f.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),kg(l.h,f),Tg(f,g,h)}function al(l,h){l.H&&at(l.H,function(f,g){Yt(h,g,f)}),l.l&&AE({},function(f,g){Yt(h,g,f)})}function GE(l,h,f){f=Math.min(l.i.length,f);var g=l.l?p(l.l.Na,l.l,l):null;t:{var C=l.i;let M=-1;for(;;){let W=["count="+f];M==-1?0<f?(M=C[0].g,W.push("ofs="+M)):M=0:W.push("ofs="+M);let Gt=!0;for(let Ne=0;Ne<f;Ne++){let Mt=C[Ne].g,Be=C[Ne].map;if(Mt-=M,0>Mt)M=Math.max(0,C[Ne].g-100),Gt=!1;else try{nN(Be,W,"req"+Mt+"_")}catch{g&&g(Be)}}if(Gt){g=W.join("&");break t}}}return l=l.i.splice(0,f),h.D=l,g}function $E(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;Gc||tE(),$c||(Gc(),$c=!0),dg.add(h,l),l.v=0}}function Pg(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Xc(p(l.Fa,l),KE(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,WE(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Xc(p(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ze(10),nh(this),WE(this))};function Mg(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function WE(l){l.g=new ar(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=Cn(l.qa);Yt(h,"RID","rpc"),Yt(h,"SID",l.K),Yt(h,"AID",l.T),Yt(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&Yt(h,"TO",l.ja),Yt(h,"TYPE","xmlhttp"),al(l,h),l.m&&l.o&&Rg(h,l.m,l.o),l.L&&(l.g.I=l.L);var f=l.g;l=l.ia,f.L=1,f.v=th(Cn(h)),f.m=null,f.P=!0,bE(f,l)}n.Za=function(){this.C!=null&&(this.C=null,nh(this),Pg(this),Ze(19))};function sh(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function HE(l,h){var f=null;if(l.g==h){sh(l),Mg(l),l.g=null;var g=2}else if(Sg(l.h,h))f=h.D,TE(l.h,h),g=1;else return;if(l.G!=0){if(h.o)if(g==1){f=h.m?h.m.length:0,h=Date.now()-h.F;var C=l.B;g=Ku(),Xe(g,new pE(g,f)),rh(l)}else $E(l);else if(C=h.s,C==3||C==0&&0<h.X||!(g==1&&aN(l,h)||g==2&&Pg(l)))switch(f&&0<f.length&&(h=l.h,h.i=h.i.concat(f)),C){case 1:_s(l,5);break;case 4:_s(l,10);break;case 3:_s(l,6);break;default:_s(l,2)}}}function KE(l,h){let f=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(f*=2),f*h}function _s(l,h){if(l.j.info("Error code "+h),h==2){var f=p(l.fb,l),g=l.Xa;let C=!g;g=new gs(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Zu(g,"https"),th(g),C?tN(g.toString(),f):eN(g.toString(),f)}else Ze(2);l.G=0,l.l&&l.l.sa(h),QE(l),zE(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Ze(2)):(this.j.info("Failed to ping google.com"),Ze(1))};function QE(l){if(l.G=0,l.ka=[],l.l){let h=CE(l.h);(h.length!=0||l.i.length!=0)&&(x(l.ka,h),x(l.ka,l.i),l.h.i.length=0,A(l.i),l.i.length=0),l.l.ra()}}function YE(l,h,f){var g=f instanceof gs?Cn(f):new gs(f);if(g.g!="")h&&(g.g=h+"."+g.g),Ju(g,g.s);else{var C=a.location;g=C.protocol,h=h?h+"."+C.hostname:C.hostname,C=+C.port;var M=new gs(null);g&&Zu(M,g),h&&(M.g=h),C&&Ju(M,C),f&&(M.l=f),g=M}return f=l.D,h=l.ya,f&&h&&Yt(g,f,h),Yt(g,"VER",l.la),al(l,g),g}function XE(l,h,f){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new de(new nl({eb:f})):new de(l.pa),h.Ha(l.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ZE(){}n=ZE.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function oh(){}oh.prototype.g=function(l,h){return new hi(l,h)};function hi(l,h){Ue.call(this),this.g=new BE(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!H(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!H(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new No(this)}w(hi,Ue),hi.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},hi.prototype.close=function(){Dg(this.g)},hi.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var f={};f.__data__=l,l=f}else this.u&&(f={},f.__data__=bg(l),l=f);h.i.push(new GM(h.Ya++,l)),h.G==3&&rh(h)},hi.prototype.N=function(){this.g.l=null,delete this.j,Dg(this.g),delete this.g,hi.aa.N.call(this)};function JE(l){wg.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){t:{for(let f in h){l=f;break t}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}w(JE,wg);function tx(){Ig.call(this),this.status=1}w(tx,Ig);function No(l){this.g=l}w(No,ZE),No.prototype.ua=function(){Xe(this.g,"a")},No.prototype.ta=function(l){Xe(this.g,new JE(l))},No.prototype.sa=function(l){Xe(this.g,new tx)},No.prototype.ra=function(){Xe(this.g,"b")},oh.prototype.createWebChannel=oh.prototype.g,hi.prototype.send=hi.prototype.o,hi.prototype.open=hi.prototype.m,hi.prototype.close=hi.prototype.close,tb=Wn.createWebChannelTransport=function(){return new oh},Jv=Wn.getStatEventTarget=function(){return Ku()},Zv=Wn.Event=fs,Sm=Wn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Qu.NO_ERROR=0,Qu.TIMEOUT=8,Qu.HTTP_ERROR=6,Id=Wn.ErrorCode=Qu,gE.COMPLETE="complete",Xv=Wn.EventType=gE,uE.EventType=Qc,Qc.OPEN="a",Qc.CLOSE="b",Qc.ERROR="c",Qc.MESSAGE="d",Ue.prototype.listen=Ue.prototype.K,ka=Wn.WebChannel=uE,Yv=Wn.FetchXmlHttpFactory=nl,de.prototype.listenOnce=de.prototype.L,de.prototype.getLastError=de.prototype.Ka,de.prototype.getLastErrorCode=de.prototype.Ba,de.prototype.getStatus=de.prototype.Z,de.prototype.getResponseJson=de.prototype.Oa,de.prototype.getResponseText=de.prototype.oa,de.prototype.send=de.prototype.ea,de.prototype.setWithCredentials=de.prototype.Ha,Qv=Wn.XhrIo=de}).apply(typeof Am<"u"?Am:typeof self<"u"?self:typeof window<"u"?window:{});var UA="@firebase/firestore";var we=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};we.UNAUTHENTICATED=new we(null),we.GOOGLE_CREDENTIALS=new we("google-credentials-uid"),we.FIRST_PARTY=new we("first-party-uid"),we.MOCK_USER=new we("mock-user");var oc="10.13.1";var $r=new br("@firebase/firestore");function Na(){return $r.logLevel}function zS(n){$r.setLogLevel(n)}function L(n,...t){if($r.logLevel<=ki.DEBUG){let e=t.map(s0);$r.debug(`Firestore (${oc}): ${n}`,...e)}}function fe(n,...t){if($r.logLevel<=ki.ERROR){let e=t.map(s0);$r.error(`Firestore (${oc}): ${n}`,...e)}}function Ni(n,...t){if($r.logLevel<=ki.WARN){let e=t.map(s0);$r.warn(`Firestore (${oc}): ${n}`,...e)}}function s0(n){if(typeof n=="string")return n;try{return function(e){return JSON.stringify(e)}(n)}catch{return n}}function J(n="Unexpected state"){let t=`FIRESTORE (${oc}) INTERNAL ASSERTION FAILED: `+n;throw fe(t),new Error(t)}function nt(n,t){n||J()}function qS(n,t){n||J()}function K(n,t){return n}var P={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},O=class extends Qx{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ie=class{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}};var jm=class{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}},sb=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(we.UNAUTHENTICATED))}shutdown(){}},ob=class{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}},ab=class{constructor(t){this.t=t,this.currentUser=we.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let i=this.i,r=c=>this.i!==i?(i=this.i,e(c)):Promise.resolve(),s=new Ie;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ie,t.enqueueRetryable(()=>r(this.currentUser))};let o=()=>{let c=s;t.enqueueRetryable(()=>D(this,null,function*(){yield c.promise,yield r(this.currentUser)}))},a=c=>{L("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(L("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ie)}},0),o()}getToken(){let t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(L("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(nt(typeof i.accessToken=="string"),new jm(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let t=this.auth&&this.auth.getUid();return nt(t===null||typeof t=="string"),new we(t)}},cb=class{constructor(t,e,i){this.l=t,this.h=e,this.P=i,this.type="FirstParty",this.user=we.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},lb=class{constructor(t,e,i){this.l=t,this.h=e,this.P=i}getToken(){return Promise.resolve(new cb(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(we.FIRST_PARTY))}shutdown(){}invalidateToken(){}},db=class{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},ub=class{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){let i=s=>{s.error!=null&&L("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,L("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};let r=s=>{L("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?r(s):L("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(nt(typeof e.token=="string"),this.R=e.token,new db(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function R2(n){let t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}var Um=class{static newId(){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,i="";for(;i.length<20;){let r=R2(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<e&&(i+=t.charAt(r[s]%t.length))}return i}};function mt(n,t){return n<t?-1:n>t?1:0}function qa(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}function GS(n){return n+"\0"}var ce=class n{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new O(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new O(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new O(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new O(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return n.fromMillis(Date.now())}static fromDate(t){return n.fromMillis(t.getTime())}static fromMillis(t){let e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new n(e,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?mt(this.nanoseconds,t.nanoseconds):mt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var st=class n{constructor(t){this.timestamp=t}static fromTimestamp(t){return new n(t)}static min(){return new n(new ce(0,0))}static max(){return new n(new ce(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Bm=class n{constructor(t,e,i){e===void 0?e=0:e>t.length&&J(),i===void 0?i=t.length-e:i>t.length-e&&J(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return n.comparator(this,t)===0}child(t){let e=this.segments.slice(this.offset,this.limit());return t instanceof n?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){let i=Math.min(t.length,e.length);for(let r=0;r<i;r++){let s=t.get(r),o=e.get(r);if(s<o)return-1;if(s>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0}},Dt=class n extends Bm{construct(t,e,i){return new n(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){let e=[];for(let i of t){if(i.indexOf("//")>=0)throw new O(P.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new n(e)}static emptyPath(){return new n([])}},D2=/^[_a-zA-Z][_a-zA-Z0-9]*$/,pe=class n extends Bm{construct(t,e,i){return new n(t,e,i)}static isValidIdentifier(t){return D2.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(t){let e=[],i="",r=0,s=()=>{if(i.length===0)throw new O(P.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""},o=!1;for(;r<t.length;){let a=t[r];if(a==="\\"){if(r+1===t.length)throw new O(P.INVALID_ARGUMENT,"Path has trailing escape character: "+t);let c=t[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new O(P.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=c,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new O(P.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new n(e)}static emptyPath(){return new n([])}};var Q=class n{constructor(t){this.path=t}static fromPath(t){return new n(Dt.fromString(t))}static fromName(t){return new n(Dt.fromString(t).popFirst(5))}static empty(){return new n(Dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Dt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Dt.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new n(new Dt(t.slice()))}};var Ga=class{constructor(t,e,i,r){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=r}};function hb(n){return n.fields.find(t=>t.kind===2)}function js(n){return n.fields.filter(t=>t.kind!==2)}Ga.UNKNOWN_ID=-1;var Ua=class{constructor(t,e){this.fieldPath=t,this.kind=e}};var Nd=class n{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new n(0,Oi.min())}};function $S(n,t){let e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=st.fromTimestamp(i===1e9?new ce(e+1,0):new ce(e,i));return new Oi(r,Q.empty(),t)}function WS(n){return new Oi(n.readTime,n.key,-1)}var Oi=class n{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new n(st.min(),Q.empty(),-1)}static max(){return new n(st.max(),Q.empty(),-1)}};function o0(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=Q.comparator(n.documentKey,t.documentKey),e!==0?e:mt(n.largestBatchId,t.largestBatchId))}var HS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",zm=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}};function es(n){return D(this,null,function*(){if(n.code!==P.FAILED_PRECONDITION||n.message!==HS)throw n;L("LocalStore","Unexpectedly lost primary lease")})}var R=class n{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&J(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new n((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(e,s).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{let e=t();return e instanceof n?e:n.resolve(e)}catch(e){return n.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):n.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):n.reject(e)}static resolve(t){return new n((e,i)=>{e(t)})}static reject(t){return new n((e,i)=>{i(t)})}static waitFor(t){return new n((e,i)=>{let r=0,s=0,o=!1;t.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&e()},c=>i(c))}),o=!0,s===r&&e()})}static or(t){let e=n.resolve(!1);for(let i of t)e=e.next(r=>r?n.resolve(r):i());return e}static forEach(t,e){let i=[];return t.forEach((r,s)=>{i.push(e.call(this,r,s))}),this.waitFor(i)}static mapArray(t,e){return new n((i,r)=>{let s=t.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let d=c;e(t[d]).next(u=>{o[d]=u,++a,a===s&&i(o)},u=>r(u))}})}static doWhile(t,e){return new n((i,r)=>{let s=()=>{t()===!0?e().next(()=>{s()},r):i()};s()})}};var qm=class n{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.V=new Ie,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{e.error?this.V.reject(new $s(t,e.error)):this.V.resolve()},this.transaction.onerror=i=>{let r=a0(i.target.error);this.V.reject(new $s(t,r))}}static open(t,e,i,r){try{return new n(e,t.transaction(r,i))}catch(s){throw new $s(e,s)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(L("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){let e=this.transaction.objectStore(t);return new fb(e)}},Wr=class n{constructor(t,e,i){this.name=t,this.version=e,this.p=i,n.S(wl())===12.2&&fe("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return L("SimpleDb","Removing database:",t),Us(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!xh())return!1;if(n.v())return!0;let t=wl(),e=n.S(t),i=0<e&&e<10,r=KS(t),s=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||s)}static v(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)===null||t===void 0?void 0:t.C)==="YES"}static F(t,e){return t.store(e)}static S(t){let e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(i)}M(t){return D(this,null,function*(){return this.db||(L("SimpleDb","Opening database:",this.name),this.db=yield new Promise((e,i)=>{let r=indexedDB.open(this.name,this.version);r.onsuccess=s=>{let o=s.target.result;e(o)},r.onblocked=()=>{i(new $s(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=s=>{let o=s.target.error;o.name==="VersionError"?i(new O(P.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?i(new O(P.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):i(new $s(t,o))},r.onupgradeneeded=s=>{L("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.p.O(o,r.transaction,s.oldVersion,this.version).next(()=>{L("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=e=>this.N(e)),this.db})}L(t){this.N=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,i,r){return D(this,null,function*(){let s=e==="readonly",o=0;for(;;){++o;try{this.db=yield this.M(t);let a=qm.open(this.db,t,s?"readonly":"readwrite",i),c=r(a).next(d=>(a.g(),d)).catch(d=>(a.abort(d),R.reject(d))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,d=c.name!=="FirebaseError"&&o<3;if(L("SimpleDb","Transaction failed with error:",c.message,"Retrying:",d),this.close(),!d)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function KS(n){let t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}var mb=class{constructor(t){this.B=t,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(t){this.B=t}done(){this.k=!0}$(t){this.q=t}delete(){return Us(this.B.delete())}},$s=class extends O{constructor(t,e){super(P.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}};function is(n){return n.name==="IndexedDbTransactionError"}var fb=class{constructor(t){this.store=t}put(t,e){let i;return e!==void 0?(L("SimpleDb","PUT",this.store.name,t,e),i=this.store.put(e,t)):(L("SimpleDb","PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),Us(i)}add(t){return L("SimpleDb","ADD",this.store.name,t,t),Us(this.store.add(t))}get(t){return Us(this.store.get(t)).next(e=>(e===void 0&&(e=null),L("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return L("SimpleDb","DELETE",this.store.name,t),Us(this.store.delete(t))}count(){return L("SimpleDb","COUNT",this.store.name),Us(this.store.count())}U(t,e){let i=this.options(t,e),r=i.index?this.store.index(i.index):this.store;if(typeof r.getAll=="function"){let s=r.getAll(i.range);return new R((o,a)=>{s.onerror=c=>{a(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{let s=this.cursor(i),o=[];return this.W(s,(a,c)=>{o.push(c)}).next(()=>o)}}G(t,e){let i=this.store.getAll(t,e===null?void 0:e);return new R((r,s)=>{i.onerror=o=>{s(o.target.error)},i.onsuccess=o=>{r(o.target.result)}})}j(t,e){L("SimpleDb","DELETE ALL",this.store.name);let i=this.options(t,e);i.H=!1;let r=this.cursor(i);return this.W(r,(s,o,a)=>a.delete())}J(t,e){let i;e?i=t:(i={},e=t);let r=this.cursor(i);return this.W(r,e)}Y(t){let e=this.cursor({});return new R((i,r)=>{e.onerror=s=>{let o=a0(s.target.error);r(o)},e.onsuccess=s=>{let o=s.target.result;o?t(o.primaryKey,o.value).next(a=>{a?o.continue():i()}):i()}})}W(t,e){let i=[];return new R((r,s)=>{t.onerror=o=>{s(o.target.error)},t.onsuccess=o=>{let a=o.target.result;if(!a)return void r();let c=new mb(a),d=e(a.primaryKey,a.value,c);if(d instanceof R){let u=d.catch(m=>(c.done(),R.reject(m)));i.push(u)}c.isDone?r():c.K===null?a.continue():a.continue(c.K)}}).next(()=>R.waitFor(i))}options(t,e){let i;return t!==void 0&&(typeof t=="string"?i=t:e=t),{index:i,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){let i=this.store.index(t.index);return t.H?i.openKeyCursor(t.range,e):i.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}};function Us(n){return new R((t,e)=>{n.onsuccess=i=>{let r=i.target.result;t(r)},n.onerror=i=>{let r=a0(i.target.error);e(r)}})}var BA=!1;function a0(n){let t=Wr.S(wl());if(t>=12.2&&t<13){let e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){let i=new O("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return BA||(BA=!0,setTimeout(()=>{throw i},0)),i}}return n}var pb=class{constructor(t,e){this.asyncQueue=t,this.Z=e,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(t){L("IndexBackfiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,()=>D(this,null,function*(){this.task=null;try{L("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(e){is(e)?L("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):yield es(e)}yield this.X(6e4)}))}},gb=class{constructor(t,e){this.localStore=t,this.persistence=e}ee(t=50){return D(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",e=>this.te(e,t))})}te(t,e){let i=new Set,r=e,s=!0;return R.doWhile(()=>s===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(o=>{if(o!==null&&!i.has(o))return L("IndexBackfiller",`Processing collection: ${o}`),this.ne(t,o,r).next(a=>{r-=a,i.add(o)});s=!1})).next(()=>e-r)}ne(t,e,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(r=>this.localStore.localDocuments.getNextDocuments(t,e,r,i).next(s=>{let o=s.changes;return this.localStore.indexManager.updateIndexEntries(t,o).next(()=>this.re(r,s)).next(a=>(L("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(t,e,a))).next(()=>o.size)}))}re(t,e){let i=t;return e.changes.forEach((r,s)=>{let o=WS(s);o0(o,i)>0&&(i=o)}),new Oi(i.readTime,i.documentKey,Math.max(e.batchId,t.largestBatchId))}};var wi=(()=>{class n{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.se&&this.se(e),e}}return n.oe=-1,n})();function nu(n){return n==null}function Od(n){return n===0&&1/n==-1/0}function QS(n){return typeof n=="number"&&Number.isInteger(n)&&!Od(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function ii(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=zA(t)),t=P2(n.get(e),t);return zA(t)}function P2(n,t){let e=t,i=n.length;for(let r=0;r<i;r++){let s=n.charAt(r);switch(s){case"\0":e+="";break;case"":e+="";break;default:e+=s}}return e}function zA(n){return n+""}function dn(n){let t=n.length;if(nt(t>=2),t===2)return nt(n.charAt(0)===""&&n.charAt(1)===""),Dt.emptyPath();let e=t-2,i=[],r="";for(let s=0;s<t;){let o=n.indexOf("",s);switch((o<0||o>e)&&J(),n.charAt(o+1)){case"":let a=n.substring(s,o),c;r.length===0?c=a:(r+=a,c=r,r=""),i.push(c);break;case"":r+=n.substring(s,o),r+="\0";break;case"":r+=n.substring(s,o+1);break;default:J()}s=o+2}return new Dt(i)}var qA=["userId","batchId"];function Mm(n,t){return[n,ii(t)]}function YS(n,t,e){return[n,ii(t),e]}var M2={},N2=["prefixPath","collectionGroup","readTime","documentId"],O2=["prefixPath","collectionGroup","documentId"],F2=["collectionGroup","readTime","prefixPath","documentId"],L2=["canonicalId","targetId"],V2=["targetId","path"],j2=["path","targetId"],U2=["collectionId","parent"],B2=["indexId","uid"],z2=["uid","sequenceNumber"],q2=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],G2=["indexId","uid","orderedDocumentKey"],$2=["userId","collectionPath","documentId"],W2=["userId","collectionPath","largestBatchId"],H2=["userId","collectionGroup","largestBatchId"],XS=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],K2=[...XS,"documentOverlays"],ZS=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],JS=ZS,c0=[...JS,"indexConfiguration","indexState","indexEntries"],Q2=c0,Y2=[...c0,"globals"];var Fd=class extends zm{constructor(t,e){super(),this._e=t,this.currentSequenceNumber=e}};function Ce(n,t){let e=K(n);return Wr.F(e._e,t)}function GA(n){let t=0;for(let e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function no(n,t){for(let e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function tk(n){for(let t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}var ee=class n{constructor(t,e){this.comparator=t,this.root=e||hn.EMPTY}insert(t,e){return new n(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,hn.BLACK,null,null))}remove(t){return new n(this.comparator,this.root.remove(t,this.comparator).copy(null,null,hn.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){let i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(t,i.key);if(r===0)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){let t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new ja(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new ja(this.root,t,this.comparator,!1)}getReverseIterator(){return new ja(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new ja(this.root,t,this.comparator,!0)}},ja=class{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?i(t.key,e):1,e&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},hn=class n{constructor(t,e,i,r,s){this.key=t,this.value=e,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,s){return new n(t??this.key,e??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this,s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,e,i),null):s===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){let t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw J();let t=this.left.check();if(t!==this.right.check())throw J();return t+(this.isRed()?0:1)}};hn.EMPTY=null,hn.RED=!0,hn.BLACK=!1;hn.EMPTY=new class{constructor(){this.size=0}get key(){throw J()}get value(){throw J()}get color(){throw J()}get left(){throw J()}get right(){throw J()}copy(t,e,i,r,s){return this}insert(t,e,i){return new hn(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var $t=class n{constructor(t){this.comparator=t,this.data=new ee(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){let i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){let e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Gm(this.data.getIterator())}getIteratorFrom(t){return new Gm(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof n)||this.size!==t.size)return!1;let e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){let r=e.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let t=[];return this.forEach(e=>{t.push(e)}),t}toString(){let t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){let e=new n(this.comparator);return e.data=t,e}},Gm=class{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Ra(n){return n.hasNext()?n.getNext():void 0}var Ii=class n{constructor(t){this.fields=t,t.sort(pe.comparator)}static empty(){return new n([])}unionWith(t){let e=new $t(pe.comparator);for(let i of this.fields)e=e.add(i);for(let i of t)e=e.add(i);return new n(e.toArray())}covers(t){for(let e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return qa(this.fields,t.fields,(e,i)=>e.isEqual(i))}};var $m=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function ek(){return typeof atob<"u"}var _e=class n{constructor(t){this.binaryString=t}static fromBase64String(t){let e=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new $m("Invalid base64 string: "+s):s}}(t);return new n(e)}static fromUint8Array(t){let e=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(t);return new n(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){let i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return mt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}};_e.EMPTY_BYTE_STRING=new _e("");var X2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qn(n){if(nt(!!n),typeof n=="string"){let t=0,e=X2.exec(n);if(nt(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:ne(n.seconds),nanos:ne(n.nanos)}}function ne(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Hr(n){return typeof n=="string"?_e.fromBase64String(n):_e.fromUint8Array(n)}function Ff(n){var t,e;return((e=(((t=n?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="server_timestamp"}function l0(n){let t=n.mapValue.fields.__previous_value__;return Ff(t)?l0(t):t}function Ld(n){let t=Qn(n.mapValue.fields.__local_write_time__.timestampValue);return new ce(t.seconds,t.nanos)}var _b=class{constructor(t,e,i,r,s,o,a,c,d){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=d}},Kr=class n{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof n&&t.projectId===this.projectId&&t.database===this.database}};var qr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Nm={nullValue:"NULL_VALUE"};function Ws(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ff(n)?4:ik(n)?9007199254740991:Lf(n)?10:11:J()}function pn(n,t){if(n===t)return!0;let e=Ws(n);if(e!==Ws(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Ld(n).isEqual(Ld(t));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;let o=Qn(r.timestampValue),a=Qn(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(r,s){return Hr(r.bytesValue).isEqual(Hr(s.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(r,s){return ne(r.geoPointValue.latitude)===ne(s.geoPointValue.latitude)&&ne(r.geoPointValue.longitude)===ne(s.geoPointValue.longitude)}(n,t);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return ne(r.integerValue)===ne(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){let o=ne(r.doubleValue),a=ne(s.doubleValue);return o===a?Od(o)===Od(a):isNaN(o)&&isNaN(a)}return!1}(n,t);case 9:return qa(n.arrayValue.values||[],t.arrayValue.values||[],pn);case 10:case 11:return function(r,s){let o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(GA(o)!==GA(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!pn(o[c],a[c])))return!1;return!0}(n,t);default:return J()}}function Vd(n,t){return(n.values||[]).find(e=>pn(e,t))!==void 0}function Qr(n,t){if(n===t)return 0;let e=Ws(n),i=Ws(t);if(e!==i)return mt(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return mt(n.booleanValue,t.booleanValue);case 2:return function(s,o){let a=ne(s.integerValue||s.doubleValue),c=ne(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,t);case 3:return $A(n.timestampValue,t.timestampValue);case 4:return $A(Ld(n),Ld(t));case 5:return mt(n.stringValue,t.stringValue);case 6:return function(s,o){let a=Hr(s),c=Hr(o);return a.compareTo(c)}(n.bytesValue,t.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let d=0;d<a.length&&d<c.length;d++){let u=mt(a[d],c[d]);if(u!==0)return u}return mt(a.length,c.length)}(n.referenceValue,t.referenceValue);case 8:return function(s,o){let a=mt(ne(s.latitude),ne(o.latitude));return a!==0?a:mt(ne(s.longitude),ne(o.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return WA(n.arrayValue,t.arrayValue);case 10:return function(s,o){var a,c,d,u;let m=s.fields||{},p=o.fields||{},_=(a=m.value)===null||a===void 0?void 0:a.arrayValue,w=(c=p.value)===null||c===void 0?void 0:c.arrayValue,A=mt(((d=_?.values)===null||d===void 0?void 0:d.length)||0,((u=w?.values)===null||u===void 0?void 0:u.length)||0);return A!==0?A:WA(_,w)}(n.mapValue,t.mapValue);case 11:return function(s,o){if(s===qr.mapValue&&o===qr.mapValue)return 0;if(s===qr.mapValue)return 1;if(o===qr.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),d=o.fields||{},u=Object.keys(d);c.sort(),u.sort();for(let m=0;m<c.length&&m<u.length;++m){let p=mt(c[m],u[m]);if(p!==0)return p;let _=Qr(a[c[m]],d[u[m]]);if(_!==0)return _}return mt(c.length,u.length)}(n.mapValue,t.mapValue);default:throw J()}}function $A(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return mt(n,t);let e=Qn(n),i=Qn(t),r=mt(e.seconds,i.seconds);return r!==0?r:mt(e.nanos,i.nanos)}function WA(n,t){let e=n.values||[],i=t.values||[];for(let r=0;r<e.length&&r<i.length;++r){let s=Qr(e[r],i[r]);if(s)return s}return mt(e.length,i.length)}function $a(n){return vb(n)}function vb(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){let i=Qn(e);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return Hr(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return Q.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let i="[",r=!0;for(let s of e.values||[])r?r=!1:i+=",",i+=vb(s);return i+"]"}(n.arrayValue):"mapValue"in n?function(e){let i=Object.keys(e.fields||{}).sort(),r="{",s=!0;for(let o of i)s?s=!1:r+=",",r+=`${o}:${vb(e.fields[o])}`;return r+"}"}(n.mapValue):J()}function Hs(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function bb(n){return!!n&&"integerValue"in n}function jd(n){return!!n&&"arrayValue"in n}function HA(n){return!!n&&"nullValue"in n}function KA(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Om(n){return!!n&&"mapValue"in n}function Lf(n){var t,e;return((e=(((t=n?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="__vector__"}function kd(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let t={mapValue:{fields:{}}};return no(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=kd(i)),t}if(n.arrayValue){let t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=kd(n.arrayValue.values[e]);return t}return Object.assign({},n)}function ik(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var nk={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function Z2(n){return"nullValue"in n?Nm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Hs(Kr.empty(),Q.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Lf(n)?nk:{mapValue:{}}:J()}function J2(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Hs(Kr.empty(),Q.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?nk:"mapValue"in n?Lf(n)?{mapValue:{}}:qr:J()}function QA(n,t){let e=Qr(n.value,t.value);return e!==0?e:n.inclusive&&!t.inclusive?-1:!n.inclusive&&t.inclusive?1:0}function YA(n,t){let e=Qr(n.value,t.value);return e!==0?e:n.inclusive&&!t.inclusive?1:!n.inclusive&&t.inclusive?-1:0}var Qe=class n{constructor(t){this.value=t}static empty(){return new n({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!Om(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=kd(e)}setAll(t){let e=pe.emptyPath(),i={},r=[];t.forEach((o,a)=>{if(!e.isImmediateParentOf(a)){let c=this.getFieldsMap(e);this.applyChanges(c,i,r),i={},r=[],e=a.popLast()}o?i[a.lastSegment()]=kd(o):r.push(a.lastSegment())});let s=this.getFieldsMap(e);this.applyChanges(s,i,r)}delete(t){let e=this.field(t.popLast());Om(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return pn(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];Om(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){no(e,(r,s)=>t[r]=s);for(let r of i)delete t[r]}clone(){return new n(kd(this.value))}};function rk(n){let t=[];return no(n.fields,(e,i)=>{let r=new pe([e]);if(Om(i)){let s=rk(i.mapValue).fields;if(s.length===0)t.push(r);else for(let o of s)t.push(r.child(o))}else t.push(r)}),new Ii(t)}var Ee=class n{constructor(t,e,i,r,s,o,a){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new n(t,0,st.min(),st.min(),st.min(),Qe.empty(),0)}static newFoundDocument(t,e,i,r){return new n(t,1,e,st.min(),i,r,0)}static newNoDocument(t,e){return new n(t,2,e,st.min(),st.min(),Qe.empty(),0)}static newUnknownDocument(t,e){return new n(t,3,e,st.min(),st.min(),Qe.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(st.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Qe.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Qe.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=st.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof n&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var gn=class{constructor(t,e){this.position=t,this.inclusive=e}};function XA(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){let s=t[r],o=n.position[r];if(s.field.isKeyField()?i=Q.comparator(Q.fromName(o.referenceValue),e.key):i=Qr(o,e.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function ZA(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!pn(n.position[e],t.position[e]))return!1;return!0}var Ks=class{constructor(t,e="asc"){this.field=t,this.dir=e}};function tj(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}var Wm=class{},At=class n extends Wm{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new Ib(t,e,i):e==="array-contains"?new Tb(t,i):e==="in"?new Hm(t,i):e==="not-in"?new Cb(t,i):e==="array-contains-any"?new Ab(t,i):new n(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new Eb(t,i):new xb(t,i)}matches(t){let e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(Qr(e,this.value)):e!==null&&Ws(this.value)===Ws(e)&&this.matchesComparison(Qr(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return J()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},zt=class n extends Wm{constructor(t,e){super(),this.filters=t,this.op=e,this.ae=null}static create(t,e){return new n(t,e)}matches(t){return Wa(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Wa(n){return n.op==="and"}function yb(n){return n.op==="or"}function d0(n){return sk(n)&&Wa(n)}function sk(n){for(let t of n.filters)if(t instanceof zt)return!1;return!0}function wb(n){if(n instanceof At)return n.field.canonicalString()+n.op.toString()+$a(n.value);if(d0(n))return n.filters.map(t=>wb(t)).join(",");{let t=n.filters.map(e=>wb(e)).join(",");return`${n.op}(${t})`}}function ok(n,t){return n instanceof At?function(i,r){return r instanceof At&&i.op===r.op&&i.field.isEqual(r.field)&&pn(i.value,r.value)}(n,t):n instanceof zt?function(i,r){return r instanceof zt&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&ok(o,r.filters[a]),!0):!1}(n,t):void J()}function ak(n,t){let e=n.filters.concat(t);return zt.create(e,n.op)}function ck(n){return n instanceof At?function(e){return`${e.field.canonicalString()} ${e.op} ${$a(e.value)}`}(n):n instanceof zt?function(e){return e.op.toString()+" {"+e.getFilters().map(ck).join(" ,")+"}"}(n):"Filter"}var Ib=class extends At{constructor(t,e,i){super(t,e,i),this.key=Q.fromName(i.referenceValue)}matches(t){let e=Q.comparator(t.key,this.key);return this.matchesComparison(e)}},Eb=class extends At{constructor(t,e){super(t,"in",e),this.keys=lk("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}},xb=class extends At{constructor(t,e){super(t,"not-in",e),this.keys=lk("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}};function lk(n,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(i=>Q.fromName(i.referenceValue))}var Tb=class extends At{constructor(t,e){super(t,"array-contains",e)}matches(t){let e=t.data.field(this.field);return jd(e)&&Vd(e.arrayValue,this.value)}},Hm=class extends At{constructor(t,e){super(t,"in",e)}matches(t){let e=t.data.field(this.field);return e!==null&&Vd(this.value.arrayValue,e)}},Cb=class extends At{constructor(t,e){super(t,"not-in",e)}matches(t){if(Vd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let e=t.data.field(this.field);return e!==null&&!Vd(this.value.arrayValue,e)}},Ab=class extends At{constructor(t,e){super(t,"array-contains-any",e)}matches(t){let e=t.data.field(this.field);return!(!jd(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>Vd(this.value.arrayValue,i))}};var Sb=class{constructor(t,e=null,i=[],r=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function kb(n,t=null,e=[],i=[],r=null,s=null,o=null){return new Sb(n,t,e,i,r,s,o)}function Qs(n){let t=K(n);if(t.ue===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>wb(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),nu(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>$a(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>$a(i)).join(",")),t.ue=e}return t.ue}function ru(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!tj(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!ok(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!ZA(n.startAt,t.startAt)&&ZA(n.endAt,t.endAt)}function Km(n){return Q.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Qm(n,t){return n.filters.filter(e=>e instanceof At&&e.field.isEqual(t))}function JA(n,t,e){let i=Nm,r=!0;for(let s of Qm(n,t)){let o=Nm,a=!0;switch(s.op){case"<":case"<=":o=Z2(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Nm}QA({value:i,inclusive:r},{value:o,inclusive:a})<0&&(i=o,r=a)}if(e!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){let o=e.position[s];QA({value:i,inclusive:r},{value:o,inclusive:e.inclusive})<0&&(i=o,r=e.inclusive);break}}return{value:i,inclusive:r}}function tS(n,t,e){let i=qr,r=!0;for(let s of Qm(n,t)){let o=qr,a=!0;switch(s.op){case">=":case">":o=J2(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=qr}YA({value:i,inclusive:r},{value:o,inclusive:a})>0&&(i=o,r=a)}if(e!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){let o=e.position[s];YA({value:i,inclusive:r},{value:o,inclusive:e.inclusive})>0&&(i=o,r=e.inclusive);break}}return{value:i,inclusive:r}}var Yi=class{constructor(t,e=null,i=[],r=[],s=null,o="F",a=null,c=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function dk(n,t,e,i,r,s,o,a){return new Yi(n,t,e,i,r,s,o,a)}function ac(n){return new Yi(n)}function eS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function u0(n){return n.collectionGroup!==null}function Ba(n){let t=K(n);if(t.ce===null){t.ce=[];let e=new Set;for(let s of t.explicitOrderBy)t.ce.push(s),e.add(s.field.canonicalString());let i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new $t(pe.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(t).forEach(s=>{e.has(s.canonicalString())||s.isKeyField()||t.ce.push(new Ks(s,i))}),e.has(pe.keyField().canonicalString())||t.ce.push(new Ks(pe.keyField(),i))}return t.ce}function ni(n){let t=K(n);return t.le||(t.le=ej(t,Ba(n))),t.le}function ej(n,t){if(n.limitType==="F")return kb(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(r=>{let s=r.dir==="desc"?"asc":"desc";return new Ks(r.field,s)});let e=n.endAt?new gn(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new gn(n.startAt.position,n.startAt.inclusive):null;return kb(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}function Rb(n,t){let e=n.filters.concat([t]);return new Yi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function Ym(n,t,e){return new Yi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function su(n,t){return ru(ni(n),ni(t))&&n.limitType===t.limitType}function uk(n){return`${Qs(ni(n))}|lt:${n.limitType}`}function Oa(n){return`Query(target=${function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map(r=>ck(r)).join(", ")}]`),nu(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(r=>$a(r)).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(r=>$a(r)).join(",")),`Target(${i})`}(ni(n))}; limitType=${n.limitType})`}function ou(n,t){return t.isFoundDocument()&&function(i,r){let s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):Q.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(n,t)&&function(i,r){for(let s of Ba(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(n,t)&&function(i,r){for(let s of i.filters)if(!s.matches(r))return!1;return!0}(n,t)&&function(i,r){return!(i.startAt&&!function(o,a,c){let d=XA(o,a,c);return o.inclusive?d<=0:d<0}(i.startAt,Ba(i),r)||i.endAt&&!function(o,a,c){let d=XA(o,a,c);return o.inclusive?d>=0:d>0}(i.endAt,Ba(i),r))}(n,t)}function hk(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function mk(n){return(t,e)=>{let i=!1;for(let r of Ba(n)){let s=ij(r,t,e);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function ij(n,t,e){let i=n.field.isKeyField()?Q.comparator(t.key,e.key):function(s,o,a){let c=o.data.field(s),d=a.data.field(s);return c!==null&&d!==null?Qr(c,d):J()}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return J()}}var _n=class{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){let e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(let[r,s]of i)if(this.equalsFn(r,t))return s}}has(t){return this.get(t)!==void 0}set(t,e){let i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){let e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){no(this.inner,(e,i)=>{for(let[r,s]of i)t(r,s)})}isEmpty(){return tk(this.inner)}size(){return this.innerSize}};var nj=new ee(Q.comparator);function ui(){return nj}var fk=new ee(Q.comparator);function Ad(...n){let t=fk;for(let e of n)t=t.insert(e.key,e);return t}function pk(n){let t=fk;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function un(){return Rd()}function gk(){return Rd()}function Rd(){return new _n(n=>n.toString(),(n,t)=>n.isEqual(t))}var rj=new ee(Q.comparator),sj=new $t(Q.comparator);function pt(...n){let t=sj;for(let e of n)t=t.add(e);return t}var oj=new $t(mt);function h0(){return oj}function m0(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Od(t)?"-0":t}}function _k(n){return{integerValue:""+n}}function vk(n,t){return QS(t)?_k(t):m0(n,t)}var Ha=class{constructor(){this._=void 0}};function aj(n,t,e){return n instanceof Yr?function(r,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Ff(s)&&(s=l0(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(e,t):n instanceof Yn?yk(n,t):n instanceof Xn?wk(n,t):function(r,s){let o=bk(r,s),a=iS(o)+iS(r.Pe);return bb(o)&&bb(r.Pe)?_k(a):m0(r.serializer,a)}(n,t)}function cj(n,t,e){return n instanceof Yn?yk(n,t):n instanceof Xn?wk(n,t):e}function bk(n,t){return n instanceof Xr?function(i){return bb(i)||function(s){return!!s&&"doubleValue"in s}(i)}(t)?t:{integerValue:0}:null}var Yr=class extends Ha{},Yn=class extends Ha{constructor(t){super(),this.elements=t}};function yk(n,t){let e=Ik(t);for(let i of n.elements)e.some(r=>pn(r,i))||e.push(i);return{arrayValue:{values:e}}}var Xn=class extends Ha{constructor(t){super(),this.elements=t}};function wk(n,t){let e=Ik(t);for(let i of n.elements)e=e.filter(r=>!pn(r,i));return{arrayValue:{values:e}}}var Xr=class extends Ha{constructor(t,e){super(),this.serializer=t,this.Pe=e}};function iS(n){return ne(n.integerValue||n.doubleValue)}function Ik(n){return jd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Ys=class{constructor(t,e){this.field=t,this.transform=e}};function lj(n,t){return n.field.isEqual(t.field)&&function(i,r){return i instanceof Yn&&r instanceof Yn||i instanceof Xn&&r instanceof Xn?qa(i.elements,r.elements,pn):i instanceof Xr&&r instanceof Xr?pn(i.Pe,r.Pe):i instanceof Yr&&r instanceof Yr}(n.transform,t.transform)}var Db=class{constructor(t,e){this.version=t,this.transformResults=e}},ue=class n{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new n}static exists(t){return new n(void 0,t)}static updateTime(t){return new n(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}};function Fm(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}var Ka=class{};function Ek(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new Jr(n.key,ue.none()):new Zr(n.key,n.data,ue.none());{let e=n.data,i=Qe.empty(),r=new $t(pe.comparator);for(let s of t.fields)if(!r.has(s)){let o=e.field(s);o===null&&s.length>1&&(s=s.popLast(),o=e.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new Xi(n.key,i,new Ii(r.toArray()),ue.none())}}function dj(n,t,e){n instanceof Zr?function(r,s,o){let a=r.value.clone(),c=rS(r.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,t,e):n instanceof Xi?function(r,s,o){if(!Fm(r.precondition,s))return void s.convertToUnknownDocument(o.version);let a=rS(r.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(xk(r)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,t,e):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,e)}function Dd(n,t,e,i){return n instanceof Zr?function(s,o,a,c){if(!Fm(s.precondition,o))return a;let d=s.value.clone(),u=sS(s.fieldTransforms,c,o);return d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(n,t,e,i):n instanceof Xi?function(s,o,a,c){if(!Fm(s.precondition,o))return a;let d=sS(s.fieldTransforms,c,o),u=o.data;return u.setAll(xk(s)),u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(n,t,e,i):function(s,o,a){return Fm(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,t,e)}function uj(n,t){let e=null;for(let i of n.fieldTransforms){let r=t.data.field(i.field),s=bk(i.transform,r||null);s!=null&&(e===null&&(e=Qe.empty()),e.set(i.field,s))}return e||null}function nS(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&qa(i,r,(s,o)=>lj(s,o))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}var Zr=class extends Ka{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},Xi=class extends Ka{constructor(t,e,i,r,s=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function xk(n){let t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){let i=n.data.field(e);t.set(e,i)}}),t}function rS(n,t,e){let i=new Map;nt(n.length===e.length);for(let r=0;r<e.length;r++){let s=n[r],o=s.transform,a=t.data.field(s.field);i.set(s.field,cj(o,a,e[r]))}return i}function sS(n,t,e){let i=new Map;for(let r of n){let s=r.transform,o=e.data.field(r.field);i.set(r.field,aj(s,o,t))}return i}var Jr=class extends Ka{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Ud=class extends Ka{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Bd=class{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){let i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){let s=this.mutations[r];s.key.isEqual(t.key)&&dj(s,t,i[r])}}applyToLocalView(t,e){for(let i of this.baseMutations)i.key.isEqual(t.key)&&(e=Dd(i,t,e,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(t.key)&&(e=Dd(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){let i=gk();return this.mutations.forEach(r=>{let s=t.get(r.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=e.has(r.key)?null:a;let c=Ek(o,a);c!==null&&i.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(st.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),pt())}isEqual(t){return this.batchId===t.batchId&&qa(this.mutations,t.mutations,(e,i)=>nS(e,i))&&qa(this.baseMutations,t.baseMutations,(e,i)=>nS(e,i))}},Pb=class n{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){nt(t.mutations.length===i.length);let r=function(){return rj}(),s=t.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new n(t,e,i,r)}};var zd=class{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Mb=class{constructor(t,e){this.count=t,this.unchangedNames=e}};var be,Rt;function Tk(n){switch(n){default:return J();case P.CANCELLED:case P.UNKNOWN:case P.DEADLINE_EXCEEDED:case P.RESOURCE_EXHAUSTED:case P.INTERNAL:case P.UNAVAILABLE:case P.UNAUTHENTICATED:return!1;case P.INVALID_ARGUMENT:case P.NOT_FOUND:case P.ALREADY_EXISTS:case P.PERMISSION_DENIED:case P.FAILED_PRECONDITION:case P.ABORTED:case P.OUT_OF_RANGE:case P.UNIMPLEMENTED:case P.DATA_LOSS:return!0}}function Ck(n){if(n===void 0)return fe("GRPC error has no .code"),P.UNKNOWN;switch(n){case be.OK:return P.OK;case be.CANCELLED:return P.CANCELLED;case be.UNKNOWN:return P.UNKNOWN;case be.DEADLINE_EXCEEDED:return P.DEADLINE_EXCEEDED;case be.RESOURCE_EXHAUSTED:return P.RESOURCE_EXHAUSTED;case be.INTERNAL:return P.INTERNAL;case be.UNAVAILABLE:return P.UNAVAILABLE;case be.UNAUTHENTICATED:return P.UNAUTHENTICATED;case be.INVALID_ARGUMENT:return P.INVALID_ARGUMENT;case be.NOT_FOUND:return P.NOT_FOUND;case be.ALREADY_EXISTS:return P.ALREADY_EXISTS;case be.PERMISSION_DENIED:return P.PERMISSION_DENIED;case be.FAILED_PRECONDITION:return P.FAILED_PRECONDITION;case be.ABORTED:return P.ABORTED;case be.OUT_OF_RANGE:return P.OUT_OF_RANGE;case be.UNIMPLEMENTED:return P.UNIMPLEMENTED;case be.DATA_LOSS:return P.DATA_LOSS;default:return J()}}(Rt=be||(be={}))[Rt.OK=0]="OK",Rt[Rt.CANCELLED=1]="CANCELLED",Rt[Rt.UNKNOWN=2]="UNKNOWN",Rt[Rt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Rt[Rt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Rt[Rt.NOT_FOUND=5]="NOT_FOUND",Rt[Rt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Rt[Rt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Rt[Rt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Rt[Rt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Rt[Rt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Rt[Rt.ABORTED=10]="ABORTED",Rt[Rt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Rt[Rt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Rt[Rt.INTERNAL=13]="INTERNAL",Rt[Rt.UNAVAILABLE=14]="UNAVAILABLE",Rt[Rt.DATA_LOSS=15]="DATA_LOSS";var oS=null;function Ak(){return new TextEncoder}var hj=new Vr([4294967295,4294967295],0);function aS(n){let t=Ak().encode(n),e=new Kv;return e.update(t),new Uint8Array(e.digest())}function cS(n){let t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Vr([e,i],0),new Vr([r,s],0)]}var Nb=class n{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new Gs(`Invalid padding: ${e}`);if(i<0)throw new Gs(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new Gs(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new Gs(`Invalid padding when bitmap length is 0: ${e}`);this.Ie=8*t.length-e,this.Te=Vr.fromNumber(this.Ie)}Ee(t,e,i){let r=t.add(e.multiply(Vr.fromNumber(i)));return r.compare(hj)===1&&(r=new Vr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;let e=aS(t),[i,r]=cS(e);for(let s=0;s<this.hashCount;s++){let o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(t,e,i){let r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new n(s,r,e);return i.forEach(a=>o.insert(a)),o}insert(t){if(this.Ie===0)return;let e=aS(t),[i,r]=cS(e);for(let s=0;s<this.hashCount;s++){let o=this.Ee(i,r,s);this.Ae(o)}}Ae(t){let e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}},Gs=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var qd=class n{constructor(t,e,i,r,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e,i){let r=new Map;return r.set(t,Gd.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new n(st.min(),r,new ee(mt),ui(),pt())}},Gd=class n{constructor(t,e,i,r,s){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new n(i,e,pt(),pt(),pt())}};var za=class{constructor(t,e,i,r){this.Re=t,this.removedTargetIds=e,this.key=i,this.Ve=r}},Xm=class{constructor(t,e){this.targetId=t,this.me=e}},Zm=class{constructor(t,e,i=_e.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}},Jm=class{constructor(){this.fe=0,this.ge=dS(),this.pe=_e.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=pt(),e=pt(),i=pt();return this.ge.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:J()}}),new Gd(this.pe,this.ye,t,e,i)}Ce(){this.we=!1,this.ge=dS()}Fe(t,e){this.we=!0,this.ge=this.ge.insert(t,e)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,nt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Ob=class{constructor(t){this.Le=t,this.Be=new Map,this.ke=ui(),this.qe=lS(),this.Qe=new ee(mt)}Ke(t){for(let e of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(e,t.Ve):this.Ue(e,t.key,t.Ve);for(let e of t.removedTargetIds)this.Ue(e,t.key,t.Ve)}We(t){this.forEachTarget(t,e=>{let i=this.Ge(e);switch(t.state){case 0:this.ze(e)&&i.De(t.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(t.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(e);break;case 3:this.ze(e)&&(i.Ne(),i.De(t.resumeToken));break;case 4:this.ze(e)&&(this.je(e),i.De(t.resumeToken));break;default:J()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Be.forEach((i,r)=>{this.ze(r)&&e(r)})}He(t){let e=t.targetId,i=t.me.count,r=this.Je(e);if(r){let s=r.target;if(Km(s))if(i===0){let o=new Q(s.path);this.Ue(e,o,Ee.newNoDocument(o,st.min()))}else nt(i===1);else{let o=this.Ye(e);if(o!==i){let a=this.Ze(t),c=a?this.Xe(a,t,o):1;if(c!==0){this.je(e);let d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(e,d)}oS?.et(function(u,m,p,_,w){var A,x,V,H,j,Z;let lt={localCacheCount:u,existenceFilterCount:m.count,databaseId:p.database,projectId:p.projectId},at=m.unchangedNames;return at&&(lt.bloomFilter={applied:w===0,hashCount:(A=at?.hashCount)!==null&&A!==void 0?A:0,bitmapLength:(H=(V=(x=at?.bits)===null||x===void 0?void 0:x.bitmap)===null||V===void 0?void 0:V.length)!==null&&H!==void 0?H:0,padding:(Z=(j=at?.bits)===null||j===void 0?void 0:j.padding)!==null&&Z!==void 0?Z:0,mightContain:I=>{var v;return(v=_?.mightContain(I))!==null&&v!==void 0&&v}}),lt}(o,t.me,this.Le.tt(),a,c))}}}}Ze(t){let e=t.me.unchangedNames;if(!e||!e.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=e,o,a;try{o=Hr(i).toUint8Array()}catch(c){if(c instanceof $m)return Ni("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Nb(o,r,s)}catch(c){return Ni(c instanceof Gs?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(t,e,i){return e.me.count===i-this.nt(t,e.targetId)?0:2}nt(t,e){let i=this.Le.getRemoteKeysForTarget(e),r=0;return i.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.Ue(e,s,null),r++)}),r}rt(t){let e=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&Km(a.target)){let c=new Q(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,Ee.newNoDocument(c,t))}s.be&&(e.set(o,s.ve()),s.Ce())}});let i=pt();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let d=this.Je(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));let r=new qd(t,e,this.Qe,this.ke,i);return this.ke=ui(),this.qe=lS(),this.Qe=new ee(mt),r}$e(t,e){if(!this.ze(t))return;let i=this.it(t,e.key)?2:0;this.Ge(t).Fe(e.key,i),this.ke=this.ke.insert(e.key,e),this.qe=this.qe.insert(e.key,this.st(e.key).add(t))}Ue(t,e,i){if(!this.ze(t))return;let r=this.Ge(t);this.it(t,e)?r.Fe(e,1):r.Me(e),this.qe=this.qe.insert(e,this.st(e).delete(t)),i&&(this.ke=this.ke.insert(e,i))}removeTarget(t){this.Be.delete(t)}Ye(t){let e=this.Ge(t).ve();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let e=this.Be.get(t);return e||(e=new Jm,this.Be.set(t,e)),e}st(t){let e=this.qe.get(t);return e||(e=new $t(mt),this.qe=this.qe.insert(t,e)),e}ze(t){let e=this.Je(t)!==null;return e||L("WatchChangeAggregator","Detected inactive target",t),e}Je(t){let e=this.Be.get(t);return e&&e.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new Jm),this.Le.getRemoteKeysForTarget(t).forEach(e=>{this.Ue(t,e,null)})}it(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}};function lS(){return new ee(Q.comparator)}function dS(){return new ee(Q.comparator)}var mj={asc:"ASCENDING",desc:"DESCENDING"},fj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pj={and:"AND",or:"OR"},Fb=class{constructor(t,e){this.databaseId=t,this.useProto3Json=e}};function Lb(n,t){return n.useProto3Json||nu(t)?t:{value:t}}function Qa(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Sk(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function gj(n,t){return Qa(n,t.toTimestamp())}function ge(n){return nt(!!n),st.fromTimestamp(function(e){let i=Qn(e);return new ce(i.seconds,i.nanos)}(n))}function f0(n,t){return Vb(n,t).canonicalString()}function Vb(n,t){let e=function(r){return new Dt(["projects",r.projectId,"databases",r.database])}(n).child("documents");return t===void 0?e:e.child(t)}function kk(n){let t=Dt.fromString(n);return nt(jk(t)),t}function $d(n,t){return f0(n.databaseId,t.path)}function mn(n,t){let e=kk(t);if(e.get(1)!==n.databaseId.projectId)throw new O(P.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new O(P.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new Q(Pk(e))}function Rk(n,t){return f0(n.databaseId,t)}function Dk(n){let t=kk(n);return t.length===4?Dt.emptyPath():Pk(t)}function jb(n){return new Dt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Pk(n){return nt(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function uS(n,t,e){return{name:$d(n,t),fields:e.value.mapValue.fields}}function Mk(n,t,e){let i=mn(n,t.name),r=ge(t.updateTime),s=t.createTime?ge(t.createTime):st.min(),o=new Qe({mapValue:{fields:t.fields}}),a=Ee.newFoundDocument(i,r,s,o);return e&&a.setHasCommittedMutations(),e?a.setHasCommittedMutations():a}function _j(n,t){return"found"in t?function(i,r){nt(!!r.found),r.found.name,r.found.updateTime;let s=mn(i,r.found.name),o=ge(r.found.updateTime),a=r.found.createTime?ge(r.found.createTime):st.min(),c=new Qe({mapValue:{fields:r.found.fields}});return Ee.newFoundDocument(s,o,a,c)}(n,t):"missing"in t?function(i,r){nt(!!r.missing),nt(!!r.readTime);let s=mn(i,r.missing),o=ge(r.readTime);return Ee.newNoDocument(s,o)}(n,t):J()}function vj(n,t){let e;if("targetChange"in t){t.targetChange;let i=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:J()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(d,u){return d.useProto3Json?(nt(u===void 0||typeof u=="string"),_e.fromBase64String(u||"")):(nt(u===void 0||u instanceof Buffer||u instanceof Uint8Array),_e.fromUint8Array(u||new Uint8Array))}(n,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(d){let u=d.code===void 0?P.UNKNOWN:Ck(d.code);return new O(u,d.message||"")}(o);e=new Zm(i,r,s,a||null)}else if("documentChange"in t){t.documentChange;let i=t.documentChange;i.document,i.document.name,i.document.updateTime;let r=mn(n,i.document.name),s=ge(i.document.updateTime),o=i.document.createTime?ge(i.document.createTime):st.min(),a=new Qe({mapValue:{fields:i.document.fields}}),c=Ee.newFoundDocument(r,s,o,a),d=i.targetIds||[],u=i.removedTargetIds||[];e=new za(d,u,c.key,c)}else if("documentDelete"in t){t.documentDelete;let i=t.documentDelete;i.document;let r=mn(n,i.document),s=i.readTime?ge(i.readTime):st.min(),o=Ee.newNoDocument(r,s),a=i.removedTargetIds||[];e=new za([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;let i=t.documentRemove;i.document;let r=mn(n,i.document),s=i.removedTargetIds||[];e=new za([],s,r,null)}else{if(!("filter"in t))return J();{t.filter;let i=t.filter;i.targetId;let{count:r=0,unchangedNames:s}=i,o=new Mb(r,s),a=i.targetId;e=new Xm(a,o)}}return e}function Wd(n,t){let e;if(t instanceof Zr)e={update:uS(n,t.key,t.value)};else if(t instanceof Jr)e={delete:$d(n,t.key)};else if(t instanceof Xi)e={update:uS(n,t.key,t.data),updateMask:xj(t.fieldMask)};else{if(!(t instanceof Ud))return J();e={verify:$d(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(s,o){let a=o.transform;if(a instanceof Yr)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Yn)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Xn)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Xr)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw J()}(0,i))),t.precondition.isNone||(e.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:gj(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:J()}(n,t.precondition)),e}function Ub(n,t){let e=t.currentDocument?function(s){return s.updateTime!==void 0?ue.updateTime(ge(s.updateTime)):s.exists!==void 0?ue.exists(s.exists):ue.none()}(t.currentDocument):ue.none(),i=t.updateTransforms?t.updateTransforms.map(r=>function(o,a){let c=null;if("setToServerValue"in a)nt(a.setToServerValue==="REQUEST_TIME"),c=new Yr;else if("appendMissingElements"in a){let u=a.appendMissingElements.values||[];c=new Yn(u)}else if("removeAllFromArray"in a){let u=a.removeAllFromArray.values||[];c=new Xn(u)}else"increment"in a?c=new Xr(o,a.increment):J();let d=pe.fromServerFormat(a.fieldPath);return new Ys(d,c)}(n,r)):[];if(t.update){t.update.name;let r=mn(n,t.update.name),s=new Qe({mapValue:{fields:t.update.fields}});if(t.updateMask){let o=function(c){let d=c.fieldPaths||[];return new Ii(d.map(u=>pe.fromServerFormat(u)))}(t.updateMask);return new Xi(r,s,o,e,i)}return new Zr(r,s,e,i)}if(t.delete){let r=mn(n,t.delete);return new Jr(r,e)}if(t.verify){let r=mn(n,t.verify);return new Ud(r,e)}return J()}function bj(n,t){return n&&n.length>0?(nt(t!==void 0),n.map(e=>function(r,s){let o=r.updateTime?ge(r.updateTime):ge(s);return o.isEqual(st.min())&&(o=ge(s)),new Db(o,r.transformResults||[])}(e,t))):[]}function Nk(n,t){return{documents:[Rk(n,t.path)]}}function Ok(n,t){let e={structuredQuery:{}},i=t.path,r;t.collectionGroup!==null?(r=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=Rk(n,r);let s=function(d){if(d.length!==0)return Vk(zt.create(d,"and"))}(t.filters);s&&(e.structuredQuery.where=s);let o=function(d){if(d.length!==0)return d.map(u=>function(p){return{field:Fa(p.field),direction:wj(p.dir)}}(u))}(t.orderBy);o&&(e.structuredQuery.orderBy=o);let a=Lb(n,t.limit);return a!==null&&(e.structuredQuery.limit=a),t.startAt&&(e.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(t.endAt)),{_t:e,parent:r}}function Fk(n){let t=Dk(n.parent),e=n.structuredQuery,i=e.from?e.from.length:0,r=null;if(i>0){nt(i===1);let u=e.from[0];u.allDescendants?r=u.collectionId:t=t.child(u.collectionId)}let s=[];e.where&&(s=function(m){let p=Lk(m);return p instanceof zt&&d0(p)?p.getFilters():[p]}(e.where));let o=[];e.orderBy&&(o=function(m){return m.map(p=>function(w){return new Ks(La(w.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(p))}(e.orderBy));let a=null;e.limit&&(a=function(m){let p;return p=typeof m=="object"?m.value:m,nu(p)?null:p}(e.limit));let c=null;e.startAt&&(c=function(m){let p=!!m.before,_=m.values||[];return new gn(_,p)}(e.startAt));let d=null;return e.endAt&&(d=function(m){let p=!m.before,_=m.values||[];return new gn(_,p)}(e.endAt)),dk(t,r,o,s,a,"F",c,d)}function yj(n,t){let e=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return J()}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function Lk(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":let i=La(e.unaryFilter.field);return At.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=La(e.unaryFilter.field);return At.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=La(e.unaryFilter.field);return At.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=La(e.unaryFilter.field);return At.create(o,"!=",{nullValue:"NULL_VALUE"});default:return J()}}(n):n.fieldFilter!==void 0?function(e){return At.create(La(e.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return J()}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return zt.create(e.compositeFilter.filters.map(i=>Lk(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return J()}}(e.compositeFilter.op))}(n):J()}function wj(n){return mj[n]}function Ij(n){return fj[n]}function Ej(n){return pj[n]}function Fa(n){return{fieldPath:n.canonicalString()}}function La(n){return pe.fromServerFormat(n.fieldPath)}function Vk(n){return n instanceof At?function(e){if(e.op==="=="){if(KA(e.value))return{unaryFilter:{field:Fa(e.field),op:"IS_NAN"}};if(HA(e.value))return{unaryFilter:{field:Fa(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(KA(e.value))return{unaryFilter:{field:Fa(e.field),op:"IS_NOT_NAN"}};if(HA(e.value))return{unaryFilter:{field:Fa(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fa(e.field),op:Ij(e.op),value:e.value}}}(n):n instanceof zt?function(e){let i=e.getFilters().map(r=>Vk(r));return i.length===1?i[0]:{compositeFilter:{op:Ej(e.op),filters:i}}}(n):J()}function xj(n){let t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function jk(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Ya=class n{constructor(t,e,i,r,s=st.min(),o=st.min(),a=_e.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(t){return new n(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}};var tf=class{constructor(t){this.ct=t}};function Tj(n,t){let e;if(t.document)e=Mk(n.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){let i=Q.fromSegments(t.noDocument.path),r=Zs(t.noDocument.readTime);e=Ee.newNoDocument(i,r),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return J();{let i=Q.fromSegments(t.unknownDocument.path),r=Zs(t.unknownDocument.version);e=Ee.newUnknownDocument(i,r)}}return t.readTime&&e.setReadTime(function(r){let s=new ce(r[0],r[1]);return st.fromTimestamp(s)}(t.readTime)),e}function hS(n,t){let e=t.key,i={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:ef(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document=function(s,o){return{name:$d(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Qa(s,o.version.toTimestamp()),createTime:Qa(s,o.createTime.toTimestamp())}}(n.ct,t);else if(t.isNoDocument())i.noDocument={path:e.path.toArray(),readTime:Xs(t.version)};else{if(!t.isUnknownDocument())return J();i.unknownDocument={path:e.path.toArray(),version:Xs(t.version)}}return i}function ef(n){let t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function Xs(n){let t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Zs(n){let t=new ce(n.seconds,n.nanoseconds);return st.fromTimestamp(t)}function Bs(n,t){let e=(t.baseMutations||[]).map(s=>Ub(n.ct,s));for(let s=0;s<t.mutations.length-1;++s){let o=t.mutations[s];if(s+1<t.mutations.length&&t.mutations[s+1].transform!==void 0){let a=t.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}let i=t.mutations.map(s=>Ub(n.ct,s)),r=ce.fromMillis(t.localWriteTimeMs);return new Bd(t.batchId,r,e,i)}function Sd(n){let t=Zs(n.readTime),e=n.lastLimboFreeSnapshotVersion!==void 0?Zs(n.lastLimboFreeSnapshotVersion):st.min(),i;return i=function(s){return s.documents!==void 0}(n.query)?function(s){return nt(s.documents.length===1),ni(ac(Dk(s.documents[0])))}(n.query):function(s){return ni(Fk(s))}(n.query),new Ya(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,t,e,_e.fromBase64String(n.resumeToken))}function Uk(n,t){let e=Xs(t.snapshotVersion),i=Xs(t.lastLimboFreeSnapshotVersion),r;r=Km(t.target)?Nk(n.ct,t.target):Ok(n.ct,t.target)._t;let s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Qs(t.target),readTime:e,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function p0(n){let t=Fk({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Ym(t,t.limit,"L"):t}function eb(n,t){return new zd(t.largestBatchId,Ub(n.ct,t.overlayMutation))}function mS(n,t){let e=t.path.lastSegment();return[n,ii(t.path.popLast()),e]}function fS(n,t,e,i){return{indexId:n,uid:t,sequenceNumber:e,readTime:Xs(i.readTime),documentKey:ii(i.documentKey.path),largestBatchId:i.largestBatchId}}var Bb=class{getBundleMetadata(t,e){return pS(t).get(e).next(i=>{if(i)return function(s){return{id:s.bundleId,createTime:Zs(s.createTime),version:s.version}}(i)})}saveBundleMetadata(t,e){return pS(t).put(function(r){return{bundleId:r.id,createTime:Xs(ge(r.createTime)),version:r.version}}(e))}getNamedQuery(t,e){return gS(t).get(e).next(i=>{if(i)return function(s){return{name:s.name,query:p0(s.bundledQuery),readTime:Zs(s.readTime)}}(i)})}saveNamedQuery(t,e){return gS(t).put(function(r){return{name:r.name,readTime:Xs(ge(r.readTime)),bundledQuery:r.bundledQuery}}(e))}};function pS(n){return Ce(n,"bundles")}function gS(n){return Ce(n,"namedQueries")}var nf=class n{constructor(t,e){this.serializer=t,this.userId=e}static lt(t,e){let i=e.uid||"";return new n(t,i)}getOverlay(t,e){return Ed(t).get(mS(this.userId,e)).next(i=>i?eb(this.serializer,i):null)}getOverlays(t,e){let i=un();return R.forEach(e,r=>this.getOverlay(t,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){let r=[];return i.forEach((s,o)=>{let a=new zd(e,o);r.push(this.ht(t,a))}),R.waitFor(r)}removeOverlaysForBatchId(t,e,i){let r=new Set;e.forEach(o=>r.add(ii(o.getCollectionPath())));let s=[];return r.forEach(o=>{let a=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,i+1],!1,!0);s.push(Ed(t).j("collectionPathOverlayIndex",a))}),R.waitFor(s)}getOverlaysForCollection(t,e,i){let r=un(),s=ii(e),o=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Ed(t).U("collectionPathOverlayIndex",o).next(a=>{for(let c of a){let d=eb(this.serializer,c);r.set(d.getKey(),d)}return r})}getOverlaysForCollectionGroup(t,e,i,r){let s=un(),o,a=IDBKeyRange.bound([this.userId,e,i],[this.userId,e,Number.POSITIVE_INFINITY],!0);return Ed(t).J({index:"collectionGroupOverlayIndex",range:a},(c,d,u)=>{let m=eb(this.serializer,d);s.size()<r||m.largestBatchId===o?(s.set(m.getKey(),m),o=m.largestBatchId):u.done()}).next(()=>s)}ht(t,e){return Ed(t).put(function(r,s,o){let[a,c,d]=mS(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:d,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Wd(r.ct,o.mutation)}}(this.serializer,this.userId,e))}};function Ed(n){return Ce(n,"documentOverlays")}var zb=class{Pt(t){return Ce(t,"globals")}getSessionToken(t){return this.Pt(t).get("sessionToken").next(e=>{let i=e?.value;return i?_e.fromUint8Array(i):_e.EMPTY_BYTE_STRING})}setSessionToken(t,e){return this.Pt(t).put({name:"sessionToken",value:e.toUint8Array()})}};var Hn=class{constructor(){}It(t,e){this.Tt(t,e),e.Et()}Tt(t,e){if("nullValue"in t)this.dt(e,5);else if("booleanValue"in t)this.dt(e,10),e.At(t.booleanValue?1:0);else if("integerValue"in t)this.dt(e,15),e.At(ne(t.integerValue));else if("doubleValue"in t){let i=ne(t.doubleValue);isNaN(i)?this.dt(e,13):(this.dt(e,15),Od(i)?e.At(0):e.At(i))}else if("timestampValue"in t){let i=t.timestampValue;this.dt(e,20),typeof i=="string"&&(i=Qn(i)),e.Rt(`${i.seconds||""}`),e.At(i.nanos||0)}else if("stringValue"in t)this.Vt(t.stringValue,e),this.ft(e);else if("bytesValue"in t)this.dt(e,30),e.gt(Hr(t.bytesValue)),this.ft(e);else if("referenceValue"in t)this.yt(t.referenceValue,e);else if("geoPointValue"in t){let i=t.geoPointValue;this.dt(e,45),e.At(i.latitude||0),e.At(i.longitude||0)}else"mapValue"in t?ik(t)?this.dt(e,Number.MAX_SAFE_INTEGER):Lf(t)?this.wt(t.mapValue,e):(this.St(t.mapValue,e),this.ft(e)):"arrayValue"in t?(this.bt(t.arrayValue,e),this.ft(e)):J()}Vt(t,e){this.dt(e,25),this.Dt(t,e)}Dt(t,e){e.Rt(t)}St(t,e){let i=t.fields||{};this.dt(e,55);for(let r of Object.keys(i))this.Vt(r,e),this.Tt(i[r],e)}wt(t,e){var i,r;let s=t.fields||{};this.dt(e,53);let o="value",a=((r=(i=s[o].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.length)||0;this.dt(e,15),e.At(ne(a)),this.Vt(o,e),this.Tt(s[o],e)}bt(t,e){let i=t.values||[];this.dt(e,50);for(let r of i)this.Tt(r,e)}yt(t,e){this.dt(e,37),Q.fromName(t).path.forEach(i=>{this.dt(e,60),this.Dt(i,e)})}dt(t,e){t.At(e)}ft(t){t.At(2)}};Hn.vt=new Hn;function Cj(n){if(n===0)return 8;let t=0;return!(n>>4)&&(t+=4,n<<=4),!(n>>6)&&(t+=2,n<<=2),!(n>>7)&&(t+=1),t}function _S(n){let t=64-function(i){let r=0;for(let s=0;s<8;++s){let o=Cj(255&i[s]);if(r+=o,o!==8)break}return r}(n);return Math.ceil(t/8)}var qb=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(t){let e=t[Symbol.iterator](),i=e.next();for(;!i.done;)this.Ft(i.value),i=e.next();this.Mt()}xt(t){let e=t[Symbol.iterator](),i=e.next();for(;!i.done;)this.Ot(i.value),i=e.next();this.Nt()}Lt(t){for(let e of t){let i=e.charCodeAt(0);if(i<128)this.Ft(i);else if(i<2048)this.Ft(960|i>>>6),this.Ft(128|63&i);else if(e<"\uD800"||"\uDBFF"<e)this.Ft(480|i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i);else{let r=e.codePointAt(0);this.Ft(240|r>>>18),this.Ft(128|63&r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r)}}this.Mt()}Bt(t){for(let e of t){let i=e.charCodeAt(0);if(i<128)this.Ot(i);else if(i<2048)this.Ot(960|i>>>6),this.Ot(128|63&i);else if(e<"\uD800"||"\uDBFF"<e)this.Ot(480|i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i);else{let r=e.codePointAt(0);this.Ot(240|r>>>18),this.Ot(128|63&r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r)}}this.Nt()}kt(t){let e=this.qt(t),i=_S(e);this.Qt(1+i),this.buffer[this.position++]=255&i;for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=255&e[r]}Kt(t){let e=this.qt(t),i=_S(e);this.Qt(1+i),this.buffer[this.position++]=~(255&i);for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=~(255&e[r])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(t){this.Qt(t.length),this.buffer.set(t,this.position),this.position+=t.length}zt(){return this.buffer.slice(0,this.position)}qt(t){let e=function(s){let o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(t),i=(128&e[0])!=0;e[0]^=i?255:128;for(let r=1;r<e.length;++r)e[r]^=i?255:0;return e}Ft(t){let e=255&t;e===0?(this.Ut(0),this.Ut(255)):e===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}Ot(t){let e=255&t;e===0?(this.Gt(0),this.Gt(255)):e===255?(this.Gt(255),this.Gt(0)):this.Gt(t)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(t){this.Qt(1),this.buffer[this.position++]=t}Gt(t){this.Qt(1),this.buffer[this.position++]=~t}Qt(t){let e=t+this.position;if(e<=this.buffer.length)return;let i=2*this.buffer.length;i<e&&(i=e);let r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}},Gb=class{constructor(t){this.jt=t}gt(t){this.jt.Ct(t)}Rt(t){this.jt.Lt(t)}At(t){this.jt.kt(t)}Et(){this.jt.$t()}},$b=class{constructor(t){this.jt=t}gt(t){this.jt.xt(t)}Rt(t){this.jt.Bt(t)}At(t){this.jt.Kt(t)}Et(){this.jt.Wt()}},zs=class{constructor(){this.jt=new qb,this.Ht=new Gb(this.jt),this.Jt=new $b(this.jt)}seed(t){this.jt.seed(t)}Yt(t){return t===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var qs=class n{constructor(t,e,i,r){this.indexId=t,this.documentKey=e,this.arrayValue=i,this.directionalValue=r}Zt(){let t=this.directionalValue.length,e=t===0||this.directionalValue[t-1]===255?t+1:t,i=new Uint8Array(e);return i.set(this.directionalValue,0),e!==t?i.set([0],this.directionalValue.length):++i[i.length-1],new n(this.indexId,this.documentKey,this.arrayValue,i)}};function jr(n,t){let e=n.indexId-t.indexId;return e!==0?e:(e=vS(n.arrayValue,t.arrayValue),e!==0?e:(e=vS(n.directionalValue,t.directionalValue),e!==0?e:Q.comparator(n.documentKey,t.documentKey)))}function vS(n,t){for(let e=0;e<n.length&&e<t.length;++e){let i=n[e]-t[e];if(i!==0)return i}return n.length-t.length}var rf=class{constructor(t){this.Xt=new $t((e,i)=>pe.comparator(e.field,i.field)),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.en=t.orderBy,this.tn=[];for(let e of t.filters){let i=e;i.isInequality()?this.Xt=this.Xt.add(i):this.tn.push(i)}}get nn(){return this.Xt.size>1}rn(t){if(nt(t.collectionGroup===this.collectionId),this.nn)return!1;let e=hb(t);if(e!==void 0&&!this.sn(e))return!1;let i=js(t),r=new Set,s=0,o=0;for(;s<i.length&&this.sn(i[s]);++s)r=r.add(i[s].fieldPath.canonicalString());if(s===i.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!r.has(a.field.canonicalString())){let c=i[s];if(!this.on(a,c)||!this._n(this.en[o++],c))return!1}++s}for(;s<i.length;++s){let a=i[s];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let t=new $t(pe.comparator),e=[];for(let i of this.tn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")e.push(new Ua(i.field,2));else{if(t.has(i.field))continue;t=t.add(i.field),e.push(new Ua(i.field,0))}for(let i of this.en)i.field.isKeyField()||t.has(i.field)||(t=t.add(i.field),e.push(new Ua(i.field,i.dir==="asc"?0:1)));return new Ga(Ga.UNKNOWN_ID,this.collectionId,e,Nd.empty())}sn(t){for(let e of this.tn)if(this.on(e,t))return!0;return!1}on(t,e){if(t===void 0||!t.field.isEqual(e.fieldPath))return!1;let i=t.op==="array-contains"||t.op==="array-contains-any";return e.kind===2===i}_n(t,e){return!!t.field.isEqual(e.fieldPath)&&(e.kind===0&&t.dir==="asc"||e.kind===1&&t.dir==="desc")}};function Bk(n){var t,e;if(nt(n instanceof At||n instanceof zt),n instanceof At){if(n instanceof Hm){let r=((e=(t=n.value.arrayValue)===null||t===void 0?void 0:t.values)===null||e===void 0?void 0:e.map(s=>At.create(n.field,"==",s)))||[];return zt.create(r,"or")}return n}let i=n.filters.map(r=>Bk(r));return zt.create(i,n.op)}function Aj(n){if(n.getFilters().length===0)return[];let t=Kb(Bk(n));return nt(zk(t)),Wb(t)||Hb(t)?[t]:t.getFilters()}function Wb(n){return n instanceof At}function Hb(n){return n instanceof zt&&d0(n)}function zk(n){return Wb(n)||Hb(n)||function(e){if(e instanceof zt&&yb(e)){for(let i of e.getFilters())if(!Wb(i)&&!Hb(i))return!1;return!0}return!1}(n)}function Kb(n){if(nt(n instanceof At||n instanceof zt),n instanceof At)return n;if(n.filters.length===1)return Kb(n.filters[0]);let t=n.filters.map(i=>Kb(i)),e=zt.create(t,n.op);return e=sf(e),zk(e)?e:(nt(e instanceof zt),nt(Wa(e)),nt(e.filters.length>1),e.filters.reduce((i,r)=>g0(i,r)))}function g0(n,t){let e;return nt(n instanceof At||n instanceof zt),nt(t instanceof At||t instanceof zt),e=n instanceof At?t instanceof At?function(r,s){return zt.create([r,s],"and")}(n,t):bS(n,t):t instanceof At?bS(t,n):function(r,s){if(nt(r.filters.length>0&&s.filters.length>0),Wa(r)&&Wa(s))return ak(r,s.getFilters());let o=yb(r)?r:s,a=yb(r)?s:r,c=o.filters.map(d=>g0(d,a));return zt.create(c,"or")}(n,t),sf(e)}function bS(n,t){if(Wa(t))return ak(t,n.getFilters());{let e=t.filters.map(i=>g0(n,i));return zt.create(e,"or")}}function sf(n){if(nt(n instanceof At||n instanceof zt),n instanceof At)return n;let t=n.getFilters();if(t.length===1)return sf(t[0]);if(sk(n))return n;let e=t.map(r=>sf(r)),i=[];return e.forEach(r=>{r instanceof At?i.push(r):r instanceof zt&&(r.op===n.op?i.push(...r.filters):i.push(r))}),i.length===1?i[0]:zt.create(i,n.op)}var Qb=class{constructor(){this.un=new Hd}addToCollectionParentIndex(t,e){return this.un.add(e),R.resolve()}getCollectionParents(t,e){return R.resolve(this.un.getEntries(e))}addFieldIndex(t,e){return R.resolve()}deleteFieldIndex(t,e){return R.resolve()}deleteAllFieldIndexes(t){return R.resolve()}createTargetIndexes(t,e){return R.resolve()}getDocumentsMatchingTarget(t,e){return R.resolve(null)}getIndexType(t,e){return R.resolve(0)}getFieldIndexes(t,e){return R.resolve([])}getNextCollectionGroupToUpdate(t){return R.resolve(null)}getMinOffset(t,e){return R.resolve(Oi.min())}getMinOffsetFromCollectionGroup(t,e){return R.resolve(Oi.min())}updateCollectionGroup(t,e,i){return R.resolve()}updateIndexEntries(t,e){return R.resolve()}},Hd=class{constructor(){this.index={}}add(t){let e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new $t(Dt.comparator),s=!r.has(i);return this.index[e]=r.add(i),s}has(t){let e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new $t(Dt.comparator)).toArray()}};var km=new Uint8Array(0),Yb=class{constructor(t,e){this.databaseId=e,this.cn=new Hd,this.ln=new _n(i=>Qs(i),(i,r)=>ru(i,r)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.cn.has(e)){let i=e.lastSegment(),r=e.popLast();t.addOnCommittedListener(()=>{this.cn.add(e)});let s={collectionId:i,parent:ii(r)};return yS(t).put(s)}return R.resolve()}getCollectionParents(t,e){let i=[],r=IDBKeyRange.bound([e,""],[GS(e),""],!1,!0);return yS(t).U(r).next(s=>{for(let o of s){if(o.collectionId!==e)break;i.push(dn(o.parent))}return i})}addFieldIndex(t,e){let i=xd(t),r=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(e);delete r.indexId;let s=i.add(r);if(e.indexState){let o=Pa(t);return s.next(a=>{o.put(fS(a,this.uid,e.indexState.sequenceNumber,e.indexState.offset))})}return s.next()}deleteFieldIndex(t,e){let i=xd(t),r=Pa(t),s=Da(t);return i.delete(e.indexId).next(()=>r.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}deleteAllFieldIndexes(t){let e=xd(t),i=Da(t),r=Pa(t);return e.j().next(()=>i.j()).next(()=>r.j())}createTargetIndexes(t,e){return R.forEach(this.hn(e),i=>this.getIndexType(t,i).next(r=>{if(r===0||r===1){let s=new rf(i).an();if(s!=null)return this.addFieldIndex(t,s)}}))}getDocumentsMatchingTarget(t,e){let i=Da(t),r=!0,s=new Map;return R.forEach(this.hn(e),o=>this.Pn(t,o).next(a=>{r&&(r=!!a),s.set(o,a)})).next(()=>{if(r){let o=pt(),a=[];return R.forEach(s,(c,d)=>{L("IndexedDbIndexManager",`Using index ${function(j){return`id=${j.indexId}|cg=${j.collectionGroup}|f=${j.fields.map(Z=>`${Z.fieldPath}:${Z.kind}`).join(",")}`}(c)} to execute ${Qs(e)}`);let u=function(j,Z){let lt=hb(Z);if(lt===void 0)return null;for(let at of Qm(j,lt.fieldPath))switch(at.op){case"array-contains-any":return at.value.arrayValue.values||[];case"array-contains":return[at.value]}return null}(d,c),m=function(j,Z){let lt=new Map;for(let at of js(Z))for(let I of Qm(j,at.fieldPath))switch(I.op){case"==":case"in":lt.set(at.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return lt.set(at.fieldPath.canonicalString(),I.value),Array.from(lt.values())}return null}(d,c),p=function(j,Z){let lt=[],at=!0;for(let I of js(Z)){let v=I.kind===0?JA(j,I.fieldPath,j.startAt):tS(j,I.fieldPath,j.startAt);lt.push(v.value),at&&(at=v.inclusive)}return new gn(lt,at)}(d,c),_=function(j,Z){let lt=[],at=!0;for(let I of js(Z)){let v=I.kind===0?tS(j,I.fieldPath,j.endAt):JA(j,I.fieldPath,j.endAt);lt.push(v.value),at&&(at=v.inclusive)}return new gn(lt,at)}(d,c),w=this.In(c,d,p),A=this.In(c,d,_),x=this.Tn(c,d,m),V=this.En(c.indexId,u,w,p.inclusive,A,_.inclusive,x);return R.forEach(V,H=>i.G(H,e.limit).next(j=>{j.forEach(Z=>{let lt=Q.fromSegments(Z.documentKey);o.has(lt)||(o=o.add(lt),a.push(lt))})}))}).next(()=>a)}return R.resolve(null)})}hn(t){let e=this.ln.get(t);return e||(t.filters.length===0?e=[t]:e=Aj(zt.create(t.filters,"and")).map(i=>kb(t.path,t.collectionGroup,t.orderBy,i.getFilters(),t.limit,t.startAt,t.endAt)),this.ln.set(t,e),e)}En(t,e,i,r,s,o,a){let c=(e!=null?e.length:1)*Math.max(i.length,s.length),d=c/(e!=null?e.length:1),u=[];for(let m=0;m<c;++m){let p=e?this.dn(e[m/d]):km,_=this.An(t,p,i[m%d],r),w=this.Rn(t,p,s[m%d],o),A=a.map(x=>this.An(t,p,x,!0));u.push(...this.createRange(_,w,A))}return u}An(t,e,i,r){let s=new qs(t,Q.empty(),e,i);return r?s:s.Zt()}Rn(t,e,i,r){let s=new qs(t,Q.empty(),e,i);return r?s.Zt():s}Pn(t,e){let i=new rf(e),r=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,r).next(s=>{let o=null;for(let a of s)i.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(t,e){let i=2,r=this.hn(e);return R.forEach(r,s=>this.Pn(t,s).next(o=>{o?i!==0&&o.fields.length<function(c){let d=new $t(pe.comparator),u=!1;for(let m of c.filters)for(let p of m.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?u=!0:d=d.add(p.field));for(let m of c.orderBy)m.field.isKeyField()||(d=d.add(m.field));return d.size+(u?1:0)}(s)&&(i=1):i=0})).next(()=>function(o){return o.limit!==null}(e)&&r.length>1&&i===2?1:i)}Vn(t,e){let i=new zs;for(let r of js(t)){let s=e.data.field(r.fieldPath);if(s==null)return null;let o=i.Yt(r.kind);Hn.vt.It(s,o)}return i.zt()}dn(t){let e=new zs;return Hn.vt.It(t,e.Yt(0)),e.zt()}mn(t,e){let i=new zs;return Hn.vt.It(Hs(this.databaseId,e),i.Yt(function(s){let o=js(s);return o.length===0?0:o[o.length-1].kind}(t))),i.zt()}Tn(t,e,i){if(i===null)return[];let r=[];r.push(new zs);let s=0;for(let o of js(t)){let a=i[s++];for(let c of r)if(this.fn(e,o.fieldPath)&&jd(a))r=this.gn(r,o,a);else{let d=c.Yt(o.kind);Hn.vt.It(a,d)}}return this.pn(r)}In(t,e,i){return this.Tn(t,e,i.position)}pn(t){let e=[];for(let i=0;i<t.length;++i)e[i]=t[i].zt();return e}gn(t,e,i){let r=[...t],s=[];for(let o of i.arrayValue.values||[])for(let a of r){let c=new zs;c.seed(a.zt()),Hn.vt.It(o,c.Yt(e.kind)),s.push(c)}return s}fn(t,e){return!!t.filters.find(i=>i instanceof At&&i.field.isEqual(e)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(t,e){let i=xd(t),r=Pa(t);return(e?i.U("collectionGroupIndex",IDBKeyRange.bound(e,e)):i.U()).next(s=>{let o=[];return R.forEach(s,a=>r.get([a.indexId,this.uid]).next(c=>{o.push(function(u,m){let p=m?new Nd(m.sequenceNumber,new Oi(Zs(m.readTime),new Q(dn(m.documentKey)),m.largestBatchId)):Nd.empty(),_=u.fields.map(([w,A])=>new Ua(pe.fromServerFormat(w),A));return new Ga(u.indexId,u.collectionGroup,_,p)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>e.length===0?null:(e.sort((i,r)=>{let s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return s!==0?s:mt(i.collectionGroup,r.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,i){let r=xd(t),s=Pa(t);return this.yn(t).next(o=>r.U("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(a=>R.forEach(a,c=>s.put(fS(c.indexId,this.uid,o,i)))))}updateIndexEntries(t,e){let i=new Map;return R.forEach(e,(r,s)=>{let o=i.get(r.collectionGroup);return(o?R.resolve(o):this.getFieldIndexes(t,r.collectionGroup)).next(a=>(i.set(r.collectionGroup,a),R.forEach(a,c=>this.wn(t,r,c).next(d=>{let u=this.Sn(s,c);return d.isEqual(u)?R.resolve():this.bn(t,s,c,d,u)}))))})}Dn(t,e,i,r){return Da(t).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.mn(i,e.key),documentKey:e.key.path.toArray()})}vn(t,e,i,r){return Da(t).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.mn(i,e.key),e.key.path.toArray()])}wn(t,e,i){let r=Da(t),s=new $t(jr);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.mn(i,e)])},(o,a)=>{s=s.add(new qs(i.indexId,e,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(t,e){let i=new $t(jr),r=this.Vn(e,t);if(r==null)return i;let s=hb(e);if(s!=null){let o=t.data.field(s.fieldPath);if(jd(o))for(let a of o.arrayValue.values||[])i=i.add(new qs(e.indexId,t.key,this.dn(a),r))}else i=i.add(new qs(e.indexId,t.key,km,r));return i}bn(t,e,i,r,s){L("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);let o=[];return function(c,d,u,m,p){let _=c.getIterator(),w=d.getIterator(),A=Ra(_),x=Ra(w);for(;A||x;){let V=!1,H=!1;if(A&&x){let j=u(A,x);j<0?H=!0:j>0&&(V=!0)}else A!=null?H=!0:V=!0;V?(m(x),x=Ra(w)):H?(p(A),A=Ra(_)):(A=Ra(_),x=Ra(w))}}(r,s,jr,a=>{o.push(this.Dn(t,e,i,a))},a=>{o.push(this.vn(t,e,i,a))}),R.waitFor(o)}yn(t){let e=1;return Pa(t).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),e=r.sequenceNumber+1}).next(()=>e)}createRange(t,e,i){i=i.sort((o,a)=>jr(o,a)).filter((o,a,c)=>!a||jr(o,c[a-1])!==0);let r=[];r.push(t);for(let o of i){let a=jr(o,t),c=jr(o,e);if(a===0)r[0]=t.Zt();else if(a>0&&c<0)r.push(o),r.push(o.Zt());else if(c>0)break}r.push(e);let s=[];for(let o=0;o<r.length;o+=2){if(this.Cn(r[o],r[o+1]))return[];let a=[r[o].indexId,this.uid,r[o].arrayValue,r[o].directionalValue,km,[]],c=[r[o+1].indexId,this.uid,r[o+1].arrayValue,r[o+1].directionalValue,km,[]];s.push(IDBKeyRange.bound(a,c))}return s}Cn(t,e){return jr(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(wS)}getMinOffset(t,e){return R.mapArray(this.hn(e),i=>this.Pn(t,i).next(r=>r||J())).next(wS)}};function yS(n){return Ce(n,"collectionParents")}function Da(n){return Ce(n,"indexEntries")}function xd(n){return Ce(n,"indexConfiguration")}function Pa(n){return Ce(n,"indexState")}function wS(n){nt(n.length!==0);let t=n[0].indexState.offset,e=t.largestBatchId;for(let i=1;i<n.length;i++){let r=n[i].indexState.offset;o0(r,t)<0&&(t=r),e<r.largestBatchId&&(e=r.largestBatchId)}return new Oi(t.readTime,t.documentKey,e)}var IS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Mi=class n{constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new n(t,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function qk(n,t,e){let i=n.store("mutations"),r=n.store("documentMutations"),s=[],o=IDBKeyRange.only(e.batchId),a=0,c=i.J({range:o},(u,m,p)=>(a++,p.delete()));s.push(c.next(()=>{nt(a===1)}));let d=[];for(let u of e.mutations){let m=YS(t,u.key.path,e.batchId);s.push(r.delete(m)),d.push(u.key)}return R.waitFor(s).next(()=>d)}function of(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw J();t=n.noDocument}return JSON.stringify(t).length}Mi.DEFAULT_COLLECTION_PERCENTILE=10,Mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mi.DEFAULT=new Mi(41943040,Mi.DEFAULT_COLLECTION_PERCENTILE,Mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mi.DISABLED=new Mi(-1,0,0);var af=class n{constructor(t,e,i,r){this.userId=t,this.serializer=e,this.indexManager=i,this.referenceDelegate=r,this.Fn={}}static lt(t,e,i,r){nt(t.uid!=="");let s=t.isAuthenticated()?t.uid:"";return new n(s,e,i,r)}checkEmpty(t){let e=!0,i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ur(t).J({index:"userMutationsIndex",range:i},(r,s,o)=>{e=!1,o.done()}).next(()=>e)}addMutationBatch(t,e,i,r){let s=Va(t),o=Ur(t);return o.add({}).next(a=>{nt(typeof a=="number");let c=new Bd(a,e,i,r),d=function(_,w,A){let x=A.baseMutations.map(H=>Wd(_.ct,H)),V=A.mutations.map(H=>Wd(_.ct,H));return{userId:w,batchId:A.batchId,localWriteTimeMs:A.localWriteTime.toMillis(),baseMutations:x,mutations:V}}(this.serializer,this.userId,c),u=[],m=new $t((p,_)=>mt(p.canonicalString(),_.canonicalString()));for(let p of r){let _=YS(this.userId,p.key.path,a);m=m.add(p.key.path.popLast()),u.push(o.put(d)),u.push(s.put(_,M2))}return m.forEach(p=>{u.push(this.indexManager.addToCollectionParentIndex(t,p))}),t.addOnCommittedListener(()=>{this.Fn[a]=c.keys()}),R.waitFor(u).next(()=>c)})}lookupMutationBatch(t,e){return Ur(t).get(e).next(i=>i?(nt(i.userId===this.userId),Bs(this.serializer,i)):null)}Mn(t,e){return this.Fn[e]?R.resolve(this.Fn[e]):this.lookupMutationBatch(t,e).next(i=>{if(i){let r=i.keys();return this.Fn[e]=r,r}return null})}getNextMutationBatchAfterBatchId(t,e){let i=e+1,r=IDBKeyRange.lowerBound([this.userId,i]),s=null;return Ur(t).J({index:"userMutationsIndex",range:r},(o,a,c)=>{a.userId===this.userId&&(nt(a.batchId>=i),s=Bs(this.serializer,a)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(t){let e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),i=-1;return Ur(t).J({index:"userMutationsIndex",range:e,reverse:!0},(r,s,o)=>{i=s.batchId,o.done()}).next(()=>i)}getAllMutationBatches(t){let e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ur(t).U("userMutationsIndex",e).next(i=>i.map(r=>Bs(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(t,e){let i=Mm(this.userId,e.path),r=IDBKeyRange.lowerBound(i),s=[];return Va(t).J({range:r},(o,a,c)=>{let[d,u,m]=o,p=dn(u);if(d===this.userId&&e.path.isEqual(p))return Ur(t).get(m).next(_=>{if(!_)throw J();nt(_.userId===this.userId),s.push(Bs(this.serializer,_))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new $t(mt),r=[];return e.forEach(s=>{let o=Mm(this.userId,s.path),a=IDBKeyRange.lowerBound(o),c=Va(t).J({range:a},(d,u,m)=>{let[p,_,w]=d,A=dn(_);p===this.userId&&s.path.isEqual(A)?i=i.add(w):m.done()});r.push(c)}),R.waitFor(r).next(()=>this.xn(t,i))}getAllMutationBatchesAffectingQuery(t,e){let i=e.path,r=i.length+1,s=Mm(this.userId,i),o=IDBKeyRange.lowerBound(s),a=new $t(mt);return Va(t).J({range:o},(c,d,u)=>{let[m,p,_]=c,w=dn(p);m===this.userId&&i.isPrefixOf(w)?w.length===r&&(a=a.add(_)):u.done()}).next(()=>this.xn(t,a))}xn(t,e){let i=[],r=[];return e.forEach(s=>{r.push(Ur(t).get(s).next(o=>{if(o===null)throw J();nt(o.userId===this.userId),i.push(Bs(this.serializer,o))}))}),R.waitFor(r).next(()=>i)}removeMutationBatch(t,e){return qk(t._e,this.userId,e).next(i=>(t.addOnCommittedListener(()=>{this.On(e.batchId)}),R.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(t,r))))}On(t){delete this.Fn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return R.resolve();let i=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),r=[];return Va(t).J({range:i},(s,o,a)=>{if(s[0]===this.userId){let c=dn(s[1]);r.push(c)}else a.done()}).next(()=>{nt(r.length===0)})})}containsKey(t,e){return Gk(t,this.userId,e)}Nn(t){return $k(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function Gk(n,t,e){let i=Mm(t,e.path),r=i[1],s=IDBKeyRange.lowerBound(i),o=!1;return Va(n).J({range:s,H:!0},(a,c,d)=>{let[u,m,p]=a;u===t&&m===r&&(o=!0),d.done()}).next(()=>o)}function Ur(n){return Ce(n,"mutations")}function Va(n){return Ce(n,"documentMutations")}function $k(n){return Ce(n,"mutationQueues")}var Xa=class n{constructor(t){this.Ln=t}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var Xb=class{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.qn(t).next(e=>{let i=new Xa(e.highestTargetId);return e.highestTargetId=i.next(),this.Qn(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.qn(t).next(e=>st.fromTimestamp(new ce(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.qn(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,i){return this.qn(t).next(r=>(r.highestListenSequenceNumber=e,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),e>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e),this.Qn(t,r)))}addTargetData(t,e){return this.Kn(t,e).next(()=>this.qn(t).next(i=>(i.targetCount+=1,this.$n(e,i),this.Qn(t,i))))}updateTargetData(t,e){return this.Kn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>Ma(t).delete(e.targetId)).next(()=>this.qn(t)).next(i=>(nt(i.targetCount>0),i.targetCount-=1,this.Qn(t,i)))}removeTargets(t,e,i){let r=0,s=[];return Ma(t).J((o,a)=>{let c=Sd(a);c.sequenceNumber<=e&&i.get(c.targetId)===null&&(r++,s.push(this.removeTargetData(t,c)))}).next(()=>R.waitFor(s)).next(()=>r)}forEachTarget(t,e){return Ma(t).J((i,r)=>{let s=Sd(r);e(s)})}qn(t){return ES(t).get("targetGlobalKey").next(e=>(nt(e!==null),e))}Qn(t,e){return ES(t).put("targetGlobalKey",e)}Kn(t,e){return Ma(t).put(Uk(this.serializer,e))}$n(t,e){let i=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,i=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.qn(t).next(e=>e.targetCount)}getTargetData(t,e){let i=Qs(e),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]),s=null;return Ma(t).J({range:r,index:"queryTargetsIndex"},(o,a,c)=>{let d=Sd(a);ru(e,d.target)&&(s=d,c.done())}).next(()=>s)}addMatchingKeys(t,e,i){let r=[],s=Br(t);return e.forEach(o=>{let a=ii(o.path);r.push(s.put({targetId:i,path:a})),r.push(this.referenceDelegate.addReference(t,i,o))}),R.waitFor(r)}removeMatchingKeys(t,e,i){let r=Br(t);return R.forEach(e,s=>{let o=ii(s.path);return R.waitFor([r.delete([i,o]),this.referenceDelegate.removeReference(t,i,s)])})}removeMatchingKeysForTargetId(t,e){let i=Br(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(t,e){let i=IDBKeyRange.bound([e],[e+1],!1,!0),r=Br(t),s=pt();return r.J({range:i,H:!0},(o,a,c)=>{let d=dn(o[1]),u=new Q(d);s=s.add(u)}).next(()=>s)}containsKey(t,e){let i=ii(e.path),r=IDBKeyRange.bound([i],[GS(i)],!1,!0),s=0;return Br(t).J({index:"documentTargetsIndex",H:!0,range:r},([o,a],c,d)=>{o!==0&&(s++,d.done())}).next(()=>s>0)}ot(t,e){return Ma(t).get(e).next(i=>i?Sd(i):null)}};function Ma(n){return Ce(n,"targets")}function ES(n){return Ce(n,"targetGlobal")}function Br(n){return Ce(n,"targetDocuments")}function xS([n,t],[e,i]){let r=mt(n,e);return r===0?mt(t,i):r}var Zb=class{constructor(t){this.Un=t,this.buffer=new $t(xS),this.Wn=0}Gn(){return++this.Wn}zn(t){let e=[t,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(e);else{let i=this.buffer.last();xS(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}},Jb=class{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(t){L("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,()=>D(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(e){is(e)?L("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):yield es(e)}yield this.Hn(3e5)}))}},ty=class{constructor(t,e){this.Jn=t,this.params=e}calculateTargetCount(t,e){return this.Jn.Yn(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(e===0)return R.resolve(wi.oe);let i=new Zb(e);return this.Jn.forEachTarget(t,r=>i.zn(r.sequenceNumber)).next(()=>this.Jn.Zn(t,r=>i.zn(r))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.Jn.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.Jn.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(L("LruGarbageCollector","Garbage collection skipped; disabled"),R.resolve(IS)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(L("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),IS):this.Xn(t,e))}getCacheSize(t){return this.Jn.getCacheSize(t)}Xn(t,e){let i,r,s,o,a,c,d,u=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(L("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),r=this.params.maximumSequenceNumbersToCollect):r=m,o=Date.now(),this.nthSequenceNumber(t,r))).next(m=>(i=m,a=Date.now(),this.removeTargets(t,i,e))).next(m=>(s=m,c=Date.now(),this.removeOrphanedDocuments(t,i))).next(m=>(d=Date.now(),Na()<=ki.DEBUG&&L("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${m} documents in `+(d-c)+`ms
Total Duration: ${d-u}ms`),R.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:m})))}};function Sj(n,t){return new ty(n,t)}var ey=class{constructor(t,e){this.db=t,this.garbageCollector=Sj(this,e)}Yn(t){let e=this.er(t);return this.db.getTargetCache().getTargetCount(t).next(i=>e.next(r=>i+r))}er(t){let e=0;return this.Zn(t,i=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}Zn(t,e){return this.tr(t,(i,r)=>e(r))}addReference(t,e,i){return Rm(t,i)}removeReference(t,e,i){return Rm(t,i)}removeTargets(t,e,i){return this.db.getTargetCache().removeTargets(t,e,i)}markPotentiallyOrphaned(t,e){return Rm(t,e)}nr(t,e){return function(r,s){let o=!1;return $k(r).Y(a=>Gk(r,a,s).next(c=>(c&&(o=!0),R.resolve(!c)))).next(()=>o)}(t,e)}removeOrphanedDocuments(t,e){let i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[],s=0;return this.tr(t,(o,a)=>{if(a<=e){let c=this.nr(t,o).next(d=>{if(!d)return s++,i.getEntry(t,o).next(()=>(i.removeEntry(o,st.min()),Br(t).delete(function(m){return[0,ii(m.path)]}(o))))});r.push(c)}}).next(()=>R.waitFor(r)).next(()=>i.apply(t)).next(()=>s)}removeTarget(t,e){let i=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,e){return Rm(t,e)}tr(t,e){let i=Br(t),r,s=wi.oe;return i.J({index:"documentTargetsIndex"},([o,a],{path:c,sequenceNumber:d})=>{o===0?(s!==wi.oe&&e(new Q(dn(r)),s),s=d,r=c):s=wi.oe}).next(()=>{s!==wi.oe&&e(new Q(dn(r)),s)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}};function Rm(n,t){return Br(n).put(function(i,r){return{targetId:0,path:ii(i.path),sequenceNumber:r}}(t,n.currentSequenceNumber))}var cf=class{constructor(){this.changes=new _n(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Ee.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();let i=this.changes.get(e);return i!==void 0?R.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}};var iy=class{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,i){return Vs(t).put(i)}removeEntry(t,e,i){return Vs(t).delete(function(s,o){let a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],ef(o),a[a.length-1]]}(e,i))}updateMetadata(t,e){return this.getMetadata(t).next(i=>(i.byteSize+=e,this.rr(t,i)))}getEntry(t,e){let i=Ee.newInvalidDocument(e);return Vs(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(Td(e))},(r,s)=>{i=this.ir(e,s)}).next(()=>i)}sr(t,e){let i={size:0,document:Ee.newInvalidDocument(e)};return Vs(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(Td(e))},(r,s)=>{i={document:this.ir(e,s),size:of(s)}}).next(()=>i)}getEntries(t,e){let i=ui();return this._r(t,e,(r,s)=>{let o=this.ir(r,s);i=i.insert(r,o)}).next(()=>i)}ar(t,e){let i=ui(),r=new ee(Q.comparator);return this._r(t,e,(s,o)=>{let a=this.ir(s,o);i=i.insert(s,a),r=r.insert(s,of(o))}).next(()=>({documents:i,ur:r}))}_r(t,e,i){if(e.isEmpty())return R.resolve();let r=new $t(AS);e.forEach(c=>r=r.add(c));let s=IDBKeyRange.bound(Td(r.first()),Td(r.last())),o=r.getIterator(),a=o.getNext();return Vs(t).J({index:"documentKeyIndex",range:s},(c,d,u)=>{let m=Q.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;a&&AS(a,m)<0;)i(a,null),a=o.getNext();a&&a.isEqual(m)&&(i(a,d),a=o.hasNext()?o.getNext():null),a?u.$(Td(a)):u.done()}).next(()=>{for(;a;)i(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(t,e,i,r,s){let o=e.path,a=[o.popLast().toArray(),o.lastSegment(),ef(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Vs(t).U(IDBKeyRange.bound(a,c,!0)).next(d=>{s?.incrementDocumentReadCount(d.length);let u=ui();for(let m of d){let p=this.ir(Q.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);p.isFoundDocument()&&(ou(e,p)||r.has(p.key))&&(u=u.insert(p.key,p))}return u})}getAllFromCollectionGroup(t,e,i,r){let s=ui(),o=CS(e,i),a=CS(e,Oi.max());return Vs(t).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(c,d,u)=>{let m=this.ir(Q.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);s=s.insert(m.key,m),s.size===r&&u.done()}).next(()=>s)}newChangeBuffer(t){return new ny(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return TS(t).get("remoteDocumentGlobalKey").next(e=>(nt(!!e),e))}rr(t,e){return TS(t).put("remoteDocumentGlobalKey",e)}ir(t,e){if(e){let i=Tj(this.serializer,e);if(!(i.isNoDocument()&&i.version.isEqual(st.min())))return i}return Ee.newInvalidDocument(t)}};function Wk(n){return new iy(n)}var ny=class extends cf{constructor(t,e){super(),this.cr=t,this.trackRemovals=e,this.lr=new _n(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(t){let e=[],i=0,r=new $t((s,o)=>mt(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{let a=this.lr.get(s);if(e.push(this.cr.removeEntry(t,s,a.readTime)),o.isValidDocument()){let c=hS(this.cr.serializer,o);r=r.add(s.path.popLast());let d=of(c);i+=d-a.size,e.push(this.cr.addEntry(t,s,c))}else if(i-=a.size,this.trackRemovals){let c=hS(this.cr.serializer,o.convertToNoDocument(st.min()));e.push(this.cr.addEntry(t,s,c))}}),r.forEach(s=>{e.push(this.cr.indexManager.addToCollectionParentIndex(t,s))}),e.push(this.cr.updateMetadata(t,i)),R.waitFor(e)}getFromCache(t,e){return this.cr.sr(t,e).next(i=>(this.lr.set(e,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(t,e){return this.cr.ar(t,e).next(({documents:i,ur:r})=>(r.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:i.get(s).readTime})}),i))}};function TS(n){return Ce(n,"remoteDocumentGlobal")}function Vs(n){return Ce(n,"remoteDocumentsV14")}function Td(n){let t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function CS(n,t){let e=t.documentKey.path.toArray();return[n,ef(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function AS(n,t){let e=n.path.toArray(),i=t.path.toArray(),r=0;for(let s=0;s<e.length-2&&s<i.length-2;++s)if(r=mt(e[s],i[s]),r)return r;return r=mt(e.length,i.length),r||(r=mt(e[e.length-2],i[i.length-2]),r||mt(e[e.length-1],i[i.length-1]))}var ry=class{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}};var lf=class{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(i!==null&&Dd(i.mutation,r,Ii.empty(),ce.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,pt()).next(()=>i))}getLocalViewOfDocuments(t,e,i=pt()){let r=un();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,i).next(s=>{let o=Ad();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(t,e){let i=un();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,pt()))}populateOverlays(t,e,i){let r=[];return i.forEach(s=>{e.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((o,a)=>{e.set(o,a)})})}computeViews(t,e,i,r){let s=ui(),o=Rd(),a=function(){return Rd()}();return e.forEach((c,d)=>{let u=i.get(d.key);r.has(d.key)&&(u===void 0||u.mutation instanceof Xi)?s=s.insert(d.key,d):u!==void 0?(o.set(d.key,u.mutation.getFieldMask()),Dd(u.mutation,d,u.mutation.getFieldMask(),ce.now())):o.set(d.key,Ii.empty())}),this.recalculateAndSaveOverlays(t,s).next(c=>(c.forEach((d,u)=>o.set(d,u)),e.forEach((d,u)=>{var m;return a.set(d,new ry(u,(m=o.get(d))!==null&&m!==void 0?m:null))}),a))}recalculateAndSaveOverlays(t,e){let i=Rd(),r=new ee((o,a)=>o-a),s=pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(o=>{for(let a of o)a.keys().forEach(c=>{let d=e.get(c);if(d===null)return;let u=i.get(c)||Ii.empty();u=a.applyToLocalView(d,u),i.set(c,u);let m=(r.get(a.batchId)||pt()).add(c);r=r.insert(a.batchId,m)})}).next(()=>{let o=[],a=r.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),d=c.key,u=c.value,m=gk();u.forEach(p=>{if(!s.has(p)){let _=Ek(e.get(p),i.get(p));_!==null&&m.set(p,_),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(t,d,m))}return R.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i,r){return function(o){return Q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):u0(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,r):this.getDocumentsMatchingCollectionQuery(t,e,i,r)}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next(s=>{let o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-s.size):R.resolve(un()),a=-1,c=s;return o.next(d=>R.forEach(d,(u,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),s.get(u)?R.resolve():this.remoteDocumentCache.getEntry(t,u).next(p=>{c=c.insert(u,p)}))).next(()=>this.populateOverlays(t,d,s)).next(()=>this.computeViews(t,c,d,pt())).next(u=>({batchId:a,changes:pk(u)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new Q(e)).next(i=>{let r=Ad();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,i,r){let s=e.collectionGroup,o=Ad();return this.indexManager.getCollectionParents(t,s).next(a=>R.forEach(a,c=>{let d=function(m,p){return new Yi(p,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(e,c.child(s));return this.getDocumentsMatchingCollectionQuery(t,d,i,r).next(u=>{u.forEach((m,p)=>{o=o.insert(m,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,e,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,s,r))).next(o=>{s.forEach((c,d)=>{let u=d.getKey();o.get(u)===null&&(o=o.insert(u,Ee.newInvalidDocument(u)))});let a=Ad();return o.forEach((c,d)=>{let u=s.get(c);u!==void 0&&Dd(u.mutation,d,Ii.empty(),ce.now()),ou(e,d)&&(a=a.insert(c,d))}),a})}};var sy=class{constructor(t){this.serializer=t,this.hr=new Map,this.Pr=new Map}getBundleMetadata(t,e){return R.resolve(this.hr.get(e))}saveBundleMetadata(t,e){return this.hr.set(e.id,function(r){return{id:r.id,version:r.version,createTime:ge(r.createTime)}}(e)),R.resolve()}getNamedQuery(t,e){return R.resolve(this.Pr.get(e))}saveNamedQuery(t,e){return this.Pr.set(e.name,function(r){return{name:r.name,query:p0(r.bundledQuery),readTime:ge(r.readTime)}}(e)),R.resolve()}};var oy=class{constructor(){this.overlays=new ee(Q.comparator),this.Ir=new Map}getOverlay(t,e){return R.resolve(this.overlays.get(e))}getOverlays(t,e){let i=un();return R.forEach(e,r=>this.getOverlay(t,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((r,s)=>{this.ht(t,e,s)}),R.resolve()}removeOverlaysForBatchId(t,e,i){let r=this.Ir.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(i)),R.resolve()}getOverlaysForCollection(t,e,i){let r=un(),s=e.length+1,o=new Q(e.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,d=c.getKey();if(!e.isPrefixOf(d.path))break;d.path.length===s&&c.largestBatchId>i&&r.set(c.getKey(),c)}return R.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let s=new ee((d,u)=>d-u),o=this.overlays.getIterator();for(;o.hasNext();){let d=o.getNext().value;if(d.getKey().getCollectionGroup()===e&&d.largestBatchId>i){let u=s.get(d.largestBatchId);u===null&&(u=un(),s=s.insert(d.largestBatchId,u)),u.set(d.getKey(),d)}}let a=un(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,u)=>a.set(d,u)),!(a.size()>=r)););return R.resolve(a)}ht(t,e,i){let r=this.overlays.get(i.key);if(r!==null){let o=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new zd(e,i));let s=this.Ir.get(e);s===void 0&&(s=pt(),this.Ir.set(e,s)),this.Ir.set(e,s.add(i.key))}};var ay=class{constructor(){this.sessionToken=_e.EMPTY_BYTE_STRING}getSessionToken(t){return R.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,R.resolve()}};var Kd=class{constructor(){this.Tr=new $t(ye.Er),this.dr=new $t(ye.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(t,e){let i=new ye(t,e);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.Vr(new ye(t,e))}mr(t,e){t.forEach(i=>this.removeReference(i,e))}gr(t){let e=new Q(new Dt([])),i=new ye(e,t),r=new ye(e,t+1),s=[];return this.dr.forEachInRange([i,r],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(t=>this.Vr(t))}Vr(t){this.Tr=this.Tr.delete(t),this.dr=this.dr.delete(t)}yr(t){let e=new Q(new Dt([])),i=new ye(e,t),r=new ye(e,t+1),s=pt();return this.dr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(t){let e=new ye(t,0),i=this.Tr.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}},ye=class{constructor(t,e){this.key=t,this.wr=e}static Er(t,e){return Q.comparator(t.key,e.key)||mt(t.wr,e.wr)}static Ar(t,e){return mt(t.wr,e.wr)||Q.comparator(t.key,e.key)}};var cy=class{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Sr=1,this.br=new $t(ye.Er)}checkEmpty(t){return R.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,r){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Bd(s,e,i,r);this.mutationQueue.push(o);for(let a of r)this.br=this.br.add(new ye(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return R.resolve(o)}lookupMutationBatch(t,e){return R.resolve(this.Dr(e))}getNextMutationBatchAfterBatchId(t,e){let i=e+1,r=this.vr(i),s=r<0?0:r;return R.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return R.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(t){return R.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){let i=new ye(e,0),r=new ye(e,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([i,r],o=>{let a=this.Dr(o.wr);s.push(a)}),R.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new $t(mt);return e.forEach(r=>{let s=new ye(r,0),o=new ye(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{i=i.add(a.wr)})}),R.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(t,e){let i=e.path,r=i.length+1,s=i;Q.isDocumentKey(s)||(s=s.child(""));let o=new ye(new Q(s),0),a=new $t(mt);return this.br.forEachWhile(c=>{let d=c.key.path;return!!i.isPrefixOf(d)&&(d.length===r&&(a=a.add(c.wr)),!0)},o),R.resolve(this.Cr(a))}Cr(t){let e=[];return t.forEach(i=>{let r=this.Dr(i);r!==null&&e.push(r)}),e}removeMutationBatch(t,e){nt(this.Fr(e.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return R.forEach(e.mutations,r=>{let s=new ye(r.key,e.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.br=i})}On(t){}containsKey(t,e){let i=new ye(e,0),r=this.br.firstAfterOrEqual(i);return R.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,R.resolve()}Fr(t,e){return this.vr(t)}vr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Dr(t){let e=this.vr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}};var ly=class{constructor(t){this.Mr=t,this.docs=function(){return new ee(Q.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){let i=e.key,r=this.docs.get(i),s=r?r.size:0,o=this.Mr(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){let e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){let i=this.docs.get(e);return R.resolve(i?i.document.mutableCopy():Ee.newInvalidDocument(e))}getEntries(t,e){let i=ui();return e.forEach(r=>{let s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Ee.newInvalidDocument(r))}),R.resolve(i)}getDocumentsMatchingQuery(t,e,i,r){let s=ui(),o=e.path,a=new Q(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:d,value:{document:u}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||o0(WS(u),i)<=0||(r.has(u.key)||ou(e,u))&&(s=s.insert(u.key,u.mutableCopy()))}return R.resolve(s)}getAllFromCollectionGroup(t,e,i,r){J()}Or(t,e){return R.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new dy(this)}getSize(t){return R.resolve(this.size)}},dy=class extends cf{constructor(t){super(),this.cr=t}applyChanges(t){let e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.cr.addEntry(t,r)):this.cr.removeEntry(i)}),R.waitFor(e)}getFromCache(t,e){return this.cr.getEntry(t,e)}getAllFromCache(t,e){return this.cr.getEntries(t,e)}};var uy=class{constructor(t){this.persistence=t,this.Nr=new _n(e=>Qs(e),ru),this.lastRemoteSnapshotVersion=st.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Kd,this.targetCount=0,this.kr=Xa.Bn()}forEachTarget(t,e){return this.Nr.forEach((i,r)=>e(r)),R.resolve()}getLastRemoteSnapshotVersion(t){return R.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return R.resolve(this.Lr)}allocateTargetId(t){return this.highestTargetId=this.kr.next(),R.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.Lr&&(this.Lr=e),R.resolve()}Kn(t){this.Nr.set(t.target,t);let e=t.targetId;e>this.highestTargetId&&(this.kr=new Xa(e),this.highestTargetId=e),t.sequenceNumber>this.Lr&&(this.Lr=t.sequenceNumber)}addTargetData(t,e){return this.Kn(e),this.targetCount+=1,R.resolve()}updateTargetData(t,e){return this.Kn(e),R.resolve()}removeTargetData(t,e){return this.Nr.delete(e.target),this.Br.gr(e.targetId),this.targetCount-=1,R.resolve()}removeTargets(t,e,i){let r=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=e&&i.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),r++)}),R.waitFor(s).next(()=>r)}getTargetCount(t){return R.resolve(this.targetCount)}getTargetData(t,e){let i=this.Nr.get(e)||null;return R.resolve(i)}addMatchingKeys(t,e,i){return this.Br.Rr(e,i),R.resolve()}removeMatchingKeys(t,e,i){this.Br.mr(e,i);let r=this.persistence.referenceDelegate,s=[];return r&&e.forEach(o=>{s.push(r.markPotentiallyOrphaned(t,o))}),R.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.Br.gr(e),R.resolve()}getMatchingKeysForTargetId(t,e){let i=this.Br.yr(e);return R.resolve(i)}containsKey(t,e){return R.resolve(this.Br.containsKey(e))}};var df=class{constructor(t,e){this.qr={},this.overlays={},this.Qr=new wi(0),this.Kr=!1,this.Kr=!0,this.$r=new ay,this.referenceDelegate=t(this),this.Ur=new uy(this),this.indexManager=new Qb,this.remoteDocumentCache=function(r){return new ly(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new tf(e),this.Gr=new sy(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new oy,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.qr[t.toKey()];return i||(i=new cy(e,this.referenceDelegate),this.qr[t.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(t,e,i){L("MemoryPersistence","Starting transaction:",t);let r=new hy(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(s=>this.referenceDelegate.jr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Hr(t,e){return R.or(Object.values(this.qr).map(i=>()=>i.containsKey(t,e)))}},hy=class extends zm{constructor(t){super(),this.currentSequenceNumber=t}},uf=class n{constructor(t){this.persistence=t,this.Jr=new Kd,this.Yr=null}static Zr(t){return new n(t)}get Xr(){if(this.Yr)return this.Yr;throw J()}addReference(t,e,i){return this.Jr.addReference(i,e),this.Xr.delete(i.toString()),R.resolve()}removeReference(t,e,i){return this.Jr.removeReference(i,e),this.Xr.add(i.toString()),R.resolve()}markPotentiallyOrphaned(t,e){return this.Xr.add(e.toString()),R.resolve()}removeTarget(t,e){this.Jr.gr(e.targetId).forEach(r=>this.Xr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(s=>this.Xr.add(s.toString()))}).next(()=>i.removeTargetData(t,e))}zr(){this.Yr=new Set}jr(t){let e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return R.forEach(this.Xr,i=>{let r=Q.fromPath(i);return this.ei(t,r).next(s=>{s||e.removeEntry(r,st.min())})}).next(()=>(this.Yr=null,e.apply(t)))}updateLimboDocument(t,e){return this.ei(t,e).next(i=>{i?this.Xr.delete(e.toString()):this.Xr.add(e.toString())})}Wr(t){return 0}ei(t,e){return R.or([()=>R.resolve(this.Jr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Hr(t,e)])}};var my=class{constructor(t){this.serializer=t}O(t,e,i,r){let s=new qm("createOrUpgrade",e);i<1&&r>=1&&(function(c){c.createObjectStore("owner")}(t),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",qA,{unique:!0}),c.createObjectStore("documentMutations")}(t),SS(t),function(c){c.createObjectStore("remoteDocuments")}(t));let o=R.resolve();return i<3&&r>=3&&(i!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(t),SS(t)),o=o.next(()=>function(c){let d=c.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:st.min().toTimestamp(),targetCount:0};return d.put("targetGlobalKey",u)}(s))),i<4&&r>=4&&(i!==0&&(o=o.next(()=>function(c,d){return d.store("mutations").U().next(u=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",qA,{unique:!0});let m=d.store("mutations"),p=u.map(_=>m.put(_));return R.waitFor(p)})}(t,s))),o=o.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(t)})),i<5&&r>=5&&(o=o.next(()=>this.ni(s))),i<6&&r>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(t),this.ri(s)))),i<7&&r>=7&&(o=o.next(()=>this.ii(s))),i<8&&r>=8&&(o=o.next(()=>this.si(t,s))),i<9&&r>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(t)})),i<10&&r>=10&&(o=o.next(()=>this.oi(s))),i<11&&r>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),i<12&&r>=12&&(o=o.next(()=>{(function(c){let d=c.createObjectStore("documentOverlays",{keyPath:$2});d.createIndex("collectionPathOverlayIndex",W2,{unique:!1}),d.createIndex("collectionGroupOverlayIndex",H2,{unique:!1})})(t)})),i<13&&r>=13&&(o=o.next(()=>function(c){let d=c.createObjectStore("remoteDocumentsV14",{keyPath:N2});d.createIndex("documentKeyIndex",O2),d.createIndex("collectionGroupIndex",F2)}(t)).next(()=>this._i(t,s)).next(()=>t.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(o=o.next(()=>this.ai(t,s))),i<15&&r>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:B2}).createIndex("sequenceNumberIndex",z2,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:q2}).createIndex("documentKeyIndex",G2,{unique:!1})}(t))),i<16&&r>=16&&(o=o.next(()=>{e.objectStore("indexState").clear()}).next(()=>{e.objectStore("indexEntries").clear()})),i<17&&r>=17&&(o=o.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(t)})),o}ri(t){let e=0;return t.store("remoteDocuments").J((i,r)=>{e+=of(r)}).next(()=>{let i={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}ni(t){let e=t.store("mutationQueues"),i=t.store("mutations");return e.U().next(r=>R.forEach(r,s=>{let o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.U("userMutationsIndex",o).next(a=>R.forEach(a,c=>{nt(c.userId===s.userId);let d=Bs(this.serializer,c);return qk(t,s.userId,d).next(()=>{})}))}))}ii(t){let e=t.store("targetDocuments"),i=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(r=>{let s=[];return i.J((o,a)=>{let c=new Dt(o),d=function(m){return[0,ii(m)]}(c);s.push(e.get(d).next(u=>u?R.resolve():(m=>e.put({targetId:0,path:ii(m),sequenceNumber:r.highestListenSequenceNumber}))(c)))}).next(()=>R.waitFor(s))})}si(t,e){t.createObjectStore("collectionParents",{keyPath:U2});let i=e.store("collectionParents"),r=new Hd,s=o=>{if(r.add(o)){let a=o.lastSegment(),c=o.popLast();return i.put({collectionId:a,parent:ii(c)})}};return e.store("remoteDocuments").J({H:!0},(o,a)=>{let c=new Dt(o);return s(c.popLast())}).next(()=>e.store("documentMutations").J({H:!0},([o,a,c],d)=>{let u=dn(a);return s(u.popLast())}))}oi(t){let e=t.store("targets");return e.J((i,r)=>{let s=Sd(r),o=Uk(this.serializer,s);return e.put(o)})}_i(t,e){let i=e.store("remoteDocuments"),r=[];return i.J((s,o)=>{let a=e.store("remoteDocumentsV14"),c=function(m){return m.document?new Q(Dt.fromString(m.document.name).popFirst(5)):m.noDocument?Q.fromSegments(m.noDocument.path):m.unknownDocument?Q.fromSegments(m.unknownDocument.path):J()}(o).path.toArray(),d={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};r.push(a.put(d))}).next(()=>R.waitFor(r))}ai(t,e){let i=e.store("mutations"),r=Wk(this.serializer),s=new df(uf.Zr,this.serializer.ct);return i.U().next(o=>{let a=new Map;return o.forEach(c=>{var d;let u=(d=a.get(c.userId))!==null&&d!==void 0?d:pt();Bs(this.serializer,c).keys().forEach(m=>u=u.add(m)),a.set(c.userId,u)}),R.forEach(a,(c,d)=>{let u=new we(d),m=nf.lt(this.serializer,u),p=s.getIndexManager(u),_=af.lt(u,this.serializer,p,s.referenceDelegate);return new lf(r,_,m,p).recalculateAndSaveOverlaysForDocumentKeys(new Fd(e,wi.oe),c).next()})})}};function SS(n){n.createObjectStore("targetDocuments",{keyPath:V2}).createIndex("documentTargetsIndex",j2,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",L2,{unique:!0}),n.createObjectStore("targetGlobal")}var ib="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",fy=class n{constructor(t,e,i,r,s,o,a,c,d,u,m=17){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=i,this.ui=s,this.window=o,this.document=a,this.ci=d,this.li=u,this.hi=m,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=p=>Promise.resolve(),!n.D())throw new O(P.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ey(this,r),this.Ai=e+"main",this.serializer=new tf(c),this.Ri=new Wr(this.Ai,this.hi,new my(this.serializer)),this.$r=new zb,this.Ur=new Xb(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Wk(this.serializer),this.Gr=new Bb,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,u===!1&&fe("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new O(P.FAILED_PRECONDITION,ib);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Ur.getHighestSequenceNumber(t))}).then(t=>{this.Qr=new wi(t,this.ci)}).then(()=>{this.Kr=!0}).catch(t=>(this.Ri&&this.Ri.close(),Promise.reject(t)))}yi(t){return this.di=e=>D(this,null,function*(){if(this.started)return t(e)}),t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ri.L(e=>D(this,null,function*(){e.newVersion===null&&(yield t())}))}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.ui.enqueueAndForget(()=>D(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>Dm(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(t).next(e=>{e||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(t)).next(e=>this.isPrimary&&!e?this.bi(t).next(()=>!1):!!e&&this.Di(t).next(()=>!0))).catch(t=>{if(is(t))return L("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return L("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.ui.enqueueRetryable(()=>this.di(t)),this.isPrimary=t})}wi(t){return Cd(t).get("owner").next(e=>R.resolve(this.vi(e)))}Ci(t){return Dm(t).delete(this.clientId)}Fi(){return D(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let t=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{let i=Ce(e,"clientMetadata");return i.U().next(r=>{let s=this.xi(r,18e5),o=r.filter(a=>s.indexOf(a)===-1);return R.forEach(o,a=>i.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(let e of t)this.Vi.removeItem(this.Oi(e.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(t){return!!t&&t.ownerId===this.clientId}Si(t){return this.li?R.resolve(!0):Cd(t).get("owner").next(e=>{if(e!==null&&this.Mi(e.leaseTimestampMs,5e3)&&!this.Ni(e.ownerId)){if(this.vi(e)&&this.networkEnabled)return!0;if(!this.vi(e)){if(!e.allowTabSynchronization)throw new O(P.FAILED_PRECONDITION,ib);return!1}}return!(!this.networkEnabled||!this.inForeground)||Dm(t).U().next(i=>this.xi(i,5e3).find(r=>{if(this.clientId!==r.clientId){let s=!this.networkEnabled&&r.networkEnabled,o=!this.inForeground&&r.inForeground,a=this.networkEnabled===r.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(e=>(this.isPrimary!==e&&L("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){return D(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{let e=new Fd(t,wi.oe);return this.bi(e).next(()=>this.Ci(e))}),this.Ri.close(),this.qi()})}xi(t,e){return t.filter(i=>this.Mi(i.updateTimeMs,e)&&!this.Ni(i.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",t=>Dm(t).U().next(e=>this.xi(e,18e5).map(i=>i.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(t,e){return af.lt(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new Yb(t,this.serializer.ct.databaseId)}getDocumentOverlayCache(t){return nf.lt(this.serializer,t)}getBundleCache(){return this.Gr}runTransaction(t,e,i){L("IndexedDbPersistence","Starting transaction:",t);let r=e==="readonly"?"readonly":"readwrite",s=function(c){return c===17?Y2:c===16?Q2:c===15?c0:c===14?JS:c===13?ZS:c===12?K2:c===11?XS:void J()}(this.hi),o;return this.Ri.runTransaction(t,r,s,a=>(o=new Fd(a,this.Qr?this.Qr.next():wi.oe),e==="readwrite-primary"?this.wi(o).next(c=>!!c||this.Si(o)).next(c=>{if(!c)throw fe(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new O(P.FAILED_PRECONDITION,HS);return i(o)}).next(c=>this.Di(o).next(()=>c)):this.Ki(o).next(()=>i(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(t){return Cd(t).get("owner").next(e=>{if(e!==null&&this.Mi(e.leaseTimestampMs,5e3)&&!this.Ni(e.ownerId)&&!this.vi(e)&&!(this.li||this.allowTabSynchronization&&e.allowTabSynchronization))throw new O(P.FAILED_PRECONDITION,ib)})}Di(t){let e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Cd(t).put("owner",e)}static D(){return Wr.D()}bi(t){let e=Cd(t);return e.get("owner").next(i=>this.vi(i)?(L("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):R.resolve())}Mi(t,e){let i=Date.now();return!(t<i-e)&&(!(t>i)||(fe(`Detected an update time that is in the future: ${t} > ${i}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var t;typeof((t=this.window)===null||t===void 0?void 0:t.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let e=/(?:Version|Mobile)\/1[456]/;n_()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(t){var e;try{let i=((e=this.Vi)===null||e===void 0?void 0:e.getItem(this.Oi(t)))!==null;return L("IndexedDbPersistence",`Client '${t}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return fe("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(t){fe("Failed to set zombie client id.",t)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(t){return`firestore_zombie_${this.persistenceKey}_${t}`}};function Cd(n){return Ce(n,"owner")}function Dm(n){return Ce(n,"clientMetadata")}function _0(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}var py=class n{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.$i=i,this.Ui=r}static Wi(t,e){let i=pt(),r=pt();for(let s of e.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new n(t,e.fromCache,i,r)}};var gy=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}};var hf=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return n_()?8:KS(wl())>0?6:4}()}initialize(t,e){this.Ji=t,this.indexManager=e,this.Gi=!0}getDocumentsMatchingQuery(t,e,i,r){let s={result:null};return this.Yi(t,e).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(t,e,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new gy;return this.Xi(t,e,o).next(a=>{if(s.result=a,this.zi)return this.es(t,e,o,a.size)})}).next(()=>s.result)}es(t,e,i,r){return i.documentReadCount<this.ji?(Na()<=ki.DEBUG&&L("QueryEngine","SDK will not create cache indexes for query:",Oa(e),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),R.resolve()):(Na()<=ki.DEBUG&&L("QueryEngine","Query:",Oa(e),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(Na()<=ki.DEBUG&&L("QueryEngine","The SDK decides to create cache indexes for query:",Oa(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ni(e))):R.resolve())}Yi(t,e){if(eS(e))return R.resolve(null);let i=ni(e);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(e.limit!==null&&r===1&&(e=Ym(e,null,"F"),i=ni(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{let o=pt(...s);return this.Ji.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,i).next(c=>{let d=this.ts(e,a);return this.ns(e,d,o,c.readTime)?this.Yi(t,Ym(e,null,"F")):this.rs(t,d,e,c)}))})))}Zi(t,e,i,r){return eS(e)||r.isEqual(st.min())?R.resolve(null):this.Ji.getDocuments(t,i).next(s=>{let o=this.ts(e,s);return this.ns(e,o,i,r)?R.resolve(null):(Na()<=ki.DEBUG&&L("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Oa(e)),this.rs(t,o,e,$S(r,-1)).next(a=>a))})}ts(t,e){let i=new $t(mk(t));return e.forEach((r,s)=>{ou(t,s)&&(i=i.add(s))}),i}ns(t,e,i,r){if(t.limit===null)return!1;if(i.size!==e.size)return!0;let s=t.limitType==="F"?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(t,e,i){return Na()<=ki.DEBUG&&L("QueryEngine","Using full collection scan to execute query:",Oa(e)),this.Ji.getDocumentsMatchingQuery(t,e,Oi.min(),i)}rs(t,e,i,r){return this.Ji.getDocumentsMatchingQuery(t,i,r).next(s=>(e.forEach(o=>{s=s.insert(o.key,o)}),s))}};var _y=class{constructor(t,e,i,r){this.persistence=t,this.ss=e,this.serializer=r,this.os=new ee(mt),this._s=new _n(s=>Qs(s),ru),this.us=new Map,this.cs=t.getRemoteDocumentCache(),this.Ur=t.getTargetCache(),this.Gr=t.getBundleCache(),this.ls(i)}ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new lf(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.os))}};function Hk(n,t,e,i){return new _y(n,t,e,i)}function Kk(n,t){return D(this,null,function*(){let e=K(n);return yield e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,e.ls(t),e.mutationQueue.getAllMutationBatches(i))).next(s=>{let o=[],a=[],c=pt();for(let d of r){o.push(d.batchId);for(let u of d.mutations)c=c.add(u.key)}for(let d of s){a.push(d.batchId);for(let u of d.mutations)c=c.add(u.key)}return e.localDocuments.getDocuments(i,c).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:a}))})})})}function kj(n,t){let e=K(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=t.batch.keys(),s=e.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,d,u){let m=d.batch,p=m.keys(),_=R.resolve();return p.forEach(w=>{_=_.next(()=>u.getEntry(c,w)).next(A=>{let x=d.docVersions.get(w);nt(x!==null),A.version.compareTo(x)<0&&(m.applyToRemoteDocument(A,d),A.isValidDocument()&&(A.setReadTime(d.commitVersion),u.addEntry(A)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(c,m))}(e,i,t,s).next(()=>s.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let c=pt();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(c=c.add(a.batch.mutations[d].key));return c}(t))).next(()=>e.localDocuments.getDocuments(i,r))})}function Qk(n){let t=K(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ur.getLastRemoteSnapshotVersion(e))}function Rj(n,t){let e=K(n),i=t.snapshotVersion,r=e.os;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=e.cs.newChangeBuffer({trackRemovals:!0});r=e.os;let a=[];t.targetChanges.forEach((u,m)=>{let p=r.get(m);if(!p)return;a.push(e.Ur.removeMatchingKeys(s,u.removedDocuments,m).next(()=>e.Ur.addMatchingKeys(s,u.addedDocuments,m)));let _=p.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(m)!==null?_=_.withResumeToken(_e.EMPTY_BYTE_STRING,st.min()).withLastLimboFreeSnapshotVersion(st.min()):u.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(u.resumeToken,i)),r=r.insert(m,_),function(A,x,V){return A.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0}(p,_,u)&&a.push(e.Ur.updateTargetData(s,_))});let c=ui(),d=pt();if(t.documentUpdates.forEach(u=>{t.resolvedLimboDocuments.has(u)&&a.push(e.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(Yk(s,o,t.documentUpdates).next(u=>{c=u.Ps,d=u.Is})),!i.isEqual(st.min())){let u=e.Ur.getLastRemoteSnapshotVersion(s).next(m=>e.Ur.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(u)}return R.waitFor(a).next(()=>o.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,c,d)).next(()=>c)}).then(s=>(e.os=r,s))}function Yk(n,t,e){let i=pt(),r=pt();return e.forEach(s=>i=i.add(s)),t.getEntries(n,i).next(s=>{let o=ui();return e.forEach((a,c)=>{let d=s.get(a);c.isFoundDocument()!==d.isFoundDocument()&&(r=r.add(a)),c.isNoDocument()&&c.version.isEqual(st.min())?(t.removeEntry(a,c.readTime),o=o.insert(a,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(t.addEntry(c),o=o.insert(a,c)):L("LocalStore","Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",c.version)}),{Ps:o,Is:r}})}function Dj(n,t){let e=K(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function Za(n,t){let e=K(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.Ur.getTargetData(i,t).next(s=>s?(r=s,R.resolve(r)):e.Ur.allocateTargetId(i).next(o=>(r=new Ya(t,o,"TargetPurposeListen",i.currentSequenceNumber),e.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=e.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.os=e.os.insert(i.targetId,i),e._s.set(t,i.targetId)),i})}function Ja(n,t,e){return D(this,null,function*(){let i=K(n),r=i.os.get(t),s=e?"readwrite":"readwrite-primary";try{e||(yield i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!is(o))throw o;L("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}i.os=i.os.remove(t),i._s.delete(r.target)})}function mf(n,t,e){let i=K(n),r=st.min(),s=pt();return i.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,u){let m=K(c),p=m._s.get(u);return p!==void 0?R.resolve(m.os.get(p)):m.Ur.getTargetData(d,u)}(i,o,ni(t)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>i.ss.getDocumentsMatchingQuery(o,t,e?r:st.min(),e?s:pt())).next(a=>(Jk(i,hk(t),a),{documents:a,Ts:s})))}function Xk(n,t){let e=K(n),i=K(e.Ur),r=e.os.get(t);return r?Promise.resolve(r.target):e.persistence.runTransaction("Get target data","readonly",s=>i.ot(s,t).next(o=>o?o.target:null))}function Zk(n,t){let e=K(n),i=e.us.get(t)||st.min();return e.persistence.runTransaction("Get new document changes","readonly",r=>e.cs.getAllFromCollectionGroup(r,t,$S(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(Jk(e,t,r),r))}function Jk(n,t,e){let i=n.us.get(t)||st.min();e.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.us.set(t,i)}function Pj(n,t,e,i){return D(this,null,function*(){let r=K(n),s=pt(),o=ui();for(let d of e){let u=t.Es(d.metadata.name);d.document&&(s=s.add(u));let m=t.ds(d);m.setReadTime(t.As(d.metadata.readTime)),o=o.insert(u,m)}let a=r.cs.newChangeBuffer({trackRemovals:!0}),c=yield Za(r,function(u){return ni(ac(Dt.fromString(`__bundle__/docs/${u}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",d=>Yk(d,a,o).next(u=>(a.apply(d),u)).next(u=>r.Ur.removeMatchingKeysForTargetId(d,c.targetId).next(()=>r.Ur.addMatchingKeys(d,s,c.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(d,u.Ps,u.Is)).next(()=>u.Ps)))})}function Mj(i,r){return D(this,arguments,function*(n,t,e=pt()){let s=yield Za(n,ni(p0(t.bundledQuery))),o=K(n);return o.persistence.runTransaction("Save named query","readwrite",a=>{let c=ge(t.readTime);if(s.snapshotVersion.compareTo(c)>=0)return o.Gr.saveNamedQuery(a,t);let d=s.withResumeToken(_e.EMPTY_BYTE_STRING,c);return o.os=o.os.insert(d.targetId,d),o.Ur.updateTargetData(a,d).next(()=>o.Ur.removeMatchingKeysForTargetId(a,s.targetId)).next(()=>o.Ur.addMatchingKeys(a,e,s.targetId)).next(()=>o.Gr.saveNamedQuery(a,t))})})}function kS(n,t){return`firestore_clients_${n}_${t}`}function RS(n,t,e){let i=`firestore_mutations_${n}_${e}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}function nb(n,t){return`firestore_targets_${n}_${t}`}var ff=class n{constructor(t,e,i,r){this.user=t,this.batchId=e,this.state=i,this.error=r}static Rs(t,e,i){let r=JSON.parse(i),s,o=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(s=new O(r.error.code,r.error.message))),o?new n(t,e,r.state,s):(fe("SharedClientState",`Failed to parse mutation state for ID '${e}': ${i}`),null)}Vs(){let t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}},Pd=class n{constructor(t,e,i){this.targetId=t,this.state=e,this.error=i}static Rs(t,e){let i=JSON.parse(e),r,s=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(r=new O(i.error.code,i.error.message))),s?new n(t,i.state,r):(fe("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}Vs(){let t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}},pf=class n{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Rs(t,e){let i=JSON.parse(e),r=typeof i=="object"&&i.activeTargetIds instanceof Array,s=h0();for(let o=0;r&&o<i.activeTargetIds.length;++o)r=QS(i.activeTargetIds[o]),s=s.add(i.activeTargetIds[o]);return r?new n(t,s):(fe("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}},vy=class n{constructor(t,e){this.clientId=t,this.onlineState=e}static Rs(t){let e=JSON.parse(t);return typeof e=="object"&&["Unknown","Online","Offline"].indexOf(e.onlineState)!==-1&&typeof e.clientId=="string"?new n(e.clientId,e.onlineState):(fe("SharedClientState",`Failed to parse online state: ${t}`),null)}},Qd=class{constructor(){this.activeTargetIds=h0()}fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Vs(){let t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}},Md=class{constructor(t,e,i,r,s){this.window=t,this.ui=e,this.persistenceKey=i,this.ps=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new ee(mt),this.started=!1,this.bs=[];let o=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=kS(this.persistenceKey,this.ps),this.vs=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Qd),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Os=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(t){return!(!t||!t.localStorage)}start(){return D(this,null,function*(){let t=yield this.syncEngine.Qi();for(let i of t){if(i===this.ps)continue;let r=this.getItem(kS(this.persistenceKey,i));if(r){let s=pf.Rs(i,r);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();let e=this.storage.getItem(this.xs);if(e){let i=this.Ls(e);i&&this.Bs(i)}for(let i of this.bs)this.ws(i);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(t){this.setItem(this.vs,JSON.stringify(t))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(t){let e=!1;return this.Ss.forEach((i,r)=>{r.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.qs(t,"pending")}updateMutationState(t,e,i){this.qs(t,e,i),this.Qs(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){let i=this.storage.getItem(nb(this.persistenceKey,t));if(i){let r=Pd.Rs(t,i);r&&(e=r.state)}}return this.Ks.fs(t),this.Ns(),e}removeLocalQueryTarget(t){this.Ks.gs(t),this.Ns()}isLocalQueryTarget(t){return this.Ks.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(nb(this.persistenceKey,t))}updateQueryState(t,e,i){this.$s(t,e,i)}handleUserChange(t,e,i){e.forEach(r=>{this.Qs(r)}),this.currentUser=t,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(t){this.Us(t)}notifyBundleLoaded(t){this.Ws(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(t){let e=this.storage.getItem(t);return L("SharedClientState","READ",t,e),e}setItem(t,e){L("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){L("SharedClientState","REMOVE",t),this.storage.removeItem(t)}ws(t){let e=t;if(e.storageArea===this.storage){if(L("SharedClientState","EVENT",e.key,e.newValue),e.key===this.Ds)return void fe("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>D(this,null,function*(){if(this.started){if(e.key!==null){if(this.Cs.test(e.key)){if(e.newValue==null){let i=this.Gs(e.key);return this.zs(i,null)}{let i=this.js(e.key,e.newValue);if(i)return this.zs(i.clientId,i)}}else if(this.Fs.test(e.key)){if(e.newValue!==null){let i=this.Hs(e.key,e.newValue);if(i)return this.Js(i)}}else if(this.Ms.test(e.key)){if(e.newValue!==null){let i=this.Ys(e.key,e.newValue);if(i)return this.Zs(i)}}else if(e.key===this.xs){if(e.newValue!==null){let i=this.Ls(e.newValue);if(i)return this.Bs(i)}}else if(e.key===this.vs){let i=function(s){let o=wi.oe;if(s!=null)try{let a=JSON.parse(s);nt(typeof a=="number"),o=a}catch(a){fe("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(e.newValue);i!==wi.oe&&this.sequenceNumberHandler(i)}else if(e.key===this.Os){let i=this.Xs(e.newValue);yield Promise.all(i.map(r=>this.syncEngine.eo(r)))}}}else this.bs.push(e)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(t,e,i){let r=new ff(this.currentUser,t,e,i),s=RS(this.persistenceKey,this.currentUser,t);this.setItem(s,r.Vs())}Qs(t){let e=RS(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Us(t){let e={clientId:this.ps,onlineState:t};this.storage.setItem(this.xs,JSON.stringify(e))}$s(t,e,i){let r=nb(this.persistenceKey,t),s=new Pd(t,e,i);this.setItem(r,s.Vs())}Ws(t){let e=JSON.stringify(Array.from(t));this.setItem(this.Os,e)}Gs(t){let e=this.Cs.exec(t);return e?e[1]:null}js(t,e){let i=this.Gs(t);return pf.Rs(i,e)}Hs(t,e){let i=this.Fs.exec(t),r=Number(i[1]),s=i[2]!==void 0?i[2]:null;return ff.Rs(new we(s),r,e)}Ys(t,e){let i=this.Ms.exec(t),r=Number(i[1]);return Pd.Rs(r,e)}Ls(t){return vy.Rs(t)}Xs(t){return JSON.parse(t)}Js(t){return D(this,null,function*(){if(t.user.uid===this.currentUser.uid)return this.syncEngine.no(t.batchId,t.state,t.error);L("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})}Zs(t){return this.syncEngine.ro(t.targetId,t.state,t.error)}zs(t,e){let i=e?this.Ss.insert(t,e):this.Ss.remove(t),r=this.ks(this.Ss),s=this.ks(i),o=[],a=[];return s.forEach(c=>{r.has(c)||o.push(c)}),r.forEach(c=>{s.has(c)||a.push(c)}),this.syncEngine.io(o,a).then(()=>{this.Ss=i})}Bs(t){this.Ss.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}ks(t){let e=h0();return t.forEach((i,r)=>{e=e.unionWith(r.activeTargetIds)}),e}},gf=class{constructor(){this.so=new Qd,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t){return this.so.fs(t),this.oo[t]||"not-current"}updateQueryState(t,e,i){this.oo[t]=e}removeLocalQueryTarget(t){this.so.gs(t)}isLocalQueryTarget(t){return this.so.activeTargetIds.has(t)}clearQueryState(t){delete this.oo[t]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(t){return this.so.activeTargetIds.has(t)}start(){return this.so=new Qd,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}};var by=class{_o(t){}shutdown(){}};var _f=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(t){this.ho.push(t)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){L("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let t of this.ho)t(0)}lo(){L("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let t of this.ho)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Pm=null;function rb(){return Pm===null?Pm=function(){return 268435456+Math.round(2147483648*Math.random())}():Pm++,"0x"+Pm.toString(16)}var Nj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var yy=class{constructor(t){this.Io=t.Io,this.To=t.To}Eo(t){this.Ao=t}Ro(t){this.Vo=t}mo(t){this.fo=t}onMessage(t){this.po=t}close(){this.To()}send(t){this.Io(t)}yo(){this.Ao()}wo(){this.Vo()}So(t){this.fo(t)}bo(t){this.po(t)}};var Ke="WebChannelConnection",wy=class extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let i=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+e.host,this.vo=`projects/${r}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Fo(){return!1}Mo(e,i,r,s,o){let a=rb(),c=this.xo(e,i.toUriEncodedString());L("RestConnection",`Sending RPC '${e}' ${a}:`,c,r);let d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,s,o),this.No(e,c,d,r).then(u=>(L("RestConnection",`Received RPC '${e}' ${a}: `,u),u),u=>{throw Ni("RestConnection",`RPC '${e}' ${a} failed with error: `,u,"url: ",c,"request:",r),u})}Lo(e,i,r,s,o,a){return this.Mo(e,i,r,s,o)}Oo(e,i,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+oc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}xo(e,i){let r=Nj[e];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}No(t,e,i,r){let s=rb();return new Promise((o,a)=>{let c=new Qv;c.setWithCredentials(!0),c.listenOnce(Xv.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Id.NO_ERROR:let u=c.getResponseJson();L(Ke,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(u)),o(u);break;case Id.TIMEOUT:L(Ke,`RPC '${t}' ${s} timed out`),a(new O(P.DEADLINE_EXCEEDED,"Request time out"));break;case Id.HTTP_ERROR:let m=c.getStatus();if(L(Ke,`RPC '${t}' ${s} failed with status:`,m,"response text:",c.getResponseText()),m>0){let p=c.getResponseJson();Array.isArray(p)&&(p=p[0]);let _=p?.error;if(_&&_.status&&_.message){let w=function(x){let V=x.toLowerCase().replace(/_/g,"-");return Object.values(P).indexOf(V)>=0?V:P.UNKNOWN}(_.status);a(new O(w,_.message))}else a(new O(P.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new O(P.UNAVAILABLE,"Connection failed."));break;default:J()}}finally{L(Ke,`RPC '${t}' ${s} completed.`)}});let d=JSON.stringify(r);L(Ke,`RPC '${t}' ${s} sending request:`,r),c.send(e,"POST",d,i,15)})}Bo(t,e,i){let r=rb(),s=[this.Do,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=tb(),a=Jv(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.xmlHttpFactory=new Yv({})),this.Oo(c.initMessageHeaders,e,i),c.encodeInitMessageHeaders=!0;let u=s.join("");L(Ke,`Creating RPC '${t}' stream ${r}: ${u}`,c);let m=o.createWebChannel(u,c),p=!1,_=!1,w=new yy({Io:x=>{_?L(Ke,`Not sending because RPC '${t}' stream ${r} is closed:`,x):(p||(L(Ke,`Opening RPC '${t}' stream ${r} transport.`),m.open(),p=!0),L(Ke,`RPC '${t}' stream ${r} sending:`,x),m.send(x))},To:()=>m.close()}),A=(x,V,H)=>{x.listen(V,j=>{try{H(j)}catch(Z){setTimeout(()=>{throw Z},0)}})};return A(m,ka.EventType.OPEN,()=>{_||(L(Ke,`RPC '${t}' stream ${r} transport opened.`),w.yo())}),A(m,ka.EventType.CLOSE,()=>{_||(_=!0,L(Ke,`RPC '${t}' stream ${r} transport closed`),w.So())}),A(m,ka.EventType.ERROR,x=>{_||(_=!0,Ni(Ke,`RPC '${t}' stream ${r} transport errored:`,x),w.So(new O(P.UNAVAILABLE,"The operation could not be completed")))}),A(m,ka.EventType.MESSAGE,x=>{var V;if(!_){let H=x.data[0];nt(!!H);let j=H,Z=j.error||((V=j[0])===null||V===void 0?void 0:V.error);if(Z){L(Ke,`RPC '${t}' stream ${r} received error:`,Z);let lt=Z.status,at=function(y){let E=be[y];if(E!==void 0)return Ck(E)}(lt),I=Z.message;at===void 0&&(at=P.INTERNAL,I="Unknown error status: "+lt+" with message "+Z.message),_=!0,w.So(new O(at,I)),m.close()}else L(Ke,`RPC '${t}' stream ${r} received:`,H),w.bo(H)}}),A(a,Zv.STAT_EVENT,x=>{x.stat===Sm.PROXY?L(Ke,`RPC '${t}' stream ${r} detected buffering proxy`):x.stat===Sm.NOPROXY&&L(Ke,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{w.wo()},0),w}};function tR(){return typeof window<"u"?window:null}function Lm(){return typeof document<"u"?document:null}function au(n){return new Fb(n,!0)}var Yd=class{constructor(t,e,i=1e3,r=1.5,s=6e4){this.ui=t,this.timerId=e,this.ko=i,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(t){this.cancel();let e=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,e-i);r>0&&L("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),t())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var vf=class{constructor(t,e,i,r,s,o,a,c){this.ui=t,this.Ho=i,this.Jo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Yd(t,e)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return D(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(t){this.u_(),this.stream.send(t)}__(){return D(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(t,e){return D(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,t!==4?this.t_.reset():e&&e.code===P.RESOURCE_EXHAUSTED?(fe(e.toString()),fe("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):e&&e.code===P.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=t,yield this.listener.mo(e)})}l_(){}auth(){this.state=1;let t=this.h_(this.Yo),e=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===e&&this.P_(i,r)},i=>{t(()=>{let r=new O(P.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(t,e){let i=this.h_(this.Yo);this.stream=this.T_(t,e),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(()=>D(this,null,function*(){this.state=0,this.start()}))}I_(t){return L("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}h_(t){return e=>{this.ui.enqueueAndForget(()=>this.Yo===t?e():(L("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Iy=class extends vf{constructor(t,e,i,r,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,o),this.serializer=s}T_(t,e){return this.connection.Bo("Listen",t,e)}E_(t){return this.onNext(t)}onNext(t){this.t_.reset();let e=vj(this.serializer,t),i=function(s){if(!("targetChange"in s))return st.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?st.min():o.readTime?ge(o.readTime):st.min()}(t);return this.listener.d_(e,i)}A_(t){let e={};e.database=jb(this.serializer),e.addTarget=function(s,o){let a,c=o.target;if(a=Km(c)?{documents:Nk(s,c)}:{query:Ok(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Sk(s,o.resumeToken);let d=Lb(s,o.expectedCount);d!==null&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(st.min())>0){a.readTime=Qa(s,o.snapshotVersion.toTimestamp());let d=Lb(s,o.expectedCount);d!==null&&(a.expectedCount=d)}return a}(this.serializer,t);let i=yj(this.serializer,t);i&&(e.labels=i),this.a_(e)}R_(t){let e={};e.database=jb(this.serializer),e.removeTarget=t,this.a_(e)}},Ey=class extends vf{constructor(t,e,i,r,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(t,e){return this.connection.Bo("Write",t,e)}E_(t){return nt(!!t.streamToken),this.lastStreamToken=t.streamToken,nt(!t.writeResults||t.writeResults.length===0),this.listener.f_()}onNext(t){nt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.t_.reset();let e=bj(t.writeResults,t.commitTime),i=ge(t.commitTime);return this.listener.g_(i,e)}p_(){let t={};t.database=jb(this.serializer),this.a_(t)}m_(t){let e={streamToken:this.lastStreamToken,writes:t.map(i=>Wd(this.serializer,i))};this.a_(e)}};var xy=class extends class{}{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new O(P.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(t,e,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(t,Vb(e,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new O(P.UNKNOWN,s.toString())})}Lo(t,e,i,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(t,Vb(e,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new O(P.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Ty=class{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(t){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.C_("Offline")))}set(t){this.x_(),this.S_=0,t==="Online"&&(this.D_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}F_(t){let e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(fe(e),this.D_=!1):L("OnlineStateTracker",e)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Cy=class{constructor(t,e,i,r,s){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{i.enqueueAndForget(()=>D(this,null,function*(){ns(this)&&(L("RemoteStore","Restarting streams for network reachability change."),yield function(c){return D(this,null,function*(){let d=K(c);d.L_.add(4),yield cc(d),d.q_.set("Unknown"),d.L_.delete(4),yield cu(d)})}(this))}))}),this.q_=new Ty(i,r)}};function cu(n){return D(this,null,function*(){if(ns(n))for(let t of n.B_)yield t(!0)})}function cc(n){return D(this,null,function*(){for(let t of n.B_)yield t(!1)})}function Vf(n,t){let e=K(n);e.N_.has(t.targetId)||(e.N_.set(t.targetId,t),y0(e)?b0(e):dc(e).r_()&&v0(e,t))}function tc(n,t){let e=K(n),i=dc(e);e.N_.delete(t),i.r_()&&eR(e,t),e.N_.size===0&&(i.r_()?i.o_():ns(e)&&e.q_.set("Unknown"))}function v0(n,t){if(n.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(st.min())>0){let e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}dc(n).A_(t)}function eR(n,t){n.Q_.xe(t),dc(n).R_(t)}function b0(n){n.Q_=new Ob({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>n.N_.get(t)||null,tt:()=>n.datastore.serializer.databaseId}),dc(n).start(),n.q_.v_()}function y0(n){return ns(n)&&!dc(n).n_()&&n.N_.size>0}function ns(n){return K(n).L_.size===0}function iR(n){n.Q_=void 0}function Oj(n){return D(this,null,function*(){n.q_.set("Online")})}function Fj(n){return D(this,null,function*(){n.N_.forEach((t,e)=>{v0(n,t)})})}function Lj(n,t){return D(this,null,function*(){iR(n),y0(n)?(n.q_.M_(t),b0(n)):n.q_.set("Unknown")})}function Vj(n,t,e){return D(this,null,function*(){if(n.q_.set("Online"),t instanceof Zm&&t.state===2&&t.cause)try{yield function(r,s){return D(this,null,function*(){let o=s.cause;for(let a of s.targetIds)r.N_.has(a)&&(yield r.remoteSyncer.rejectListen(a,o),r.N_.delete(a),r.Q_.removeTarget(a))})}(n,t)}catch(i){L("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield bf(n,i)}else if(t instanceof za?n.Q_.Ke(t):t instanceof Xm?n.Q_.He(t):n.Q_.We(t),!e.isEqual(st.min()))try{let i=yield Qk(n.localStore);e.compareTo(i)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){let u=s.N_.get(d);u&&s.N_.set(d,u.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,d)=>{let u=s.N_.get(c);if(!u)return;s.N_.set(c,u.withResumeToken(_e.EMPTY_BYTE_STRING,u.snapshotVersion)),eR(s,c);let m=new Ya(u.target,c,d,u.sequenceNumber);v0(s,m)}),s.remoteSyncer.applyRemoteEvent(a)}(n,e))}catch(i){L("RemoteStore","Failed to raise snapshot:",i),yield bf(n,i)}})}function bf(n,t,e){return D(this,null,function*(){if(!is(t))throw t;n.L_.add(1),yield cc(n),n.q_.set("Offline"),e||(e=()=>Qk(n.localStore)),n.asyncQueue.enqueueRetryable(()=>D(this,null,function*(){L("RemoteStore","Retrying IndexedDB access"),yield e(),n.L_.delete(1),yield cu(n)}))})}function nR(n,t){return t().catch(e=>bf(n,e,t))}function lc(n){return D(this,null,function*(){let t=K(n),e=ts(t),i=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;jj(t);)try{let r=yield Dj(t.localStore,i);if(r===null){t.O_.length===0&&e.o_();break}i=r.batchId,Uj(t,r)}catch(r){yield bf(t,r)}rR(t)&&sR(t)})}function jj(n){return ns(n)&&n.O_.length<10}function Uj(n,t){n.O_.push(t);let e=ts(n);e.r_()&&e.V_&&e.m_(t.mutations)}function rR(n){return ns(n)&&!ts(n).n_()&&n.O_.length>0}function sR(n){ts(n).start()}function Bj(n){return D(this,null,function*(){ts(n).p_()})}function zj(n){return D(this,null,function*(){let t=ts(n);for(let e of n.O_)t.m_(e.mutations)})}function qj(n,t,e){return D(this,null,function*(){let i=n.O_.shift(),r=Pb.from(i,t,e);yield nR(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield lc(n)})}function Gj(n,t){return D(this,null,function*(){t&&ts(n).V_&&(yield function(i,r){return D(this,null,function*(){if(function(o){return Tk(o)&&o!==P.ABORTED}(r.code)){let s=i.O_.shift();ts(i).s_(),yield nR(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),yield lc(i)}})}(n,t)),rR(n)&&sR(n)})}function DS(n,t){return D(this,null,function*(){let e=K(n);e.asyncQueue.verifyOperationInProgress(),L("RemoteStore","RemoteStore received new credentials");let i=ns(e);e.L_.add(3),yield cc(e),i&&e.q_.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.L_.delete(3),yield cu(e)})}function Ay(n,t){return D(this,null,function*(){let e=K(n);t?(e.L_.delete(2),yield cu(e)):t||(e.L_.add(2),yield cc(e),e.q_.set("Unknown"))})}function dc(n){return n.K_||(n.K_=function(e,i,r){let s=K(e);return s.w_(),new Iy(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Eo:Oj.bind(null,n),Ro:Fj.bind(null,n),mo:Lj.bind(null,n),d_:Vj.bind(null,n)}),n.B_.push(t=>D(this,null,function*(){t?(n.K_.s_(),y0(n)?b0(n):n.q_.set("Unknown")):(yield n.K_.stop(),iR(n))}))),n.K_}function ts(n){return n.U_||(n.U_=function(e,i,r){let s=K(e);return s.w_(),new Ey(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Bj.bind(null,n),mo:Gj.bind(null,n),f_:zj.bind(null,n),g_:qj.bind(null,n)}),n.B_.push(t=>D(this,null,function*(){t?(n.U_.s_(),yield lc(n)):(yield n.U_.stop(),n.O_.length>0&&(L("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var Sy=class n{constructor(t,e,i,r,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Ie,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,r,s){let o=Date.now()+i,a=new n(t,e,o,r,s);return a.start(i),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new O(P.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function uc(n,t){if(fe("AsyncQueue",`${t}: ${n}`),is(n))return new O(P.UNAVAILABLE,`${t}: ${n}`);throw n}var yf=class n{constructor(t){this.comparator=t?(e,i)=>t(e,i)||Q.comparator(e.key,i.key):(e,i)=>Q.comparator(e.key,i.key),this.keyedMap=Ad(),this.sortedSet=new ee(this.comparator)}static emptySet(t){return new n(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){let e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){let e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){let e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof n)||this.size!==t.size)return!1;let e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){let r=e.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){let t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){let i=new n;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}};var wf=class{constructor(){this.W_=new ee(Q.comparator)}track(t){let e=t.doc.key,i=this.W_.get(e);i?t.type!==0&&i.type===3?this.W_=this.W_.insert(e,t):t.type===3&&i.type!==1?this.W_=this.W_.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.W_=this.W_.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.W_=this.W_.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.W_=this.W_.remove(e):t.type===1&&i.type===2?this.W_=this.W_.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.W_=this.W_.insert(e,{type:2,doc:t.doc}):J():this.W_=this.W_.insert(e,t)}G_(){let t=[];return this.W_.inorderTraversal((e,i)=>{t.push(i)}),t}},ec=class n{constructor(t,e,i,r,s,o,a,c,d){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(t,e,i,r,s){let o=[];return e.forEach(a=>{o.push({type:0,doc:a})}),new n(t,e,yf.emptySet(e),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&su(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;let e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}};var ky=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(t=>t.J_())}},Ry=class{constructor(){this.queries=PS(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(e,i){let r=K(e),s=r.queries;r.queries=PS(),s.forEach((o,a)=>{for(let c of a.j_)c.onError(i)})})(this,new O(P.ABORTED,"Firestore shutting down"))}};function PS(){return new _n(n=>uk(n),su)}function w0(n,t){return D(this,null,function*(){let e=K(n),i=3,r=t.query,s=e.queries.get(r);s?!s.H_()&&t.J_()&&(i=2):(s=new ky,i=t.J_()?0:1);try{switch(i){case 0:s.z_=yield e.onListen(r,!0);break;case 1:s.z_=yield e.onListen(r,!1);break;case 2:yield e.onFirstRemoteStoreListen(r)}}catch(o){let a=uc(o,`Initialization of query '${Oa(t.query)}' failed`);return void t.onError(a)}e.queries.set(r,s),s.j_.push(t),t.Z_(e.onlineState),s.z_&&t.X_(s.z_)&&E0(e)})}function I0(n,t){return D(this,null,function*(){let e=K(n),i=t.query,r=3,s=e.queries.get(i);if(s){let o=s.j_.indexOf(t);o>=0&&(s.j_.splice(o,1),s.j_.length===0?r=t.J_()?0:1:!s.H_()&&t.J_()&&(r=2))}switch(r){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}})}function $j(n,t){let e=K(n),i=!1;for(let r of t){let s=r.query,o=e.queries.get(s);if(o){for(let a of o.j_)a.X_(r)&&(i=!0);o.z_=r}}i&&E0(e)}function Wj(n,t,e){let i=K(n),r=i.queries.get(t);if(r)for(let s of r.j_)s.onError(e);i.queries.delete(t)}function E0(n){n.Y_.forEach(t=>{t.next()})}var Dy,MS;(MS=Dy||(Dy={})).ea="default",MS.Cache="cache";var Xd=class{constructor(t,e,i){this.query=t,this.ta=e,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(t){if(!this.options.includeMetadataChanges){let i=[];for(let r of t.docChanges)r.type!==3&&i.push(r);t=new ec(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.na?this.ia(t)&&(this.ta.next(t),e=!0):this.sa(t,this.onlineState)&&(this.oa(t),e=!0),this.ra=t,e}onError(t){this.ta.error(t)}Z_(t){this.onlineState=t;let e=!1;return this.ra&&!this.na&&this.sa(this.ra,t)&&(this.oa(this.ra),e=!0),e}sa(t,e){if(!t.fromCache||!this.J_())return!0;let i=e!=="Offline";return(!this.options._a||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}ia(t){if(t.docChanges.length>0)return!0;let e=this.ra&&this.ra.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}oa(t){t=ec.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.na=!0,this.ta.next(t)}J_(){return this.options.source!==Dy.Cache}};var Py=class{constructor(t,e){this.aa=t,this.byteLength=e}ua(){return"metadata"in this.aa}};var If=class{constructor(t){this.serializer=t}Es(t){return mn(this.serializer,t)}ds(t){return t.metadata.exists?Mk(this.serializer,t.document,!1):Ee.newNoDocument(this.Es(t.metadata.name),this.As(t.metadata.readTime))}As(t){return ge(t)}},My=class{constructor(t,e,i){this.ca=t,this.localStore=e,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=oR(t)}la(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.aa.namedQuery)this.queries.push(t.aa.namedQuery);else if(t.aa.documentMetadata){this.documents.push({metadata:t.aa.documentMetadata}),t.aa.documentMetadata.exists||++e;let i=Dt.fromString(t.aa.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else t.aa.document&&(this.documents[this.documents.length-1].document=t.aa.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}ha(t){let e=new Map,i=new If(this.serializer);for(let r of t)if(r.metadata.queries){let s=i.Es(r.metadata.name);for(let o of r.metadata.queries){let a=(e.get(o)||pt()).add(s);e.set(o,a)}}return e}complete(){return D(this,null,function*(){let t=yield Pj(this.localStore,new If(this.serializer),this.documents,this.ca.id),e=this.ha(this.documents);for(let i of this.queries)yield Mj(this.localStore,i,e.get(i.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:t}})}};function oR(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var Ef=class{constructor(t){this.key=t}},xf=class{constructor(t){this.key=t}},Tf=class{constructor(t,e){this.query=t,this.Ta=e,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=pt(),this.mutatedKeys=pt(),this.Aa=mk(t),this.Ra=new yf(this.Aa)}get Va(){return this.Ta}ma(t,e){let i=e?e.fa:new wf,r=e?e.Ra:this.Ra,s=e?e.mutatedKeys:this.mutatedKeys,o=r,a=!1,c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,d=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((u,m)=>{let p=r.get(u),_=ou(this.query,m)?m:null,w=!!p&&this.mutatedKeys.has(p.key),A=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations),x=!1;p&&_?p.data.isEqual(_.data)?w!==A&&(i.track({type:3,doc:_}),x=!0):this.ga(p,_)||(i.track({type:2,doc:_}),x=!0,(c&&this.Aa(_,c)>0||d&&this.Aa(_,d)<0)&&(a=!0)):!p&&_?(i.track({type:0,doc:_}),x=!0):p&&!_&&(i.track({type:1,doc:p}),x=!0,(c||d)&&(a=!0)),x&&(_?(o=o.add(_),s=A?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),i.track({type:1,doc:u})}return{Ra:o,fa:i,ns:a,mutatedKeys:s}}ga(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,r){let s=this.Ra;this.Ra=t.Ra,this.mutatedKeys=t.mutatedKeys;let o=t.fa.G_();o.sort((u,m)=>function(_,w){let A=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return J()}};return A(_)-A(w)}(u.type,m.type)||this.Aa(u.doc,m.doc)),this.pa(i),r=r!=null&&r;let a=e&&!r?this.ya():[],c=this.da.size===0&&this.current&&!r?1:0,d=c!==this.Ea;return this.Ea=c,o.length!==0||d?{snapshot:new ec(this.query,t.Ra,s,o,t.mutatedKeys,c===0,d,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new wf,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(t){return!this.Ta.has(t)&&!!this.Ra.has(t)&&!this.Ra.get(t).hasLocalMutations}pa(t){t&&(t.addedDocuments.forEach(e=>this.Ta=this.Ta.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Ta=this.Ta.delete(e)),this.current=t.current)}ya(){if(!this.current)return[];let t=this.da;this.da=pt(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});let e=[];return t.forEach(i=>{this.da.has(i)||e.push(new xf(i))}),this.da.forEach(i=>{t.has(i)||e.push(new Ef(i))}),e}ba(t){this.Ta=t.Ts,this.da=pt();let e=this.ma(t.documents);return this.applyChanges(e,!0)}Da(){return ec.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},Ny=class{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}},Oy=class{constructor(t){this.key=t,this.va=!1}},Fy=class{constructor(t,e,i,r,s,o){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new _n(a=>uk(a),su),this.Ma=new Map,this.xa=new Set,this.Oa=new ee(Q.comparator),this.Na=new Map,this.La=new Kd,this.Ba={},this.ka=new Map,this.qa=Xa.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function Hj(n,t,e=!0){return D(this,null,function*(){let i=jf(n),r,s=i.Fa.get(t);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Da()):r=yield aR(i,t,e,!0),r})}function Kj(n,t){return D(this,null,function*(){let e=jf(n);yield aR(e,t,!0,!1)})}function aR(n,t,e,i){return D(this,null,function*(){let r=yield Za(n.localStore,ni(t)),s=r.targetId,o=e?n.sharedClientState.addLocalQueryTarget(s):"not-current",a;return i&&(a=yield x0(n,t,s,o==="current",r.resumeToken)),n.isPrimaryClient&&e&&Vf(n.remoteStore,r),a})}function x0(n,t,e,i,r){return D(this,null,function*(){n.Ka=(m,p,_)=>function(A,x,V,H){return D(this,null,function*(){let j=x.view.ma(V);j.ns&&(j=yield mf(A.localStore,x.query,!1).then(({documents:I})=>x.view.ma(I,j)));let Z=H&&H.targetChanges.get(x.targetId),lt=H&&H.targetMismatches.get(x.targetId)!=null,at=x.view.applyChanges(j,A.isPrimaryClient,Z,lt);return Ly(A,x.targetId,at.wa),at.snapshot})}(n,m,p,_);let s=yield mf(n.localStore,t,!0),o=new Tf(t,s.Ts),a=o.ma(s.documents),c=Gd.createSynthesizedTargetChangeForCurrentChange(e,i&&n.onlineState!=="Offline",r),d=o.applyChanges(a,n.isPrimaryClient,c);Ly(n,e,d.wa);let u=new Ny(t,e,o);return n.Fa.set(t,u),n.Ma.has(e)?n.Ma.get(e).push(t):n.Ma.set(e,[t]),d.snapshot})}function Qj(n,t,e){return D(this,null,function*(){let i=K(n),r=i.Fa.get(t),s=i.Ma.get(r.targetId);if(s.length>1)return i.Ma.set(r.targetId,s.filter(o=>!su(o,t))),void i.Fa.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Ja(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),e&&tc(i.remoteStore,r.targetId),ic(i,r.targetId)}).catch(es))):(ic(i,r.targetId),yield Ja(i.localStore,r.targetId,!0))})}function Yj(n,t){return D(this,null,function*(){let e=K(n),i=e.Fa.get(t),r=e.Ma.get(i.targetId);e.isPrimaryClient&&r.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),tc(e.remoteStore,i.targetId))})}function Xj(n,t,e){return D(this,null,function*(){let i=S0(n);try{let r=yield function(o,a){let c=K(o),d=ce.now(),u=a.reduce((_,w)=>_.add(w.key),pt()),m,p;return c.persistence.runTransaction("Locally write mutations","readwrite",_=>{let w=ui(),A=pt();return c.cs.getEntries(_,u).next(x=>{w=x,w.forEach((V,H)=>{H.isValidDocument()||(A=A.add(V))})}).next(()=>c.localDocuments.getOverlayedDocuments(_,w)).next(x=>{m=x;let V=[];for(let H of a){let j=uj(H,m.get(H.key).overlayedDocument);j!=null&&V.push(new Xi(H.key,j,rk(j.value.mapValue),ue.exists(!0)))}return c.mutationQueue.addMutationBatch(_,d,V,a)}).next(x=>{p=x;let V=x.applyToLocalDocumentSet(m,A);return c.documentOverlayCache.saveOverlays(_,x.batchId,V)})}).then(()=>({batchId:p.batchId,changes:pk(m)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,c){let d=o.Ba[o.currentUser.toKey()];d||(d=new ee(mt)),d=d.insert(a,c),o.Ba[o.currentUser.toKey()]=d}(i,r.batchId,e),yield tr(i,r.changes),yield lc(i.remoteStore)}catch(r){let s=uc(r,"Failed to persist write");e.reject(s)}})}function cR(n,t){return D(this,null,function*(){let e=K(n);try{let i=yield Rj(e.localStore,t);t.targetChanges.forEach((r,s)=>{let o=e.Na.get(s);o&&(nt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.va=!0:r.modifiedDocuments.size>0?nt(o.va):r.removedDocuments.size>0&&(nt(o.va),o.va=!1))}),yield tr(e,i,t)}catch(i){yield es(i)}})}function NS(n,t,e){let i=K(n);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){let r=[];i.Fa.forEach((s,o)=>{let a=o.view.Z_(t);a.snapshot&&r.push(a.snapshot)}),function(o,a){let c=K(o);c.onlineState=a;let d=!1;c.queries.forEach((u,m)=>{for(let p of m.j_)p.Z_(a)&&(d=!0)}),d&&E0(c)}(i.eventManager,t),r.length&&i.Ca.d_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function Zj(n,t,e){return D(this,null,function*(){let i=K(n);i.sharedClientState.updateQueryState(t,"rejected",e);let r=i.Na.get(t),s=r&&r.key;if(s){let o=new ee(Q.comparator);o=o.insert(s,Ee.newNoDocument(s,st.min()));let a=pt().add(s),c=new qd(st.min(),new Map,new ee(mt),o,a);yield cR(i,c),i.Oa=i.Oa.remove(s),i.Na.delete(t),A0(i)}else yield Ja(i.localStore,t,!1).then(()=>ic(i,t,e)).catch(es)})}function Jj(n,t){return D(this,null,function*(){let e=K(n),i=t.batch.batchId;try{let r=yield kj(e.localStore,t);C0(e,i,null),T0(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),yield tr(e,r)}catch(r){yield es(r)}})}function tU(n,t,e){return D(this,null,function*(){let i=K(n);try{let r=yield function(o,a){let c=K(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let u;return c.mutationQueue.lookupMutationBatch(d,a).next(m=>(nt(m!==null),u=m.keys(),c.mutationQueue.removeMutationBatch(d,m))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,u,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,u)).next(()=>c.localDocuments.getDocuments(d,u))})}(i.localStore,t);C0(i,t,e),T0(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),yield tr(i,r)}catch(r){yield es(r)}})}function eU(n,t){return D(this,null,function*(){let e=K(n);ns(e.remoteStore)||L("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let i=yield function(o){let a=K(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(e.localStore);if(i===-1)return void t.resolve();let r=e.ka.get(i)||[];r.push(t),e.ka.set(i,r)}catch(i){let r=uc(i,"Initialization of waitForPendingWrites() operation failed");t.reject(r)}})}function T0(n,t){(n.ka.get(t)||[]).forEach(e=>{e.resolve()}),n.ka.delete(t)}function C0(n,t,e){let i=K(n),r=i.Ba[i.currentUser.toKey()];if(r){let s=r.get(t);s&&(e?s.reject(e):s.resolve(),r=r.remove(t)),i.Ba[i.currentUser.toKey()]=r}}function ic(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(let i of n.Ma.get(t))n.Fa.delete(i),e&&n.Ca.$a(i,e);n.Ma.delete(t),n.isPrimaryClient&&n.La.gr(t).forEach(i=>{n.La.containsKey(i)||lR(n,i)})}function lR(n,t){n.xa.delete(t.path.canonicalString());let e=n.Oa.get(t);e!==null&&(tc(n.remoteStore,e),n.Oa=n.Oa.remove(t),n.Na.delete(e),A0(n))}function Ly(n,t,e){for(let i of e)i instanceof Ef?(n.La.addReference(i.key,t),iU(n,i)):i instanceof xf?(L("SyncEngine","Document no longer in limbo: "+i.key),n.La.removeReference(i.key,t),n.La.containsKey(i.key)||lR(n,i.key)):J()}function iU(n,t){let e=t.key,i=e.path.canonicalString();n.Oa.get(e)||n.xa.has(i)||(L("SyncEngine","New document in limbo: "+e),n.xa.add(i),A0(n))}function A0(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let t=n.xa.values().next().value;n.xa.delete(t);let e=new Q(Dt.fromString(t)),i=n.qa.next();n.Na.set(i,new Oy(e)),n.Oa=n.Oa.insert(e,i),Vf(n.remoteStore,new Ya(ni(ac(e.path)),i,"TargetPurposeLimboResolution",wi.oe))}}function tr(n,t,e){return D(this,null,function*(){let i=K(n),r=[],s=[],o=[];i.Fa.isEmpty()||(i.Fa.forEach((a,c)=>{o.push(i.Ka(c,t,e).then(d=>{var u;if((d||e)&&i.isPrimaryClient){let m=d?!d.fromCache:(u=e?.targetChanges.get(c.targetId))===null||u===void 0?void 0:u.current;i.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(d){r.push(d);let m=py.Wi(c.targetId,d);s.push(m)}}))}),yield Promise.all(o),i.Ca.d_(r),yield function(c,d){return D(this,null,function*(){let u=K(c);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>R.forEach(d,p=>R.forEach(p.$i,_=>u.persistence.referenceDelegate.addReference(m,p.targetId,_)).next(()=>R.forEach(p.Ui,_=>u.persistence.referenceDelegate.removeReference(m,p.targetId,_)))))}catch(m){if(!is(m))throw m;L("LocalStore","Failed to update sequence numbers: "+m)}for(let m of d){let p=m.targetId;if(!m.fromCache){let _=u.os.get(p),w=_.snapshotVersion,A=_.withLastLimboFreeSnapshotVersion(w);u.os=u.os.insert(p,A)}}})}(i.localStore,s))})}function nU(n,t){return D(this,null,function*(){let e=K(n);if(!e.currentUser.isEqual(t)){L("SyncEngine","User change. New user:",t.toKey());let i=yield Kk(e.localStore,t);e.currentUser=t,function(s,o){s.ka.forEach(a=>{a.forEach(c=>{c.reject(new O(P.CANCELLED,o))})}),s.ka.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield tr(e,i.hs)}})}function rU(n,t){let e=K(n),i=e.Na.get(t);if(i&&i.va)return pt().add(i.key);{let r=pt(),s=e.Ma.get(t);if(!s)return r;for(let o of s){let a=e.Fa.get(o);r=r.unionWith(a.view.Va)}return r}}function sU(n,t){return D(this,null,function*(){let e=K(n),i=yield mf(e.localStore,t.query,!0),r=t.view.ba(i);return e.isPrimaryClient&&Ly(e,t.targetId,r.wa),r})}function oU(n,t){return D(this,null,function*(){let e=K(n);return Zk(e.localStore,t).then(i=>tr(e,i))})}function aU(n,t,e,i){return D(this,null,function*(){let r=K(n),s=yield function(a,c){let d=K(a),u=K(d.mutationQueue);return d.persistence.runTransaction("Lookup mutation documents","readonly",m=>u.Mn(m,c).next(p=>p?d.localDocuments.getDocuments(m,p):R.resolve(null)))}(r.localStore,t);s!==null?(e==="pending"?yield lc(r.remoteStore):e==="acknowledged"||e==="rejected"?(C0(r,t,i||null),T0(r,t),function(a,c){K(K(a).mutationQueue).On(c)}(r.localStore,t)):J(),yield tr(r,s)):L("SyncEngine","Cannot apply mutation batch with id: "+t)})}function cU(n,t){return D(this,null,function*(){let e=K(n);if(jf(e),S0(e),t===!0&&e.Qa!==!0){let i=e.sharedClientState.getAllActiveQueryTargets(),r=yield OS(e,i.toArray());e.Qa=!0,yield Ay(e.remoteStore,!0);for(let s of r)Vf(e.remoteStore,s)}else if(t===!1&&e.Qa!==!1){let i=[],r=Promise.resolve();e.Ma.forEach((s,o)=>{e.sharedClientState.isLocalQueryTarget(o)?i.push(o):r=r.then(()=>(ic(e,o),Ja(e.localStore,o,!0))),tc(e.remoteStore,o)}),yield r,yield OS(e,i),function(o){let a=K(o);a.Na.forEach((c,d)=>{tc(a.remoteStore,d)}),a.La.pr(),a.Na=new Map,a.Oa=new ee(Q.comparator)}(e),e.Qa=!1,yield Ay(e.remoteStore,!1)}})}function OS(n,t,e){return D(this,null,function*(){let i=K(n),r=[],s=[];for(let o of t){let a,c=i.Ma.get(o);if(c&&c.length!==0){a=yield Za(i.localStore,ni(c[0]));for(let d of c){let u=i.Fa.get(d),m=yield sU(i,u);m.snapshot&&s.push(m.snapshot)}}else{let d=yield Xk(i.localStore,o);a=yield Za(i.localStore,d),yield x0(i,dR(d),o,!1,a.resumeToken)}r.push(a)}return i.Ca.d_(s),r})}function dR(n){return dk(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function lU(n){return function(e){return K(K(e).persistence).Qi()}(K(n).localStore)}function dU(n,t,e,i){return D(this,null,function*(){let r=K(n);if(r.Qa)return void L("SyncEngine","Ignoring unexpected query state notification.");let s=r.Ma.get(t);if(s&&s.length>0)switch(e){case"current":case"not-current":{let o=yield Zk(r.localStore,hk(s[0])),a=qd.createSynthesizedRemoteEventForCurrentChange(t,e==="current",_e.EMPTY_BYTE_STRING);yield tr(r,o,a);break}case"rejected":yield Ja(r.localStore,t,!0),ic(r,t,i);break;default:J()}})}function uU(n,t,e){return D(this,null,function*(){let i=jf(n);if(i.Qa){for(let r of t){if(i.Ma.has(r)&&i.sharedClientState.isActiveQueryTarget(r)){L("SyncEngine","Adding an already active target "+r);continue}let s=yield Xk(i.localStore,r),o=yield Za(i.localStore,s);yield x0(i,dR(s),o.targetId,!1,o.resumeToken),Vf(i.remoteStore,o)}for(let r of e)i.Ma.has(r)&&(yield Ja(i.localStore,r,!1).then(()=>{tc(i.remoteStore,r),ic(i,r)}).catch(es))}})}function jf(n){let t=K(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=cR.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=rU.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Zj.bind(null,t),t.Ca.d_=$j.bind(null,t.eventManager),t.Ca.$a=Wj.bind(null,t.eventManager),t}function S0(n){let t=K(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Jj.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=tU.bind(null,t),t}function hU(n,t,e){let i=K(n);(function(s,o,a){return D(this,null,function*(){try{let c=yield o.getMetadata();if(yield function(_,w){let A=K(_),x=ge(w.createTime);return A.persistence.runTransaction("hasNewerBundle","readonly",V=>A.Gr.getBundleMetadata(V,w.id)).then(V=>!!V&&V.createTime.compareTo(x)>=0)}(s.localStore,c))return yield o.close(),a._completeWith(function(_){return{taskState:"Success",documentsLoaded:_.totalDocuments,bytesLoaded:_.totalBytes,totalDocuments:_.totalDocuments,totalBytes:_.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(oR(c));let d=new My(c,s.localStore,o.serializer),u=yield o.Ua();for(;u;){let p=yield d.la(u);p&&a._updateProgress(p),u=yield o.Ua()}let m=yield d.complete();return yield tr(s,m.Ia,void 0),yield function(_,w){let A=K(_);return A.persistence.runTransaction("Save bundle","readwrite",x=>A.Gr.saveBundleMetadata(x,w))}(s.localStore,c),a._completeWith(m.progress),Promise.resolve(m.Pa)}catch(c){return Ni("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(i,t,e).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}var Zd=class{constructor(){this.synchronizeTabs=!1}initialize(t){return D(this,null,function*(){this.serializer=au(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),yield this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)})}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return Hk(this.persistence,new hf,t.initialUser,this.serializer)}createPersistence(t){return new df(uf.Zr,this.serializer)}createSharedClientState(t){return new gf}terminate(){return D(this,null,function*(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Cf=class n extends Zd{constructor(t,e,i){super(),this.Wa=t,this.cacheSizeBytes=e,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(t){return D(this,null,function*(){yield Og(n.prototype,this,"initialize").call(this,t),yield this.Wa.initialize(this,t),yield S0(this.Wa.syncEngine),yield lc(this.Wa.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(t){return Hk(this.persistence,new hf,t.initialUser,this.serializer)}createGarbageCollectionScheduler(t,e){let i=this.persistence.referenceDelegate.garbageCollector;return new Jb(i,t.asyncQueue,e)}createIndexBackfillerScheduler(t,e){let i=new gb(e,this.persistence);return new pb(t.asyncQueue,i)}createPersistence(t){let e=_0(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?Mi.withCacheSize(this.cacheSizeBytes):Mi.DEFAULT;return new fy(this.synchronizeTabs,e,t.clientId,i,t.asyncQueue,tR(),Lm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(t){return new gf}},Vy=class n extends Cf{constructor(t,e){super(t,e,!1),this.Wa=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){return D(this,null,function*(){yield Og(n.prototype,this,"initialize").call(this,t);let e=this.Wa.syncEngine;this.sharedClientState instanceof Md&&(this.sharedClientState.syncEngine={no:aU.bind(null,e),ro:dU.bind(null,e),io:uU.bind(null,e),Qi:lU.bind(null,e),eo:oU.bind(null,e)},yield this.sharedClientState.start()),yield this.persistence.yi(i=>D(this,null,function*(){yield cU(this.Wa.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(t){let e=tR();if(!Md.D(e))throw new O(P.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let i=_0(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Md(e,t.asyncQueue,i,t.clientId,t.initialUser)}},Jd=class{initialize(t,e){return D(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>NS(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=nU.bind(null,this.syncEngine),yield Ay(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Ry}()}createDatastore(t){let e=au(t.databaseInfo.databaseId),i=function(s){return new wy(s)}(t.databaseInfo);return function(s,o,a,c){return new xy(s,o,a,c)}(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return function(i,r,s,o,a){return new Cy(i,r,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,e=>NS(this.syncEngine,e,0),function(){return _f.D()?new _f:new by}())}createSyncEngine(t,e){return function(r,s,o,a,c,d,u){let m=new Fy(r,s,o,a,c,d);return u&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return D(this,null,function*(){var t,e;yield function(r){return D(this,null,function*(){let s=K(r);L("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield cc(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()})}};function FS(n,t=10240){let e=0;return{read(){return D(this,null,function*(){if(e<n.byteLength){let r={value:n.slice(e,e+t),done:!1};return e+=t,r}return{done:!0}})},cancel(){return D(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var nc=class{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ga(this.observer.next,t)}error(t){this.observer.error?this.Ga(this.observer.error,t):fe("Uncaught Error in snapshot listener:",t.toString())}za(){this.muted=!0}Ga(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}};var jy=class{constructor(t,e){this.ja=t,this.serializer=e,this.metadata=new Ie,this.buffer=new Uint8Array,this.Ha=function(){return new TextDecoder("utf-8")}(),this.Ja().then(i=>{i&&i.ua()?this.metadata.resolve(i.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i?.aa)}`))},i=>this.metadata.reject(i))}close(){return this.ja.cancel()}getMetadata(){return D(this,null,function*(){return this.metadata.promise})}Ua(){return D(this,null,function*(){return yield this.getMetadata(),this.Ja()})}Ja(){return D(this,null,function*(){let t=yield this.Ya();if(t===null)return null;let e=this.Ha.decode(t),i=Number(e);isNaN(i)&&this.Za(`length string (${e}) is not valid number`);let r=yield this.Xa(i);return new Py(JSON.parse(r),t.length+i)})}eu(){return this.buffer.findIndex(t=>t===123)}Ya(){return D(this,null,function*(){for(;this.eu()<0&&!(yield this.tu()););if(this.buffer.length===0)return null;let t=this.eu();t<0&&this.Za("Reached the end of bundle when a length string is expected.");let e=this.buffer.slice(0,t);return this.buffer=this.buffer.slice(t),e})}Xa(t){return D(this,null,function*(){for(;this.buffer.length<t;)(yield this.tu())&&this.Za("Reached the end of bundle when more is expected.");let e=this.Ha.decode(this.buffer.slice(0,t));return this.buffer=this.buffer.slice(t),e})}Za(t){throw this.ja.cancel(),new Error(`Invalid bundle format: ${t}`)}tu(){return D(this,null,function*(){let t=yield this.ja.read();if(!t.done){let e=new Uint8Array(this.buffer.length+t.value.length);e.set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e}return t.done})}};var Uy=class{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(t){return D(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new O(P.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let e=yield function(r,s){return D(this,null,function*(){let o=K(r),a={documents:s.map(m=>$d(o.serializer,m))},c=yield o.Lo("BatchGetDocuments",o.serializer.databaseId,Dt.emptyPath(),a,s.length),d=new Map;c.forEach(m=>{let p=_j(o.serializer,m);d.set(p.key.toString(),p)});let u=[];return s.forEach(m=>{let p=d.get(m.toString());nt(!!p),u.push(p)}),u})}(this.datastore,t);return e.forEach(i=>this.recordVersion(i)),e})}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new Jr(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){return D(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let t=this.readVersions;this.mutations.forEach(e=>{t.delete(e.key.toString())}),t.forEach((e,i)=>{let r=Q.fromPath(i);this.mutations.push(new Ud(r,this.precondition(r)))}),yield function(i,r){return D(this,null,function*(){let s=K(i),o={writes:r.map(a=>Wd(s.serializer,a))};yield s.Mo("Commit",s.serializer.databaseId,Dt.emptyPath(),o)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw J();e=st.min()}let i=this.readVersions.get(t.key.toString());if(i){if(!e.isEqual(i))throw new O(P.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){let e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?e.isEqual(st.min())?ue.exists(!1):ue.updateTime(e):ue.none()}preconditionForUpdate(t){let e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(st.min()))throw new O(P.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ue.updateTime(e)}return ue.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}};var By=class{constructor(t,e,i,r,s){this.asyncQueue=t,this.datastore=e,this.options=i,this.updateFunction=r,this.deferred=s,this.nu=i.maxAttempts,this.t_=new Yd(this.asyncQueue,"transaction_retry")}ru(){this.nu-=1,this.iu()}iu(){this.t_.Go(()=>D(this,null,function*(){let t=new Uy(this.datastore),e=this.su(t);e&&e.then(i=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.ou(r)}))}).catch(i=>{this.ou(i)})}))}su(t){try{let e=this.updateFunction(t);return!nu(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}ou(t){this.nu>0&&this._u(t)?(this.nu-=1,this.asyncQueue.enqueueAndForget(()=>(this.iu(),Promise.resolve()))):this.deferred.reject(t)}_u(t){if(t.name==="FirebaseError"){let e=t.code;return e==="aborted"||e==="failed-precondition"||e==="already-exists"||!Tk(e)}return!1}};var zy=class{constructor(t,e,i,r){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=we.UNAUTHENTICATED,this.clientId=Um.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,s=>D(this,null,function*(){L("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(i,s=>(L("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new O(P.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let t=new Ie;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>D(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){let i=uc(e,"Failed to shutdown persistence");t.reject(i)}})),t.promise}};function Vm(n,t){return D(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),L("FirestoreClient","Initializing OfflineComponentProvider");let e=n.configuration;yield t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(r=>D(this,null,function*(){i.isEqual(r)||(yield Kk(t.localStore,r),i=r)})),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t})}function qy(n,t){return D(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let e=yield k0(n);L("FirestoreClient","Initializing OnlineComponentProvider"),yield t.initialize(e,n.configuration),n.setCredentialChangeListener(i=>DS(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>DS(t.remoteStore,r)),n._onlineComponents=t})}function uR(n){return n.name==="FirebaseError"?n.code===P.FAILED_PRECONDITION||n.code===P.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}function k0(n){return D(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){L("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Vm(n,n._uninitializedComponentsProvider._offline)}catch(t){let e=t;if(!uR(e))throw e;Ni("Error using user provided cache. Falling back to memory cache: "+e),yield Vm(n,new Zd)}}else L("FirestoreClient","Using default OfflineComponentProvider"),yield Vm(n,new Zd);return n._offlineComponents})}function Uf(n){return D(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(L("FirestoreClient","Using user provided OnlineComponentProvider"),yield qy(n,n._uninitializedComponentsProvider._online)):(L("FirestoreClient","Using default OnlineComponentProvider"),yield qy(n,new Jd))),n._onlineComponents})}function hR(n){return k0(n).then(t=>t.persistence)}function R0(n){return k0(n).then(t=>t.localStore)}function mR(n){return Uf(n).then(t=>t.remoteStore)}function D0(n){return Uf(n).then(t=>t.syncEngine)}function mU(n){return Uf(n).then(t=>t.datastore)}function rc(n){return D(this,null,function*(){let t=yield Uf(n),e=t.eventManager;return e.onListen=Hj.bind(null,t.syncEngine),e.onUnlisten=Qj.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=Kj.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=Yj.bind(null,t.syncEngine),e})}function fU(n){return n.asyncQueue.enqueue(()=>D(this,null,function*(){let t=yield hR(n),e=yield mR(n);return t.setNetworkEnabled(!0),function(r){let s=K(r);return s.L_.delete(0),cu(s)}(e)}))}function pU(n){return n.asyncQueue.enqueue(()=>D(this,null,function*(){let t=yield hR(n),e=yield mR(n);return t.setNetworkEnabled(!1),function(r){return D(this,null,function*(){let s=K(r);s.L_.add(0),yield cc(s),s.q_.set("Offline")})}(e)}))}function gU(n,t){let e=new Ie;return n.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){return function(r,s,o){return D(this,null,function*(){try{let a=yield function(d,u){let m=K(d);return m.persistence.runTransaction("read document","readonly",p=>m.localDocuments.getDocument(p,u))}(r,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new O(P.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=uc(a,`Failed to get document '${s} from cache`);o.reject(c)}})}(yield R0(n),t,e)})),e.promise}function fR(n,t,e={}){let i=new Ie;return n.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){return function(s,o,a,c,d){let u=new nc({next:p=>{o.enqueueAndForget(()=>I0(s,m));let _=p.docs.has(a);!_&&p.fromCache?d.reject(new O(P.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&p.fromCache&&c&&c.source==="server"?d.reject(new O(P.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(p)},error:p=>d.reject(p)}),m=new Xd(ac(a.path),u,{includeMetadataChanges:!0,_a:!0});return w0(s,m)}(yield rc(n),n.asyncQueue,t,e,i)})),i.promise}function _U(n,t){let e=new Ie;return n.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){return function(r,s,o){return D(this,null,function*(){try{let a=yield mf(r,s,!0),c=new Tf(s,a.Ts),d=c.ma(a.documents),u=c.applyChanges(d,!1);o.resolve(u.snapshot)}catch(a){let c=uc(a,`Failed to execute query '${s} against cache`);o.reject(c)}})}(yield R0(n),t,e)})),e.promise}function pR(n,t,e={}){let i=new Ie;return n.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){return function(s,o,a,c,d){let u=new nc({next:p=>{o.enqueueAndForget(()=>I0(s,m)),p.fromCache&&c.source==="server"?d.reject(new O(P.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(p)},error:p=>d.reject(p)}),m=new Xd(a,u,{includeMetadataChanges:!0,_a:!0});return w0(s,m)}(yield rc(n),n.asyncQueue,t,e,i)})),i.promise}function vU(n,t){let e=new nc(t);return n.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){return function(r,s){K(r).Y_.add(s),s.next()}(yield rc(n),e)})),()=>{e.za(),n.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){return function(r,s){K(r).Y_.delete(s)}(yield rc(n),e)}))}}function bU(n,t,e,i){let r=function(o,a){let c;return c=typeof o=="string"?Ak().encode(o):o,function(u,m){return new jy(u,m)}(function(u,m){if(u instanceof Uint8Array)return FS(u,m);if(u instanceof ArrayBuffer)return FS(new Uint8Array(u),m);if(u instanceof ReadableStream)return u.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(e,au(t));n.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){hU(yield D0(n),r,i)}))}function yU(n,t){return n.asyncQueue.enqueue(()=>D(this,null,function*(){return function(i,r){let s=K(i);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,r))}(yield R0(n),t)}))}function gR(n){let t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}var LS=new Map;function P0(n,t,e){if(!e)throw new O(P.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function M0(n,t,e,i){if(t===!0&&i===!0)throw new O(P.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function VS(n){if(!Q.isDocumentKey(n))throw new O(P.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function jS(n){if(Q.isDocumentKey(n))throw new O(P.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Bf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let t=function(i){return i.constructor?i.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":J()}function Pt(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new O(P.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let e=Bf(n);throw new O(P.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function _R(n,t){if(t<=0)throw new O(P.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}var Af=class{constructor(t){var e,i;if(t.host===void 0){if(t.ssl!==void 0)throw new O(P.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(e=t.ssl)===null||e===void 0||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new O(P.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}M0("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gR((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new O(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new O(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new O(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}},Js=class{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Af({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new O(P.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new O(P.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Af(t),t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new sb;switch(i.type){case"firstParty":return new lb(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new O(P.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let i=LS.get(e);i&&(L("ComponentProvider","Removing Datastore"),LS.delete(e),i.terminate())}(this),Promise.resolve()}};function vR(n,t,e,i={}){var r;let s=(n=Pt(n,Js))._getSettings(),o=`${t}:${e}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Ni("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,c;if(typeof i.mockUserToken=="string")a=i.mockUserToken,c=we.MOCK_USER;else{a=Eh(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);let d=i.mockUserToken.sub||i.mockUserToken.user_id;if(!d)throw new O(P.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new we(d)}n._authCredentials=new ob(new jm(a,c))}}var Ve=class n{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new n(this.firestore,t,this._query)}},Kt=class n{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fn(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new n(this.firestore,t,this._key)}},fn=class n extends Ve{constructor(t,e,i){super(t,e,ac(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let t=this._path.popLast();return t.isEmpty()?null:new Kt(this.firestore,null,new Q(t))}withConverter(t){return new n(this.firestore,t,this._path)}};function N0(n,t,...e){if(n=Tt(n),P0("collection","path",t),n instanceof Js){let i=Dt.fromString(t,...e);return jS(i),new fn(n,null,i)}{if(!(n instanceof Kt||n instanceof fn))throw new O(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(Dt.fromString(t,...e));return jS(i),new fn(n.firestore,null,i)}}function bR(n,t){if(n=Pt(n,Js),P0("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new O(P.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ve(n,null,function(i){return new Yi(Dt.emptyPath(),i)}(t))}function lu(n,t,...e){if(n=Tt(n),arguments.length===1&&(t=Um.newId()),P0("doc","path",t),n instanceof Js){let i=Dt.fromString(t,...e);return VS(i),new Kt(n,null,new Q(i))}{if(!(n instanceof Kt||n instanceof fn))throw new O(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(Dt.fromString(t,...e));return VS(i),new Kt(n.firestore,n instanceof fn?n.converter:null,new Q(i))}}function O0(n,t){return n=Tt(n),t=Tt(t),(n instanceof Kt||n instanceof fn)&&(t instanceof Kt||t instanceof fn)&&n.firestore===t.firestore&&n.path===t.path&&n.converter===t.converter}function F0(n,t){return n=Tt(n),t=Tt(t),n instanceof Ve&&t instanceof Ve&&n.firestore===t.firestore&&su(n._query,t._query)&&n.converter===t.converter}var Gy=class{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new Yd(this,"async_queue_retry"),this.Eu=()=>{let e=Lm();e&&L("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()};let t=Lm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.du(),this.Au(t)}enterRestrictedMode(t){if(!this.cu){this.cu=!0,this.Iu=t||!1;let e=Lm();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.Eu)}}enqueue(t){if(this.du(),this.cu)return new Promise(()=>{});let e=new Ie;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.uu.push(t),this.Ru()))}Ru(){return D(this,null,function*(){if(this.uu.length!==0){try{yield this.uu[0](),this.uu.shift(),this.t_.reset()}catch(t){if(!is(t))throw t;L("AsyncQueue","Operation failed with retryable error: "+t)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}})}Au(t){let e=this.au.then(()=>(this.Pu=!0,t().catch(i=>{this.hu=i,this.Pu=!1;let r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw fe("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.Pu=!1,i))));return this.au=e,e}enqueueAfterDelay(t,e,i){this.du(),this.Tu.indexOf(t)>-1&&(e=0);let r=Sy.createAndSchedule(this,t,e,i,s=>this.Vu(s));return this.lu.push(r),r}du(){this.hu&&J()}verifyOperationInProgress(){}mu(){return D(this,null,function*(){let t;do t=this.au,yield t;while(t!==this.au)})}fu(t){for(let e of this.lu)if(e.timerId===t)return!0;return!1}gu(t){return this.mu().then(()=>{this.lu.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(let e of this.lu)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.mu()})}pu(t){this.Tu.push(t)}Vu(t){let e=this.lu.indexOf(t);this.lu.splice(e,1)}};function $y(n){return function(e,i){if(typeof e!="object"||e===null)return!1;let r=e;for(let s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(n,["next","error","complete"])}var Wy=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ie,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,i){this._progressObserver={next:t,error:e,complete:i}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}};var yR=-1,re=class extends Js{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=function(){return new Gy}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||wR(this),this._firestoreClient.terminate()}};function Ae(n){return n._firestoreClient||wR(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function wR(n){var t,e,i;let r=n._freezeSettings(),s=function(a,c,d,u){return new _b(a,c,d,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,gR(u.experimentalLongPollingOptions),u.useFetchStreams)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,r);n._firestoreClient=new zy(n._authCredentials,n._appCheckCredentials,n._queue,s),!((e=r.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}function IR(n,t){DR(n=Pt(n,re));let e=Ae(n);if(e._uninitializedComponentsProvider)throw new O(P.FAILED_PRECONDITION,"SDK cache is already specified.");Ni("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let i=n._freezeSettings(),r=new Jd;return xR(e,r,new Cf(r,i.cacheSizeBytes,t?.forceOwnership))}function ER(n){DR(n=Pt(n,re));let t=Ae(n);if(t._uninitializedComponentsProvider)throw new O(P.FAILED_PRECONDITION,"SDK cache is already specified.");Ni("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings(),i=new Jd;return xR(t,i,new Vy(i,e.cacheSizeBytes))}function xR(n,t,e){let i=new Ie;return n.asyncQueue.enqueue(()=>D(this,null,function*(){try{yield Vm(n,e),yield qy(n,t),i.resolve()}catch(r){let s=r;if(!uR(s))throw s;Ni("Error enabling indexeddb cache. Falling back to memory cache: "+s),i.reject(s)}})).then(()=>i.promise)}function TR(n){if(n._initialized&&!n._terminated)throw new O(P.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let t=new Ie;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>D(this,null,function*(){try{yield function(i){return D(this,null,function*(){if(!Wr.D())return Promise.resolve();let r=i+"main";yield Wr.delete(r)})}(_0(n._databaseId,n._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}function CR(n){return function(e){let i=new Ie;return e.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){return eU(yield D0(e),i)})),i.promise}(Ae(n=Pt(n,re)))}function AR(n){return fU(Ae(n=Pt(n,re)))}function SR(n){return pU(Ae(n=Pt(n,re)))}function kR(n,t){let e=Ae(n=Pt(n,re)),i=new Wy;return bU(e,n._databaseId,t,i),i}function RR(n,t){return yU(Ae(n=Pt(n,re)),t).then(e=>e?new Ve(n,null,e.query):null)}function DR(n){if(n._initialized||n._terminated)throw new O(P.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var vn=class n{constructor(t){this._byteString=t}static fromBase64String(t){try{return new n(_e.fromBase64String(t))}catch(e){throw new O(P.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new n(_e.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}};var Zi=class{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new O(P.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pe(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}};var Zn=class{constructor(t){this._methodName=t}};var to=class{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new O(P.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new O(P.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return mt(this._lat,t._lat)||mt(this._long,t._long)}};var tu=class{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,t._values)}};var wU=/^__.*__$/,Hy=class{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new Xi(t,this.data,this.fieldMask,e,this.fieldTransforms):new Zr(t,this.data,e,this.fieldTransforms)}},Sf=class{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new Xi(t,this.data,this.fieldMask,e,this.fieldTransforms)}};function PR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw J()}}var kf=class n{constructor(t,e,i,r,s,o){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.yu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(t){return new n(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(t){var e;let i=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.Su({path:i,Du:!1});return r.vu(t),r}Cu(t){var e;let i=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.Su({path:i,Du:!1});return r.yu(),r}Fu(t){return this.Su({path:void 0,Du:!0})}Mu(t){return Rf(t,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}yu(){if(this.path)for(let t=0;t<this.path.length;t++)this.vu(this.path.get(t))}vu(t){if(t.length===0)throw this.Mu("Document fields must not be empty");if(PR(this.wu)&&wU.test(t))throw this.Mu('Document fields cannot begin and end with "__"')}},Ky=class{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||au(t)}Nu(t,e,i,r=!1){return new kf({wu:t,methodName:e,Ou:i,path:pe.emptyPath(),Du:!1,xu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function ro(n){let t=n._freezeSettings(),e=au(n._databaseId);return new Ky(n._databaseId,!!t.ignoreUndefinedProperties,e)}function zf(n,t,e,i,r,s={}){let o=n.Nu(s.merge||s.mergeFields?2:0,t,e,r);j0("Data must be an object, but it was:",o,i);let a=OR(i,o),c,d;if(s.merge)c=new Ii(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){let u=[];for(let m of s.mergeFields){let p=Jy(t,m,e);if(!o.contains(p))throw new O(P.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);LR(u,p)||u.push(p)}c=new Ii(u),d=o.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,d=o.fieldTransforms;return new Hy(new Qe(a),c,d)}var eu=class n extends Zn{_toFieldTransform(t){if(t.wu!==2)throw t.wu===1?t.Mu(`${this._methodName}() can only appear at the top level of your update data`):t.Mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof n}};function MR(n,t,e){return new kf({wu:3,Ou:t.settings.Ou,methodName:n._methodName,Du:e},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var Qy=class n extends Zn{_toFieldTransform(t){return new Ys(t.path,new Yr)}isEqual(t){return t instanceof n}},Yy=class n extends Zn{constructor(t,e){super(t),this.Lu=e}_toFieldTransform(t){let e=MR(this,t,!0),i=this.Lu.map(s=>so(s,e)),r=new Yn(i);return new Ys(t.path,r)}isEqual(t){return t instanceof n&&r_(this.Lu,t.Lu)}},Xy=class n extends Zn{constructor(t,e){super(t),this.Lu=e}_toFieldTransform(t){let e=MR(this,t,!0),i=this.Lu.map(s=>so(s,e)),r=new Xn(i);return new Ys(t.path,r)}isEqual(t){return t instanceof n&&r_(this.Lu,t.Lu)}},Zy=class n extends Zn{constructor(t,e){super(t),this.Bu=e}_toFieldTransform(t){let e=new Xr(t.serializer,vk(t.serializer,this.Bu));return new Ys(t.path,e)}isEqual(t){return t instanceof n&&this.Bu===t.Bu}};function L0(n,t,e,i){let r=n.Nu(1,t,e);j0("Data must be an object, but it was:",r,i);let s=[],o=Qe.empty();no(i,(c,d)=>{let u=U0(t,c,e);d=Tt(d);let m=r.Cu(u);if(d instanceof eu)s.push(u);else{let p=so(d,m);p!=null&&(s.push(u),o.set(u,p))}});let a=new Ii(s);return new Sf(o,a,r.fieldTransforms)}function V0(n,t,e,i,r,s){let o=n.Nu(1,t,e),a=[Jy(t,i,e)],c=[r];if(s.length%2!=0)throw new O(P.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(Jy(t,s[p])),c.push(s[p+1]);let d=[],u=Qe.empty();for(let p=a.length-1;p>=0;--p)if(!LR(d,a[p])){let _=a[p],w=c[p];w=Tt(w);let A=o.Cu(_);if(w instanceof eu)d.push(_);else{let x=so(w,A);x!=null&&(d.push(_),u.set(_,x))}}let m=new Ii(d);return new Sf(u,m,o.fieldTransforms)}function NR(n,t,e,i=!1){return so(e,n.Nu(i?4:3,t))}function so(n,t){if(FR(n=Tt(n)))return j0("Unsupported field value:",t,n),OR(n,t);if(n instanceof Zn)return function(i,r){if(!PR(r.wu))throw r.Mu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Mu(`${i._methodName}() is not currently supported inside arrays`);let s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.Du&&t.wu!==4)throw t.Mu("Nested arrays are not supported");return function(i,r){let s=[],o=0;for(let a of i){let c=so(a,r.Fu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(n,t)}return function(i,r){if((i=Tt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return vk(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let s=ce.fromDate(i);return{timestampValue:Qa(r.serializer,s)}}if(i instanceof ce){let s=new ce(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Qa(r.serializer,s)}}if(i instanceof to)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof vn)return{bytesValue:Sk(r.serializer,i._byteString)};if(i instanceof Kt){let s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:f0(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof tu)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Mu("VectorValues must only contain numeric values.");return m0(a.serializer,c)})}}}}}}(i,r);throw r.Mu(`Unsupported field value: ${Bf(i)}`)}(n,t)}function OR(n,t){let e={};return tk(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):no(n,(i,r)=>{let s=so(r,t.bu(i));s!=null&&(e[i]=s)}),{mapValue:{fields:e}}}function FR(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ce||n instanceof to||n instanceof vn||n instanceof Kt||n instanceof Zn||n instanceof tu)}function j0(n,t,e){if(!FR(e)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(e)){let i=Bf(e);throw i==="an object"?t.Mu(n+" a custom object"):t.Mu(n+" "+i)}}function Jy(n,t,e){if((t=Tt(t))instanceof Zi)return t._internalPath;if(typeof t=="string")return U0(n,t);throw Rf("Field path arguments must be of type string or ",n,!1,void 0,e)}var IU=new RegExp("[~\\*/\\[\\]]");function U0(n,t,e){if(t.search(IU)>=0)throw Rf(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new Zi(...t.split("."))._internalPath}catch{throw Rf(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function Rf(n,t,e,i,r){let s=i&&!i.isEmpty(),o=r!==void 0,a=`Function ${t}() called with invalid data`;e&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${i}`),o&&(c+=` in document ${r}`),c+=")"),new O(P.INVALID_ARGUMENT,a+n+c)}function LR(n,t){return n.some(e=>e.isEqual(t))}var eo=class{constructor(t,e,i,r,s){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let t=new t0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){let e=this._document.data.field(qf("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}},t0=class extends eo{data(){return super.data()}};function qf(n,t){return typeof t=="string"?U0(n,t):t instanceof Zi?t._internalPath:t._delegate._internalPath}function VR(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new O(P.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var iu=class{},io=class extends iu{};function er(n,t,...e){let i=[];t instanceof iu&&i.push(t),i=i.concat(e),function(s){let o=s.filter(c=>c instanceof e0).length,a=s.filter(c=>c instanceof Df).length;if(o>1||o>0&&a>0)throw new O(P.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)n=r._apply(n);return n}var Df=class n extends io{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new n(t,e,i)}_apply(t){let e=this._parse(t);return KR(t._query,e),new Ve(t.firestore,t.converter,Rb(t._query,e))}_parse(t){let e=ro(t.firestore);return function(s,o,a,c,d,u,m){let p;if(d.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new O(P.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){BS(m,u);let _=[];for(let w of m)_.push(US(c,s,w));p={arrayValue:{values:_}}}else p=US(c,s,m)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||BS(m,u),p=NR(a,o,m,u==="in"||u==="not-in");return At.create(d,u,p)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}};function jR(n,t,e){let i=t,r=qf("where",n);return Df._create(r,i,e)}var e0=class n extends iu{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new n(t,e)}_parse(t){let e=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return e.length===1?e[0]:zt.create(e,this._getOperator())}_apply(t){let e=this._parse(t);return e.getFilters().length===0?t:(function(r,s){let o=r,a=s.getFlattenedFilters();for(let c of a)KR(o,c),o=Rb(o,c)}(t._query,e),new Ve(t.firestore,t.converter,Rb(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var i0=class n extends io{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new n(t,e)}_apply(t){let e=function(r,s,o){if(r.startAt!==null)throw new O(P.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new O(P.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ks(s,o)}(t._query,this._field,this._direction);return new Ve(t.firestore,t.converter,function(r,s){let o=r.explicitOrderBy.concat([s]);return new Yi(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(t._query,e))}};function UR(n,t="asc"){let e=t,i=qf("orderBy",n);return i0._create(i,e)}var Pf=class n extends io{constructor(t,e,i){super(),this.type=t,this._limit=e,this._limitType=i}static _create(t,e,i){return new n(t,e,i)}_apply(t){return new Ve(t.firestore,t.converter,Ym(t._query,this._limit,this._limitType))}};function BR(n){return _R("limit",n),Pf._create("limit",n,"F")}function zR(n){return _R("limitToLast",n),Pf._create("limitToLast",n,"L")}var Mf=class n extends io{constructor(t,e,i){super(),this.type=t,this._docOrFields=e,this._inclusive=i}static _create(t,e,i){return new n(t,e,i)}_apply(t){let e=HR(t,this.type,this._docOrFields,this._inclusive);return new Ve(t.firestore,t.converter,function(r,s){return new Yi(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)}(t._query,e))}};function qR(...n){return Mf._create("startAt",n,!0)}function GR(...n){return Mf._create("startAfter",n,!1)}var Nf=class n extends io{constructor(t,e,i){super(),this.type=t,this._docOrFields=e,this._inclusive=i}static _create(t,e,i){return new n(t,e,i)}_apply(t){let e=HR(t,this.type,this._docOrFields,this._inclusive);return new Ve(t.firestore,t.converter,function(r,s){return new Yi(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)}(t._query,e))}};function $R(...n){return Nf._create("endBefore",n,!1)}function WR(...n){return Nf._create("endAt",n,!0)}function HR(n,t,e,i){if(e[0]=Tt(e[0]),e[0]instanceof eo)return function(s,o,a,c,d){if(!c)throw new O(P.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let u=[];for(let m of Ba(s))if(m.field.isKeyField())u.push(Hs(o,c.key));else{let p=c.data.field(m.field);if(Ff(p))throw new O(P.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){let _=m.field.canonicalString();throw new O(P.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${_}' (used as the orderBy) does not exist.`)}u.push(p)}return new gn(u,d)}(n._query,n.firestore._databaseId,t,e[0]._document,i);{let r=ro(n.firestore);return function(o,a,c,d,u,m){let p=o.explicitOrderBy;if(u.length>p.length)throw new O(P.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let _=[];for(let w=0;w<u.length;w++){let A=u[w];if(p[w].field.isKeyField()){if(typeof A!="string")throw new O(P.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof A}`);if(!u0(o)&&A.indexOf("/")!==-1)throw new O(P.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${A}' contains a slash.`);let x=o.path.child(Dt.fromString(A));if(!Q.isDocumentKey(x))throw new O(P.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${x}' is not because it contains an odd number of segments.`);let V=new Q(x);_.push(Hs(a,V))}else{let x=NR(c,d,A);_.push(x)}}return new gn(_,m)}(n._query,n.firestore._databaseId,r,t,e,i)}}function US(n,t,e){if(typeof(e=Tt(e))=="string"){if(e==="")throw new O(P.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!u0(t)&&e.indexOf("/")!==-1)throw new O(P.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);let i=t.path.child(Dt.fromString(e));if(!Q.isDocumentKey(i))throw new O(P.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Hs(n,new Q(i))}if(e instanceof Kt)return Hs(n,e._key);throw new O(P.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Bf(e)}.`)}function BS(n,t){if(!Array.isArray(n)||n.length===0)throw new O(P.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function KR(n,t){let e=function(r,s){for(let o of r)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(e!==null)throw e===t.op?new O(P.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new O(P.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}var sc=class{convertValue(t,e="none"){switch(Ws(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ne(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Hr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw J()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){let i={};return no(t,(r,s)=>{i[r]=this.convertValue(s,e)}),i}convertVectorValue(t){var e,i,r;let s=(r=(i=(e=t.fields)===null||e===void 0?void 0:e.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>ne(o.doubleValue));return new tu(s)}convertGeoPoint(t){return new to(ne(t.latitude),ne(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":let i=l0(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(Ld(t));default:return null}}convertTimestamp(t){let e=Qn(t);return new ce(e.seconds,e.nanos)}convertDocumentKey(t,e){let i=Dt.fromString(t);nt(jk(i));let r=new Kr(i.get(1),i.get(3)),s=new Q(i.popFirst(5));return r.isEqual(e)||fe(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}};function Gf(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}var n0=class extends sc{constructor(t){super(),this.firestore=t}convertBytes(t){return new vn(t)}convertReference(t){let e=this.convertDocumentKey(t,this.firestore._databaseId);return new Kt(this.firestore,null,e)}};var Kn=class{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}},Fi=class extends eo{constructor(t,e,i,r,s,o){super(t,e,i,r,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){let e=new Gr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){let i=this._document.data.field(qf("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}},Gr=class extends Fi{data(t={}){return super.data(t)}},Ji=class{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Kn(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new Gr(this._firestore,this._userDataWriter,i.key,i,new Kn(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){let e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new O(P.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{let c=new Gr(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Kn(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Gr(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Kn(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),d=-1,u=-1;return a.type!==0&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:EU(a.type),doc:c,oldIndex:d,newIndex:u}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}};function EU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return J()}}function B0(n,t){return n instanceof Fi&&t instanceof Fi?n._firestore===t._firestore&&n._key.isEqual(t._key)&&(n._document===null?t._document===null:n._document.isEqual(t._document))&&n._converter===t._converter:n instanceof Ji&&t instanceof Ji&&n._firestore===t._firestore&&F0(n.query,t.query)&&n.metadata.isEqual(t.metadata)&&n._snapshot.isEqual(t._snapshot)}function QR(n){n=Pt(n,Kt);let t=Pt(n.firestore,re);return fR(Ae(t),n._key).then(e=>$0(t,n,e))}var Jn=class extends sc{constructor(t){super(),this.firestore=t}convertBytes(t){return new vn(t)}convertReference(t){let e=this.convertDocumentKey(t,this.firestore._databaseId);return new Kt(this.firestore,null,e)}};function YR(n){n=Pt(n,Kt);let t=Pt(n.firestore,re),e=Ae(t),i=new Jn(t);return gU(e,n._key).then(r=>new Fi(t,i,n._key,r,new Kn(r!==null&&r.hasLocalMutations,!0),n.converter))}function XR(n){n=Pt(n,Kt);let t=Pt(n.firestore,re);return fR(Ae(t),n._key,{source:"server"}).then(e=>$0(t,n,e))}function ZR(n){n=Pt(n,Ve);let t=Pt(n.firestore,re),e=Ae(t),i=new Jn(t);return VR(n._query),pR(e,n._query).then(r=>new Ji(t,i,n,r))}function JR(n){n=Pt(n,Ve);let t=Pt(n.firestore,re),e=Ae(t),i=new Jn(t);return _U(e,n._query).then(r=>new Ji(t,i,n,r))}function tD(n){n=Pt(n,Ve);let t=Pt(n.firestore,re),e=Ae(t),i=new Jn(t);return pR(e,n._query,{source:"server"}).then(r=>new Ji(t,i,n,r))}function z0(n,t,e){n=Pt(n,Kt);let i=Pt(n.firestore,re),r=Gf(n.converter,t,e);return hc(i,[zf(ro(i),"setDoc",n._key,r,n.converter!==null,e).toMutation(n._key,ue.none())])}function q0(n,t,e,...i){n=Pt(n,Kt);let r=Pt(n.firestore,re),s=ro(r),o;return o=typeof(t=Tt(t))=="string"||t instanceof Zi?V0(s,"updateDoc",n._key,t,e,i):L0(s,"updateDoc",n._key,t),hc(r,[o.toMutation(n._key,ue.exists(!0))])}function eD(n){return hc(Pt(n.firestore,re),[new Jr(n._key,ue.none())])}function iD(n,t){let e=Pt(n.firestore,re),i=lu(n),r=Gf(n.converter,t);return hc(e,[zf(ro(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,ue.exists(!1))]).then(()=>i)}function G0(n,...t){var e,i,r;n=Tt(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof t[o]!="object"||$y(t[o])||(s=t[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if($y(t[o])){let m=t[o];t[o]=(e=m.next)===null||e===void 0?void 0:e.bind(m),t[o+1]=(i=m.error)===null||i===void 0?void 0:i.bind(m),t[o+2]=(r=m.complete)===null||r===void 0?void 0:r.bind(m)}let c,d,u;if(n instanceof Kt)d=Pt(n.firestore,re),u=ac(n._key.path),c={next:m=>{t[o]&&t[o]($0(d,n,m))},error:t[o+1],complete:t[o+2]};else{let m=Pt(n,Ve);d=Pt(m.firestore,re),u=m._query;let p=new Jn(d);c={next:_=>{t[o]&&t[o](new Ji(d,p,m,_))},error:t[o+1],complete:t[o+2]},VR(n._query)}return function(p,_,w,A){let x=new nc(A),V=new Xd(_,x,w);return p.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){return w0(yield rc(p),V)})),()=>{x.za(),p.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){return I0(yield rc(p),V)}))}}(Ae(d),u,a,c)}function nD(n,t){return vU(Ae(n=Pt(n,re)),$y(t)?t:{next:t})}function hc(n,t){return function(i,r){let s=new Ie;return i.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){return Xj(yield D0(i),r,s)})),s.promise}(Ae(n),t)}function $0(n,t,e){let i=e.docs.get(t._key),r=new Jn(n);return new Fi(n,r,t._key,i,new Kn(e.hasPendingWrites,e.fromCache),t.converter)}var xU={maxAttempts:5};var Of=class{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=ro(t)}set(t,e,i){this._verifyNotCommitted();let r=zr(t,this._firestore),s=Gf(r.converter,e,i),o=zf(this._dataReader,"WriteBatch.set",r._key,s,r.converter!==null,i);return this._mutations.push(o.toMutation(r._key,ue.none())),this}update(t,e,i,...r){this._verifyNotCommitted();let s=zr(t,this._firestore),o;return o=typeof(e=Tt(e))=="string"||e instanceof Zi?V0(this._dataReader,"WriteBatch.update",s._key,e,i,r):L0(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,ue.exists(!0))),this}delete(t){this._verifyNotCommitted();let e=zr(t,this._firestore);return this._mutations=this._mutations.concat(new Jr(e._key,ue.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new O(P.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function zr(n,t){if((n=Tt(n)).firestore!==t)throw new O(P.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var r0=class extends class{constructor(e,i){this._firestore=e,this._transaction=i,this._dataReader=ro(e)}get(e){let i=zr(e,this._firestore),r=new n0(this._firestore);return this._transaction.lookup([i._key]).then(s=>{if(!s||s.length!==1)return J();let o=s[0];if(o.isFoundDocument())return new eo(this._firestore,r,o.key,o,i.converter);if(o.isNoDocument())return new eo(this._firestore,r,i._key,null,i.converter);throw J()})}set(e,i,r){let s=zr(e,this._firestore),o=Gf(s.converter,i,r),a=zf(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,r);return this._transaction.set(s._key,a),this}update(e,i,r,...s){let o=zr(e,this._firestore),a;return a=typeof(i=Tt(i))=="string"||i instanceof Zi?V0(this._dataReader,"Transaction.update",o._key,i,r,s):L0(this._dataReader,"Transaction.update",o._key,i),this._transaction.update(o._key,a),this}delete(e){let i=zr(e,this._firestore);return this._transaction.delete(i._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){let e=zr(t,this._firestore),i=new Jn(this._firestore);return super.get(t).then(r=>new Fi(this._firestore,i,e._key,r._document,new Kn(!1,!1),e.converter))}};function rD(n,t,e){n=Pt(n,re);let i=Object.assign(Object.assign({},xU),e);return function(s){if(s.maxAttempts<1)throw new O(P.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,o,a){let c=new Ie;return s.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){let d=yield mU(s);new By(s.asyncQueue,d,a,o,c).ru()})),c.promise}(Ae(n),r=>t(new r0(n,r)),i)}function sD(){return new eu("deleteField")}function oD(){return new Qy("serverTimestamp")}function aD(...n){return new Yy("arrayUnion",n)}function cD(...n){return new Xy("arrayRemove",n)}function lD(n){return new Zy("increment",n)}(function(t,e=!0){(function(r){oc=r})(Sh),xs(new _i("firestore",(i,{instanceIdentifier:r,options:s})=>{let o=i.getProvider("app").getImmediate(),a=new re(new ab(i.getProvider("auth-internal")),new ub(i.getProvider("app-check-internal")),function(d,u){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new O(P.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kr(d.options.projectId,u)}(o,r),o);return s=Object.assign({useFetchStreams:e},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),$i(UA,"4.7.1",t),$i(UA,"4.7.1","esm2017")})();var TU="@firebase/firestore-compat",CU="0.3.36";function X0(n,t){if(t===void 0)return{merge:!1};if(t.mergeFields!==void 0&&t.merge!==void 0)throw new O("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return t}function dD(){if(typeof Uint8Array>"u")throw new O("unimplemented","Uint8Arrays are not available in this environment.")}function uD(){if(!ek())throw new O("unimplemented","Blobs are unavailable in Firestore in this environment.")}var $f=class n{constructor(t){this._delegate=t}static fromBase64String(t){return uD(),new n(vn.fromBase64String(t))}static fromUint8Array(t){return dD(),new n(vn.fromUint8Array(t))}toBase64(){return uD(),this._delegate.toBase64()}toUint8Array(){return dD(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function W0(n){return AU(n,["next","error","complete"])}function AU(n,t){if(typeof n!="object"||n===null)return!1;let e=n;for(let i of t)if(i in e&&typeof e[i]=="function")return!0;return!1}var H0=class{enableIndexedDbPersistence(t,e){return IR(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return ER(t._delegate)}clearIndexedDbPersistence(t){return TR(t._delegate)}},Wf=class{constructor(t,e,i){this._delegate=e,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},t instanceof Kr||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){let e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&Ni("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&(t=Object.assign(Object.assign({},e),t),delete t.merge),this._delegate._setSettings(t)}useEmulator(t,e,i={}){vR(this._delegate,t,e,i)}enableNetwork(){return AR(this._delegate)}disableNetwork(){return SR(this._delegate)}enablePersistence(t){let e=!1,i=!1;return t&&(e=!!t.synchronizeTabs,i=!!t.experimentalForceOwningTab,M0("synchronizeTabs",e,"experimentalForceOwningTab",i)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return CR(this._delegate)}onSnapshotsInSync(t){return nD(this._delegate,t)}get app(){if(!this._appCompat)throw new O("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new pc(this,N0(this._delegate,t))}catch(e){throw ri(e,"collection()","Firestore.collection()")}}doc(t){try{return new bn(this,lu(this._delegate,t))}catch(e){throw ri(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new lo(this,bR(this._delegate,t))}catch(e){throw ri(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return rD(this._delegate,e=>t(new Hf(this,e)))}batch(){return Ae(this._delegate),new Kf(new Of(this._delegate,t=>hc(this._delegate,t)))}loadBundle(t){return kR(this._delegate,t)}namedQuery(t){return RR(this._delegate,t).then(e=>e?new lo(this,e):null)}},mc=class extends sc{constructor(t){super(),this.firestore=t}convertBytes(t){return new $f(new vn(t))}convertReference(t){let e=this.convertDocumentKey(t,this.firestore._databaseId);return bn.forKey(e,this.firestore,null)}};function SU(n){zS(n)}var Hf=class{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new mc(t)}get(t){let e=oo(t);return this._delegate.get(e).then(i=>new ao(this._firestore,new Fi(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,e.converter)))}set(t,e,i){let r=oo(t);return i?(X0("Transaction.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){let s=oo(t);return arguments.length===2?this._delegate.update(s,e):this._delegate.update(s,e,i,...r),this}delete(t){let e=oo(t);return this._delegate.delete(e),this}},Kf=class{constructor(t){this._delegate=t}set(t,e,i){let r=oo(t);return i?(X0("WriteBatch.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){let s=oo(t);return arguments.length===2?this._delegate.update(s,e):this._delegate.update(s,e,i,...r),this}delete(t){let e=oo(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}},fc=class n{constructor(t,e,i){this._firestore=t,this._userDataWriter=e,this._delegate=i}fromFirestore(t,e){let i=new Gr(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new co(this._firestore,i),e??{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){let i=n.INSTANCES,r=i.get(t);r||(r=new WeakMap,i.set(t,r));let s=r.get(e);return s||(s=new n(t,new mc(t),e),r.set(e,s)),s}};fc.INSTANCES=new WeakMap;var bn=class n{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new mc(t)}static forPath(t,e,i){if(t.length%2!==0)throw new O("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new n(e,new Kt(e._delegate,i,new Q(t)))}static forKey(t,e,i){return new n(e,new Kt(e._delegate,i,t))}get id(){return this._delegate.id}get parent(){return new pc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new pc(this.firestore,N0(this._delegate,t))}catch(e){throw ri(e,"collection()","DocumentReference.collection()")}}isEqual(t){return t=Tt(t),t instanceof Kt?O0(this._delegate,t):!1}set(t,e){e=X0("DocumentReference.set",e);try{return e?z0(this._delegate,t,e):z0(this._delegate,t)}catch(i){throw ri(i,"setDoc()","DocumentReference.set()")}}update(t,e,...i){try{return arguments.length===1?q0(this._delegate,t):q0(this._delegate,t,e,...i)}catch(r){throw ri(r,"updateDoc()","DocumentReference.update()")}}delete(){return eD(this._delegate)}onSnapshot(...t){let e=hD(t),i=mD(t,r=>new ao(this.firestore,new Fi(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return G0(this._delegate,e,i)}get(t){let e;return t?.source==="cache"?e=YR(this._delegate):t?.source==="server"?e=XR(this._delegate):e=QR(this._delegate),e.then(i=>new ao(this.firestore,new Fi(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(t){return new n(this.firestore,t?this._delegate.withConverter(fc.getInstance(this.firestore,t)):this._delegate.withConverter(null))}};function ri(n,t,e){return n.message=n.message.replace(t,e),n}function hD(n){for(let t of n)if(typeof t=="object"&&!W0(t))return t;return{}}function mD(n,t){var e,i;let r;return W0(n[0])?r=n[0]:W0(n[1])?r=n[1]:typeof n[0]=="function"?r={next:n[0],error:n[1],complete:n[2]}:r={next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(t(s))},error:(e=r.error)===null||e===void 0?void 0:e.bind(r),complete:(i=r.complete)===null||i===void 0?void 0:i.bind(r)}}var ao=class{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new bn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return B0(this._delegate,t._delegate)}},co=class extends ao{data(t){let e=this._delegate.data(t);return this._delegate._converter||qS(e!==void 0,"Document in a QueryDocumentSnapshot should exist"),e}},lo=class n{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new mc(t)}where(t,e,i){try{return new n(this.firestore,er(this._delegate,jR(t,e,i)))}catch(r){throw ri(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new n(this.firestore,er(this._delegate,UR(t,e)))}catch(i){throw ri(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new n(this.firestore,er(this._delegate,BR(t)))}catch(e){throw ri(e,"limit()","Query.limit()")}}limitToLast(t){try{return new n(this.firestore,er(this._delegate,zR(t)))}catch(e){throw ri(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new n(this.firestore,er(this._delegate,qR(...t)))}catch(e){throw ri(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new n(this.firestore,er(this._delegate,GR(...t)))}catch(e){throw ri(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new n(this.firestore,er(this._delegate,$R(...t)))}catch(e){throw ri(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new n(this.firestore,er(this._delegate,WR(...t)))}catch(e){throw ri(e,"endAt()","Query.endAt()")}}isEqual(t){return F0(this._delegate,t._delegate)}get(t){let e;return t?.source==="cache"?e=JR(this._delegate):t?.source==="server"?e=tD(this._delegate):e=ZR(this._delegate),e.then(i=>new du(this.firestore,new Ji(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...t){let e=hD(t),i=mD(t,r=>new du(this.firestore,new Ji(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return G0(this._delegate,e,i)}withConverter(t){return new n(this.firestore,t?this._delegate.withConverter(fc.getInstance(this.firestore,t)):this._delegate.withConverter(null))}},K0=class{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new co(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},du=class{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new lo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new co(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new K0(this._firestore,e))}forEach(t,e){this._delegate.forEach(i=>{t.call(e,new co(this._firestore,i))})}isEqual(t){return B0(this._delegate,t._delegate)}},pc=class n extends lo{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let t=this._delegate.parent;return t?new bn(this.firestore,t):null}doc(t){try{return t===void 0?new bn(this.firestore,lu(this._delegate)):new bn(this.firestore,lu(this._delegate,t))}catch(e){throw ri(e,"doc()","CollectionReference.doc()")}}add(t){return iD(this._delegate,t).then(e=>new bn(this.firestore,e))}isEqual(t){return O0(this._delegate,t._delegate)}withConverter(t){return new n(this.firestore,t?this._delegate.withConverter(fc.getInstance(this.firestore,t)):this._delegate.withConverter(null))}};function oo(n){return Pt(n,Kt)}var Q0=class n{constructor(...t){this._delegate=new Zi(...t)}static documentId(){return new n(pe.keyField().canonicalString())}isEqual(t){return t=Tt(t),t instanceof Zi?this._delegate._internalPath.isEqual(t._internalPath):!1}};var Y0=class n{constructor(t){this._delegate=t}static serverTimestamp(){let t=oD();return t._methodName="FieldValue.serverTimestamp",new n(t)}static delete(){let t=sD();return t._methodName="FieldValue.delete",new n(t)}static arrayUnion(...t){let e=aD(...t);return e._methodName="FieldValue.arrayUnion",new n(e)}static arrayRemove(...t){let e=cD(...t);return e._methodName="FieldValue.arrayRemove",new n(e)}static increment(t){let e=lD(t);return e._methodName="FieldValue.increment",new n(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}};var kU={Firestore:Wf,GeoPoint:to,Timestamp:ce,Blob:$f,Transaction:Hf,WriteBatch:Kf,DocumentReference:bn,DocumentSnapshot:ao,Query:lo,QueryDocumentSnapshot:co,QuerySnapshot:du,CollectionReference:pc,FieldPath:Q0,FieldValue:Y0,setLogLevel:SU,CACHE_SIZE_UNLIMITED:yR};function RU(n,t){n.INTERNAL.registerComponent(new _i("firestore-compat",e=>{let i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(i,r)},"PUBLIC").setServiceProps(Object.assign({},kU)))}function DU(n){RU(n,(t,e)=>new Wf(t,e,new H0)),n.registerVersion(TU,CU)}DU(he);function PU(n,t=Fo){return new Oe(e=>{let i;return t!=null?t.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},e)}):i=n.onSnapshot({includeMetadataChanges:!0},e),()=>{i?.()}})}function fD(n,t){return PU(n,t)}function MU(n,t){return fD(n,t).pipe(hr(void 0),dh(),X(e=>{let[i,r]=e;return r.exists?i?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}}))}function tw(n,t){return fD(n,t).pipe(X(e=>({payload:e,type:"query"})))}var Qf=class{ref;afs;constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){let i=this.ref.collection(t),{ref:r,query:s}=bD(i,e);return new Xf(r,s,this.afs)}snapshotChanges(){return MU(this.ref,this.afs.schedulers.outsideAngular).pipe(me)}valueChanges(t={}){return this.snapshotChanges().pipe(X(({payload:e})=>t.idField?wt(F({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Xt(this.ref.get(t)).pipe(me)}};function Yf(n,t){return tw(n,t).pipe(hr(void 0),dh(),X(e=>{let[i,r]=e,s=r.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return i&&JSON.stringify(i.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((a,c)=>{let d=s.find(m=>m.doc.ref.isEqual(a.ref)),u=i?.payload.docs.find(m=>m.ref.isEqual(a.ref));d&&JSON.stringify(d.doc.metadata)===JSON.stringify(a.metadata)||!d&&u&&JSON.stringify(u.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),o}))}function pD(n,t,e){return Yf(n,e).pipe(Dn((i,r)=>NU(i,r.map(s=>s.payload),t),[]),jo(),X(i=>i.map(r=>({type:r.type,payload:r}))))}function NU(n,t,e){return t.forEach(i=>{e.indexOf(i.type)>-1&&(n=OU(n,i))}),n}function Z0(n,t,e,...i){let r=n.slice();return r.splice(t,e,...i),r}function OU(n,t){switch(t.type){case"added":if(!(n[t.newIndex]&&n[t.newIndex].doc.ref.isEqual(t.doc.ref)))return Z0(n,t.newIndex,0,t);break;case"modified":if(n[t.oldIndex]==null||n[t.oldIndex].doc.ref.isEqual(t.doc.ref))if(t.oldIndex!==t.newIndex){let e=n.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}else return Z0(n,t.newIndex,1,t);break;case"removed":if(n[t.oldIndex]&&n[t.oldIndex].doc.ref.isEqual(t.doc.ref))return Z0(n,t.oldIndex,1);break}return n}function gD(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var Xf=class{ref;query;afs;constructor(t,e,i){this.ref=t,this.query=e,this.afs=i}stateChanges(t){let e=Yf(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(X(i=>i.filter(r=>t.indexOf(r.type)>-1)))),e.pipe(hr(void 0),dh(),xe(([i,r])=>r.length>0||!i),X(([,i])=>i),me)}auditTrail(t){return this.stateChanges(t).pipe(Dn((e,i)=>[...e,...i],[]))}snapshotChanges(t){let e=gD(t);return pD(this.query,e,this.afs.schedulers.outsideAngular).pipe(me)}valueChanges(t={}){return tw(this.query,this.afs.schedulers.outsideAngular).pipe(X(e=>e.payload.docs.map(i=>t.idField?wt(F({},i.data()),{[t.idField]:i.id}):i.data())),me)}get(t){return Xt(this.query.get(t)).pipe(me)}add(t){return this.ref.add(t)}doc(t){return new Qf(this.ref.doc(t),this.afs)}},J0=class{query;afs;constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return!t||t.length===0?Yf(this.query,this.afs.schedulers.outsideAngular).pipe(me):Yf(this.query,this.afs.schedulers.outsideAngular).pipe(X(e=>e.filter(i=>t.indexOf(i.type)>-1)),xe(e=>e.length>0),me)}auditTrail(t){return this.stateChanges(t).pipe(Dn((e,i)=>[...e,...i],[]))}snapshotChanges(t){let e=gD(t);return pD(this.query,e,this.afs.schedulers.outsideAngular).pipe(me)}valueChanges(t={}){return tw(this.query,this.afs.schedulers.outsideAngular).pipe(X(i=>i.payload.docs.map(r=>t.idField?F({[t.idField]:r.id},r.data()):r.data())),me)}get(t){return Xt(this.query.get(t)).pipe(me)}},_D=new G("angularfire2.enableFirestorePersistence"),vD=new G("angularfire2.firestore.persistenceSettings"),FU=new G("angularfire2.firestore.settings"),LU=new G("angularfire2.firestore.use-emulator");function bD(n,t=e=>e){return{query:t(n),ref:n}}var ew=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(e,i,r,s,o,a,c,d,u,m,p,_,w,A,x,V,H){this.schedulers=c;let j=Ms(e,a,i),Z=u;m&&gd(j,a,p,w,A,x,_,V),[this.firestore,this.persistenceEnabled$]=wa(`${j.name}.firestore`,"AngularFirestore",j.name,()=>{let lt=a.runOutsideAngular(()=>j.firestore());if(s&&lt.settings(s),Z&&lt.useEmulator(...Z),r&&!_r(o)){let at=()=>{try{return Xt(lt.enablePersistence(d||void 0).then(()=>!0,()=>!1))}catch(I){return typeof console<"u"&&console.warn(I),tt(!1)}};return[lt,a.runOutsideAngular(at)]}else return[lt,tt(!1)]},[s,Z,r])}collection(e,i){let r;typeof e=="string"?r=this.firestore.collection(e):r=e;let{ref:s,query:o}=bD(r,i),a=this.schedulers.ngZone.run(()=>s);return new Xf(a,o,this)}collectionGroup(e,i){let r=i||(o=>o),s=this.firestore.collectionGroup(e);return new J0(r(s),this)}doc(e){let i;typeof e=="string"?i=this.firestore.doc(e):i=e;let r=this.schedulers.ngZone.run(()=>i);return new Qf(r,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(i){return new(i||n)(k(Rr),k(Dr,8),k(_D,8),k(FU,8),k(Fe),k(rt),k(ya),k(vD,8),k(LU,8),k(Qi,8),k(dd,8),k(ud,8),k(hd,8),k(md,8),k(fd,8),k(pd,8),k(qn,8))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),yD=(()=>{class n{constructor(){he.registerVersion("angularfire",Gn.full,"fst-compat")}static enablePersistence(e){return{ngModule:n,providers:[{provide:_D,useValue:!0},{provide:vD,useValue:e}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=it({type:n});static \u0275inj=et({providers:[ew]})}return n})();var uo=class uo{constructor(){this.loadingSubject=new qe(!1);this.isLoading=this.loadingSubject.asObservable()}show(){this.loadingSubject.next(!0)}hide(){setTimeout(()=>{this.loadingSubject.next(!1)},250)}};uo.\u0275fac=function(e){return new(e||uo)},uo.\u0275prov=$({token:uo,factory:uo.\u0275fac,providedIn:"root"});var gc=uo;var ho=class ho{constructor(t,e,i,r){this.firestore=t;this.afAuth=e;this.spinnerService=i;this.toastr=r}getTodos(){return this.spinnerService.show(),this.afAuth.authState.pipe(Ht(t=>t?this.firestore.collection("todos",e=>e.where("userId","==",t.uid)).snapshotChanges().pipe(X(e=>e.map(i=>{let r=i.payload.doc.data(),s=i.payload.doc.id;return F({id:s},r)})),qt(()=>this.spinnerService.hide())):(this.spinnerService.hide(),[])))}addTodo(t){return this.spinnerService.show(),this.afAuth.authState.pipe(Ht(e=>{if(e){let i=this.firestore.createId();return this.firestore.collection("todos").doc(i).set({text:t,completed:!1,userId:e.uid}).then(()=>{this.spinnerService.hide(),this.toastr.success("Todo added successfully")}).catch(r=>{this.spinnerService.hide(),this.toastr.error("Failed to add todo","Error"),console.error("Error adding todo:",r)})}else return this.spinnerService.hide(),this.toastr.error("User not authenticated","Error"),Promise.reject("User not authenticated")})).toPromise()}deleteTodo(t){return this.spinnerService.show(),this.afAuth.authState.pipe(Ht(e=>e?this.firestore.collection("todos").doc(t).delete().then(()=>{this.spinnerService.hide(),this.toastr.success("Todo deleted successfully")}).catch(i=>{this.spinnerService.hide(),this.toastr.error("Failed to delete todo","Error"),console.error("Error deleting todo:",i)}):(this.spinnerService.hide(),this.toastr.error("User not authenticated","Error"),Promise.reject("User not authenticated")))).toPromise()}};ho.\u0275fac=function(e){return new(e||ho)(k(ew),k(Qi),k(gc),k(Pr))},ho.\u0275prov=$({token:ho,factory:ho.\u0275fac,providedIn:"root"});var Zf=ho;var UU=["*"];var BU=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],zU=["[mat-card-avatar], [matCardAvatar]",`mat-card-title, mat-card-subtitle,
      [mat-card-title], [mat-card-subtitle],
      [matCardTitle], [matCardSubtitle]`,"*"],qU=new G("MAT_CARD_CONFIG"),ID=(()=>{let t=class t{constructor(i){this.appearance=i?.appearance||"raised"}};t.\u0275fac=function(r){return new(r||t)(N(qU,8))},t.\u0275cmp=xt({type:t,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(r,s){r&2&&Bt("mat-mdc-card-outlined",s.appearance==="outlined")("mdc-card--outlined",s.appearance==="outlined")},inputs:{appearance:"appearance"},exportAs:["matCard"],standalone:!0,features:[oe],ngContentSelectors:UU,decls:1,vars:0,template:function(r,s){r&1&&(ei(),Ot(0))},styles:['.mat-mdc-card{display:flex;flex-direction:column;box-sizing:border-box;position:relative;border-style:solid;border-width:0;background-color:var(--mdc-elevated-card-container-color, var(--mat-app-surface));border-color:var(--mdc-elevated-card-container-color, var(--mat-app-surface));border-radius:var(--mdc-elevated-card-container-shape, var(--mat-app-corner-medium));box-shadow:var(--mdc-elevated-card-container-elevation, var(--mat-app-level1))}.mat-mdc-card::after{position:absolute;top:0;left:0;width:100%;height:100%;border:solid 1px rgba(0,0,0,0);content:"";display:block;pointer-events:none;box-sizing:border-box;border-radius:var(--mdc-elevated-card-container-shape, var(--mat-app-corner-medium))}.mat-mdc-card-outlined{background-color:var(--mdc-outlined-card-container-color, var(--mat-app-surface));border-radius:var(--mdc-outlined-card-container-shape, var(--mat-app-corner-medium));border-width:var(--mdc-outlined-card-outline-width);border-color:var(--mdc-outlined-card-outline-color, var(--mat-app-outline-variant));box-shadow:var(--mdc-outlined-card-container-elevation, var(--mat-app-level0))}.mat-mdc-card-outlined::after{border:none}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mat-mdc-card-actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font, var(--mat-app-title-large-font));line-height:var(--mat-card-title-text-line-height, var(--mat-app-title-large-line-height));font-size:var(--mat-card-title-text-size, var(--mat-app-title-large-size));letter-spacing:var(--mat-card-title-text-tracking, var(--mat-app-title-large-tracking));font-weight:var(--mat-card-title-text-weight, var(--mat-app-title-large-weight))}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color, var(--mat-app-on-surface));font-family:var(--mat-card-subtitle-text-font, var(--mat-app-title-medium-font));line-height:var(--mat-card-subtitle-text-line-height, var(--mat-app-title-medium-line-height));font-size:var(--mat-card-subtitle-text-size, var(--mat-app-title-medium-size));letter-spacing:var(--mat-card-subtitle-text-tracking, var(--mat-app-title-medium-tracking));font-weight:var(--mat-card-subtitle-text-weight, var(--mat-app-title-medium-weight))}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0});let n=t;return n})(),ED=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=ht({type:t,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-mdc-card-title"],standalone:!0});let n=t;return n})();var xD=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=ht({type:t,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"],standalone:!0});let n=t;return n})();var TD=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=xt({type:t,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-mdc-card-header"],standalone:!0,features:[oe],ngContentSelectors:zU,decls:4,vars:0,consts:[[1,"mat-mdc-card-header-text"]],template:function(r,s){r&1&&(ei(BU),Ot(0),U(1,"div",0),Ot(2,1),z(),Ot(3,2))},encapsulation:2,changeDetection:0});let n=t;return n})();var _c=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=it({type:t}),t.\u0275inj=et({imports:[te,ie,te]});let n=t;return n})();var iw=class{constructor(t){this._box=t,this._destroyed=new Et,this._resizeSubject=new Et,this._elementObservables=new Map,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(e=>this._resizeSubject.next(e)))}observe(t){return this._elementObservables.has(t)||this._elementObservables.set(t,new Oe(e=>{let i=this._resizeSubject.subscribe(e);return this._resizeObserver?.observe(t,{box:this._box}),()=>{this._resizeObserver?.unobserve(t),i.unsubscribe(),this._elementObservables.delete(t)}}).pipe(xe(e=>e.some(i=>i.target===t)),ll({bufferSize:1,refCount:!0}),Bi(this._destroyed))),this._elementObservables.get(t)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}},CD=(()=>{let t=class t{constructor(){this._observers=new Map,this._ngZone=B(rt),typeof ResizeObserver<"u"}ngOnDestroy(){for(let[,i]of this._observers)i.destroy();this._observers.clear(),typeof ResizeObserver<"u"}observe(i,r){let s=r?.box||"content-box";return this._observers.has(s)||this._observers.set(s,new iw(s)),this._observers.get(s).observe(i)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var $U=["notch"],WU=["matFormFieldNotchedOutline",""],HU=["*"],KU=["textField"],QU=["iconPrefixContainer"],YU=["textPrefixContainer"],XU=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],ZU=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];function JU(n,t){n&1&&vt(0,"span",19)}function tB(n,t){if(n&1&&(U(0,"label",18),Ot(1,1),_t(2,JU,1,0,"span",19),z()),n&2){let e=St(2);ot("floating",e._shouldLabelFloat())("monitorResize",e._hasOutline())("id",e._labelId),Vt("for",e._control.disableAutomaticLabeling?null:e._control.id),Y(2),We(!e.hideRequiredMarker&&e._control.required?2:-1)}}function eB(n,t){if(n&1&&_t(0,tB,3,5,"label",18),n&2){let e=St();We(e._hasFloatingLabel()?0:-1)}}function iB(n,t){n&1&&vt(0,"div",5)}function nB(n,t){}function rB(n,t){if(n&1&&_t(0,nB,0,0,"ng-template",11),n&2){St(2);let e=Ho(1);ot("ngTemplateOutlet",e)}}function sB(n,t){if(n&1&&(U(0,"div",7),_t(1,rB,1,1,null,11),z()),n&2){let e=St();ot("matFormFieldNotchedOutlineOpen",e._shouldLabelFloat()),Y(),We(e._forceDisplayInfixLabel()?-1:1)}}function oB(n,t){n&1&&(U(0,"div",8,2),Ot(2,2),z())}function aB(n,t){n&1&&(U(0,"div",9,3),Ot(2,3),z())}function cB(n,t){}function lB(n,t){if(n&1&&_t(0,cB,0,0,"ng-template",11),n&2){St();let e=Ho(1);ot("ngTemplateOutlet",e)}}function dB(n,t){n&1&&(U(0,"div",12),Ot(1,4),z())}function uB(n,t){n&1&&(U(0,"div",13),Ot(1,5),z())}function hB(n,t){n&1&&vt(0,"div",14)}function mB(n,t){if(n&1&&(U(0,"div",16),Ot(1,6),z()),n&2){let e=St();ot("@transitionMessages",e._subscriptAnimationState)}}function fB(n,t){if(n&1&&(U(0,"mat-hint",20),dt(1),z()),n&2){let e=St(2);ot("id",e._hintLabelId),Y(),kx(e.hintLabel)}}function pB(n,t){if(n&1&&(U(0,"div",17),_t(1,fB,2,2,"mat-hint",20),Ot(2,7),vt(3,"div",21),Ot(4,8),z()),n&2){let e=St();ot("@transitionMessages",e._subscriptAnimationState),Y(),We(e.hintLabel?1:-1)}}var AD=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=ht({type:t,selectors:[["mat-label"]],standalone:!0});let n=t;return n})(),gB=0,FD=new G("MatError"),LD=(()=>{let t=class t{constructor(i,r){this.id=`mat-mdc-error-${gB++}`,i||r.nativeElement.setAttribute("aria-live","polite")}};t.\u0275fac=function(r){return new(r||t)(zo("aria-live"),N(Ct))},t.\u0275dir=ht({type:t,selectors:[["mat-error"],["","matError",""]],hostAttrs:["aria-atomic","true",1,"mat-mdc-form-field-error","mat-mdc-form-field-bottom-align"],hostVars:1,hostBindings:function(r,s){r&2&&Wo("id",s.id)},inputs:{id:"id"},standalone:!0,features:[li([{provide:FD,useExisting:t}])]});let n=t;return n})(),_B=0,SD=(()=>{let t=class t{constructor(){this.align="start",this.id=`mat-mdc-hint-${_B++}`}};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=ht({type:t,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(r,s){r&2&&(Wo("id",s.id),Vt("align",null),Bt("mat-mdc-form-field-hint-end",s.align==="end"))},inputs:{align:"align",id:"id"},standalone:!0});let n=t;return n})(),vB=new G("MatPrefix");var bB=new G("MatSuffix");var VD=new G("FloatingLabelParent"),kD=(()=>{let t=class t{get floating(){return this._floating}set floating(i){this._floating=i,this.monitorResize&&this._handleResize()}get monitorResize(){return this._monitorResize}set monitorResize(i){this._monitorResize=i,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}constructor(i){this._elementRef=i,this._floating=!1,this._monitorResize=!1,this._resizeObserver=B(CD),this._ngZone=B(rt),this._parent=B(VD),this._resizeSubscription=new Sn}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return yB(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}};t.\u0275fac=function(r){return new(r||t)(N(Ct))},t.\u0275dir=ht({type:t,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(r,s){r&2&&Bt("mdc-floating-label--float-above",s.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"},standalone:!0});let n=t;return n})();function yB(n){let t=n;if(t.offsetParent!==null)return t.scrollWidth;let e=t.cloneNode(!0);e.style.setProperty("position","absolute"),e.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(e);let i=e.scrollWidth;return e.remove(),i}var RD="mdc-line-ripple--active",Jf="mdc-line-ripple--deactivating",DD=(()=>{let t=class t{constructor(i,r){this._elementRef=i,this._handleTransitionEnd=s=>{let o=this._elementRef.nativeElement.classList,a=o.contains(Jf);s.propertyName==="opacity"&&a&&o.remove(RD,Jf)},r.runOutsideAngular(()=>{i.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){let i=this._elementRef.nativeElement.classList;i.remove(Jf),i.add(RD)}deactivate(){this._elementRef.nativeElement.classList.add(Jf)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}};t.\u0275fac=function(r){return new(r||t)(N(Ct),N(rt))},t.\u0275dir=ht({type:t,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"],standalone:!0});let n=t;return n})(),PD=(()=>{let t=class t{constructor(i,r){this._elementRef=i,this._ngZone=r,this.open=!1}ngAfterViewInit(){let i=this._elementRef.nativeElement.querySelector(".mdc-floating-label");i?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),typeof requestAnimationFrame=="function"&&(i.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>i.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(i){!this.open||!i?this._notch.nativeElement.style.width="":this._notch.nativeElement.style.width=`calc(${i}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`}};t.\u0275fac=function(r){return new(r||t)(N(Ct),N(rt))},t.\u0275cmp=xt({type:t,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(r,s){if(r&1&&ci($U,5),r&2){let o;Zt(o=Jt())&&(s._notch=o.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(r,s){r&2&&Bt("mdc-notched-outline--notched",s.open)},inputs:{open:[0,"matFormFieldNotchedOutlineOpen","open"]},standalone:!0,features:[oe],attrs:WU,ngContentSelectors:HU,decls:5,vars:0,consts:[["notch",""],[1,"mat-mdc-notch-piece","mdc-notched-outline__leading"],[1,"mat-mdc-notch-piece","mdc-notched-outline__notch"],[1,"mat-mdc-notch-piece","mdc-notched-outline__trailing"]],template:function(r,s){r&1&&(ei(),vt(0,"div",1),U(1,"div",2,0),Ot(3),z(),vt(4,"div",3))},encapsulation:2,changeDetection:0});let n=t;return n})(),wB={transitionMessages:kh("transitionMessages",[Jo("enter",Ts({opacity:1,transform:"translateY(0%)"})),Tl("void => enter",[Ts({opacity:0,transform:"translateY(-5px)"}),xl("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},nw=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=ht({type:t});let n=t;return n})();var rw=new G("MatFormField"),IB=new G("MAT_FORM_FIELD_DEFAULT_OPTIONS"),MD=0,ND="fill",EB="auto",OD="fixed",xB="translateY(-50%)",jD=(()=>{let t=class t{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(i){this._hideRequiredMarker=yi(i)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||EB}set floatLabel(i){i!==this._floatLabel&&(this._floatLabel=i,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(i){let r=this._appearance,s=i||this._defaults?.appearance||ND;this._appearance=s,this._appearance==="outline"&&this._appearance!==r&&(this._needsOutlineLabelOffsetUpdate=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||OD}set subscriptSizing(i){this._subscriptSizing=i||this._defaults?.subscriptSizing||OD}get hintLabel(){return this._hintLabel}set hintLabel(i){this._hintLabel=i,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(i){this._explicitFormFieldControl=i}constructor(i,r,s,o,a,c,d,u){this._elementRef=i,this._changeDetectorRef=r,this._dir=o,this._platform=a,this._defaults=c,this._animationMode=d,this._labelChild=Ex(AD),this._hideRequiredMarker=!1,this.color="primary",this._appearance=ND,this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId=`mat-mdc-form-field-label-${MD++}`,this._hintLabelId=`mat-mdc-hint-${MD++}`,this._subscriptAnimationState="",this._destroyed=new Et,this._isFocused=null,this._needsOutlineLabelOffsetUpdate=!1,this._previousControl=null,this._injector=B(zi),this.getLabelId=Vn(()=>this._hasFloatingLabel()?this._labelId:null),this._hasFloatingLabel=Vn(()=>!!this._labelChild()),c&&(c.appearance&&(this.appearance=c.appearance),this._hideRequiredMarker=!!c?.hideRequiredMarker,c.color&&(this.color=c.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl(),this._control!==this._previousControl&&(this._initializeControl(this._previousControl),this._previousControl=this._control)}ngOnDestroy(){this._stateChanges?.unsubscribe(),this._valueChanges?.unsubscribe(),this._destroyed.next(),this._destroyed.complete()}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(i){let r=this._control,s="mat-mdc-form-field-type-";i&&this._elementRef.nativeElement.classList.remove(s+i.controlType),r.controlType&&this._elementRef.nativeElement.classList.add(s+r.controlType),this._stateChanges?.unsubscribe(),this._stateChanges=r.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._valueChanges?.unsubscribe(),r.ngControl&&r.ngControl.valueChanges&&(this._valueChanges=r.ngControl.valueChanges.pipe(Bi(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()))}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(i=>!i._isText),this._hasTextPrefix=!!this._prefixChildren.find(i=>i._isText),this._hasIconSuffix=!!this._suffixChildren.find(i=>!i._isText),this._hasTextSuffix=!!this._suffixChildren.find(i=>i._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),kn(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){this._control}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||this._isFocused===null)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdate=!0),Tx(()=>{this._needsOutlineLabelOffsetUpdate&&(this._needsOutlineLabelOffsetUpdate=!1,this._updateOutlineLabelOffset())},{injector:this._injector}),this._dir.change.pipe(Bi(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdate=!0)}_shouldAlwaysFloat(){return this.floatLabel==="always"}_hasOutline(){return this.appearance==="outline"}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_shouldLabelFloat(){return this._hasFloatingLabel()?this._control.shouldLabelFloat||this._shouldAlwaysFloat():!1}_shouldForward(i){let r=this._control?this._control.ngControl:null;return r&&r[i]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||!this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(0):this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){this._hintChildren}_syncDescribedByIds(){if(this._control){let i=[];if(this._control.userAriaDescribedBy&&typeof this._control.userAriaDescribedBy=="string"&&i.push(...this._control.userAriaDescribedBy.split(" ")),this._getDisplayedMessages()==="hint"){let r=this._hintChildren?this._hintChildren.find(o=>o.align==="start"):null,s=this._hintChildren?this._hintChildren.find(o=>o.align==="end"):null;r?i.push(r.id):this._hintLabel&&i.push(this._hintLabelId),s&&i.push(s.id)}else this._errorChildren&&i.push(...this._errorChildren.map(r=>r.id));this._control.setDescribedByIds(i)}}_updateOutlineLabelOffset(){if(!this._hasOutline()||!this._floatingLabel)return;let i=this._floatingLabel.element;if(!(this._iconPrefixContainer||this._textPrefixContainer)){i.style.transform="";return}if(!this._isAttachedToDom()){this._needsOutlineLabelOffsetUpdate=!0;return}let r=this._iconPrefixContainer?.nativeElement,s=this._textPrefixContainer?.nativeElement,o=r?.getBoundingClientRect().width??0,a=s?.getBoundingClientRect().width??0,c=this._dir.value==="rtl"?"-1":"1",d=`${o+a}px`,m=`calc(${c} * (${d} + var(--mat-mdc-form-field-label-offset-x, 0px)))`;i.style.transform=`var(
        --mat-mdc-form-field-label-transform,
        ${xB} translateX(${m})
    )`}_isAttachedToDom(){let i=this._elementRef.nativeElement;if(i.getRootNode){let r=i.getRootNode();return r&&r!==i}return document.documentElement.contains(i)}};t.\u0275fac=function(r){return new(r||t)(N(Ct),N(Ln),N(rt),N(xA),N(ae),N(IB,8),N(Je,8),N(kt))},t.\u0275cmp=xt({type:t,selectors:[["mat-form-field"]],contentQueries:function(r,s,o){if(r&1&&(Ax(o,s._labelChild,AD,5),gi(o,nw,5),gi(o,vB,5),gi(o,bB,5),gi(o,FD,5),gi(o,SD,5)),r&2){Sx();let a;Zt(a=Jt())&&(s._formFieldControl=a.first),Zt(a=Jt())&&(s._prefixChildren=a),Zt(a=Jt())&&(s._suffixChildren=a),Zt(a=Jt())&&(s._errorChildren=a),Zt(a=Jt())&&(s._hintChildren=a)}},viewQuery:function(r,s){if(r&1&&(ci(KU,5),ci(QU,5),ci(YU,5),ci(kD,5),ci(PD,5),ci(DD,5)),r&2){let o;Zt(o=Jt())&&(s._textField=o.first),Zt(o=Jt())&&(s._iconPrefixContainer=o.first),Zt(o=Jt())&&(s._textPrefixContainer=o.first),Zt(o=Jt())&&(s._floatingLabel=o.first),Zt(o=Jt())&&(s._notchedOutline=o.first),Zt(o=Jt())&&(s._lineRipple=o.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(r,s){r&2&&Bt("mat-mdc-form-field-label-always-float",s._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",s._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",s._hasIconSuffix)("mat-form-field-invalid",s._control.errorState)("mat-form-field-disabled",s._control.disabled)("mat-form-field-autofilled",s._control.autofilled)("mat-form-field-no-animations",s._animationMode==="NoopAnimations")("mat-form-field-appearance-fill",s.appearance=="fill")("mat-form-field-appearance-outline",s.appearance=="outline")("mat-form-field-hide-placeholder",s._hasFloatingLabel()&&!s._shouldLabelFloat())("mat-focused",s._control.focused)("mat-primary",s.color!=="accent"&&s.color!=="warn")("mat-accent",s.color==="accent")("mat-warn",s.color==="warn")("ng-untouched",s._shouldForward("untouched"))("ng-touched",s._shouldForward("touched"))("ng-pristine",s._shouldForward("pristine"))("ng-dirty",s._shouldForward("dirty"))("ng-valid",s._shouldForward("valid"))("ng-invalid",s._shouldForward("invalid"))("ng-pending",s._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],standalone:!0,features:[li([{provide:rw,useExisting:t},{provide:VD,useExisting:t}]),oe],ngContentSelectors:ZU,decls:18,vars:21,consts:[["labelTemplate",""],["textField",""],["iconPrefixContainer",""],["textPrefixContainer",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],[1,"mat-mdc-form-field-focus-overlay"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[1,"mat-mdc-form-field-icon-prefix"],[1,"mat-mdc-form-field-text-prefix"],[1,"mat-mdc-form-field-infix"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align"],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[3,"id"],[1,"mat-mdc-form-field-hint-spacer"]],template:function(r,s){if(r&1){let o=Fn();ei(XU),_t(0,eB,1,1,"ng-template",null,0,gl),U(2,"div",4,1),Nt("click",function(c){return Pn(o),Mn(s._control.onContainerClick(c))}),_t(4,iB,1,0,"div",5),U(5,"div",6),_t(6,sB,2,2,"div",7)(7,oB,3,0,"div",8)(8,aB,3,0,"div",9),U(9,"div",10),_t(10,lB,1,1,null,11),Ot(11),z(),_t(12,dB,2,0,"div",12)(13,uB,2,0,"div",13),z(),_t(14,hB,1,0,"div",14),z(),U(15,"div",15),_t(16,mB,2,1,"div",16)(17,pB,5,2,"div",17),z()}if(r&2){let o;Y(2),Bt("mdc-text-field--filled",!s._hasOutline())("mdc-text-field--outlined",s._hasOutline())("mdc-text-field--no-label",!s._hasFloatingLabel())("mdc-text-field--disabled",s._control.disabled)("mdc-text-field--invalid",s._control.errorState),Y(2),We(!s._hasOutline()&&!s._control.disabled?4:-1),Y(2),We(s._hasOutline()?6:-1),Y(),We(s._hasIconPrefix?7:-1),Y(),We(s._hasTextPrefix?8:-1),Y(2),We(!s._hasOutline()||s._forceDisplayInfixLabel()?10:-1),Y(2),We(s._hasTextSuffix?12:-1),Y(),We(s._hasIconSuffix?13:-1),Y(),We(s._hasOutline()?-1:14),Y(),Bt("mat-mdc-form-field-subscript-dynamic-size",s.subscriptSizing==="dynamic"),Y(),We((o=s._getDisplayedMessages())==="error"?16:o==="hint"?17:-1)}},dependencies:[kD,PD,yl,DD,SD],styles:['.mdc-text-field{display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color;border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field__input{width:100%;min-width:0;border:none;border-radius:0;background:none;padding:0;-moz-appearance:none;-webkit-appearance:none;height:28px}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}.mdc-text-field__input::placeholder{opacity:0}.mdc-text-field__input::-moz-placeholder{opacity:0}.mdc-text-field__input::-webkit-input-placeholder{opacity:0}.mdc-text-field__input:-ms-input-placeholder{opacity:0}.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}.mdc-text-field--outlined .mdc-text-field__input,.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-filled-text-field-input-text-color, var(--mat-app-on-surface));caret-color:var(--mdc-filled-text-field-caret-color, var(--mat-app-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-error-caret-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-filled-text-field-disabled-input-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-outlined-text-field-input-text-color, var(--mat-app-on-surface));caret-color:var(--mdc-outlined-text-field-caret-color, var(--mat-app-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-error-caret-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-outlined-text-field-disabled-input-text-color)}.mdc-text-field--disabled .cdk-high-contrast-active .mdc-text-field__input{background-color:Window}.mdc-text-field--filled{height:56px;border-bottom-right-radius:0;border-bottom-left-radius:0;border-top-left-radius:var(--mdc-filled-text-field-container-shape, var(--mat-app-corner-extra-small-top));border-top-right-radius:var(--mdc-filled-text-field-container-shape, var(--mat-app-corner-extra-small-top))}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mdc-filled-text-field-container-color, var(--mat-app-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mdc-filled-text-field-disabled-container-color)}.mdc-text-field--outlined{height:56px;overflow:visible;padding-left:16px;padding-right:16px}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)));padding-left:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)) + 4px)}[dir=rtl] .mdc-text-field--outlined{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)) + 4px);padding-left:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)))}}.mdc-floating-label{position:absolute;left:0;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label{right:0;left:auto;transform-origin:right top;text-align:right}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:auto}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label{left:auto;right:4px}.mdc-text-field--filled .mdc-floating-label{left:16px;right:auto}[dir=rtl] .mdc-text-field--filled .mdc-floating-label{left:auto;right:16px}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.cdk-high-contrast-active .mdc-text-field--disabled .mdc-floating-label{z-index:1}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mdc-filled-text-field-label-text-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mdc-filled-text-field-focus-label-text-color, var(--mat-app-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mdc-filled-text-field-hover-label-text-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label{color:var(--mdc-filled-text-field-disabled-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mdc-filled-text-field-error-label-text-color, var(--mat-app-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mdc-filled-text-field-error-focus-label-text-color, var(--mat-app-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mdc-filled-text-field-error-hover-label-text-color, var(--mat-app-on-error-container))}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mdc-filled-text-field-label-text-font, var(--mat-app-body-large-font));font-size:var(--mdc-filled-text-field-label-text-size, var(--mat-app-body-large-size));font-weight:var(--mdc-filled-text-field-label-text-weight, var(--mat-app-body-large-weight));letter-spacing:var(--mdc-filled-text-field-label-text-tracking, var(--mat-app-body-large-tracking))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mdc-outlined-text-field-label-text-color, var(--mat-app-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mdc-outlined-text-field-focus-label-text-color, var(--mat-app-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mdc-outlined-text-field-hover-label-text-color, var(--mat-app-on-surface))}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label{color:var(--mdc-outlined-text-field-disabled-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mdc-outlined-text-field-error-label-text-color, var(--mat-app-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mdc-outlined-text-field-error-focus-label-text-color, var(--mat-app-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mdc-outlined-text-field-error-hover-label-text-color, var(--mat-app-on-error-container))}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mdc-outlined-text-field-label-text-font, var(--mat-app-body-large-font));font-size:var(--mdc-outlined-text-field-label-text-size, var(--mat-app-body-large-size));font-weight:var(--mdc-outlined-text-field-label-text-weight, var(--mat-app-body-large-weight));letter-spacing:var(--mdc-outlined-text-field-label-text-tracking, var(--mat-app-body-large-tracking))}.mdc-floating-label--float-above{cursor:auto;transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1);font-size:.75rem}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline{text-align:right}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mat-mdc-notch-piece{box-sizing:border-box;height:100%;pointer-events:none;border-top:1px solid;border-bottom:1px solid}.mdc-text-field--focused .mat-mdc-notch-piece{border-width:2px}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-outline-color, var(--mat-app-outline));border-width:var(--mdc-outlined-text-field-outline-width)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-hover-outline-color, var(--mat-app-on-surface))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-focus-outline-color, var(--mat-app-primary))}.mdc-text-field--outlined.mdc-text-field--disabled .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-disabled-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-outline-color, var(--mat-app-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-notched-outline .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-hover-outline-color, var(--mat-app-on-error-container))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-focus-outline-color, var(--mat-app-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mat-mdc-notch-piece{border-width:var(--mdc-outlined-text-field-focus-outline-width)}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;width:12px;border-top-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small));border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small))}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)))}}[dir=rtl] .mdc-notched-outline__leading{border-left:none;border-right:1px solid;border-bottom-left-radius:0;border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small));border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small))}.mdc-notched-outline__trailing{flex-grow:1;border-left:none;border-right:1px solid;border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small));border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small))}[dir=rtl] .mdc-notched-outline__trailing{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small));border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small))}.mdc-notched-outline__notch{flex:0 0 auto;width:auto;max-width:calc(100% - 24px)}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)))*2)}}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1;border-bottom-width:var(--mdc-filled-text-field-active-indicator-height)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-active-indicator-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-hover-active-indicator-color, var(--mat-app-on-surface))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-disabled-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-active-indicator-color, var(--mat-app-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-hover-active-indicator-color, var(--mat-app-on-error-container))}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mdc-filled-text-field-focus-active-indicator-height)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-focus-active-indicator-color, var(--mat-app-primary))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-error-focus-active-indicator-color, var(--mat-app-error))}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-text-field--disabled{pointer-events:none}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all;will-change:auto}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto;will-change:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:1px solid rgba(0,0,0,0)}[dir=rtl] .mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:none;border-right:1px solid rgba(0,0,0,0)}.mat-mdc-form-field-infix{min-height:var(--mat-form-field-container-height);padding-top:var(--mat-form-field-filled-with-label-container-padding-top);padding-bottom:var(--mat-form-field-filled-with-label-container-padding-bottom)}.mdc-text-field--outlined .mat-mdc-form-field-infix,.mdc-text-field--no-label .mat-mdc-form-field-infix{padding-top:var(--mat-form-field-container-vertical-padding);padding-bottom:var(--mat-form-field-container-vertical-padding)}.mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-floating-label{top:calc(var(--mat-form-field-container-height)/2)}.mdc-text-field--filled .mat-mdc-floating-label{display:var(--mat-form-field-filled-label-display, block)}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{--mat-mdc-form-field-label-transform: translateY(calc(calc(6.75px + var(--mat-form-field-container-height) / 2) * -1)) scale(var(--mat-mdc-form-field-floating-label-scale, 0.75));transform:var(--mat-mdc-form-field-label-transform)}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block;color:var(--mat-form-field-error-text-color, var(--mat-app-error))}.mat-mdc-form-field-subscript-wrapper,.mat-mdc-form-field-bottom-align::before{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-subscript-text-font, var(--mat-app-body-small-font));line-height:var(--mat-form-field-subscript-text-line-height, var(--mat-app-body-small-line-height));font-size:var(--mat-form-field-subscript-text-size, var(--mat-app-body-small-size));letter-spacing:var(--mat-form-field-subscript-text-tracking, var(--mat-app-body-small-tracking));font-weight:var(--mat-form-field-subscript-text-weight, var(--mat-app-body-small-weight))}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none;background-color:var(--mat-form-field-state-layer-color, var(--mat-app-on-surface))}.mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-form-field.mat-focused .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-focus-state-layer-opacity)}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option{color:var(--mat-form-field-select-option-text-color)}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option:disabled{color:var(--mat-form-field-select-disabled-option-text-color)}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none;color:var(--mat-form-field-enabled-select-arrow-color, var(--mat-app-on-surface-variant))}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select.mat-focused .mat-mdc-form-field-infix::after{color:var(--mat-form-field-focus-select-arrow-color, var(--mat-app-primary))}.mat-mdc-form-field-type-mat-native-select.mat-form-field-disabled .mat-mdc-form-field-infix::after{color:var(--mat-form-field-disabled-select-arrow-color)}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font, var(--mat-app-body-large-font));line-height:var(--mat-form-field-container-text-line-height, var(--mat-app-body-large-line-height));font-size:var(--mat-form-field-container-text-size, var(--mat-app-body-large-size));letter-spacing:var(--mat-form-field-container-text-tracking, var(--mat-app-body-large-tracking));font-weight:var(--mat-form-field-container-text-weight, var(--mat-app-body-large-weight))}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size)*var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%;z-index:0}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:0 12px;box-sizing:content-box}.mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-leading-icon-color, var(--mat-app-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-disabled-leading-icon-color)}.mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-trailing-icon-color, var(--mat-app-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-disabled-trailing-icon-color)}.mat-form-field-invalid .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-trailing-icon-color, var(--mat-app-error))}.mat-form-field-invalid:not(.mat-focused):not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-hover-trailing-icon-color, var(--mat-app-on-error-container))}.mat-form-field-invalid.mat-focused .mat-mdc-text-field-wrapper .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-focus-trailing-icon-color, var(--mat-app-error))}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::-moz-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::-webkit-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[wB.transitionMessages]},changeDetection:0});let n=t;return n})(),ir=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=it({type:t}),t.\u0275inj=et({imports:[te,ie,vm,te]});let n=t;return n})();var UD=Nr({passive:!0}),BD=(()=>{let t=class t{constructor(i,r){this._platform=i,this._ngZone=r,this._monitoredElements=new Map}monitor(i){if(!this._platform.isBrowser)return nn;let r=Di(i),s=this._monitoredElements.get(r);if(s)return s.subject;let o=new Et,a="cdk-text-field-autofilled",c=d=>{d.animationName==="cdk-text-field-autofill-start"&&!r.classList.contains(a)?(r.classList.add(a),this._ngZone.run(()=>o.next({target:d.target,isAutofilled:!0}))):d.animationName==="cdk-text-field-autofill-end"&&r.classList.contains(a)&&(r.classList.remove(a),this._ngZone.run(()=>o.next({target:d.target,isAutofilled:!1})))};return this._ngZone.runOutsideAngular(()=>{r.addEventListener("animationstart",c,UD),r.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(r,{subject:o,unlisten:()=>{r.removeEventListener("animationstart",c,UD)}}),o}stopMonitoring(i){let r=Di(i),s=this._monitoredElements.get(r);s&&(s.unlisten(),s.subject.complete(),r.classList.remove("cdk-text-field-autofill-monitored"),r.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(r))}ngOnDestroy(){this._monitoredElements.forEach((i,r)=>this.stopMonitoring(r))}};t.\u0275fac=function(r){return new(r||t)(k(ae),k(rt))},t.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var zD=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=it({type:t}),t.\u0275inj=et({});let n=t;return n})();var AB=new G("MAT_INPUT_VALUE_ACCESSOR"),SB=["button","checkbox","file","hidden","image","radio","range","reset","submit"],kB=0,qD=(()=>{let t=class t{get disabled(){return this._disabled}set disabled(i){this._disabled=yi(i),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(i){this._id=i||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(Le.required)??!1}set required(i){this._required=yi(i)}get type(){return this._type}set type(i){this._type=i||"text",this._validateType(),!this._isTextarea&&Vv().has(this._type)&&(this._elementRef.nativeElement.type=this._type),this._ensureWheelDefaultBehavior()}get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(i){this._errorStateTracker.matcher=i}get value(){return this._inputValueAccessor.value}set value(i){i!==this.value&&(this._inputValueAccessor.value=i,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(i){this._readonly=yi(i)}get errorState(){return this._errorStateTracker.errorState}set errorState(i){this._errorStateTracker.errorState=i}constructor(i,r,s,o,a,c,d,u,m,p){this._elementRef=i,this._platform=r,this.ngControl=s,this._autofillMonitor=u,this._ngZone=m,this._formField=p,this._uid=`mat-input-${kB++}`,this._webkitBlinkWheelListenerAttached=!1,this.focused=!1,this.stateChanges=new Et,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(A=>Vv().has(A)),this._iOSKeyupListener=A=>{let x=A.target;!x.value&&x.selectionStart===0&&x.selectionEnd===0&&(x.setSelectionRange(1,1),x.setSelectionRange(0,0))},this._webkitBlinkWheelListener=()=>{};let _=this._elementRef.nativeElement,w=_.nodeName.toLowerCase();this._inputValueAccessor=d||_,this._previousNativeValue=this.value,this.id=this.id,r.IOS&&m.runOutsideAngular(()=>{i.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._errorStateTracker=new Im(c,s,a,o,this.stateChanges),this._isServer=!this._platform.isBrowser,this._isNativeSelect=w==="select",this._isTextarea=w==="textarea",this._isInFormField=!!p,this._isNativeSelect&&(this.controlType=_.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(i=>{this.autofilled=i.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener),this._webkitBlinkWheelListenerAttached&&this._elementRef.nativeElement.removeEventListener("wheel",this._webkitBlinkWheelListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==null&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(i){this._elementRef.nativeElement.focus(i)}updateErrorState(){this._errorStateTracker.updateErrorState()}_focusChanged(i){i!==this.focused&&(this.focused=i,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){let i=this._elementRef.nativeElement.value;this._previousNativeValue!==i&&(this._previousNativeValue=i,this.stateChanges.next())}_dirtyCheckPlaceholder(){let i=this._getPlaceholder();if(i!==this._previousPlaceholder){let r=this._elementRef.nativeElement;this._previousPlaceholder=i,i?r.setAttribute("placeholder",i):r.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){SB.indexOf(this._type)>-1}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let i=this._elementRef.nativeElement.validity;return i&&i.badInput}get empty(){return!this._isNeverEmpty()&&!this._elementRef.nativeElement.value&&!this._isBadInput()&&!this.autofilled}get shouldLabelFloat(){if(this._isNativeSelect){let i=this._elementRef.nativeElement,r=i.options[0];return this.focused||i.multiple||!this.empty||!!(i.selectedIndex>-1&&r&&r.label)}else return this.focused||!this.empty}setDescribedByIds(i){i.length?this._elementRef.nativeElement.setAttribute("aria-describedby",i.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){let i=this._elementRef.nativeElement;return this._isNativeSelect&&(i.multiple||i.size>1)}_ensureWheelDefaultBehavior(){!this._webkitBlinkWheelListenerAttached&&this._type==="number"&&(this._platform.BLINK||this._platform.WEBKIT)&&(this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("wheel",this._webkitBlinkWheelListener)}),this._webkitBlinkWheelListenerAttached=!0),this._webkitBlinkWheelListenerAttached&&this._type!=="number"&&(this._elementRef.nativeElement.removeEventListener("wheel",this._webkitBlinkWheelListener),this._webkitBlinkWheelListenerAttached=!0)}};t.\u0275fac=function(r){return new(r||t)(N(Ct),N(ae),N(Ds,10),N(vv,8),N(zn,8),N(MA),N(AB,10),N(BD),N(rt),N(rw,8))},t.\u0275dir=ht({type:t,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(r,s){r&1&&Nt("focus",function(){return s._focusChanged(!0)})("blur",function(){return s._focusChanged(!1)})("input",function(){return s._onInput()}),r&2&&(Wo("id",s.id)("disabled",s.disabled)("required",s.required),Vt("name",s.name||null)("readonly",s.readonly&&!s._isNativeSelect||null)("aria-invalid",s.empty&&s.required?null:s.errorState)("aria-required",s.required)("id",s.id),Bt("mat-input-server",s._isServer)("mat-mdc-form-field-textarea-control",s._isInFormField&&s._isTextarea)("mat-mdc-form-field-input-control",s._isInFormField)("mdc-text-field__input",s._isInFormField)("mat-mdc-native-select-inline",s._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],standalone:!0,features:[li([{provide:nw,useExisting:t}]),sn]});let n=t;return n})(),vc=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=it({type:t}),t.\u0275inj=et({imports:[te,ir,ir,zD,te]});let n=t;return n})();var GD=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=it({type:t}),t.\u0275inj=et({imports:[te,te]});let n=t;return n})();var DB=["*"],PB='.mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item{display:flex;position:relative;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer;padding-left:16px;padding-right:16px;background-color:var(--mdc-list-list-item-container-color);border-radius:var(--mdc-list-list-item-container-shape, var(--mat-app-corner-none))}.mdc-list-item.mdc-list-item--selected{background-color:var(--mdc-list-list-item-selected-container-color)}.mdc-list-item:focus{outline:0}.mdc-list-item.mdc-list-item--disabled{cursor:auto}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mdc-list-list-item-one-line-container-height)}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mdc-list-list-item-two-line-container-height)}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mdc-list-list-item-three-line-container-height)}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--selected::before,.mdc-list-item.mdc-list-item--selected:focus::before,.mdc-list-item:not(.mdc-list-item--selected):focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.cdk-high-contrast-active .mdc-list-item.mdc-list-item--selected::before,.cdk-high-contrast-active .mdc-list-item.mdc-list-item--selected:focus::before,.cdk-high-contrast-active .mdc-list-item:not(.mdc-list-item--selected):focus::before{border-color:CanvasText}.mdc-list-item.mdc-list-item--selected:focus::before,.mdc-list-item.mdc-list-item--selected::before{border-width:3px;border-style:double}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-leading-icon-color, var(--mat-app-on-surface-variant));width:var(--mdc-list-list-item-leading-icon-size);height:var(--mdc-list-list-item-leading-icon-size);margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mdc-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mdc-list-list-item-leading-avatar-size);height:var(--mdc-list-list-item-leading-avatar-size);margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item--with-leading-avatar .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mdc-list-list-item-trailing-supporting-text-font, var(--mat-app-label-small-font));line-height:var(--mdc-list-list-item-trailing-supporting-text-line-height, var(--mat-app-label-small-line-height));font-size:var(--mdc-list-list-item-trailing-supporting-text-size, var(--mat-app-label-small-size));font-weight:var(--mdc-list-list-item-trailing-supporting-text-weight, var(--mat-app-label-small-weight));letter-spacing:var(--mdc-list-list-item-trailing-supporting-text-tracking, var(--mat-app-label-small-tracking))}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-icon-color, var(--mat-app-on-surface-variant));width:var(--mdc-list-list-item-trailing-icon-size);height:var(--mdc-list-list-item-trailing-icon-size)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mdc-list-list-item-hover-trailing-icon-color)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-supporting-text-color, var(--mat-app-on-surface-variant))}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-selected-trailing-icon-color, var(--mat-app-primary))}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;color:var(--mdc-list-list-item-label-text-color, var(--mat-app-on-surface));font-family:var(--mdc-list-list-item-label-text-font, var(--mat-app-body-large-font));line-height:var(--mdc-list-list-item-label-text-line-height, var(--mat-app-body-large-line-height));font-size:var(--mdc-list-list-item-label-text-size, var(--mat-app-body-large-size));font-weight:var(--mdc-list-list-item-label-text-weight, var(--mat-app-body-large-weight));letter-spacing:var(--mdc-list-list-item-label-text-tracking, var(--mat-app-body-large-tracking))}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mdc-list-list-item-hover-label-text-color, var(--mat-app-on-surface))}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mdc-list-list-item-focus-label-text-color, var(--mat-app-on-surface))}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;color:var(--mdc-list-list-item-supporting-text-color, var(--mat-app-on-surface-variant));font-family:var(--mdc-list-list-item-supporting-text-font, var(--mat-app-body-medium-font));line-height:var(--mdc-list-list-item-supporting-text-line-height, var(--mat-app-body-medium-line-height));font-size:var(--mdc-list-list-item-supporting-text-size, var(--mat-app-body-medium-size));font-weight:var(--mdc-list-list-item-supporting-text-weight, var(--mat-app-body-medium-weight));letter-spacing:var(--mdc-list-list-item-supporting-text-tracking, var(--mat-app-body-medium-tracking))}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:16px}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:16px;padding-right:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-trailing-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:0;padding-right:0}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-webkit-user-select:none;user-select:none;margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;line-height:normal;align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-left:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-right:0}.mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-group__subheader{margin:.75rem 16px}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text{opacity:var(--mdc-list-list-item-disabled-label-text-opacity)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-disabled-leading-icon-color, var(--mat-app-on-surface));opacity:var(--mdc-list-list-item-disabled-leading-icon-opacity)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-disabled-trailing-icon-color, var(--mat-app-on-surface));opacity:var(--mdc-list-list-item-disabled-trailing-icon-opacity)}.mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing,[dir=rtl] .mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing{padding-left:0;padding-right:0}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mdc-list-list-item-disabled-label-text-color, var(--mat-app-on-surface))}.mdc-list-item:hover::before{background-color:var(--mdc-list-list-item-hover-state-layer-color, var(--mat-app-on-surface));opacity:var(--mdc-list-list-item-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mdc-list-list-item-disabled-state-layer-color, var(--mat-app-on-surface));opacity:var(--mdc-list-list-item-disabled-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mdc-list-item:focus::before{background-color:var(--mdc-list-list-item-focus-state-layer-color, var(--mat-app-on-surface));opacity:var(--mdc-list-list-item-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mdc-list-list-item-disabled-label-text-opacity)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mdc-list-list-item-leading-avatar-shape, var(--mat-app-corner-full));background-color:var(--mdc-list-list-item-leading-avatar-color, var(--mat-app-primary-container))}.mat-mdc-list-item-icon{font-size:var(--mdc-list-list-item-leading-icon-size)}.cdk-high-contrast-active a.mdc-list-item--activated::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:"";opacity:0;pointer-events:none}.mat-mdc-list-item>.mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus>.mat-mdc-focus-indicator::before{content:""}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:start}mat-action-list button::-moz-focus-inner{border:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-inline-start:var(--mat-list-list-item-leading-icon-start-space);margin-inline-end:var(--mat-list-list-item-leading-icon-end-space)}.mat-mdc-nav-list .mat-mdc-list-item{border-radius:var(--mat-list-active-indicator-shape, var(--mat-app-corner-full));--mat-mdc-focus-indicator-border-radius:var(--mat-list-active-indicator-shape, var(--mat-app-corner-full))}.mat-mdc-nav-list .mat-mdc-list-item.mdc-list-item--activated{background-color:var(--mat-list-active-indicator-color, var(--mat-app-secondary-container))}',MB=["unscopedContent"],NB=["text"],OB=[[["","matListItemAvatar",""],["","matListItemIcon",""]],[["","matListItemTitle",""]],[["","matListItemLine",""]],"*",[["","matListItemMeta",""]],[["mat-divider"]]],FB=["[matListItemAvatar],[matListItemIcon]","[matListItemTitle]","[matListItemLine]","*","[matListItemMeta]","mat-divider"];var LB=new G("ListOption"),VB=(()=>{let t=class t{constructor(i){this._elementRef=i}};t.\u0275fac=function(r){return new(r||t)(N(Ct))},t.\u0275dir=ht({type:t,selectors:[["","matListItemTitle",""]],hostAttrs:[1,"mat-mdc-list-item-title","mdc-list-item__primary-text"],standalone:!0});let n=t;return n})(),jB=(()=>{let t=class t{constructor(i){this._elementRef=i}};t.\u0275fac=function(r){return new(r||t)(N(Ct))},t.\u0275dir=ht({type:t,selectors:[["","matListItemLine",""]],hostAttrs:[1,"mat-mdc-list-item-line","mdc-list-item__secondary-text"],standalone:!0});let n=t;return n})(),UB=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=ht({type:t,selectors:[["","matListItemMeta",""]],hostAttrs:[1,"mat-mdc-list-item-meta","mdc-list-item__end"],standalone:!0});let n=t;return n})(),$D=(()=>{let t=class t{constructor(i){this._listOption=i}_isAlignedAtStart(){return!this._listOption||this._listOption?._getTogglePosition()==="after"}};t.\u0275fac=function(r){return new(r||t)(N(LB,8))},t.\u0275dir=ht({type:t,hostVars:4,hostBindings:function(r,s){r&2&&Bt("mdc-list-item__start",s._isAlignedAtStart())("mdc-list-item__end",!s._isAlignedAtStart())},standalone:!0});let n=t;return n})(),BB=(()=>{let t=class t extends $D{};t.\u0275fac=(()=>{let i;return function(s){return(i||(i=Nn(t)))(s||t)}})(),t.\u0275dir=ht({type:t,selectors:[["","matListItemAvatar",""]],hostAttrs:[1,"mat-mdc-list-item-avatar"],standalone:!0,features:[Ge]});let n=t;return n})(),zB=(()=>{let t=class t extends $D{};t.\u0275fac=(()=>{let i;return function(s){return(i||(i=Nn(t)))(s||t)}})(),t.\u0275dir=ht({type:t,selectors:[["","matListItemIcon",""]],hostAttrs:[1,"mat-mdc-list-item-icon"],standalone:!0,features:[Ge]});let n=t;return n})(),qB=new G("MAT_LIST_CONFIG"),tp=(()=>{let t=class t{constructor(){this._isNonInteractive=!0,this._disableRipple=!1,this._disabled=!1,this._defaultOptions=B(qB,{optional:!0})}get disableRipple(){return this._disableRipple}set disableRipple(i){this._disableRipple=yi(i)}get disabled(){return this._disabled}set disabled(i){this._disabled=yi(i)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=ht({type:t,hostVars:1,hostBindings:function(r,s){r&2&&Vt("aria-disabled",s.disabled)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},standalone:!0});let n=t;return n})(),GB=(()=>{let t=class t{set lines(i){this._explicitLines=xa(i,null),this._updateItemLines(!1)}get disableRipple(){return this.disabled||this._disableRipple||this._noopAnimations||!!this._listBase?.disableRipple}set disableRipple(i){this._disableRipple=yi(i)}get disabled(){return this._disabled||!!this._listBase?.disabled}set disabled(i){this._disabled=yi(i)}get rippleDisabled(){return this.disableRipple||!!this.rippleConfig.disabled}constructor(i,r,s,o,a,c){this._elementRef=i,this._ngZone=r,this._listBase=s,this._platform=o,this._explicitLines=null,this._disableRipple=!1,this._disabled=!1,this._subscriptions=new Sn,this._rippleRenderer=null,this._hasUnscopedTextContent=!1,this.rippleConfig=a||{},this._hostElement=this._elementRef.nativeElement,this._isButtonElement=this._hostElement.nodeName.toLowerCase()==="button",this._noopAnimations=c==="NoopAnimations",s&&!s._isNonInteractive&&this._initInteractiveListItem(),this._isButtonElement&&!this._hostElement.hasAttribute("type")&&this._hostElement.setAttribute("type","button")}ngAfterViewInit(){this._monitorProjectedLinesAndTitle(),this._updateItemLines(!0)}ngOnDestroy(){this._subscriptions.unsubscribe(),this._rippleRenderer!==null&&this._rippleRenderer._removeTriggerEvents()}_hasIconOrAvatar(){return!!(this._avatars.length||this._icons.length)}_initInteractiveListItem(){this._hostElement.classList.add("mat-mdc-list-item-interactive"),this._rippleRenderer=new yd(this,this._ngZone,this._hostElement,this._platform),this._rippleRenderer.setupTriggerEvents(this._hostElement)}_monitorProjectedLinesAndTitle(){this._ngZone.runOutsideAngular(()=>{this._subscriptions.add(kn(this._lines.changes,this._titles.changes).subscribe(()=>this._updateItemLines(!1)))})}_updateItemLines(i){if(!this._lines||!this._titles||!this._unscopedContent)return;i&&this._checkDomForUnscopedTextContent();let r=this._explicitLines??this._inferLinesFromContent(),s=this._unscopedContent.nativeElement;if(this._hostElement.classList.toggle("mat-mdc-list-item-single-line",r<=1),this._hostElement.classList.toggle("mdc-list-item--with-one-line",r<=1),this._hostElement.classList.toggle("mdc-list-item--with-two-lines",r===2),this._hostElement.classList.toggle("mdc-list-item--with-three-lines",r===3),this._hasUnscopedTextContent){let o=this._titles.length===0&&r===1;s.classList.toggle("mdc-list-item__primary-text",o),s.classList.toggle("mdc-list-item__secondary-text",!o)}else s.classList.remove("mdc-list-item__primary-text"),s.classList.remove("mdc-list-item__secondary-text")}_inferLinesFromContent(){let i=this._titles.length+this._lines.length;return this._hasUnscopedTextContent&&(i+=1),i}_checkDomForUnscopedTextContent(){this._hasUnscopedTextContent=Array.from(this._unscopedContent.nativeElement.childNodes).filter(i=>i.nodeType!==i.COMMENT_NODE).some(i=>!!(i.textContent&&i.textContent.trim()))}};t.\u0275fac=function(r){return new(r||t)(N(Ct),N(rt),N(tp,8),N(ae),N(wd,8),N(Je,8))},t.\u0275dir=ht({type:t,contentQueries:function(r,s,o){if(r&1&&(gi(o,BB,4),gi(o,zB,4)),r&2){let a;Zt(a=Jt())&&(s._avatars=a),Zt(a=Jt())&&(s._icons=a)}},hostVars:4,hostBindings:function(r,s){r&2&&(Vt("aria-disabled",s.disabled)("disabled",s._isButtonElement&&s.disabled||null),Bt("mdc-list-item--disabled",s.disabled))},inputs:{lines:"lines",disableRipple:"disableRipple",disabled:"disabled"},standalone:!0});let n=t;return n})();var WD=(()=>{let t=class t extends tp{};t.\u0275fac=(()=>{let i;return function(s){return(i||(i=Nn(t)))(s||t)}})(),t.\u0275cmp=xt({type:t,selectors:[["mat-list"]],hostAttrs:[1,"mat-mdc-list","mat-mdc-list-base","mdc-list"],exportAs:["matList"],standalone:!0,features:[li([{provide:tp,useExisting:t}]),Ge,oe],ngContentSelectors:DB,decls:1,vars:0,template:function(r,s){r&1&&(ei(),Ot(0))},styles:[PB],encapsulation:2,changeDetection:0});let n=t;return n})(),HD=(()=>{let t=class t extends GB{get activated(){return this._activated}set activated(i){this._activated=yi(i)}constructor(i,r,s,o,a,c){super(i,r,s,o,a,c),this._activated=!1}_getAriaCurrent(){return this._hostElement.nodeName==="A"&&this._activated?"page":null}_hasBothLeadingAndTrailing(){return this._meta.length!==0&&(this._avatars.length!==0||this._icons.length!==0)}};t.\u0275fac=function(r){return new(r||t)(N(Ct),N(rt),N(tp,8),N(ae),N(wd,8),N(Je,8))},t.\u0275cmp=xt({type:t,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(r,s,o){if(r&1&&(gi(o,jB,5),gi(o,VB,5),gi(o,UB,5)),r&2){let a;Zt(a=Jt())&&(s._lines=a),Zt(a=Jt())&&(s._titles=a),Zt(a=Jt())&&(s._meta=a)}},viewQuery:function(r,s){if(r&1&&(ci(MB,5),ci(NB,5)),r&2){let o;Zt(o=Jt())&&(s._unscopedContent=o.first),Zt(o=Jt())&&(s._itemText=o.first)}},hostAttrs:[1,"mat-mdc-list-item","mdc-list-item"],hostVars:13,hostBindings:function(r,s){r&2&&(Vt("aria-current",s._getAriaCurrent()),Bt("mdc-list-item--activated",s.activated)("mdc-list-item--with-leading-avatar",s._avatars.length!==0)("mdc-list-item--with-leading-icon",s._icons.length!==0)("mdc-list-item--with-trailing-meta",s._meta.length!==0)("mat-mdc-list-item-both-leading-and-trailing",s._hasBothLeadingAndTrailing())("_mat-animation-noopable",s._noopAnimations))},inputs:{activated:"activated"},exportAs:["matListItem"],standalone:!0,features:[Ge,oe],ngContentSelectors:FB,decls:10,vars:0,consts:[["unscopedContent",""],[1,"mdc-list-item__content"],[1,"mat-mdc-list-item-unscoped-content",3,"cdkObserveContent"],[1,"mat-mdc-focus-indicator"]],template:function(r,s){if(r&1){let o=Fn();ei(OB),Ot(0),U(1,"span",1),Ot(2,1),Ot(3,2),U(4,"span",2,0),Nt("cdkObserveContent",function(){return Pn(o),Mn(s._updateItemLines(!0))}),Ot(6,3),z()(),Ot(7,4),Ot(8,5),vt(9,"div",3)}},dependencies:[pA],encapsulation:2,changeDetection:0});let n=t;return n})();var bc=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=it({type:t}),t.\u0275inj=et({imports:[vm,ie,te,Em,NA,GD]});let n=t;return n})();var WB=["*"],ep;function HB(){if(ep===void 0&&(ep=null,typeof window<"u")){let n=window;n.trustedTypes!==void 0&&(ep=n.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return ep}function uu(n){return HB()?.createHTML(n)||n}function KD(n){return Error(`Unable to find icon with the name "${n}"`)}function KB(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}function QD(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function YD(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}var nr=class{constructor(t,e,i){this.url=t,this.svgText=e,this.options=i}},QB=(()=>{let t=class t{constructor(i,r,s,o){this._httpClient=i,this._sanitizer=r,this._errorHandler=o,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=s}addSvgIcon(i,r,s){return this.addSvgIconInNamespace("",i,r,s)}addSvgIconLiteral(i,r,s){return this.addSvgIconLiteralInNamespace("",i,r,s)}addSvgIconInNamespace(i,r,s,o){return this._addSvgIconConfig(i,r,new nr(s,null,o))}addSvgIconResolver(i){return this._resolvers.push(i),this}addSvgIconLiteralInNamespace(i,r,s,o){let a=this._sanitizer.sanitize(ti.HTML,s);if(!a)throw YD(s);let c=uu(a);return this._addSvgIconConfig(i,r,new nr("",c,o))}addSvgIconSet(i,r){return this.addSvgIconSetInNamespace("",i,r)}addSvgIconSetLiteral(i,r){return this.addSvgIconSetLiteralInNamespace("",i,r)}addSvgIconSetInNamespace(i,r,s){return this._addSvgIconSetConfig(i,new nr(r,null,s))}addSvgIconSetLiteralInNamespace(i,r,s){let o=this._sanitizer.sanitize(ti.HTML,r);if(!o)throw YD(r);let a=uu(o);return this._addSvgIconSetConfig(i,new nr("",a,s))}registerFontClassAlias(i,r=i){return this._fontCssClassesByAlias.set(i,r),this}classNameForFontAlias(i){return this._fontCssClassesByAlias.get(i)||i}setDefaultFontSetClass(...i){return this._defaultFontSetClass=i,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(i){let r=this._sanitizer.sanitize(ti.RESOURCE_URL,i);if(!r)throw QD(i);let s=this._cachedIconsByUrl.get(r);return s?tt(ip(s)):this._loadSvgIconFromConfig(new nr(i,null)).pipe(qt(o=>this._cachedIconsByUrl.set(r,o)),X(o=>ip(o)))}getNamedSvgIcon(i,r=""){let s=XD(r,i),o=this._svgIconConfigs.get(s);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(r,i),o)return this._svgIconConfigs.set(s,o),this._getSvgFromConfig(o);let a=this._iconSetConfigs.get(r);return a?this._getSvgFromIconSetConfigs(i,a):bs(KD(s))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(i){return i.svgText?tt(ip(this._svgElementFromConfig(i))):this._loadSvgIconFromConfig(i).pipe(X(r=>ip(r)))}_getSvgFromIconSetConfigs(i,r){let s=this._extractIconWithNameFromAnySet(i,r);if(s)return tt(s);let o=r.filter(a=>!a.svgText).map(a=>this._loadSvgIconSetFromConfig(a).pipe(dr(c=>{let u=`Loading icon set URL: ${this._sanitizer.sanitize(ti.RESOURCE_URL,a.url)} failed: ${c.message}`;return this._errorHandler.handleError(new Error(u)),tt(null)})));return lh(o).pipe(X(()=>{let a=this._extractIconWithNameFromAnySet(i,r);if(!a)throw KD(i);return a}))}_extractIconWithNameFromAnySet(i,r){for(let s=r.length-1;s>=0;s--){let o=r[s];if(o.svgText&&o.svgText.toString().indexOf(i)>-1){let a=this._svgElementFromConfig(o),c=this._extractSvgIconFromSet(a,i,o.options);if(c)return c}}return null}_loadSvgIconFromConfig(i){return this._fetchIcon(i).pipe(qt(r=>i.svgText=r),X(()=>this._svgElementFromConfig(i)))}_loadSvgIconSetFromConfig(i){return i.svgText?tt(null):this._fetchIcon(i).pipe(qt(r=>i.svgText=r))}_extractSvgIconFromSet(i,r,s){let o=i.querySelector(`[id="${r}"]`);if(!o)return null;let a=o.cloneNode(!0);if(a.removeAttribute("id"),a.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(a,s);if(a.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(a),s);let c=this._svgElementFromString(uu("<svg></svg>"));return c.appendChild(a),this._setSvgAttributes(c,s)}_svgElementFromString(i){let r=this._document.createElement("DIV");r.innerHTML=i;let s=r.querySelector("svg");if(!s)throw Error("<svg> tag not found");return s}_toSvgElement(i){let r=this._svgElementFromString(uu("<svg></svg>")),s=i.attributes;for(let o=0;o<s.length;o++){let{name:a,value:c}=s[o];a!=="id"&&r.setAttribute(a,c)}for(let o=0;o<i.childNodes.length;o++)i.childNodes[o].nodeType===this._document.ELEMENT_NODE&&r.appendChild(i.childNodes[o].cloneNode(!0));return r}_setSvgAttributes(i,r){return i.setAttribute("fit",""),i.setAttribute("height","100%"),i.setAttribute("width","100%"),i.setAttribute("preserveAspectRatio","xMidYMid meet"),i.setAttribute("focusable","false"),r&&r.viewBox&&i.setAttribute("viewBox",r.viewBox),i}_fetchIcon(i){let{url:r,options:s}=i,o=s?.withCredentials??!1;if(!this._httpClient)throw KB();if(r==null)throw Error(`Cannot fetch icon from URL "${r}".`);let a=this._sanitizer.sanitize(ti.RESOURCE_URL,r);if(!a)throw QD(r);let c=this._inProgressUrlFetches.get(a);if(c)return c;let d=this._httpClient.get(a,{responseType:"text",withCredentials:o}).pipe(X(u=>uu(u)),Rn(()=>this._inProgressUrlFetches.delete(a)),uh());return this._inProgressUrlFetches.set(a,d),d}_addSvgIconConfig(i,r,s){return this._svgIconConfigs.set(XD(i,r),s),this}_addSvgIconSetConfig(i,r){let s=this._iconSetConfigs.get(i);return s?s.push(r):this._iconSetConfigs.set(i,[r]),this}_svgElementFromConfig(i){if(!i.svgElement){let r=this._svgElementFromString(i.svgText);this._setSvgAttributes(r,i.options),i.svgElement=r}return i.svgElement}_getIconConfigFromResolvers(i,r){for(let s=0;s<this._resolvers.length;s++){let o=this._resolvers[s](r,i);if(o)return YB(o)?new nr(o.url,null,o.options):new nr(o,null)}}};t.\u0275fac=function(r){return new(r||t)(k(Dl,8),k(Fl),k(kt,8),k(Is))},t.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function ip(n){return n.cloneNode(!0)}function XD(n,t){return n+":"+t}function YB(n){return!!(n.url&&n.options)}var XB=new G("MAT_ICON_DEFAULT_OPTIONS"),ZB=new G("mat-icon-location",{providedIn:"root",factory:JB});function JB(){let n=B(kt),t=n?n.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}var ZD=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],tz=ZD.map(n=>`[${n}]`).join(", "),ez=/^url\(['"]?#(.*?)['"]?\)$/,np=(()=>{let t=class t{get color(){return this._color||this._defaultColor}set color(i){this._color=i}get svgIcon(){return this._svgIcon}set svgIcon(i){i!==this._svgIcon&&(i?this._updateSvgIcon(i):this._svgIcon&&this._clearSvgElement(),this._svgIcon=i)}get fontSet(){return this._fontSet}set fontSet(i){let r=this._cleanupFontValue(i);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(i){let r=this._cleanupFontValue(i);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}constructor(i,r,s,o,a,c){this._elementRef=i,this._iconRegistry=r,this._location=o,this._errorHandler=a,this.inline=!1,this._previousFontSetClass=[],this._currentIconFetch=Sn.EMPTY,c&&(c.color&&(this.color=this._defaultColor=c.color),c.fontSet&&(this.fontSet=c.fontSet)),s||i.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(i){if(!i)return["",""];let r=i.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${i}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let i=this._elementsWithExternalReferences;if(i&&i.size){let r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(i){this._clearSvgElement();let r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(i),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(i)}_clearSvgElement(){let i=this._elementRef.nativeElement,r=i.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){let s=i.childNodes[r];(s.nodeType!==1||s.nodeName.toLowerCase()==="svg")&&s.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let i=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(s=>s.length>0);this._previousFontSetClass.forEach(s=>i.classList.remove(s)),r.forEach(s=>i.classList.add(s)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&i.classList.remove(this._previousFontIconClass),this.fontIcon&&i.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(i){return typeof i=="string"?i.trim().split(" ")[0]:i}_prependPathToReferences(i){let r=this._elementsWithExternalReferences;r&&r.forEach((s,o)=>{s.forEach(a=>{o.setAttribute(a.name,`url('${i}#${a.value}')`)})})}_cacheChildrenWithExternalReferences(i){let r=i.querySelectorAll(tz),s=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<r.length;o++)ZD.forEach(a=>{let c=r[o],d=c.getAttribute(a),u=d?d.match(ez):null;if(u){let m=s.get(c);m||(m=[],s.set(c,m)),m.push({name:a,value:u[1]})}})}_updateSvgIcon(i){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),i){let[r,s]=this._splitIconName(i);r&&(this._svgNamespace=r),s&&(this._svgName=s),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(s,r).pipe(fi(1)).subscribe(o=>this._setSvgElement(o),o=>{let a=`Error retrieving icon ${r}:${s}! ${o.message}`;this._errorHandler.handleError(new Error(a))})}}};t.\u0275fac=function(r){return new(r||t)(N(Ct),N(QB),zo("aria-hidden"),N(ZB),N(Is),N(XB,8))},t.\u0275cmp=xt({type:t,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(r,s){r&2&&(Vt("data-mat-icon-type",s._usingFontIcon()?"font":"svg")("data-mat-icon-name",s._svgName||s.fontIcon)("data-mat-icon-namespace",s._svgNamespace||s.fontSet)("fontIcon",s._usingFontIcon()?s.fontIcon:null),$e(s.color?"mat-"+s.color:""),Bt("mat-icon-inline",s.inline)("mat-icon-no-color",s.color!=="primary"&&s.color!=="accent"&&s.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",He],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],standalone:!0,features:[pi,oe],ngContentSelectors:WB,decls:1,vars:0,template:function(r,s){r&1&&(ei(),Ot(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0});let n=t;return n})(),rs=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=it({type:t}),t.\u0275inj=et({imports:[te,te]});let n=t;return n})();function iz(n,t){n&1&&(U(0,"mat-error"),dt(1," Todo text is required. "),z())}function nz(n,t){if(n&1){let e=Fn();U(0,"mat-list-item",8)(1,"div",9)(2,"mat-icon",10),dt(3,"check_circle"),z(),dt(4),U(5,"button",11),Nt("click",function(){let r=Pn(e).$implicit,s=St();return Mn(s.deleteTodo(r.id))}),U(6,"mat-icon",12),dt(7,"delete"),z()()()()}if(n&2){let e=t.$implicit;Y(4),on(" ",e.text," ")}}var yc=class yc{constructor(t,e){this.fb=t;this.todoService=e;this.todos=[];this.todoForm=this.fb.group({text:["",[Le.required]]})}ngOnInit(){this.loadTodos()}loadTodos(){this.todoService.getTodos().subscribe(t=>{this.todos=t})}addTodo(){if(this.todoForm.invalid)return;let t=this.todoForm.value.text;this.todoService.addTodo(t).then(()=>{this.todoForm.reset(),this.loadTodos()})}deleteTodo(t){this.todoService.deleteTodo(t).then(()=>{this.loadTodos()})}};yc.\u0275fac=function(e){return new(e||yc)(N(va),N(Zf))},yc.\u0275cmp=xt({type:yc,selectors:[["app-todo-list"]],decls:14,vars:4,consts:[[1,"container"],[3,"ngSubmit","formGroup"],["appearance","fill",1,"custom-mat-input"],["matInput","","formControlName","text","placeholder","Enter todo",2,"background-color","transparent !important","box-shadow","none !important"],[4,"ngIf"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[2,"margin-top","10px"],["style","margin-top: 20px;",4,"ngFor","ngForOf"],[2,"margin-top","20px"],[2,"display","flex","justify-content","space-between"],[2,"color","#22BB33"],["mat-icon-button","","aria-label","Delete todo",3,"click"],[2,"color","#f44336"]],template:function(e,i){if(e&1&&(U(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title"),dt(4,"Todo List"),z()(),U(5,"mat-card-content")(6,"form",1),Nt("ngSubmit",function(){return i.addTodo()}),U(7,"mat-form-field",2),vt(8,"input",3),_t(9,iz,2,0,"mat-error",4),z(),U(10,"button",5),dt(11,"Add Todo"),z()(),U(12,"mat-list",6),_t(13,nz,8,1,"mat-list-item",7),z()()()()),e&2){let r;Y(6),ot("formGroup",i.todoForm),Y(3),ot("ngIf",(r=i.todoForm.get("text"))==null?null:r.hasError("required")),Y(),ot("disabled",i.todoForm.invalid),Y(3),ot("ngForOf",i.todos)}},dependencies:[zx,Gi,_a,Sr,pa,ga,zn,Ps,ID,xD,TD,ED,jD,LD,qD,Fr,LA,WD,HD,np],styles:[".container[_ngcontent-%COMP%]{max-width:600px;margin:20px auto}mat-card[_ngcontent-%COMP%]{padding:20px;box-shadow:0 4px 8px #0000001a}mat-card-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700}mat-card-header[_ngcontent-%COMP%]{margin-bottom:20px}mat-form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}mat-list-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}mat-icon[_ngcontent-%COMP%]{margin-right:8px}button[mat-icon-button][_ngcontent-%COMP%]{margin-left:auto}"]});var rp=yc;var mo=class mo{constructor(t,e){this.authService=t;this.router=e}canActivate(){return this.authService.user$.pipe(fi(1),X(t=>!!t),qt(t=>{t||(console.log("Access denied - Redirecting to login"),this.router.navigate(["/login"]))}))}};mo.\u0275fac=function(e){return new(e||mo)(k(Mr),k(Re))},mo.\u0275prov=$({token:mo,factory:mo.\u0275fac,providedIn:"root"});var sp=mo;var wc=class wc{constructor(t,e,i){this.afAuth=t;this.router=e;this.toastr=i}logout(){this.afAuth.signOut().then(()=>{this.toastr.success("You have been logged out."),this.router.navigate(["/login"])}).catch(t=>{this.toastr.error("Logout failed","Error"),console.error("Error during logout:",t)})}};wc.\u0275fac=function(e){return new(e||wc)(N(Qi),N(Re),N(Pr))},wc.\u0275cmp=xt({type:wc,selectors:[["app-navbar"]],decls:8,vars:0,consts:[[1,"navbar",2,"padding","20px","box-shadow","0 8px 16px rgba(0, 0, 0, 0.1)"],[1,"navbar-container",2,"display","flex","justify-content","space-between"],["routerLink","/todos",1,"navbar-logo"],["mat-button","",1,"logout-button",3,"click"]],template:function(e,i){e&1&&(U(0,"nav",0)(1,"div",1)(2,"a",2),dt(3,"Todo App"),z(),U(4,"button",3),Nt("click",function(){return i.logout()}),U(5,"mat-icon"),dt(6,"exit_to_app"),z(),dt(7," Logout "),z()()())},dependencies:[fC,np,Fr],styles:[".navbar[_ngcontent-%COMP%]{color:#fff;padding:10px 20px;display:flex;justify-content:space-between;align-items:center}.navbar-container[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%}.navbar-logo[_ngcontent-%COMP%]{font-size:1.5rem;text-decoration:none;color:#000}.navbar-menu[_ngcontent-%COMP%]{list-style:none;display:flex;margin:0;padding:0}.navbar-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-right:20px}.navbar-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none}.navbar-actions[_ngcontent-%COMP%]{display:flex;align-items:center}.logout-button[_ngcontent-%COMP%]{background-color:#f44336;border:none;color:#fff;padding:10px 20px;cursor:pointer;border-radius:5px;font-size:1rem}.logout-button[_ngcontent-%COMP%]:hover{background-color:#d32f2f}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}.logout-button[_ngcontent-%COMP%]{color:#fff!important}.logout-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:5px}"]});var op=wc;var Ic=class Ic{};Ic.\u0275fac=function(e){return new(e||Ic)},Ic.\u0275cmp=xt({type:Ic,selectors:[["app-layout"]],decls:3,vars:0,consts:[[1,"layout-content"]],template:function(e,i){e&1&&(vt(0,"app-navbar"),U(1,"div",0),vt(2,"router-outlet"),z())},dependencies:[td,op],styles:[".layout-content[_ngcontent-%COMP%]{padding:20px}"]});var ap=Ic;var sz=[{path:"login",component:Tm},{path:"register",component:Cm},{path:"todos",component:ap,canActivate:[sp],children:[{path:"",component:rp}]},{path:"",redirectTo:"/login",pathMatch:"full"},{path:"**",redirectTo:"/login"}],fo=class fo{};fo.\u0275fac=function(e){return new(e||fo)},fo.\u0275mod=it({type:fo}),fo.\u0275inj=et({imports:[iv.forRoot(sz),iv]});var Ec=fo;var oz=["determinateSpinner"];function az(n,t){if(n&1&&(pr(),U(0,"svg",11),vt(1,"circle",12),z()),n&2){let e=St();Vt("viewBox",e._viewBox()),Y(),On("stroke-dasharray",e._strokeCircumference(),"px")("stroke-dashoffset",e._strokeCircumference()/2,"px")("stroke-width",e._circleStrokeWidth(),"%"),Vt("r",e._circleRadius())}}var cz=new G("mat-progress-spinner-default-options",{providedIn:"root",factory:lz});function lz(){return{diameter:t1}}var t1=100,dz=10,e1=(()=>{let t=class t{get color(){return this._color||this._defaultColor}set color(i){this._color=i}constructor(i,r,s){this._elementRef=i,this._defaultColor="primary",this._value=0,this._diameter=t1,this._noopAnimations=r==="NoopAnimations"&&!!s&&!s._forceAnimations,this.mode=i.nativeElement.nodeName.toLowerCase()==="mat-spinner"?"indeterminate":"determinate",s&&(s.color&&(this.color=this._defaultColor=s.color),s.diameter&&(this.diameter=s.diameter),s.strokeWidth&&(this.strokeWidth=s.strokeWidth))}get value(){return this.mode==="determinate"?this._value:0}set value(i){this._value=Math.max(0,Math.min(100,i||0))}get diameter(){return this._diameter}set diameter(i){this._diameter=i||0}get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(i){this._strokeWidth=i||0}_circleRadius(){return(this.diameter-dz)/2}_viewBox(){let i=this._circleRadius()*2+this.strokeWidth;return`0 0 ${i} ${i}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return this.mode==="determinate"?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}};t.\u0275fac=function(r){return new(r||t)(N(Ct),N(Je,8),N(cz))},t.\u0275cmp=xt({type:t,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(r,s){if(r&1&&ci(oz,5),r&2){let o;Zt(o=Jt())&&(s._determinateCircle=o.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(r,s){r&2&&(Vt("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow",s.mode==="determinate"?s.value:null)("mode",s.mode),$e("mat-"+s.color),On("width",s.diameter,"px")("height",s.diameter,"px")("--mdc-circular-progress-size",s.diameter+"px")("--mdc-circular-progress-active-indicator-width",s.diameter+"px"),Bt("_mat-animation-noopable",s._noopAnimations)("mdc-circular-progress--indeterminate",s.mode==="indeterminate"))},inputs:{color:"color",mode:"mode",value:[2,"value","value",_l],diameter:[2,"diameter","diameter",_l],strokeWidth:[2,"strokeWidth","strokeWidth",_l]},exportAs:["matProgressSpinner"],standalone:!0,features:[pi,oe],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(r,s){if(r&1&&(_t(0,az,2,8,"ng-template",null,0,gl),U(2,"div",2,1),pr(),U(4,"svg",3),vt(5,"circle",4),z()(),ws(),U(6,"div",5)(7,"div",6)(8,"div",7),fh(9,8),z(),U(10,"div",9),fh(11,8),z(),U(12,"div",10),fh(13,8),z()()()),r&2){let o=Ho(1);Y(4),Vt("viewBox",s._viewBox()),Y(),On("stroke-dasharray",s._strokeCircumference(),"px")("stroke-dashoffset",s._strokeDashOffset(),"px")("stroke-width",s._circleStrokeWidth(),"%"),Vt("r",s._circleRadius()),Y(4),ot("ngTemplateOutlet",o),Y(2),ot("ngTemplateOutlet",o),Y(2),ot("ngTemplateOutlet",o)}},dependencies:[yl],styles:[".mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mdc-circular-progress-active-indicator-width)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, var(--mat-app-primary))}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}"],encapsulation:2,changeDetection:0});let n=t;return n})();var i1=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=it({type:t}),t.\u0275inj=et({imports:[ie,te]});let n=t;return n})();function hz(n,t){n&1&&(U(0,"div",1),vt(1,"mat-spinner"),z())}var xc=class xc{constructor(t){this.spinnerService=t;this.isLoading=!1}ngOnInit(){this.spinnerService.isLoading.subscribe(t=>{this.isLoading=t})}};xc.\u0275fac=function(e){return new(e||xc)(N(gc))},xc.\u0275cmp=xt({type:xc,selectors:[["app-spinner"]],decls:1,vars:1,consts:[["class","spinner-overlay",4,"ngIf"],[1,"spinner-overlay"]],template:function(e,i){e&1&&_t(0,hz,2,0,"div",0),e&2&&ot("ngIf",i.isLoading)},dependencies:[Gi,e1],styles:[".spinner-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#ffffffb3;display:flex;align-items:center;justify-content:center;z-index:1000}"]});var cp=xc;var Tc=class Tc{constructor(){this.title="todo-app"}};Tc.\u0275fac=function(e){return new(e||Tc)},Tc.\u0275cmp=xt({type:Tc,selectors:[["app-root"]],decls:2,vars:0,template:function(e,i){e&1&&vt(0,"app-spinner")(1,"router-outlet")},dependencies:[td,cp]});var lp=Tc;var po=class po{};po.\u0275fac=function(e){return new(e||po)},po.\u0275mod=it({type:po}),po.\u0275inj=et({imports:[ie,ba,_c,ir,vc,Lr,bc,rs]});var dp=po;var go=class go{};go.\u0275fac=function(e){return new(e||go)},go.\u0275mod=it({type:go}),go.\u0275inj=et({imports:[ie,ba,_c,ir,vc,Lr,bc,rs]});var up=go;var _o=class _o{};_o.\u0275fac=function(e){return new(e||_o)},_o.\u0275mod=it({type:_o}),_o.\u0275inj=et({imports:[ie,dp,up,gT]});var hp=_o;var vo=class vo{};vo.\u0275fac=function(e){return new(e||vo)},vo.\u0275mod=it({type:vo}),vo.\u0275inj=et({imports:[ie,ba,_c,ir,vc,Lr,bc,rs]});var mp=vo;var bo=class bo{};bo.\u0275fac=function(e){return new(e||bo)},bo.\u0275mod=it({type:bo}),bo.\u0275inj=et({imports:[ie,mp]});var fp=bo;var n1={production:!1,firebaseConfig:{apiKey:"AIzaSyC4UeSv8sGWTMygLwLAV4jkkmcLb6RiPVE",authDomain:"todo-app-6b7f0.firebaseapp.com",projectId:"todo-app-6b7f0",storageBucket:"todo-app-6b7f0.appspot.com",messagingSenderId:"368569889793",appId:"1:368569889793:web:c10324e128cb9569cf7c00",measurementId:"G-5CELCBVM4N"}};var r1="@firebase/database",s1="1.0.7";var gI="";function _I(n){gI=n}var hw=class{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){e==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),ve(e))}get(t){let e=this.domStorage_.getItem(this.prefixedName_(t));return e==null?null:Th(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}};var mw=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){e==null?delete this.cache_[t]:this.cache_[t]=e}get(t){return Si(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}};var F1=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){let t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new hw(t)}}catch{}return new mw},wo=F1("localStorage"),fw=F1("sessionStorage");var kc=new br("@firebase/database"),L1=function(){let n=1;return function(){return n++}}(),V1=function(n){let t=eT(n),e=new tT;e.update(t);let i=e.digest();return Ih.encodeByteArray(i)},Ou=function(...n){let t="";for(let e=0;e<n.length;e++){let i=n[e];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?t+=Ou.apply(null,i):typeof i=="object"?t+=ve(i):t+=i,t+=" "}return t},Io=null,o1=!0,j1=function(n,t){q(!t||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(kc.logLevel=ki.VERBOSE,Io=kc.log.bind(kc),t&&fw.set("logging_enabled",!0)):typeof n=="function"?Io=n:(Io=null,fw.remove("logging_enabled"))},Pe=function(...n){if(o1===!0&&(o1=!1,Io===null&&fw.get("logging_enabled")===!0&&j1(!0)),Io){let t=Ou.apply(null,n);Io(t)}},Fu=function(n){return function(...t){Pe(n,...t)}},pw=function(...n){let t="FIREBASE INTERNAL ERROR: "+Ou(...n);kc.error(t)},In=function(...n){let t=`FIREBASE FATAL ERROR: ${Ou(...n)}`;throw kc.error(t),new Error(t)},Ye=function(...n){let t="FIREBASE WARNING: "+Ou(...n);kc.warn(t)},fz=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Ye("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},zp=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},pz=function(n){if(an()||document.readyState==="complete")n();else{let t=!1,e=function(){if(!document.body){setTimeout(e,Math.floor(10));return}t||(t=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&e()}),window.attachEvent("onload",e))}},cs="[MIN_NAME]",rr="[MAX_NAME]",xo=function(n,t){if(n===t)return 0;if(n===cs||t===rr)return-1;if(t===cs||n===rr)return 1;{let e=a1(n),i=a1(t);return e!==null?i!==null?e-i===0?n.length-t.length:e-i:-1:i!==null?1:n<t?-1:1}},gz=function(n,t){return n===t?0:n<t?-1:1},hu=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+ve(t))},vI=function(n){if(typeof n!="object"||n===null)return ve(n);let t=[];for(let i in n)t.push(i);t.sort();let e="{";for(let i=0;i<t.length;i++)i!==0&&(e+=","),e+=ve(t[i]),e+=":",e+=vI(n[t[i]]);return e+="}",e},U1=function(n,t){let e=n.length;if(e<=t)return[n];let i=[];for(let r=0;r<e;r+=t)r+t>e?i.push(n.substring(r,e)):i.push(n.substring(r,r+t));return i};function Me(n,t){for(let e in n)n.hasOwnProperty(e)&&t(e,n[e])}var B1=function(n){q(!zp(n),"Invalid JSON number");let t=11,e=52,i=(1<<t-1)-1,r,s,o,a,c;n===0?(s=0,o=0,r=1/n===-1/0?1:0):(r=n<0,n=Math.abs(n),n>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=a+i,o=Math.round(n*Math.pow(2,e-a)-Math.pow(2,e))):(s=0,o=Math.round(n/Math.pow(2,1-i-e))));let d=[];for(c=e;c;c-=1)d.push(o%2?1:0),o=Math.floor(o/2);for(c=t;c;c-=1)d.push(s%2?1:0),s=Math.floor(s/2);d.push(r?1:0),d.reverse();let u=d.join(""),m="";for(c=0;c<64;c+=8){let p=parseInt(u.substr(c,8),2).toString(16);p.length===1&&(p="0"+p),m=m+p}return m.toLowerCase()},_z=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},vz=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function bz(n,t){let e="Unknown Error";n==="too_big"?e="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?e="Client doesn't have permission to access the desired data.":n==="unavailable"&&(e="The service is unavailable");let i=new Error(n+" at "+t._path.toString()+": "+e);return i.code=n.toUpperCase(),i}var yz=new RegExp("^-?(0*)\\d{1,10}$"),wz=-2147483648,Iz=2147483647,a1=function(n){if(yz.test(n)){let t=Number(n);if(t>=wz&&t<=Iz)return t}return null},Vc=function(n){try{n()}catch(t){setTimeout(()=>{let e=t.stack||"";throw Ye("Exception was thrown by user callback.",e),t},Math.floor(0))}},Ez=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},gu=function(n,t){let e=setTimeout(n,t);return typeof e=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(e):typeof e=="object"&&e.unref&&e.unref(),e};var gw=class{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=e?.getImmediate({optional:!0}),this.appCheck||e?.get().then(i=>this.appCheck=i)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){var e;(e=this.appCheckProvider)===null||e===void 0||e.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){Ye(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var _w=class{constructor(t,e,i){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&e.code==="auth/token-not-initialized"?(Pe("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ye(t)}},_u=(()=>{class n{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}n.OWNER="owner";return n})(),gp="5",z1="v",q1="s",G1="r",$1="f",W1=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,H1="ls",K1="p",vw="ac",Q1="websocket",Y1="long_polling";var _p=class{constructor(t,e,i,r,s=!1,o="",a=!1,c=!1){this.secure=e,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=wo.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&wo.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){let t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${e}`}};function xz(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function X1(n,t,e){q(typeof t=="string","typeof type must == string"),q(typeof e=="object","typeof params must == object");let i;if(t===Q1)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(t===Y1)i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);xz(n)&&(e.ns=n.namespace);let r=[];return Me(e,(s,o)=>{r.push(s+"="+o)}),i+r.join("&")}var bw=class{constructor(){this.counters_={}}incrementCounter(t,e=1){Si(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return Hx(this.counters_)}};var sw={},ow={};function bI(n){let t=n.toString();return sw[t]||(sw[t]=new bw),sw[t]}function Tz(n,t){let e=n.toString();return ow[e]||(ow[e]=t()),ow[e]}var yw=class{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){let i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&Vc(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var c1="start",Cz="close",Az="pLPCommand",Sz="pRTLPCB",Z1="id",J1="pw",tP="ser",kz="cb",Rz="seg",Dz="ts",Pz="d",Mz="dframe",eP=1870,iP=30,Nz=eP-iP,Oz=25e3,Fz=3e4,wu=class n{constructor(t,e,i,r,s,o,a){this.connId=t,this.repoInfo=e,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Fu(t),this.stats_=bI(e),this.urlFn=c=>(this.appCheckToken&&(c[vw]=this.appCheckToken),X1(e,Y1,c))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new yw(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Fz)),pz(()=>{if(this.isClosed_)return;this.scriptTagHolder=new ww((...s)=>{let[o,a,c,d,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===c1)this.id=a,this.password=c;else if(o===Cz)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let i={};i[c1]="t",i[tP]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[kz]=this.scriptTagHolder.uniqueCallbackIdentifier),i[z1]=gp,this.transportSessionId&&(i[q1]=this.transportSessionId),this.lastSessionId&&(i[H1]=this.lastSessionId),this.applicationId&&(i[K1]=this.applicationId),this.appCheckToken&&(i[vw]=this.appCheckToken),typeof location<"u"&&location.hostname&&W1.test(location.hostname)&&(i[G1]=$1);let r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){n.forceAllow_=!0}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){return an()?!1:n.forceAllow_?!0:!n.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!_z()&&!vz()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){let e=ve(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);let i=Wx(e),r=U1(i,Nz);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if(an())return;this.myDisconnFrame=document.createElement("iframe");let i={};i[Mz]="t",i[Z1]=t,i[J1]=e,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){let e=ve(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}},ww=class n{constructor(t,e,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,an())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=L1(),window[Az+this.uniqueCallbackIdentifier]=t,window[Sz+this.uniqueCallbackIdentifier]=e,this.myIFrame=n.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Pe("frame writing exception"),a.stack&&Pe(a.stack),Pe(a)}}}static createIFrame_(){let t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||Pe("No IE domain setting required")}catch{let i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let t={};t[Z1]=this.myID,t[J1]=this.myPW,t[tP]=this.currentSerial;let e=this.urlFn(t),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+iP+i.length<=eP;){let o=this.pendingSegs.shift();i=i+"&"+Rz+r+"="+o.seg+"&"+Dz+r+"="+o.ts+"&"+Pz+r+"="+o.d,r++}return e=e+i,this.addLongPollTag_(e,this.currentSerial),!0}else return!1}enqueueSegment(t,e,i){this.pendingSegs.push({seg:t,ts:e,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);let i=()=>{this.outstandingRequests.delete(e),this.newRequest_()},r=setTimeout(i,Math.floor(Oz)),s=()=>{clearTimeout(r),i()};this.addTag(t,s)}addTag(t,e){an()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;let i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){let r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=()=>{Pe("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}};var Lz=16384,Vz=45e3,vp=null;typeof MozWebSocket<"u"?vp=MozWebSocket:typeof WebSocket<"u"&&(vp=WebSocket);var Ac=(()=>{class n{constructor(e,i,r,s,o,a,c){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Fu(this.connId),this.stats_=bI(i),this.connURL=n.connectionURL_(i,a,c,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(e,i,r,s,o){let a={};return a[z1]=gp,!an()&&typeof location<"u"&&location.hostname&&W1.test(location.hostname)&&(a[G1]=$1),i&&(a[q1]=i),r&&(a[H1]=r),s&&(a[vw]=s),o&&(a[K1]=o),X1(e,Q1,a)}open(e,i){this.onDisconnect=i,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,wo.set("previous_websocket_failure",!0);try{let r;if(an()){let s=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":`Firebase/${gp}/${gI}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(r.proxy={origin:a})}this.mySock=new vp(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");let s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");let s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){let i=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(i);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&vp!==null&&!n.forceDisallow_}static previouslyFailed(){return wo.isInMemoryStorage||wo.get("previous_websocket_failure")===!0}markConnectionHealthy(){wo.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){let i=this.frames.join("");this.frames=null;let r=Th(i);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(q(this.frames===null,"We already have a frame buffer"),e.length<=6){let i=Number(e);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;let i=e.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{let r=this.extractFrameCount_(i);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();let i=ve(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);let r=U1(i,Lz);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Vz))}sendString_(e){try{this.mySock.send(e)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4;return n})(),nP=(()=>{class n{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[wu,Ac]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){let i=Ac&&Ac.isAvailable(),r=i&&!Ac.previouslyFailed();if(e.webSocketOnly&&(i||Ye("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Ac];else{let s=this.transports_=[];for(let o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}n.globalTransportInitialized_=!1;return n})(),jz=6e4,Uz=5e3,Bz=10*1024,zz=100*1024,aw="t",l1="d",qz="s",d1="r",Gz="e",u1="o",h1="a",m1="n",f1="p",$z="h",Iw=class{constructor(t,e,i,r,s,o,a,c,d,u){this.id=t,this.repoInfo_=e,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=d,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Fu("c:"+this.id+":"),this.transportManager_=new nP(e),this.log_("Connection created"),this.start_()}start_(){let t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let e=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,i)},Math.floor(0));let r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=gu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>zz?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Bz?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){let e={t:"d",d:t};this.sendData_(e)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(aw in t){let e=t[aw];e===h1?this.upgradeIfSecondaryHealthy_():e===d1?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):e===u1&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){let e=hu("t",t),i=hu("d",t);if(e==="c")this.onSecondaryControl_(i);else if(e==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+e)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:f1,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:h1,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:m1,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){let e=hu("t",t),i=hu("d",t);e==="c"?this.onControl_(i):e==="d"&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){let e=hu(aw,t);if(l1 in t){let i=t[l1];if(e===$z){let r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(e===m1){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else e===qz?this.onConnectionShutdown_(i):e===d1?this.onReset_(i):e===Gz?pw("Server Error: "+i):e===u1?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):pw("Unknown control packet command: "+e)}}onHandshake_(t){let e=t.ts,i=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),gp!==i&&Ye("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let e=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,i),gu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(jz))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):gu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Uz))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:f1,d:{}}}))}onSecondaryConnectionLost_(){let t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(wo.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var bp=class{put(t,e,i,r){}merge(t,e,i,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,i){}onDisconnectMerge(t,e,i){}onDisconnectCancel(t,e){}reportStats(t){}};var yp=class{constructor(t){this.allowedEvents_=t,this.listeners_={},q(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){let i=[...this.listeners_[t]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,e)}}on(t,e,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:i});let r=this.getInitialEvent(t);r&&e.apply(i,r)}off(t,e,i){this.validateEventType_(t);let r=this.listeners_[t]||[];for(let s=0;s<r.length;s++)if(r[s].callback===e&&(!i||i===r[s].context)){r.splice(s,1);return}}validateEventType_(t){q(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}};var wp=class n extends yp{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!i_()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new n}getInitialEvent(t){return q(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}};var p1=32,g1=768,Lt=class{constructor(t,e){if(e===void 0){this.pieces_=t.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)this.pieces_[e]!==""&&(t+="/"+this.pieces_[e]);return t||"/"}};function Ft(){return new Lt("")}function bt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function ls(n){return n.pieces_.length-n.pieceNum_}function Wt(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new Lt(n.pieces_,t)}function yI(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Wz(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)n.pieces_[e]!==""&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}function Iu(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function rP(n){if(n.pieceNum_>=n.pieces_.length)return null;let t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new Lt(t,0)}function se(n,t){let e=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)e.push(n.pieces_[i]);if(t instanceof Lt)for(let i=t.pieceNum_;i<t.pieces_.length;i++)e.push(t.pieces_[i]);else{let i=t.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&e.push(i[r])}return new Lt(e,0)}function yt(n){return n.pieceNum_>=n.pieces_.length}function si(n,t){let e=bt(n),i=bt(t);if(e===null)return t;if(e===i)return si(Wt(n),Wt(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function Hz(n,t){let e=Iu(n,0),i=Iu(t,0);for(let r=0;r<e.length&&r<i.length;r++){let s=xo(e[r],i[r]);if(s!==0)return s}return e.length===i.length?0:e.length<i.length?-1:1}function wI(n,t){if(ls(n)!==ls(t))return!1;for(let e=n.pieceNum_,i=t.pieceNum_;e<=n.pieces_.length;e++,i++)if(n.pieces_[e]!==t.pieces_[i])return!1;return!0}function Li(n,t){let e=n.pieceNum_,i=t.pieceNum_;if(ls(n)>ls(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[i])return!1;++e,++i}return!0}var Ew=class{constructor(t,e){this.errorPrefix_=e,this.parts_=Iu(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=El(this.parts_[i]);sP(this)}};function Kz(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=El(t),sP(n)}function Qz(n){let t=n.parts_.pop();n.byteLength_-=El(t),n.parts_.length>0&&(n.byteLength_-=1)}function sP(n){if(n.byteLength_>g1)throw new Error(n.errorPrefix_+"has a key path longer than "+g1+" bytes ("+n.byteLength_+").");if(n.parts_.length>p1)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+p1+") or object contains a cycle "+yo(n))}function yo(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}var xw=class n extends yp{constructor(){super(["visible"]);let t,e;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{let i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new n}getInitialEvent(t){return q(t==="visible","Unknown event type: "+t),[this.visible_]}};var mu=1e3,Yz=60*5*1e3,_1=30*1e3,Xz=1.3,Zz=3e4,Jz="server_kill",v1=3,II=(()=>{class n extends bp{constructor(e,i,r,s,o,a,c,d){if(super(),this.repoInfo_=e,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=d,this.id=n.nextPersistentConnectionId_++,this.log_=Fu("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=mu,this.maxReconnectDelay_=Yz,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,d&&!an())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");xw.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&wp.getInstance().on("online",this.onOnline_,this)}sendRequest(e,i,r){let s=++this.requestNumber_,o={r:s,a:e,b:i};this.log_(ve(o)),q(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();let i=new ke,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?i.resolve(c):i.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),i.promise}listen(e,i,r,s){this.initConnection_();let o=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),q(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),q(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:i,query:e,tag:r};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(e){let i=this.outstandingGets_[e];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(e){let i=e.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);let o={p:r},a="q";e.tag&&(o.q=i._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(a,o,c=>{let d=c.d,u=c.s;n.warnOnListenWarnings_(d,i),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(u,d))})}static warnOnListenWarnings_(e,i){if(e&&typeof e=="object"&&Si(e,"w")){let r=vr(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){let s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',o=i._path.toString();Ye(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Zx(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=_1)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let e=this.authToken_,i=Xx(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{let o=s.s,a=s.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{let i=e.s,r=e.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(e,i){let r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),q(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,i)}sendUnlisten_(e,i,r,s){this.log_("Unlisten on "+e+" for "+i);let o={p:e},a="n";s&&(o.q=r,o.t=s),this.sendRequest(a,o)}onDisconnectPut(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:i,onComplete:r})}onDisconnectMerge(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:i,onComplete:r})}onDisconnectCancel(e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(e,i,r,s){let o={p:i,d:r};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(e,i,r,s){this.putInternal("p",e,i,r,s)}merge(e,i,r,s){this.putInternal("m",e,i,r,s)}putInternal(e,i,r,s,o){this.initConnection_();let a={p:i,d:r};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:e,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+i)}sendPut_(e){let i=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(i,r,o=>{this.log_(i+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(e){if(this.connected_){let i={c:e};this.log_("reportStats",i),this.sendRequest("s",i,r=>{if(r.s!=="ok"){let o=r.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ve(e));let i=e.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,i){this.log_("handleServerMessage",e,i),e==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):e==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):e==="c"?this.onListenRevoked_(i.p,i.q):e==="ac"?this.onAuthRevoked_(i.s,i.d):e==="apc"?this.onAppCheckRevoked_(i.s,i.d):e==="sd"?this.onSecurityDebugPacket_(i):pw("Unrecognized action received from server: "+ve(e)+`
Are you using the latest client?`)}onReady_(e,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){q(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=mu,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=mu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Zz&&(this.reconnectDelay_=mu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let e=new Date().getTime()-this.lastConnectionAttemptTime_,i=Math.max(0,this.reconnectDelay_-e);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Xz)}this.onConnectStatus_(!1)}establishConnection_(){return D(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let e=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,d=function(){c?c.close():(a=!0,r())},u=function(p){q(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(p)};this.realtime_={close:d,sendRequest:u};let m=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[p,_]=yield Promise.all([this.authTokenProvider_.getToken(m),this.appCheckTokenProvider_.getToken(m)]);a?Pe("getToken() completed but was canceled"):(Pe("getToken() completed. Creating connection."),this.authToken_=p&&p.accessToken,this.appCheckToken_=_&&_.token,c=new Iw(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,i,r,w=>{Ye(w+" ("+this.repoInfo_.toString()+")"),this.interrupt(Jz)},o))}catch(p){this.log_("Failed to get token: "+p),a||(this.repoInfo_.nodeAdmin&&Ye(p),d())}}})}interrupt(e){Pe("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Pe("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Ch(this.interruptReasons_)&&(this.reconnectDelay_=mu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){let i=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){let i=this.outstandingPuts_[e];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,i){let r;i?r=i.map(o=>vI(o)).join("$"):r="default";let s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,i){let r=new Lt(e).toString(),s;if(this.listens.has(r)){let o=this.listens.get(r);s=o.get(i),o.delete(i),o.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,i){Pe("Auth token revoked: "+e+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=v1&&(this.reconnectDelay_=_1,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,i){Pe("App check token revoked: "+e+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=v1&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let e of this.listens.values())for(let i of e.values())this.sendListen_(i);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){let e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){let e={},i="js";an()&&(this.repoInfo_.nodeAdmin?i="admin_node":i="node"),e["sdk."+i+"."+gI.replace(/\./g,"-")]=1,i_()?e["framework.cordova"]=1:Kx()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){let e=wp.getInstance().currentlyOnline();return Ch(this.interruptReasons_)&&e}}n.nextPersistentConnectionId_=0,n.nextConnectionId_=0;return n})(),It=class n{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new n(t,e)}};var Rc=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){let i=new It(cs,t),r=new It(cs,e);return this.compare(i,r)!==0}minPost(){return It.MIN}};var pp,Ip=class extends Rc{static get __EMPTY_NODE(){return pp}static set __EMPTY_NODE(t){pp=t}compare(t,e){return xo(t.name,e.name)}isDefinedOn(t){throw Zo("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return It.MIN}maxPost(){return new It(rr,pp)}makePost(t,e){return q(typeof t=="string","KeyIndex indexValue must always be a string."),new It(t,pp)}toString(){return".key"}},wn=new Ip;var Sc=class{constructor(t,e,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!t.isEmpty();)if(t=t,o=e?i(t.key,e):1,r&&(o*=-1),o<0)this.isReverse_?t=t.left:t=t.right;else if(o===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),e;if(this.resultGenerator_?e=this.resultGenerator_(t.key,t.value):e={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}},tn=(()=>{class n{constructor(e,i,r,s,o){this.key=e,this.value=i,this.color=r??n.RED,this.left=s??Vi.EMPTY_NODE,this.right=o??Vi.EMPTY_NODE}copy(e,i,r,s,o){return new n(e??this.key,i??this.value,r??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,r){let s=this,o=r(e,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(e,i,r),null):o===0?s=s.copy(null,i,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Vi.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,i){let r,s;if(r=this,i(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),i(e,r.key)===0){if(r.right.isEmpty())return Vi.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){let e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth_(){let e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})(),Tw=class{copy(t,e,i,r,s){return this}insert(t,e,i){return new tn(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Vi=class n{constructor(t,e=n.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new n(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,tn.BLACK,null,null))}remove(t){return new n(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,tn.BLACK,null,null))}get(t){let e,i=this.root_;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),e===0)return i.value;e<0?i=i.left:e>0&&(i=i.right)}return null}getPredecessorKey(t){let e,i=this.root_,r=null;for(;!i.isEmpty();)if(e=this.comparator_(t,i.key),e===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else e<0?i=i.left:e>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Sc(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new Sc(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new Sc(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new Sc(this.root_,null,this.comparator_,!0,t)}};Vi.EMPTY_NODE=new Tw;function t4(n,t){return xo(n.name,t.name)}function EI(n,t){return xo(n,t)}var Cw;function e4(n){Cw=n}var oP=function(n){return typeof n=="number"?"number:"+B1(n):"string:"+n},aP=function(n){if(n.isLeafNode()){let t=n.val();q(typeof t=="string"||typeof t=="number"||typeof t=="object"&&Si(t,".sv"),"Priority must be a string or number.")}else q(n===Cw||n.isEmpty(),"priority of unexpected type.");q(n===Cw||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var b1,Dc=(()=>{class n{constructor(e,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=i,this.lazyHash_=null,q(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),aP(this.priorityNode_)}static set __childrenNodeConstructor(e){b1=e}static get __childrenNodeConstructor(){return b1}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new n(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return yt(e)?this:bt(e)===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,i){return null}updateImmediateChild(e,i){return e===".priority"?this.updatePriority(i):i.isEmpty()&&e!==".priority"?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,i).updatePriority(this.priorityNode_)}updateChild(e,i){let r=bt(e);return r===null?i:i.isEmpty()&&r!==".priority"?this:(q(r!==".priority"||ls(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Wt(e),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,i){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+oP(this.priorityNode_.val())+":");let i=typeof this.value_;e+=i+":",i==="number"?e+=B1(this.value_):e+=this.value_,this.lazyHash_=V1(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof n.__childrenNodeConstructor?-1:(q(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){let i=typeof e.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),o=n.VALUE_TYPE_ORDER.indexOf(r);return q(s>=0,"Unknown leaf type: "+i),q(o>=0,"Unknown leaf type: "+r),s===o?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){let i=e;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}n.VALUE_TYPE_ORDER=["object","boolean","number","string"];return n})(),cP,lP;function i4(n){cP=n}function n4(n){lP=n}var Aw=class extends Rc{compare(t,e){let i=t.node.getPriority(),r=e.node.getPriority(),s=i.compareTo(r);return s===0?xo(t.name,e.name):s}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return It.MIN}maxPost(){return new It(rr,new Dc("[PRIORITY-POST]",lP))}makePost(t,e){let i=cP(t);return new It(e,new Dc("[PRIORITY-POST]",i))}toString(){return".priority"}},Qt=new Aw;var r4=Math.log(2),Sw=class{constructor(t){let e=s=>parseInt(Math.log(s)/r4,10),i=s=>parseInt(Array(s+1).join("1"),2);this.count=e(t+1),this.current_=this.count-1;let r=i(this.count);this.bits_=t+1&r}nextBitIsOne(){let t=!(this.bits_&1<<this.current_);return this.current_--,t}},Ep=function(n,t,e,i){n.sort(t);let r=function(c,d){let u=d-c,m,p;if(u===0)return null;if(u===1)return m=n[c],p=e?e(m):m,new tn(p,m.node,tn.BLACK,null,null);{let _=parseInt(u/2,10)+c,w=r(c,_),A=r(_+1,d);return m=n[_],p=e?e(m):m,new tn(p,m.node,tn.BLACK,w,A)}},s=function(c){let d=null,u=null,m=n.length,p=function(w,A){let x=m-w,V=m;m-=w;let H=r(x+1,V),j=n[x],Z=e?e(j):j;_(new tn(Z,j.node,A,null,H))},_=function(w){d?(d.left=w,d=w):(u=w,d=w)};for(let w=0;w<c.count;++w){let A=c.nextBitIsOne(),x=Math.pow(2,c.count-(w+1));A?p(x,tn.BLACK):(p(x,tn.BLACK),p(x,tn.RED))}return u},o=new Sw(n.length),a=s(o);return new Vi(i||t,a)};var cw,Cc={},Pc=class n{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return q(Cc&&Qt,"ChildrenNode.ts has not been loaded"),cw=cw||new n({".priority":Cc},{".priority":Qt}),cw}get(t){let e=vr(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Vi?e:null}hasIndex(t){return Si(this.indexSet_,t.toString())}addIndex(t,e){q(t!==wn,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let i=[],r=!1,s=e.getIterator(It.Wrap),o=s.getNext();for(;o;)r=r||t.isDefinedOn(o.node),i.push(o),o=s.getNext();let a;r?a=Ep(i,t.getCompare()):a=Cc;let c=t.toString(),d=Object.assign({},this.indexSet_);d[c]=t;let u=Object.assign({},this.indexes_);return u[c]=a,new n(u,d)}addToIndexes(t,e){let i=Il(this.indexes_,(r,s)=>{let o=vr(this.indexSet_,s);if(q(o,"Missing index implementation for "+s),r===Cc)if(o.isDefinedOn(t.node)){let a=[],c=e.getIterator(It.Wrap),d=c.getNext();for(;d;)d.name!==t.name&&a.push(d),d=c.getNext();return a.push(t),Ep(a,o.getCompare())}else return Cc;else{let a=e.get(t.name),c=r;return a&&(c=c.remove(new It(t.name,a))),c.insert(t,t.node)}});return new n(i,this.indexSet_)}removeFromIndexes(t,e){let i=Il(this.indexes_,r=>{if(r===Cc)return r;{let s=e.get(t.name);return s?r.remove(new It(t.name,s)):r}});return new n(i,this.indexSet_)}};var fu,ft=(()=>{class n{constructor(e,i,r){this.children_=e,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&aP(this.priorityNode_),this.children_.isEmpty()&&q(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return fu||(fu=new n(new Vi(EI),null,Pc.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||fu}updatePriority(e){return this.children_.isEmpty()?this:new n(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{let i=this.children_.get(e);return i===null?fu:i}}getChild(e){let i=bt(e);return i===null?this:this.getImmediateChild(i).getChild(Wt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,i){if(q(i,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(i);{let r=new It(e,i),s,o;i.isEmpty()?(s=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,i),o=this.indexMap_.addToIndexes(r,this.children_));let a=s.isEmpty()?fu:this.priorityNode_;return new n(s,a,o)}}updateChild(e,i){let r=bt(e);if(r===null)return i;{q(bt(e)!==".priority"||ls(e)===1,".priority must be the last token in a path");let s=this.getImmediateChild(r).updateChild(Wt(e),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;let i={},r=0,s=0,o=!0;if(this.forEachChild(Qt,(a,c)=>{i[a]=c.val(e),r++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!e&&o&&s<2*r){let a=[];for(let c in i)a[c]=i[c];return a}else return e&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+oP(this.getPriority().val())+":"),this.forEachChild(Qt,(i,r)=>{let s=r.hash();s!==""&&(e+=":"+i+":"+s)}),this.lazyHash_=e===""?"":V1(e)}return this.lazyHash_}getPredecessorChildName(e,i,r){let s=this.resolveIndex_(r);if(s){let o=s.getPredecessorKey(new It(e,i));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){let i=this.resolveIndex_(e);if(i){let r=i.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){let i=this.getFirstChildName(e);return i?new It(i,this.children_.get(i)):null}getLastChildName(e){let i=this.resolveIndex_(e);if(i){let r=i.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){let i=this.getLastChildName(e);return i?new It(i,this.children_.get(i)):null}forEachChild(e,i){let r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,i){let r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(e,s=>s);{let s=this.children_.getIteratorFrom(e.name,It.Wrap),o=s.peek();for(;o!=null&&i.compare(o,e)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,i){let r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(e,s=>s);{let s=this.children_.getReverseIteratorFrom(e.name,It.Wrap),o=s.peek();for(;o!=null&&i.compare(o,e)>0;)s.getNext(),o=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Lu?-1:0}withIndex(e){if(e===wn||this.indexMap_.hasIndex(e))return this;{let i=this.indexMap_.addIndex(e,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(e){return e===wn||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{let i=e;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){let r=this.getIterator(Qt),s=i.getIterator(Qt),o=r.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=r.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(e){return e===wn?null:this.indexMap_.get(e.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})(),kw=class extends ft{constructor(){super(new Vi(EI),ft.EMPTY_NODE,Pc.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return ft.EMPTY_NODE}isEmpty(){return!1}},Lu=new kw;Object.defineProperties(It,{MIN:{value:new It(cs,ft.EMPTY_NODE)},MAX:{value:new It(rr,Lu)}});Ip.__EMPTY_NODE=ft.EMPTY_NODE;Dc.__childrenNodeConstructor=ft;e4(Lu);n4(Lu);var s4=!0;function le(n,t=null){if(n===null)return ft.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(t=n[".priority"]),q(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){let e=n;return new Dc(e,le(t))}if(!(n instanceof Array)&&s4){let e=[],i=!1;if(Me(n,(o,a)=>{if(o.substring(0,1)!=="."){let c=le(a);c.isEmpty()||(i=i||!c.getPriority().isEmpty(),e.push(new It(o,c)))}}),e.length===0)return ft.EMPTY_NODE;let s=Ep(e,t4,o=>o.name,EI);if(i){let o=Ep(e,Qt.getCompare());return new ft(s,le(t),new Pc({".priority":o},{".priority":Qt}))}else return new ft(s,le(t),Pc.Default)}else{let e=ft.EMPTY_NODE;return Me(n,(i,r)=>{if(Si(n,i)&&i.substring(0,1)!=="."){let s=le(r);(s.isLeafNode()||!s.isEmpty())&&(e=e.updateImmediateChild(i,s))}}),e.updatePriority(le(t))}}i4(le);var Eu=class extends Rc{constructor(t){super(),this.indexPath_=t,q(!yt(t)&&bt(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){let i=this.extractChild(t.node),r=this.extractChild(e.node),s=i.compareTo(r);return s===0?xo(t.name,e.name):s}makePost(t,e){let i=le(t),r=ft.EMPTY_NODE.updateChild(this.indexPath_,i);return new It(e,r)}maxPost(){let t=ft.EMPTY_NODE.updateChild(this.indexPath_,Lu);return new It(rr,t)}toString(){return Iu(this.indexPath_,0).join("/")}};var Rw=class extends Rc{compare(t,e){let i=t.node.compareTo(e.node);return i===0?xo(t.name,e.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return It.MIN}maxPost(){return It.MAX}makePost(t,e){let i=le(t);return new It(e,i)}toString(){return".value"}},xI=new Rw;function dP(n){return{type:"value",snapshotNode:n}}function Mc(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function xu(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function Tu(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}function o4(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}var Cu=class{constructor(t){this.index_=t}updateChild(t,e,i,r,s,o){q(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=t.getImmediateChild(e);return a.getChild(r).equals(i.getChild(r))&&a.isEmpty()===i.isEmpty()||(o!=null&&(i.isEmpty()?t.hasChild(e)?o.trackChildChange(xu(e,a)):q(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Mc(e,i)):o.trackChildChange(Tu(e,i,a))),t.isLeafNode()&&i.isEmpty())?t:t.updateImmediateChild(e,i).withIndex(this.index_)}updateFullNode(t,e,i){return i!=null&&(t.isLeafNode()||t.forEachChild(Qt,(r,s)=>{e.hasChild(r)||i.trackChildChange(xu(r,s))}),e.isLeafNode()||e.forEachChild(Qt,(r,s)=>{if(t.hasChild(r)){let o=t.getImmediateChild(r);o.equals(s)||i.trackChildChange(Tu(r,s,o))}else i.trackChildChange(Mc(r,s))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?ft.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var xp=class n{constructor(t){this.indexedFilter_=new Cu(t.getIndex()),this.index_=t.getIndex(),this.startPost_=n.getStartPost_(t),this.endPost_=n.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){let e=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,i=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return e&&i}updateChild(t,e,i,r,s,o){return this.matches(new It(e,i))||(i=ft.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,i,r,s,o)}updateFullNode(t,e,i){e.isLeafNode()&&(e=ft.EMPTY_NODE);let r=e.withIndex(this.index_);r=r.updatePriority(ft.EMPTY_NODE);let s=this;return e.forEachChild(Qt,(o,a)=>{s.matches(new It(o,a))||(r=r.updateImmediateChild(o,ft.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){let e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){let e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}else return t.getIndex().maxPost()}};var Dw=class{constructor(t){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{let i=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=e=>{let i=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new xp(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,e,i,r,s,o){return this.rangedFilter_.matches(new It(e,i))||(i=ft.EMPTY_NODE),t.getImmediateChild(e).equals(i)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,i,r,s,o):this.fullLimitUpdateChild_(t,e,i,s,o)}updateFullNode(t,e,i){let r;if(e.isLeafNode()||e.isEmpty())r=ft.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<e.numChildren()&&e.isIndexed(this.index_)){r=ft.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){let a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))r=r.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{r=e.withIndex(this.index_),r=r.updatePriority(ft.EMPTY_NODE);let s;this.reverse_?s=r.getReverseIterator(this.index_):s=r.getIterator(this.index_);let o=0;for(;s.hasNext();){let a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:r=r.updateImmediateChild(a.name,ft.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,i,r,s){let o;if(this.reverse_){let m=this.index_.getCompare();o=(p,_)=>m(_,p)}else o=this.index_.getCompare();let a=t;q(a.numChildren()===this.limit_,"");let c=new It(e,i),d=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(e)){let m=a.getImmediateChild(e),p=r.getChildAfterChild(this.index_,d,this.reverse_);for(;p!=null&&(p.name===e||a.hasChild(p.name));)p=r.getChildAfterChild(this.index_,p,this.reverse_);let _=p==null?1:o(p,c);if(u&&!i.isEmpty()&&_>=0)return s?.trackChildChange(Tu(e,i,m)),a.updateImmediateChild(e,i);{s?.trackChildChange(xu(e,m));let A=a.updateImmediateChild(e,ft.EMPTY_NODE);return p!=null&&this.rangedFilter_.matches(p)?(s?.trackChildChange(Mc(p.name,p.node)),A.updateImmediateChild(p.name,p.node)):A}}else return i.isEmpty()?t:u&&o(d,c)>=0?(s!=null&&(s.trackChildChange(xu(d.name,d.node)),s.trackChildChange(Mc(e,i))),a.updateImmediateChild(e,i).updateImmediateChild(d.name,ft.EMPTY_NODE)):t}};var Au=class n{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Qt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return q(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return q(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:cs}hasEnd(){return this.endSet_}getIndexEndValue(){return q(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return q(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:rr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return q(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Qt}copy(){let t=new n;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}};function a4(n){return n.loadsAllData()?new Cu(n.getIndex()):n.hasLimit()?new Dw(n):new xp(n)}function c4(n,t){let e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="l",e}function l4(n,t){let e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="r",e}function Pw(n,t,e){let i=n.copy();return i.startSet_=!0,t===void 0&&(t=null),i.indexStartValue_=t,e!=null?(i.startNameSet_=!0,i.indexStartName_=e):(i.startNameSet_=!1,i.indexStartName_=""),i}function d4(n,t,e){let i;return n.index_===wn||e?i=Pw(n,t,e):i=Pw(n,t,rr),i.startAfterSet_=!0,i}function Mw(n,t,e){let i=n.copy();return i.endSet_=!0,t===void 0&&(t=null),i.indexEndValue_=t,e!==void 0?(i.endNameSet_=!0,i.indexEndName_=e):(i.endNameSet_=!1,i.indexEndName_=""),i}function u4(n,t,e){let i;return n.index_===wn||e?i=Mw(n,t,e):i=Mw(n,t,cs),i.endBeforeSet_=!0,i}function qp(n,t){let e=n.copy();return e.index_=t,e}function y1(n){let t={};if(n.isDefault())return t;let e;if(n.index_===Qt?e="$priority":n.index_===xI?e="$value":n.index_===wn?e="$key":(q(n.index_ instanceof Eu,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=ve(e),n.startSet_){let i=n.startAfterSet_?"startAfter":"startAt";t[i]=ve(n.indexStartValue_),n.startNameSet_&&(t[i]+=","+ve(n.indexStartName_))}if(n.endSet_){let i=n.endBeforeSet_?"endBefore":"endAt";t[i]=ve(n.indexEndValue_),n.endNameSet_&&(t[i]+=","+ve(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function w1(n){let t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_),t.sin=!n.startAfterSet_),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_),t.ein=!n.endBeforeSet_),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;e===""&&(n.isViewFromLeft()?e="l":e="r"),t.vf=e}return n.index_!==Qt&&(t.i=n.index_.toString()),t}var Nw=class n extends bp{constructor(t,e,i,r){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=Fu("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return e!==void 0?"tag$"+e:(q(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,i,r){let s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);let o=n.getListenId_(t,i),a={};this.listens_[o]=a;let c=y1(t._queryParams);this.restRequest_(s+".json",c,(d,u)=>{let m=u;if(d===404&&(m=null,d=null),d===null&&this.onDataUpdate_(s,m,!1,i),vr(this.listens_,o)===a){let p;d?d===401?p="permission_denied":p="rest_error:"+d:p="ok",r(p,null)}})}unlisten(t,e){let i=n.getListenId_(t,e);delete this.listens_[i]}get(t){let e=y1(t._queryParams),i=t._path.toString(),r=new ke;return this.restRequest_(i+".json",e,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(i,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(t){}restRequest_(t,e={},i){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(e.auth=r.accessToken),s&&s.token&&(e.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+Jx(e);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Th(a.responseText)}catch{Ye("Failed to parse JSON response for "+o+": "+a.responseText)}i(null,c)}else a.status!==401&&a.status!==404&&Ye("Got unsuccessful REST response for "+o+" Status: "+a.status),i(a.status);i=null}},a.open("GET",o,!0),a.send()})}};var Ow=class{constructor(){this.rootNode_=ft.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}};function Tp(){return{value:null,children:new Map}}function jc(n,t,e){if(yt(t))n.value=e,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(t,e);else{let i=bt(t);n.children.has(i)||n.children.set(i,Tp());let r=n.children.get(i);t=Wt(t),jc(r,t,e)}}function Fw(n,t){if(yt(t))return n.value=null,n.children.clear(),!0;if(n.value!==null){if(n.value.isLeafNode())return!1;{let e=n.value;return n.value=null,e.forEachChild(Qt,(i,r)=>{jc(n,new Lt(i),r)}),Fw(n,t)}}else if(n.children.size>0){let e=bt(t);return t=Wt(t),n.children.has(e)&&Fw(n.children.get(e),t)&&n.children.delete(e),n.children.size===0}else return!0}function Lw(n,t,e){n.value!==null?e(t,n.value):h4(n,(i,r)=>{let s=new Lt(t.toString()+"/"+i);Lw(r,s,e)})}function h4(n,t){n.children.forEach((e,i)=>{t(i,e)})}var Vw=class{constructor(t){this.collection_=t,this.last_=null}get(){let t=this.collection_.get(),e=Object.assign({},t);return this.last_&&Me(this.last_,(i,r)=>{e[i]=e[i]-r}),this.last_=t,e}};var I1=10*1e3,m4=30*1e3,f4=5*60*1e3,jw=class{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Vw(t);let i=I1+(m4-I1)*Math.random();gu(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){let t=this.statsListener_.get(),e={},i=!1;Me(t,(r,s)=>{s>0&&Si(this.statsToReport_,r)&&(e[r]=s,i=!0)}),i&&this.server_.reportStats(e),gu(this.reportStats_.bind(this),Math.floor(Math.random()*2*f4))}};var yn=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(yn||{});function TI(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function CI(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function AI(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}var Uw=class n{constructor(t,e,i){this.path=t,this.affectedTree=e,this.revert=i,this.type=yn.ACK_USER_WRITE,this.source=TI()}operationForChild(t){if(yt(this.path)){if(this.affectedTree.value!=null)return q(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let e=this.affectedTree.subtree(new Lt(t));return new n(Ft(),e,this.revert)}}else return q(bt(this.path)===t,"operationForChild called for unrelated child."),new n(Wt(this.path),this.affectedTree,this.revert)}};var Cp=class n{constructor(t,e){this.source=t,this.path=e,this.type=yn.LISTEN_COMPLETE}operationForChild(t){return yt(this.path)?new n(this.source,Ft()):new n(this.source,Wt(this.path))}};var Nc=class n{constructor(t,e,i){this.source=t,this.path=e,this.snap=i,this.type=yn.OVERWRITE}operationForChild(t){return yt(this.path)?new n(this.source,Ft(),this.snap.getImmediateChild(t)):new n(this.source,Wt(this.path),this.snap)}};var Su=class n{constructor(t,e,i){this.source=t,this.path=e,this.children=i,this.type=yn.MERGE}operationForChild(t){if(yt(this.path)){let e=this.children.subtree(new Lt(t));return e.isEmpty()?null:e.value?new Nc(this.source,Ft(),e.value):new n(this.source,Ft(),e)}else return q(bt(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new n(this.source,Wt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var En=class{constructor(t,e,i){this.node_=t,this.fullyInitialized_=e,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(yt(t))return this.isFullyInitialized()&&!this.filtered_;let e=bt(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}};var Bw=class{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}};function p4(n,t,e,i){let r=[],s=[];return t.forEach(o=>{o.type==="child_changed"&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(o4(o.childName,o.snapshotNode))}),pu(n,r,"child_removed",t,i,e),pu(n,r,"child_added",t,i,e),pu(n,r,"child_moved",s,i,e),pu(n,r,"child_changed",t,i,e),pu(n,r,"value",t,i,e),r}function pu(n,t,e,i,r,s){let o=i.filter(a=>a.type===e);o.sort((a,c)=>_4(n,a,c)),o.forEach(a=>{let c=g4(n,a,s);r.forEach(d=>{d.respondsTo(a.type)&&t.push(d.createEvent(c,n.query_))})})}function g4(n,t,e){return t.type==="value"||t.type==="child_removed"||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}function _4(n,t,e){if(t.childName==null||e.childName==null)throw Zo("Should only compare child_ events.");let i=new It(t.childName,t.snapshotNode),r=new It(e.childName,e.snapshotNode);return n.index_.compare(i,r)}function Gp(n,t){return{eventCache:n,serverCache:t}}function vu(n,t,e,i){return Gp(new En(t,e,i),n.serverCache)}function uP(n,t,e,i){return Gp(n.eventCache,new En(t,e,i))}function Ap(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Eo(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}var lw,v4=()=>(lw||(lw=new Vi(gz)),lw),oi=class n{constructor(t,e=v4()){this.value=t,this.children=e}static fromObject(t){let e=new n(null);return Me(t,(i,r)=>{e=e.set(new Lt(i),r)}),e}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(this.value!=null&&e(this.value))return{path:Ft(),value:this.value};if(yt(t))return null;{let i=bt(t),r=this.children.get(i);if(r!==null){let s=r.findRootMostMatchingPathAndValue(Wt(t),e);return s!=null?{path:se(new Lt(i),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(yt(t))return this;{let e=bt(t),i=this.children.get(e);return i!==null?i.subtree(Wt(t)):new n(null)}}set(t,e){if(yt(t))return new n(e,this.children);{let i=bt(t),s=(this.children.get(i)||new n(null)).set(Wt(t),e),o=this.children.insert(i,s);return new n(this.value,o)}}remove(t){if(yt(t))return this.children.isEmpty()?new n(null):new n(null,this.children);{let e=bt(t),i=this.children.get(e);if(i){let r=i.remove(Wt(t)),s;return r.isEmpty()?s=this.children.remove(e):s=this.children.insert(e,r),this.value===null&&s.isEmpty()?new n(null):new n(this.value,s)}else return this}}get(t){if(yt(t))return this.value;{let e=bt(t),i=this.children.get(e);return i?i.get(Wt(t)):null}}setTree(t,e){if(yt(t))return e;{let i=bt(t),s=(this.children.get(i)||new n(null)).setTree(Wt(t),e),o;return s.isEmpty()?o=this.children.remove(i):o=this.children.insert(i,s),new n(this.value,o)}}fold(t){return this.fold_(Ft(),t)}fold_(t,e){let i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(se(t,r),e)}),e(t,this.value,i)}findOnPath(t,e){return this.findOnPath_(t,Ft(),e)}findOnPath_(t,e,i){let r=this.value?i(e,this.value):!1;if(r)return r;if(yt(t))return null;{let s=bt(t),o=this.children.get(s);return o?o.findOnPath_(Wt(t),se(e,s),i):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,Ft(),e)}foreachOnPath_(t,e,i){if(yt(t))return this;{this.value&&i(e,this.value);let r=bt(t),s=this.children.get(r);return s?s.foreachOnPath_(Wt(t),se(e,r),i):new n(null)}}foreach(t){this.foreach_(Ft(),t)}foreach_(t,e){this.children.inorderTraversal((i,r)=>{r.foreach_(se(t,i),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,i)=>{i.value&&t(e,i.value)})}};var en=class n{constructor(t){this.writeTree_=t}static empty(){return new n(new oi(null))}};function bu(n,t,e){if(yt(t))return new en(new oi(e));{let i=n.writeTree_.findRootMostValueAndPath(t);if(i!=null){let r=i.path,s=i.value,o=si(r,t);return s=s.updateChild(o,e),new en(n.writeTree_.set(r,s))}else{let r=new oi(e),s=n.writeTree_.setTree(t,r);return new en(s)}}}function zw(n,t,e){let i=n;return Me(e,(r,s)=>{i=bu(i,se(t,r),s)}),i}function E1(n,t){if(yt(t))return en.empty();{let e=n.writeTree_.setTree(t,new oi(null));return new en(e)}}function qw(n,t){return To(n,t)!=null}function To(n,t){let e=n.writeTree_.findRootMostValueAndPath(t);return e!=null?n.writeTree_.get(e.path).getChild(si(e.path,t)):null}function x1(n){let t=[],e=n.writeTree_.value;return e!=null?e.isLeafNode()||e.forEachChild(Qt,(i,r)=>{t.push(new It(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&t.push(new It(i,r.value))}),t}function os(n,t){if(yt(t))return n;{let e=To(n,t);return e!=null?new en(new oi(e)):new en(n.writeTree_.subtree(t))}}function Gw(n){return n.writeTree_.isEmpty()}function Oc(n,t){return hP(Ft(),n.writeTree_,t)}function hP(n,t,e){if(t.value!=null)return e.updateChild(n,t.value);{let i=null;return t.children.inorderTraversal((r,s)=>{r===".priority"?(q(s.value!==null,"Priority writes must always be leaf nodes"),i=s.value):e=hP(se(n,r),s,e)}),!e.getChild(n).isEmpty()&&i!==null&&(e=e.updateChild(se(n,".priority"),i)),e}}function $p(n,t){return gP(t,n)}function b4(n,t,e,i,r){q(i>n.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),n.allWrites.push({path:t,snap:e,writeId:i,visible:r}),r&&(n.visibleWrites=bu(n.visibleWrites,t,e)),n.lastWriteId=i}function y4(n,t,e,i){q(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:t,children:e,writeId:i,visible:!0}),n.visibleWrites=zw(n.visibleWrites,t,e),n.lastWriteId=i}function w4(n,t){for(let e=0;e<n.allWrites.length;e++){let i=n.allWrites[e];if(i.writeId===t)return i}return null}function I4(n,t){let e=n.allWrites.findIndex(a=>a.writeId===t);q(e>=0,"removeWrite called with nonexistent writeId.");let i=n.allWrites[e];n.allWrites.splice(e,1);let r=i.visible,s=!1,o=n.allWrites.length-1;for(;r&&o>=0;){let a=n.allWrites[o];a.visible&&(o>=e&&E4(a,i.path)?r=!1:Li(i.path,a.path)&&(s=!0)),o--}if(r){if(s)return x4(n),!0;if(i.snap)n.visibleWrites=E1(n.visibleWrites,i.path);else{let a=i.children;Me(a,c=>{n.visibleWrites=E1(n.visibleWrites,se(i.path,c))})}return!0}else return!1}function E4(n,t){if(n.snap)return Li(n.path,t);for(let e in n.children)if(n.children.hasOwnProperty(e)&&Li(se(n.path,e),t))return!0;return!1}function x4(n){n.visibleWrites=mP(n.allWrites,T4,Ft()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function T4(n){return n.visible}function mP(n,t,e){let i=en.empty();for(let r=0;r<n.length;++r){let s=n[r];if(t(s)){let o=s.path,a;if(s.snap)Li(e,o)?(a=si(e,o),i=bu(i,a,s.snap)):Li(o,e)&&(a=si(o,e),i=bu(i,Ft(),s.snap.getChild(a)));else if(s.children){if(Li(e,o))a=si(e,o),i=zw(i,a,s.children);else if(Li(o,e))if(a=si(o,e),yt(a))i=zw(i,Ft(),s.children);else{let c=vr(s.children,bt(a));if(c){let d=c.getChild(Wt(a));i=bu(i,Ft(),d)}}}else throw Zo("WriteRecord should have .snap or .children")}}return i}function fP(n,t,e,i,r){if(!i&&!r){let s=To(n.visibleWrites,t);if(s!=null)return s;{let o=os(n.visibleWrites,t);if(Gw(o))return e;if(e==null&&!qw(o,Ft()))return null;{let a=e||ft.EMPTY_NODE;return Oc(o,a)}}}else{let s=os(n.visibleWrites,t);if(!r&&Gw(s))return e;if(!r&&e==null&&!qw(s,Ft()))return null;{let o=function(d){return(d.visible||r)&&(!i||!~i.indexOf(d.writeId))&&(Li(d.path,t)||Li(t,d.path))},a=mP(n.allWrites,o,t),c=e||ft.EMPTY_NODE;return Oc(a,c)}}}function C4(n,t,e){let i=ft.EMPTY_NODE,r=To(n.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(Qt,(s,o)=>{i=i.updateImmediateChild(s,o)}),i;if(e){let s=os(n.visibleWrites,t);return e.forEachChild(Qt,(o,a)=>{let c=Oc(os(s,new Lt(o)),a);i=i.updateImmediateChild(o,c)}),x1(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}else{let s=os(n.visibleWrites,t);return x1(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}}function A4(n,t,e,i,r){q(i||r,"Either existingEventSnap or existingServerSnap must exist");let s=se(t,e);if(qw(n.visibleWrites,s))return null;{let o=os(n.visibleWrites,s);return Gw(o)?r.getChild(e):Oc(o,r.getChild(e))}}function S4(n,t,e,i){let r=se(t,e),s=To(n.visibleWrites,r);if(s!=null)return s;if(i.isCompleteForChild(e)){let o=os(n.visibleWrites,r);return Oc(o,i.getNode().getImmediateChild(e))}else return null}function k4(n,t){return To(n.visibleWrites,t)}function R4(n,t,e,i,r,s,o){let a,c=os(n.visibleWrites,t),d=To(c,Ft());if(d!=null)a=d;else if(e!=null)a=Oc(c,e);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let u=[],m=o.getCompare(),p=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o),_=p.getNext();for(;_&&u.length<r;)m(_,i)!==0&&u.push(_),_=p.getNext();return u}else return[]}function D4(){return{visibleWrites:en.empty(),allWrites:[],lastWriteId:-1}}function Sp(n,t,e,i){return fP(n.writeTree,n.treePath,t,e,i)}function SI(n,t){return C4(n.writeTree,n.treePath,t)}function T1(n,t,e,i){return A4(n.writeTree,n.treePath,t,e,i)}function kp(n,t){return k4(n.writeTree,se(n.treePath,t))}function P4(n,t,e,i,r,s){return R4(n.writeTree,n.treePath,t,e,i,r,s)}function kI(n,t,e){return S4(n.writeTree,n.treePath,t,e)}function pP(n,t){return gP(se(n.treePath,t),n.writeTree)}function gP(n,t){return{treePath:n,writeTree:t}}var $w=class{constructor(){this.changeMap=new Map}trackChildChange(t){let e=t.type,i=t.childName;q(e==="child_added"||e==="child_changed"||e==="child_removed","Only child changes supported for tracking"),q(i!==".priority","Only non-priority child changes can be tracked.");let r=this.changeMap.get(i);if(r){let s=r.type;if(e==="child_added"&&s==="child_removed")this.changeMap.set(i,Tu(i,t.snapshotNode,r.snapshotNode));else if(e==="child_removed"&&s==="child_added")this.changeMap.delete(i);else if(e==="child_removed"&&s==="child_changed")this.changeMap.set(i,xu(i,r.oldSnap));else if(e==="child_changed"&&s==="child_added")this.changeMap.set(i,Mc(i,t.snapshotNode));else if(e==="child_changed"&&s==="child_changed")this.changeMap.set(i,Tu(i,t.snapshotNode,r.oldSnap));else throw Zo("Illegal combination of changes: "+t+" occurred after "+r)}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}};var Ww=class{getCompleteChild(t){return null}getChildAfterChild(t,e,i){return null}},_P=new Ww,ku=class{constructor(t,e,i=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=i}getCompleteChild(t){let e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{let i=this.optCompleteServerCache_!=null?new En(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return kI(this.writes_,t,i)}}getChildAfterChild(t,e,i){let r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Eo(this.viewCache_),s=P4(this.writes_,r,e,1,i,t);return s.length===0?null:s[0]}};function M4(n){return{filter:n}}function N4(n,t){q(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),q(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function O4(n,t,e,i,r){let s=new $w,o,a;if(e.type===yn.OVERWRITE){let d=e;d.source.fromUser?o=Hw(n,t,d.path,d.snap,i,r,s):(q(d.source.fromServer,"Unknown source."),a=d.source.tagged||t.serverCache.isFiltered()&&!yt(d.path),o=Rp(n,t,d.path,d.snap,i,r,a,s))}else if(e.type===yn.MERGE){let d=e;d.source.fromUser?o=L4(n,t,d.path,d.children,i,r,s):(q(d.source.fromServer,"Unknown source."),a=d.source.tagged||t.serverCache.isFiltered(),o=Kw(n,t,d.path,d.children,i,r,a,s))}else if(e.type===yn.ACK_USER_WRITE){let d=e;d.revert?o=U4(n,t,d.path,i,r,s):o=V4(n,t,d.path,d.affectedTree,i,r,s)}else if(e.type===yn.LISTEN_COMPLETE)o=j4(n,t,e.path,i,s);else throw Zo("Unknown operation type: "+e.type);let c=s.getChanges();return F4(t,o,c),{viewCache:o,changes:c}}function F4(n,t,e){let i=t.eventCache;if(i.isFullyInitialized()){let r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=Ap(n);(e.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&e.push(dP(Ap(t)))}}function vP(n,t,e,i,r,s){let o=t.eventCache;if(kp(i,e)!=null)return t;{let a,c;if(yt(e))if(q(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){let d=Eo(t),u=d instanceof ft?d:ft.EMPTY_NODE,m=SI(i,u);a=n.filter.updateFullNode(t.eventCache.getNode(),m,s)}else{let d=Sp(i,Eo(t));a=n.filter.updateFullNode(t.eventCache.getNode(),d,s)}else{let d=bt(e);if(d===".priority"){q(ls(e)===1,"Can't have a priority with additional path components");let u=o.getNode();c=t.serverCache.getNode();let m=T1(i,e,u,c);m!=null?a=n.filter.updatePriority(u,m):a=o.getNode()}else{let u=Wt(e),m;if(o.isCompleteForChild(d)){c=t.serverCache.getNode();let p=T1(i,e,o.getNode(),c);p!=null?m=o.getNode().getImmediateChild(d).updateChild(u,p):m=o.getNode().getImmediateChild(d)}else m=kI(i,d,t.serverCache);m!=null?a=n.filter.updateChild(o.getNode(),d,m,u,r,s):a=o.getNode()}}return vu(t,a,o.isFullyInitialized()||yt(e),n.filter.filtersNodes())}}function Rp(n,t,e,i,r,s,o,a){let c=t.serverCache,d,u=o?n.filter:n.filter.getIndexedFilter();if(yt(e))d=u.updateFullNode(c.getNode(),i,null);else if(u.filtersNodes()&&!c.isFiltered()){let _=c.getNode().updateChild(e,i);d=u.updateFullNode(c.getNode(),_,null)}else{let _=bt(e);if(!c.isCompleteForPath(e)&&ls(e)>1)return t;let w=Wt(e),x=c.getNode().getImmediateChild(_).updateChild(w,i);_===".priority"?d=u.updatePriority(c.getNode(),x):d=u.updateChild(c.getNode(),_,x,w,_P,null)}let m=uP(t,d,c.isFullyInitialized()||yt(e),u.filtersNodes()),p=new ku(r,m,s);return vP(n,m,e,r,p,a)}function Hw(n,t,e,i,r,s,o){let a=t.eventCache,c,d,u=new ku(r,t,s);if(yt(e))d=n.filter.updateFullNode(t.eventCache.getNode(),i,o),c=vu(t,d,!0,n.filter.filtersNodes());else{let m=bt(e);if(m===".priority")d=n.filter.updatePriority(t.eventCache.getNode(),i),c=vu(t,d,a.isFullyInitialized(),a.isFiltered());else{let p=Wt(e),_=a.getNode().getImmediateChild(m),w;if(yt(p))w=i;else{let A=u.getCompleteChild(m);A!=null?yI(p)===".priority"&&A.getChild(rP(p)).isEmpty()?w=A:w=A.updateChild(p,i):w=ft.EMPTY_NODE}if(_.equals(w))c=t;else{let A=n.filter.updateChild(a.getNode(),m,w,p,u,o);c=vu(t,A,a.isFullyInitialized(),n.filter.filtersNodes())}}}return c}function C1(n,t){return n.eventCache.isCompleteForChild(t)}function L4(n,t,e,i,r,s,o){let a=t;return i.foreach((c,d)=>{let u=se(e,c);C1(t,bt(u))&&(a=Hw(n,a,u,d,r,s,o))}),i.foreach((c,d)=>{let u=se(e,c);C1(t,bt(u))||(a=Hw(n,a,u,d,r,s,o))}),a}function A1(n,t,e){return e.foreach((i,r)=>{t=t.updateChild(i,r)}),t}function Kw(n,t,e,i,r,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let c=t,d;yt(e)?d=i:d=new oi(null).setTree(e,i);let u=t.serverCache.getNode();return d.children.inorderTraversal((m,p)=>{if(u.hasChild(m)){let _=t.serverCache.getNode().getImmediateChild(m),w=A1(n,_,p);c=Rp(n,c,new Lt(m),w,r,s,o,a)}}),d.children.inorderTraversal((m,p)=>{let _=!t.serverCache.isCompleteForChild(m)&&p.value===null;if(!u.hasChild(m)&&!_){let w=t.serverCache.getNode().getImmediateChild(m),A=A1(n,w,p);c=Rp(n,c,new Lt(m),A,r,s,o,a)}}),c}function V4(n,t,e,i,r,s,o){if(kp(r,e)!=null)return t;let a=t.serverCache.isFiltered(),c=t.serverCache;if(i.value!=null){if(yt(e)&&c.isFullyInitialized()||c.isCompleteForPath(e))return Rp(n,t,e,c.getNode().getChild(e),r,s,a,o);if(yt(e)){let d=new oi(null);return c.getNode().forEachChild(wn,(u,m)=>{d=d.set(new Lt(u),m)}),Kw(n,t,e,d,r,s,a,o)}else return t}else{let d=new oi(null);return i.foreach((u,m)=>{let p=se(e,u);c.isCompleteForPath(p)&&(d=d.set(u,c.getNode().getChild(p)))}),Kw(n,t,e,d,r,s,a,o)}}function j4(n,t,e,i,r){let s=t.serverCache,o=uP(t,s.getNode(),s.isFullyInitialized()||yt(e),s.isFiltered());return vP(n,o,e,i,_P,r)}function U4(n,t,e,i,r,s){let o;if(kp(i,e)!=null)return t;{let a=new ku(i,t,r),c=t.eventCache.getNode(),d;if(yt(e)||bt(e)===".priority"){let u;if(t.serverCache.isFullyInitialized())u=Sp(i,Eo(t));else{let m=t.serverCache.getNode();q(m instanceof ft,"serverChildren would be complete if leaf node"),u=SI(i,m)}u=u,d=n.filter.updateFullNode(c,u,s)}else{let u=bt(e),m=kI(i,u,t.serverCache);m==null&&t.serverCache.isCompleteForChild(u)&&(m=c.getImmediateChild(u)),m!=null?d=n.filter.updateChild(c,u,m,Wt(e),a,s):t.eventCache.getNode().hasChild(u)?d=n.filter.updateChild(c,u,ft.EMPTY_NODE,Wt(e),a,s):d=c,d.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=Sp(i,Eo(t)),o.isLeafNode()&&(d=n.filter.updateFullNode(d,o,s)))}return o=t.serverCache.isFullyInitialized()||kp(i,Ft())!=null,vu(t,d,o,n.filter.filtersNodes())}}var Qw=class{constructor(t,e){this.query_=t,this.eventRegistrations_=[];let i=this.query_._queryParams,r=new Cu(i.getIndex()),s=a4(i);this.processor_=M4(s);let o=e.serverCache,a=e.eventCache,c=r.updateFullNode(ft.EMPTY_NODE,o.getNode(),null),d=s.updateFullNode(ft.EMPTY_NODE,a.getNode(),null),u=new En(c,o.isFullyInitialized(),r.filtersNodes()),m=new En(d,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=Gp(m,u),this.eventGenerator_=new Bw(this.query_)}get query(){return this.query_}};function B4(n){return n.viewCache_.serverCache.getNode()}function z4(n){return Ap(n.viewCache_)}function q4(n,t){let e=Eo(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!yt(t)&&!e.getImmediateChild(bt(t)).isEmpty())?e.getChild(t):null}function S1(n){return n.eventRegistrations_.length===0}function G4(n,t){n.eventRegistrations_.push(t)}function k1(n,t,e){let i=[];if(e){q(t==null,"A cancel should cancel all event registrations.");let r=n.query._path;n.eventRegistrations_.forEach(s=>{let o=s.createCancelEvent(e,r);o&&i.push(o)})}if(t){let r=[];for(let s=0;s<n.eventRegistrations_.length;++s){let o=n.eventRegistrations_[s];if(!o.matches(t))r.push(o);else if(t.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(s+1));break}}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function R1(n,t,e,i){t.type===yn.MERGE&&t.source.queryId!==null&&(q(Eo(n.viewCache_),"We should always have a full cache before handling merges"),q(Ap(n.viewCache_),"Missing event cache, even though we have a server cache"));let r=n.viewCache_,s=O4(n.processor_,r,t,e,i);return N4(n.processor_,s.viewCache),q(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,bP(n,s.changes,s.viewCache.eventCache.getNode(),null)}function $4(n,t){let e=n.viewCache_.eventCache,i=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Qt,(s,o)=>{i.push(Mc(s,o))}),e.isFullyInitialized()&&i.push(dP(e.getNode())),bP(n,i,e.getNode(),t)}function bP(n,t,e,i){let r=i?[i]:n.eventRegistrations_;return p4(n.eventGenerator_,t,e,r)}var Dp,Pp=class{constructor(){this.views=new Map}};function W4(n){q(!Dp,"__referenceConstructor has already been defined"),Dp=n}function H4(){return q(Dp,"Reference.ts has not been loaded"),Dp}function K4(n){return n.views.size===0}function RI(n,t,e,i){let r=t.source.queryId;if(r!==null){let s=n.views.get(r);return q(s!=null,"SyncTree gave us an op for an invalid query."),R1(s,t,e,i)}else{let s=[];for(let o of n.views.values())s=s.concat(R1(o,t,e,i));return s}}function yP(n,t,e,i,r){let s=t._queryIdentifier,o=n.views.get(s);if(!o){let a=Sp(e,r?i:null),c=!1;a?c=!0:i instanceof ft?(a=SI(e,i),c=!1):(a=ft.EMPTY_NODE,c=!1);let d=Gp(new En(a,c,!1),new En(i,r,!1));return new Qw(t,d)}return o}function Q4(n,t,e,i,r,s){let o=yP(n,t,i,r,s);return n.views.has(t._queryIdentifier)||n.views.set(t._queryIdentifier,o),G4(o,e),$4(o,e)}function Y4(n,t,e,i){let r=t._queryIdentifier,s=[],o=[],a=ds(n);if(r==="default")for(let[c,d]of n.views.entries())o=o.concat(k1(d,e,i)),S1(d)&&(n.views.delete(c),d.query._queryParams.loadsAllData()||s.push(d.query));else{let c=n.views.get(r);c&&(o=o.concat(k1(c,e,i)),S1(c)&&(n.views.delete(r),c.query._queryParams.loadsAllData()||s.push(c.query)))}return a&&!ds(n)&&s.push(new(H4())(t._repo,t._path)),{removed:s,events:o}}function wP(n){let t=[];for(let e of n.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function as(n,t){let e=null;for(let i of n.views.values())e=e||q4(i,t);return e}function IP(n,t){if(t._queryParams.loadsAllData())return Wp(n);{let i=t._queryIdentifier;return n.views.get(i)}}function EP(n,t){return IP(n,t)!=null}function ds(n){return Wp(n)!=null}function Wp(n){for(let t of n.views.values())if(t.query._queryParams.loadsAllData())return t;return null}var Mp;function X4(n){q(!Mp,"__referenceConstructor has already been defined"),Mp=n}function Z4(){return q(Mp,"Reference.ts has not been loaded"),Mp}var J4=1,Np=class{constructor(t){this.listenProvider_=t,this.syncPointTree_=new oi(null),this.pendingWriteTree_=D4(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function DI(n,t,e,i,r){return b4(n.pendingWriteTree_,t,e,i,r),r?Uc(n,new Nc(TI(),t,e)):[]}function tq(n,t,e,i){y4(n.pendingWriteTree_,t,e,i);let r=oi.fromObject(e);return Uc(n,new Su(TI(),t,r))}function ss(n,t,e=!1){let i=w4(n.pendingWriteTree_,t);if(I4(n.pendingWriteTree_,t)){let s=new oi(null);return i.snap!=null?s=s.set(Ft(),!0):Me(i.children,o=>{s=s.set(new Lt(o),!0)}),Uc(n,new Uw(i.path,s,e))}else return[]}function Vu(n,t,e){return Uc(n,new Nc(CI(),t,e))}function eq(n,t,e){let i=oi.fromObject(e);return Uc(n,new Su(CI(),t,i))}function iq(n,t){return Uc(n,new Cp(CI(),t))}function nq(n,t,e){let i=PI(n,e);if(i){let r=MI(i),s=r.path,o=r.queryId,a=si(s,t),c=new Cp(AI(o),a);return NI(n,s,c)}else return[]}function Op(n,t,e,i,r=!1){let s=t._path,o=n.syncPointTree_.get(s),a=[];if(o&&(t._queryIdentifier==="default"||EP(o,t))){let c=Y4(o,t,e,i);K4(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));let d=c.removed;if(a=c.events,!r){let u=d.findIndex(p=>p._queryParams.loadsAllData())!==-1,m=n.syncPointTree_.findOnPath(s,(p,_)=>ds(_));if(u&&!m){let p=n.syncPointTree_.subtree(s);if(!p.isEmpty()){let _=oq(p);for(let w=0;w<_.length;++w){let A=_[w],x=A.query,V=AP(n,A);n.listenProvider_.startListening(yu(x),Ru(n,x),V.hashFn,V.onComplete)}}}!m&&d.length>0&&!i&&(u?n.listenProvider_.stopListening(yu(t),null):d.forEach(p=>{let _=n.queryToTagMap.get(Kp(p));n.listenProvider_.stopListening(yu(p),_)}))}aq(n,d)}return a}function xP(n,t,e,i){let r=PI(n,i);if(r!=null){let s=MI(r),o=s.path,a=s.queryId,c=si(o,t),d=new Nc(AI(a),c,e);return NI(n,o,d)}else return[]}function rq(n,t,e,i){let r=PI(n,i);if(r){let s=MI(r),o=s.path,a=s.queryId,c=si(o,t),d=oi.fromObject(e),u=new Su(AI(a),c,d);return NI(n,o,u)}else return[]}function Yw(n,t,e,i=!1){let r=t._path,s=null,o=!1;n.syncPointTree_.foreachOnPath(r,(p,_)=>{let w=si(p,r);s=s||as(_,w),o=o||ds(_)});let a=n.syncPointTree_.get(r);a?(o=o||ds(a),s=s||as(a,Ft())):(a=new Pp,n.syncPointTree_=n.syncPointTree_.set(r,a));let c;s!=null?c=!0:(c=!1,s=ft.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((_,w)=>{let A=as(w,Ft());A&&(s=s.updateImmediateChild(_,A))}));let d=EP(a,t);if(!d&&!t._queryParams.loadsAllData()){let p=Kp(t);q(!n.queryToTagMap.has(p),"View does not exist, but we have a tag");let _=cq();n.queryToTagMap.set(p,_),n.tagToQueryMap.set(_,p)}let u=$p(n.pendingWriteTree_,r),m=Q4(a,t,e,u,s,c);if(!d&&!o&&!i){let p=IP(a,t);m=m.concat(lq(n,t,p))}return m}function Hp(n,t,e){let r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(t,(o,a)=>{let c=si(o,t),d=as(a,c);if(d)return d});return fP(r,t,s,e,!0)}function sq(n,t){let e=t._path,i=null;n.syncPointTree_.foreachOnPath(e,(d,u)=>{let m=si(d,e);i=i||as(u,m)});let r=n.syncPointTree_.get(e);r?i=i||as(r,Ft()):(r=new Pp,n.syncPointTree_=n.syncPointTree_.set(e,r));let s=i!=null,o=s?new En(i,!0,!1):null,a=$p(n.pendingWriteTree_,t._path),c=yP(r,t,a,s?o.getNode():ft.EMPTY_NODE,s);return z4(c)}function Uc(n,t){return TP(t,n.syncPointTree_,null,$p(n.pendingWriteTree_,Ft()))}function TP(n,t,e,i){if(yt(n.path))return CP(n,t,e,i);{let r=t.get(Ft());e==null&&r!=null&&(e=as(r,Ft()));let s=[],o=bt(n.path),a=n.operationForChild(o),c=t.children.get(o);if(c&&a){let d=e?e.getImmediateChild(o):null,u=pP(i,o);s=s.concat(TP(a,c,d,u))}return r&&(s=s.concat(RI(r,n,i,e))),s}}function CP(n,t,e,i){let r=t.get(Ft());e==null&&r!=null&&(e=as(r,Ft()));let s=[];return t.children.inorderTraversal((o,a)=>{let c=e?e.getImmediateChild(o):null,d=pP(i,o),u=n.operationForChild(o);u&&(s=s.concat(CP(u,a,c,d)))}),r&&(s=s.concat(RI(r,n,i,e))),s}function AP(n,t){let e=t.query,i=Ru(n,e);return{hashFn:()=>(B4(t)||ft.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return i?nq(n,e._path,i):iq(n,e._path);{let s=bz(r,e);return Op(n,e,null,s)}}}}function Ru(n,t){let e=Kp(t);return n.queryToTagMap.get(e)}function Kp(n){return n._path.toString()+"$"+n._queryIdentifier}function PI(n,t){return n.tagToQueryMap.get(t)}function MI(n){let t=n.indexOf("$");return q(t!==-1&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new Lt(n.substr(0,t))}}function NI(n,t,e){let i=n.syncPointTree_.get(t);q(i,"Missing sync point for query tag that we're tracking");let r=$p(n.pendingWriteTree_,t);return RI(i,e,r,null)}function oq(n){return n.fold((t,e,i)=>{if(e&&ds(e))return[Wp(e)];{let r=[];return e&&(r=wP(e)),Me(i,(s,o)=>{r=r.concat(o)}),r}})}function yu(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(Z4())(n._repo,n._path):n}function aq(n,t){for(let e=0;e<t.length;++e){let i=t[e];if(!i._queryParams.loadsAllData()){let r=Kp(i),s=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(s)}}}function cq(){return J4++}function lq(n,t,e){let i=t._path,r=Ru(n,t),s=AP(n,e),o=n.listenProvider_.startListening(yu(t),r,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(i);if(r)q(!ds(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((d,u,m)=>{if(!yt(d)&&u&&ds(u))return[Wp(u).query];{let p=[];return u&&(p=p.concat(wP(u).map(_=>_.query))),Me(m,(_,w)=>{p=p.concat(w)}),p}});for(let d=0;d<c.length;++d){let u=c[d];n.listenProvider_.stopListening(yu(u),Ru(n,u))}}return o}var Xw=class n{constructor(t){this.node_=t}getImmediateChild(t){let e=this.node_.getImmediateChild(t);return new n(e)}node(){return this.node_}},Zw=class n{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){let e=se(this.path_,t);return new n(this.syncTree_,e)}node(){return Hp(this.syncTree_,this.path_)}},dq=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},D1=function(n,t,e){if(!n||typeof n!="object")return n;if(q(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return uq(n[".sv"],t,e);if(typeof n[".sv"]=="object")return hq(n[".sv"],t);q(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},uq=function(n,t,e){switch(n){case"timestamp":return e.timestamp;default:q(!1,"Unexpected server value: "+n)}},hq=function(n,t,e){n.hasOwnProperty("increment")||q(!1,"Unexpected server value: "+JSON.stringify(n,null,2));let i=n.increment;typeof i!="number"&&q(!1,"Unexpected increment value: "+i);let r=t.node();if(q(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;let o=r.getValue();return typeof o!="number"?i:o+i},SP=function(n,t,e,i){return FI(t,new Zw(e,n),i)},OI=function(n,t,e){return FI(n,new Xw(t),e)};function FI(n,t,e){let i=n.getPriority().val(),r=D1(i,t.getImmediateChild(".priority"),e),s;if(n.isLeafNode()){let o=n,a=D1(o.getValue(),t,e);return a!==o.getValue()||r!==o.getPriority().val()?new Dc(a,le(r)):n}else{let o=n;return s=o,r!==o.getPriority().val()&&(s=s.updatePriority(new Dc(r))),o.forEachChild(Qt,(a,c)=>{let d=FI(c,t.getImmediateChild(a),e);d!==c&&(s=s.updateImmediateChild(a,d))}),s}}var Du=class{constructor(t="",e=null,i={children:{},childCount:0}){this.name=t,this.parent=e,this.node=i}};function Qp(n,t){let e=t instanceof Lt?t:new Lt(t),i=n,r=bt(e);for(;r!==null;){let s=vr(i.node.children,r)||{children:{},childCount:0};i=new Du(r,i,s),e=Wt(e),r=bt(e)}return i}function Co(n){return n.node.value}function LI(n,t){n.node.value=t,Jw(n)}function kP(n){return n.node.childCount>0}function mq(n){return Co(n)===void 0&&!kP(n)}function Yp(n,t){Me(n.node.children,(e,i)=>{t(new Du(e,n,i))})}function RP(n,t,e,i){e&&!i&&t(n),Yp(n,r=>{RP(r,t,!0,i)}),e&&i&&t(n)}function fq(n,t,e){let i=e?n:n.parent;for(;i!==null;){if(t(i))return!0;i=i.parent}return!1}function ju(n){return new Lt(n.parent===null?n.name:ju(n.parent)+"/"+n.name)}function Jw(n){n.parent!==null&&pq(n.parent,n.name,n)}function pq(n,t,e){let i=mq(e),r=Si(n.node.children,t);i&&r?(delete n.node.children[t],n.node.childCount--,Jw(n)):!i&&!r&&(n.node.children[t]=e.node,n.node.childCount++,Jw(n))}var gq=/[\[\].#$\/\u0000-\u001F\u007F]/,_q=/[\[\].#$\u0000-\u001F\u007F]/,dw=10*1024*1024,Xp=function(n){return typeof n=="string"&&n.length!==0&&!gq.test(n)},DP=function(n){return typeof n=="string"&&n.length!==0&&!_q.test(n)},vq=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),DP(n)},Pu=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!zp(n)||n&&typeof n=="object"&&Si(n,".sv")},xn=function(n,t,e,i){i&&t===void 0||Uu(di(n,"value"),t,e)},Uu=function(n,t,e){let i=e instanceof Lt?new Ew(e,n):e;if(t===void 0)throw new Error(n+"contains undefined "+yo(i));if(typeof t=="function")throw new Error(n+"contains a function "+yo(i)+" with contents = "+t.toString());if(zp(t))throw new Error(n+"contains "+t.toString()+" "+yo(i));if(typeof t=="string"&&t.length>dw/3&&El(t)>dw)throw new Error(n+"contains a string greater than "+dw+" utf8 bytes "+yo(i)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let r=!1,s=!1;if(Me(t,(o,a)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!Xp(o)))throw new Error(n+" contains an invalid key ("+o+") "+yo(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Kz(i,o),Uu(n,a,i),Qz(i)}),r&&s)throw new Error(n+' contains ".value" child '+yo(i)+" in addition to actual children.")}},bq=function(n,t){let e,i;for(e=0;e<t.length;e++){i=t[e];let s=Iu(i);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!Xp(s[o]))throw new Error(n+"contains an invalid key ("+s[o]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}t.sort(Hz);let r=null;for(e=0;e<t.length;e++){if(i=t[e],r!==null&&Li(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}},PP=function(n,t,e,i){if(i&&t===void 0)return;let r=di(n,"values");if(!(t&&typeof t=="object")||Array.isArray(t))throw new Error(r+" must be an object containing the children to replace.");let s=[];Me(t,(o,a)=>{let c=new Lt(o);if(Uu(r,a,se(e,c)),yI(c)===".priority"&&!Pu(a))throw new Error(r+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(c)}),bq(r,s)},VI=function(n,t,e){if(!(e&&t===void 0)){if(zp(t))throw new Error(di(n,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Pu(t))throw new Error(di(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Bu=function(n,t,e,i){if(!(i&&e===void 0)&&!Xp(e))throw new Error(di(n,t)+'was an invalid key = "'+e+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},Bc=function(n,t,e,i){if(!(i&&e===void 0)&&!DP(e))throw new Error(di(n,t)+'was an invalid path = "'+e+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},yq=function(n,t,e,i){e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Bc(n,t,e,i)},Ei=function(n,t){if(bt(t)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},MP=function(n,t){let e=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!Xp(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||e.length!==0&&!vq(e))throw new Error(di(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var tI=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function Zp(n,t){let e=null;for(let i=0;i<t.length;i++){let r=t[i],s=r.getPath();e!==null&&!wI(s,e.path)&&(n.eventLists_.push(e),e=null),e===null&&(e={events:[],path:s}),e.events.push(r)}e&&n.eventLists_.push(e)}function NP(n,t,e){Zp(n,e),OP(n,i=>wI(i,t))}function xi(n,t,e){Zp(n,e),OP(n,i=>Li(i,t)||Li(t,i))}function OP(n,t){n.recursionDepth_++;let e=!0;for(let i=0;i<n.eventLists_.length;i++){let r=n.eventLists_[i];if(r){let s=r.path;t(s)?(wq(n.eventLists_[i]),n.eventLists_[i]=null):e=!1}}e&&(n.eventLists_=[]),n.recursionDepth_--}function wq(n){for(let t=0;t<n.events.length;t++){let e=n.events[t];if(e!==null){n.events[t]=null;let i=e.getEventRunner();Io&&Pe("event: "+e.toString()),Vc(i)}}}var FP="repo_interrupt",Iq=25,eI=class{constructor(t,e,i,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new tI,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Tp(),this.transactionQueueTree_=new Du,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function Eq(n,t,e){if(n.stats_=bI(n.repoInfo_),n.forceRestClient_||Ez())n.server_=new Nw(n.repoInfo_,(i,r,s,o)=>{P1(n,i,r,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>M1(n,!0),0);else{if(typeof e<"u"&&e!==null){if(typeof e!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ve(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new II(n.repoInfo_,t,(i,r,s,o)=>{P1(n,i,r,s,o)},i=>{M1(n,i)},i=>{xq(n,i)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=Tz(n.repoInfo_,()=>new jw(n.stats_,n.server_)),n.infoData_=new Ow,n.infoSyncTree_=new Np({startListening:(i,r,s,o)=>{let a=[],c=n.infoData_.getNode(i._path);return c.isEmpty()||(a=Vu(n.infoSyncTree_,i._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),jI(n,"connected",!1),n.serverSyncTree_=new Np({startListening:(i,r,s,o)=>(n.server_.listen(i,s,r,(a,c)=>{let d=o(a,c);xi(n.eventQueue_,i._path,d)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}function LP(n){let e=n.infoData_.getNode(new Lt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+e}function zu(n){return dq({timestamp:LP(n)})}function P1(n,t,e,i,r){n.dataUpdateCount++;let s=new Lt(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let o=[];if(r)if(i){let c=Il(e,d=>le(d));o=rq(n.serverSyncTree_,s,c,r)}else{let c=le(e);o=xP(n.serverSyncTree_,s,c,r)}else if(i){let c=Il(e,d=>le(d));o=eq(n.serverSyncTree_,s,c)}else{let c=le(e);o=Vu(n.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=Fc(n,s)),xi(n.eventQueue_,a,o)}function M1(n,t){jI(n,"connected",t),t===!1&&Aq(n)}function xq(n,t){Me(t,(e,i)=>{jI(n,e,i)})}function jI(n,t,e){let i=new Lt("/.info/"+t),r=le(e);n.infoData_.updateSnapshot(i,r);let s=Vu(n.infoSyncTree_,i,r);xi(n.eventQueue_,i,s)}function Jp(n){return n.nextWriteId_++}function Tq(n,t,e){let i=sq(n.serverSyncTree_,t);return i!=null?Promise.resolve(i):n.server_.get(t).then(r=>{let s=le(r).withIndex(t._queryParams.getIndex());Yw(n.serverSyncTree_,t,e,!0);let o;if(t._queryParams.loadsAllData())o=Vu(n.serverSyncTree_,t._path,s);else{let a=Ru(n.serverSyncTree_,t);o=xP(n.serverSyncTree_,t._path,s,a)}return xi(n.eventQueue_,t._path,o),Op(n.serverSyncTree_,t,e,null,!0),s},r=>(zc(n,"get for query "+ve(t)+" failed: "+r),Promise.reject(new Error(r))))}function UI(n,t,e,i,r){zc(n,"set",{path:t.toString(),value:e,priority:i});let s=zu(n),o=le(e,i),a=Hp(n.serverSyncTree_,t),c=OI(o,a,s),d=Jp(n),u=DI(n.serverSyncTree_,t,c,d,!0);Zp(n.eventQueue_,u),n.server_.put(t.toString(),o.val(!0),(p,_)=>{let w=p==="ok";w||Ye("set at "+t+" failed: "+p);let A=ss(n.serverSyncTree_,d,!w);xi(n.eventQueue_,t,A),us(n,r,p,_)});let m=zI(n,t);Fc(n,m),xi(n.eventQueue_,m,[])}function Cq(n,t,e,i){zc(n,"update",{path:t.toString(),value:e});let r=!0,s=zu(n),o={};if(Me(e,(a,c)=>{r=!1,o[a]=SP(se(t,a),le(c),n.serverSyncTree_,s)}),r)Pe("update() called with empty data.  Don't do anything."),us(n,i,"ok",void 0);else{let a=Jp(n),c=tq(n.serverSyncTree_,t,o,a);Zp(n.eventQueue_,c),n.server_.merge(t.toString(),e,(d,u)=>{let m=d==="ok";m||Ye("update at "+t+" failed: "+d);let p=ss(n.serverSyncTree_,a,!m),_=p.length>0?Fc(n,t):t;xi(n.eventQueue_,_,p),us(n,i,d,u)}),Me(e,d=>{let u=zI(n,se(t,d));Fc(n,u)}),xi(n.eventQueue_,t,[])}}function Aq(n){zc(n,"onDisconnectEvents");let t=zu(n),e=Tp();Lw(n.onDisconnect_,Ft(),(r,s)=>{let o=SP(r,s,n.serverSyncTree_,t);jc(e,r,o)});let i=[];Lw(e,Ft(),(r,s)=>{i=i.concat(Vu(n.serverSyncTree_,r,s));let o=zI(n,r);Fc(n,o)}),n.onDisconnect_=Tp(),xi(n.eventQueue_,Ft(),i)}function Sq(n,t,e){n.server_.onDisconnectCancel(t.toString(),(i,r)=>{i==="ok"&&Fw(n.onDisconnect_,t),us(n,e,i,r)})}function N1(n,t,e,i){let r=le(e);n.server_.onDisconnectPut(t.toString(),r.val(!0),(s,o)=>{s==="ok"&&jc(n.onDisconnect_,t,r),us(n,i,s,o)})}function kq(n,t,e,i,r){let s=le(e,i);n.server_.onDisconnectPut(t.toString(),s.val(!0),(o,a)=>{o==="ok"&&jc(n.onDisconnect_,t,s),us(n,r,o,a)})}function Rq(n,t,e,i){if(Ch(e)){Pe("onDisconnect().update() called with empty data.  Don't do anything."),us(n,i,"ok",void 0);return}n.server_.onDisconnectMerge(t.toString(),e,(r,s)=>{r==="ok"&&Me(e,(o,a)=>{let c=le(a);jc(n.onDisconnect_,se(t,o),c)}),us(n,i,r,s)})}function Dq(n,t,e){let i;bt(t._path)===".info"?i=Yw(n.infoSyncTree_,t,e):i=Yw(n.serverSyncTree_,t,e),NP(n.eventQueue_,t._path,i)}function iI(n,t,e){let i;bt(t._path)===".info"?i=Op(n.infoSyncTree_,t,e):i=Op(n.serverSyncTree_,t,e),NP(n.eventQueue_,t._path,i)}function VP(n){n.persistentConnection_&&n.persistentConnection_.interrupt(FP)}function Pq(n){n.persistentConnection_&&n.persistentConnection_.resume(FP)}function zc(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),Pe(e,...t)}function us(n,t,e,i){t&&Vc(()=>{if(e==="ok")t(null);else{let r=(e||"error").toUpperCase(),s=r;i&&(s+=": "+i);let o=new Error(s);o.code=r,t(o)}})}function Mq(n,t,e,i,r,s){zc(n,"transaction on "+t);let o={path:t,update:e,onComplete:i,status:null,order:L1(),applyLocally:s,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=BI(n,t,void 0);o.currentInputSnapshot=a;let c=o.update(a.val());if(c===void 0)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{Uu("transaction failed: Data returned ",c,o.path),o.status=0;let d=Qp(n.transactionQueueTree_,t),u=Co(d)||[];u.push(o),LI(d,u);let m;typeof c=="object"&&c!==null&&Si(c,".priority")?(m=vr(c,".priority"),q(Pu(m),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):m=(Hp(n.serverSyncTree_,t)||ft.EMPTY_NODE).getPriority().val();let p=zu(n),_=le(c,m),w=OI(_,a,p);o.currentOutputSnapshotRaw=_,o.currentOutputSnapshotResolved=w,o.currentWriteId=Jp(n);let A=DI(n.serverSyncTree_,t,w,o.currentWriteId,o.applyLocally);xi(n.eventQueue_,t,A),tg(n,n.transactionQueueTree_)}}function BI(n,t,e){return Hp(n.serverSyncTree_,t,e)||ft.EMPTY_NODE}function tg(n,t=n.transactionQueueTree_){if(t||eg(n,t),Co(t)){let e=UP(n,t);q(e.length>0,"Sending zero length transaction queue"),e.every(r=>r.status===0)&&Nq(n,ju(t),e)}else kP(t)&&Yp(t,e=>{tg(n,e)})}function Nq(n,t,e){let i=e.map(d=>d.currentWriteId),r=BI(n,t,i),s=r,o=r.hash();for(let d=0;d<e.length;d++){let u=e[d];q(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let m=si(t,u.path);s=s.updateChild(m,u.currentOutputSnapshotRaw)}let a=s.val(!0),c=t;n.server_.put(c.toString(),a,d=>{zc(n,"transaction put response",{path:c.toString(),status:d});let u=[];if(d==="ok"){let m=[];for(let p=0;p<e.length;p++)e[p].status=2,u=u.concat(ss(n.serverSyncTree_,e[p].currentWriteId)),e[p].onComplete&&m.push(()=>e[p].onComplete(null,!0,e[p].currentOutputSnapshotResolved)),e[p].unwatcher();eg(n,Qp(n.transactionQueueTree_,t)),tg(n,n.transactionQueueTree_),xi(n.eventQueue_,t,u);for(let p=0;p<m.length;p++)Vc(m[p])}else{if(d==="datastale")for(let m=0;m<e.length;m++)e[m].status===3?e[m].status=4:e[m].status=0;else{Ye("transaction at "+c.toString()+" failed: "+d);for(let m=0;m<e.length;m++)e[m].status=4,e[m].abortReason=d}Fc(n,t)}},o)}function Fc(n,t){let e=jP(n,t),i=ju(e),r=UP(n,e);return Oq(n,r,i),i}function Oq(n,t,e){if(t.length===0)return;let i=[],r=[],o=t.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<t.length;a++){let c=t[a],d=si(e,c.path),u=!1,m;if(q(d!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,m=c.abortReason,r=r.concat(ss(n.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=Iq)u=!0,m="maxretry",r=r.concat(ss(n.serverSyncTree_,c.currentWriteId,!0));else{let p=BI(n,c.path,o);c.currentInputSnapshot=p;let _=t[a].update(p.val());if(_!==void 0){Uu("transaction failed: Data returned ",_,c.path);let w=le(_);typeof _=="object"&&_!=null&&Si(_,".priority")||(w=w.updatePriority(p.getPriority()));let x=c.currentWriteId,V=zu(n),H=OI(w,p,V);c.currentOutputSnapshotRaw=w,c.currentOutputSnapshotResolved=H,c.currentWriteId=Jp(n),o.splice(o.indexOf(x),1),r=r.concat(DI(n.serverSyncTree_,c.path,H,c.currentWriteId,c.applyLocally)),r=r.concat(ss(n.serverSyncTree_,x,!0))}else u=!0,m="nodata",r=r.concat(ss(n.serverSyncTree_,c.currentWriteId,!0))}xi(n.eventQueue_,e,r),r=[],u&&(t[a].status=2,function(p){setTimeout(p,Math.floor(0))}(t[a].unwatcher),t[a].onComplete&&(m==="nodata"?i.push(()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot)):i.push(()=>t[a].onComplete(new Error(m),!1,null))))}eg(n,n.transactionQueueTree_);for(let a=0;a<i.length;a++)Vc(i[a]);tg(n,n.transactionQueueTree_)}function jP(n,t){let e,i=n.transactionQueueTree_;for(e=bt(t);e!==null&&Co(i)===void 0;)i=Qp(i,e),t=Wt(t),e=bt(t);return i}function UP(n,t){let e=[];return BP(n,t,e),e.sort((i,r)=>i.order-r.order),e}function BP(n,t,e){let i=Co(t);if(i)for(let r=0;r<i.length;r++)e.push(i[r]);Yp(t,r=>{BP(n,r,e)})}function eg(n,t){let e=Co(t);if(e){let i=0;for(let r=0;r<e.length;r++)e[r].status!==2&&(e[i]=e[r],i++);e.length=i,LI(t,e.length>0?e:void 0)}Yp(t,i=>{eg(n,i)})}function zI(n,t){let e=ju(jP(n,t)),i=Qp(n.transactionQueueTree_,t);return fq(i,r=>{uw(n,r)}),uw(n,i),RP(i,r=>{uw(n,r)}),e}function uw(n,t){let e=Co(t);if(e){let i=[],r=[],s=-1;for(let o=0;o<e.length;o++)e[o].status===3||(e[o].status===1?(q(s===o-1,"All SENT items should be at beginning of queue."),s=o,e[o].status=3,e[o].abortReason="set"):(q(e[o].status===0,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(ss(n.serverSyncTree_,e[o].currentWriteId,!0)),e[o].onComplete&&i.push(e[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?LI(t,void 0):e.length=s+1,xi(n.eventQueue_,ju(t),r);for(let o=0;o<i.length;o++)Vc(i[o])}}function Fq(n){let t="",e=n.split("/");for(let i=0;i<e.length;i++)if(e[i].length>0){let r=e[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}t+="/"+r}return t}function Lq(n){let t={};n.charAt(0)==="?"&&(n=n.substring(1));for(let e of n.split("&")){if(e.length===0)continue;let i=e.split("=");i.length===2?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Ye(`Invalid query segment '${e}' in query '${n}'`)}return t}var nI=function(n,t){let e=Vq(n),i=e.namespace;e.domain==="firebase.com"&&In(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&e.domain!=="localhost"&&In("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||fz();let r=e.scheme==="ws"||e.scheme==="wss";return{repoInfo:new _p(e.host,e.secure,i,r,t,"",i!==e.subdomain),path:new Lt(e.pathString)}},Vq=function(n){let t="",e="",i="",r="",s="",o=!0,a="https",c=443;if(typeof n=="string"){let d=n.indexOf("//");d>=0&&(a=n.substring(0,d-1),n=n.substring(d+2));let u=n.indexOf("/");u===-1&&(u=n.length);let m=n.indexOf("?");m===-1&&(m=n.length),t=n.substring(0,Math.min(u,m)),u<m&&(r=Fq(n.substring(u,m)));let p=Lq(n.substring(Math.min(n.length,m)));d=t.indexOf(":"),d>=0?(o=a==="https"||a==="wss",c=parseInt(t.substring(d+1),10)):d=t.length;let _=t.slice(0,d);if(_.toLowerCase()==="localhost")e="localhost";else if(_.split(".").length<=2)e=_;else{let w=t.indexOf(".");i=t.substring(0,w).toLowerCase(),e=t.substring(w+1),s=i}"ns"in p&&(s=p.ns)}return{host:t,port:c,domain:e,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}};var O1="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",jq=function(){let n=0,t=[];return function(e){let i=e===n;n=e;let r,s=new Array(8);for(r=7;r>=0;r--)s[r]=O1.charAt(e%64),e=Math.floor(e/64);q(e===0,"Cannot push at time == 0");let o=s.join("");if(i){for(r=11;r>=0&&t[r]===63;r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(Math.random()*64);for(r=0;r<12;r++)o+=O1.charAt(t[r]);return q(o.length===20,"nextPushId: Length should be 20."),o}}();var Fp=class{constructor(t,e,i,r){this.eventType=t,this.eventRegistration=e,this.snapshot=i,this.prevName=r}getPath(){let t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ve(this.snapshot.exportVal())}},Lp=class{constructor(t,e,i){this.eventRegistration=t,this.error=e,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var Mu=class{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return q(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}};var Vp=class{constructor(t,e){this._repo=t,this._path=e}cancel(){let t=new ke;return Sq(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){Ei("OnDisconnect.remove",this._path);let t=new ke;return N1(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){Ei("OnDisconnect.set",this._path),xn("OnDisconnect.set",t,this._path,!1);let e=new ke;return N1(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){Ei("OnDisconnect.setWithPriority",this._path),xn("OnDisconnect.setWithPriority",t,this._path,!1),VI("OnDisconnect.setWithPriority",e,!1);let i=new ke;return kq(this._repo,this._path,t,e,i.wrapCallback(()=>{})),i.promise}update(t){Ei("OnDisconnect.update",this._path),PP("OnDisconnect.update",t,this._path,!1);let e=new ke;return Rq(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}};var ai=class n{constructor(t,e,i,r){this._repo=t,this._path=e,this._queryParams=i,this._orderByCalled=r}get key(){return yt(this._path)?null:yI(this._path)}get ref(){return new Ti(this._repo,this._path)}get _queryIdentifier(){let t=w1(this._queryParams),e=vI(t);return e==="{}"?"default":e}get _queryObject(){return w1(this._queryParams)}isEqual(t){if(t=Tt(t),!(t instanceof n))return!1;let e=this._repo===t._repo,i=wI(this._path,t._path),r=this._queryIdentifier===t._queryIdentifier;return e&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+Wz(this._path)}};function ig(n,t){if(n._orderByCalled===!0)throw new Error(t+": You can't combine multiple orderBy calls.")}function ms(n){let t=null,e=null;if(n.hasStart()&&(t=n.getIndexStartValue()),n.hasEnd()&&(e=n.getIndexEndValue()),n.getIndex()===wn){let i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==cs)throw new Error(i);if(typeof t!="string")throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==rr)throw new Error(i);if(typeof e!="string")throw new Error(r)}}else if(n.getIndex()===Qt){if(t!=null&&!Pu(t)||e!=null&&!Pu(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(q(n.getIndex()instanceof Eu||n.getIndex()===xI,"unknown index type."),t!=null&&typeof t=="object"||e!=null&&typeof e=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function ng(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Ti=class n extends ai{constructor(t,e){super(t,e,new Au,!1)}get parent(){let t=rP(this._path);return t===null?null:new n(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}},Lc=class n{constructor(t,e,i){this._node=t,this.ref=e,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){let e=new Lt(t),i=hs(this.ref,t);return new n(this._node.getChild(e),i,Qt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,r)=>t(new n(r,hs(this.ref,i),Qt)))}hasChild(t){let e=new Lt(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function qI(n,t){return n=Tt(n),n._checkNotDeleted("ref"),t!==void 0?hs(n._root,t):n._root}function GI(n,t){n=Tt(n),n._checkNotDeleted("refFromURL");let e=nI(t,n._repo.repoInfo_.nodeAdmin);MP("refFromURL",e);let i=e.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&In("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),qI(n,e.path.toString())}function hs(n,t){return n=Tt(n),bt(n._path)===null?yq("child","path",t,!1):Bc("child","path",t,!1),new Ti(n._repo,se(n._path,t))}function zP(n,t){n=Tt(n),Ei("push",n._path),xn("push",t,n._path,!0);let e=LP(n._repo),i=jq(e),r=hs(n,i),s=hs(n,i),o;return t!=null?o=rg(s,t).then(()=>s):o=Promise.resolve(s),r.then=o.then.bind(o),r.catch=o.then.bind(o,void 0),r}function qP(n){return Ei("remove",n._path),rg(n,null)}function rg(n,t){n=Tt(n),Ei("set",n._path),xn("set",t,n._path,!1);let e=new ke;return UI(n._repo,n._path,t,null,e.wrapCallback(()=>{})),e.promise}function GP(n,t){n=Tt(n),Ei("setPriority",n._path),VI("setPriority",t,!1);let e=new ke;return UI(n._repo,se(n._path,".priority"),t,null,e.wrapCallback(()=>{})),e.promise}function $P(n,t,e){if(Ei("setWithPriority",n._path),xn("setWithPriority",t,n._path,!1),VI("setWithPriority",e,!1),n.key===".length"||n.key===".keys")throw"setWithPriority failed: "+n.key+" is a read-only object.";let i=new ke;return UI(n._repo,n._path,t,e,i.wrapCallback(()=>{})),i.promise}function WP(n,t){PP("update",t,n._path,!1);let e=new ke;return Cq(n._repo,n._path,t,e.wrapCallback(()=>{})),e.promise}function HP(n){n=Tt(n);let t=new Mu(()=>{}),e=new Nu(t);return Tq(n._repo,n,e).then(i=>new Lc(i,new Ti(n._repo,n._path),n._queryParams.getIndex()))}var Nu=class n{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,e){let i=e._queryParams.getIndex();return new Fp("value",this,new Lc(t.snapshotNode,new Ti(e._repo,e._path),i))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new Lp(this,t,e):null}matches(t){return t instanceof n?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},jp=class n{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e=t==="children_added"?"child_added":t;return e=e==="children_removed"?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new Lp(this,t,e):null}createEvent(t,e){q(t.childName!=null,"Child events should have a childName.");let i=hs(new Ti(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new Fp(t.type,this,new Lc(t.snapshotNode,i,r),t.prevName)}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof n?this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function qu(n,t,e,i,r){let s;if(typeof i=="object"&&(s=void 0,r=i),typeof i=="function"&&(s=i),r&&r.onlyOnce){let c=e,d=(u,m)=>{iI(n._repo,n,a),c(u,m)};d.userCallback=e.userCallback,d.context=e.context,e=d}let o=new Mu(e,s||void 0),a=t==="value"?new Nu(o):new jp(t,o);return Dq(n._repo,n,a),()=>iI(n._repo,n,a)}function sg(n,t,e,i){return qu(n,"value",t,e,i)}function $I(n,t,e,i){return qu(n,"child_added",t,e,i)}function WI(n,t,e,i){return qu(n,"child_changed",t,e,i)}function HI(n,t,e,i){return qu(n,"child_moved",t,e,i)}function KI(n,t,e,i){return qu(n,"child_removed",t,e,i)}function QI(n,t,e){let i=null,r=e?new Mu(e):null;t==="value"?i=new Nu(r):t&&(i=new jp(t,r)),iI(n._repo,n,i)}var Ci=class{},Up=class extends Ci{constructor(t,e){super(),this._value=t,this._key=e,this.type="endAt"}_apply(t){xn("endAt",this._value,t._path,!0);let e=Mw(t._queryParams,this._value,this._key);if(ng(e),ms(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ai(t._repo,t._path,e,t._orderByCalled)}};function KP(n,t){return Bu("endAt","key",t,!0),new Up(n,t)}var rI=class extends Ci{constructor(t,e){super(),this._value=t,this._key=e,this.type="endBefore"}_apply(t){xn("endBefore",this._value,t._path,!1);let e=u4(t._queryParams,this._value,this._key);if(ng(e),ms(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ai(t._repo,t._path,e,t._orderByCalled)}};function QP(n,t){return Bu("endBefore","key",t,!0),new rI(n,t)}var Bp=class extends Ci{constructor(t,e){super(),this._value=t,this._key=e,this.type="startAt"}_apply(t){xn("startAt",this._value,t._path,!0);let e=Pw(t._queryParams,this._value,this._key);if(ng(e),ms(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ai(t._repo,t._path,e,t._orderByCalled)}};function YP(n=null,t){return Bu("startAt","key",t,!0),new Bp(n,t)}var sI=class extends Ci{constructor(t,e){super(),this._value=t,this._key=e,this.type="startAfter"}_apply(t){xn("startAfter",this._value,t._path,!1);let e=d4(t._queryParams,this._value,this._key);if(ng(e),ms(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ai(t._repo,t._path,e,t._orderByCalled)}};function XP(n,t){return Bu("startAfter","key",t,!0),new sI(n,t)}var oI=class extends Ci{constructor(t){super(),this._limit=t,this.type="limitToFirst"}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ai(t._repo,t._path,c4(t._queryParams,this._limit),t._orderByCalled)}};function ZP(n){if(typeof n!="number"||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new oI(n)}var aI=class extends Ci{constructor(t){super(),this._limit=t,this.type="limitToLast"}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ai(t._repo,t._path,l4(t._queryParams,this._limit),t._orderByCalled)}};function JP(n){if(typeof n!="number"||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new aI(n)}var cI=class extends Ci{constructor(t){super(),this._path=t,this.type="orderByChild"}_apply(t){ig(t,"orderByChild");let e=new Lt(this._path);if(yt(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");let i=new Eu(e),r=qp(t._queryParams,i);return ms(r),new ai(t._repo,t._path,r,!0)}};function tM(n){if(n==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(n==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(n==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Bc("orderByChild","path",n,!1),new cI(n)}var lI=class extends Ci{constructor(){super(...arguments),this.type="orderByKey"}_apply(t){ig(t,"orderByKey");let e=qp(t._queryParams,wn);return ms(e),new ai(t._repo,t._path,e,!0)}};function eM(){return new lI}var dI=class extends Ci{constructor(){super(...arguments),this.type="orderByPriority"}_apply(t){ig(t,"orderByPriority");let e=qp(t._queryParams,Qt);return ms(e),new ai(t._repo,t._path,e,!0)}};function iM(){return new dI}var uI=class extends Ci{constructor(){super(...arguments),this.type="orderByValue"}_apply(t){ig(t,"orderByValue");let e=qp(t._queryParams,xI);return ms(e),new ai(t._repo,t._path,e,!0)}};function nM(){return new uI}var hI=class extends Ci{constructor(t,e){super(),this._value=t,this._key=e,this.type="equalTo"}_apply(t){if(xn("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Up(this._value,this._key)._apply(new Bp(this._value,this._key)._apply(t))}};function rM(n,t){return Bu("equalTo","key",t,!0),new hI(n,t)}function ji(n,...t){let e=Tt(n);for(let i of t)e=i._apply(e);return e}W4(Ti);X4(Ti);var Uq="FIREBASE_DATABASE_EMULATOR_HOST",mI={},Bq=!1;function zq(n,t,e,i){n.repoInfo_=new _p(`${t}:${e}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),i&&(n.authTokenProvider_=i)}function YI(n,t,e,i,r){let s=i||n.options.databaseURL;s===void 0&&(n.options.projectId||In("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Pe("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let o=nI(s,r),a=o.repoInfo,c,d;typeof process<"u"&&process.env&&(d=process.env[Uq]),d?(c=!0,s=`http://${d}?ns=${a.namespace}`,o=nI(s,r),a=o.repoInfo):c=!o.repoInfo.secure;let u=r&&c?new _u(_u.OWNER):new _w(n.name,n.options,t);MP("Invalid Firebase Database URL",o),yt(o.path)||In("Database URL must point to the root of a Firebase Database (not including a child path).");let m=Gq(a,n,u,new gw(n.name,e));return new fI(m,n)}function qq(n,t){let e=mI[t];(!e||e[n.key]!==n)&&In(`Database ${t}(${n.repoInfo_}) has already been deleted.`),VP(n),delete e[n.key]}function Gq(n,t,e,i){let r=mI[t.name];r||(r={},mI[t.name]=r);let s=r[n.toURLString()];return s&&In("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new eI(n,Bq,e,i),r[n.toURLString()]=s,s}var fI=class{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Eq(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ti(this._repo,Ft())),this._rootInternal}_delete(){return this._rootInternal!==null&&(qq(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&In("Cannot call "+t+" on a deleted database.")}};function sM(){nP.IS_TRANSPORT_INITIALIZED&&Ye("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function oM(){sM(),wu.forceDisallow()}function aM(){sM(),Ac.forceDisallow(),wu.forceAllow()}function cM(n,t,e,i={}){n=Tt(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&In("Cannot call useEmulator() after instance has already been initialized.");let r=n._repoInternal,s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&In('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new _u(_u.OWNER);else if(i.mockUserToken){let o=typeof i.mockUserToken=="string"?i.mockUserToken:Eh(i.mockUserToken,n.app.options.projectId);s=new _u(o)}zq(r,t,e,s)}function lM(n){n=Tt(n),n._checkNotDeleted("goOffline"),VP(n._repo)}function dM(n){n=Tt(n),n._checkNotDeleted("goOnline"),Pq(n._repo)}function uM(n,t){j1(n,t)}function $q(n){_I(Sh),xs(new _i("database",(t,{instanceIdentifier:e})=>{let i=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return YI(i,r,s,e)},"PUBLIC").setMultipleInstances(!0)),$i(r1,s1,n),$i(r1,s1,"esm2017")}var Wq={".sv":"timestamp"};function hM(){return Wq}function mM(n){return{".sv":{increment:n}}}var pI=class{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}};function fM(n,t,e){var i;if(n=Tt(n),Ei("Reference.transaction",n._path),n.key===".length"||n.key===".keys")throw"Reference.transaction failed: "+n.key+" is a read-only object.";let r=(i=e?.applyLocally)!==null&&i!==void 0?i:!0,s=new ke,o=(c,d,u)=>{let m=null;c?s.reject(c):(m=new Lc(u,new Ti(n._repo,n._path),Qt),s.resolve(new pI(d,m)))},a=sg(n,()=>{});return Mq(n._repo,n._path,t,o,a,r),s.promise}II.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)};II.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)};$q();var Hq="@firebase/database-compat",Kq="1.0.7";var Qq=new br("@firebase/database-compat"),pM=function(n){let t="FIREBASE WARNING: "+n;Qq.warn(t)};var Yq=function(n,t,e,i){if(!(i&&e===void 0)&&typeof e!="boolean")throw new Error(di(n,t)+"must be a boolean.")},Xq=function(n,t,e){if(!(e&&t===void 0))switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(di(n,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};var XI=class{constructor(t){this._delegate=t}cancel(t){ct("OnDisconnect.cancel",0,1,arguments.length),Te("OnDisconnect.cancel","onComplete",t,!0);let e=this._delegate.cancel();return t&&e.then(()=>t(null),i=>t(i)),e}remove(t){ct("OnDisconnect.remove",0,1,arguments.length),Te("OnDisconnect.remove","onComplete",t,!0);let e=this._delegate.remove();return t&&e.then(()=>t(null),i=>t(i)),e}set(t,e){ct("OnDisconnect.set",1,2,arguments.length),Te("OnDisconnect.set","onComplete",e,!0);let i=this._delegate.set(t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){ct("OnDisconnect.setWithPriority",2,3,arguments.length),Te("OnDisconnect.setWithPriority","onComplete",i,!0);let r=this._delegate.setWithPriority(t,e);return i&&r.then(()=>i(null),s=>i(s)),r}update(t,e){if(ct("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){let r={};for(let s=0;s<t.length;++s)r[""+s]=t[s];t=r,pM("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Te("OnDisconnect.update","onComplete",e,!0);let i=this._delegate.update(t);return e&&i.then(()=>e(null),r=>e(r)),i}};var ZI=class{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return ct("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}};var Ao=class n{constructor(t,e){this._database=t,this._delegate=e}val(){return ct("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return ct("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return ct("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return ct("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return ct("DataSnapshot.child",0,1,arguments.length),t=String(t),Bc("DataSnapshot.child","path",t,!1),new n(this._database,this._delegate.child(t))}hasChild(t){return ct("DataSnapshot.hasChild",1,1,arguments.length),Bc("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return ct("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return ct("DataSnapshot.forEach",1,1,arguments.length),Te("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(e=>t(new n(this._database,e)))}hasChildren(){return ct("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return ct("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return ct("DataSnapshot.ref",0,0,arguments.length),new sr(this._database,this._delegate.ref)}get ref(){return this.getRef()}},og=class n{constructor(t,e){this.database=t,this._delegate=e}on(t,e,i,r){var s;ct("Query.on",2,4,arguments.length),Te("Query.on","callback",e,!1);let o=n.getCancelAndContextArgs_("Query.on",i,r),a=(d,u)=>{e.call(o.context,new Ao(this.database,d),u)};a.userCallback=e,a.context=o.context;let c=(s=o.cancel)===null||s===void 0?void 0:s.bind(o.context);switch(t){case"value":return sg(this._delegate,a,c),e;case"child_added":return $I(this._delegate,a,c),e;case"child_removed":return KI(this._delegate,a,c),e;case"child_changed":return WI(this._delegate,a,c),e;case"child_moved":return HI(this._delegate,a,c),e;default:throw new Error(di("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,e,i){if(ct("Query.off",0,3,arguments.length),Xq("Query.off",t,!0),Te("Query.off","callback",e,!0),s_("Query.off","context",i,!0),e){let r=()=>{};r.userCallback=e,r.context=i,QI(this._delegate,t,r)}else QI(this._delegate,t)}get(){return HP(this._delegate).then(t=>new Ao(this.database,t))}once(t,e,i,r){ct("Query.once",1,4,arguments.length),Te("Query.once","callback",e,!0);let s=n.getCancelAndContextArgs_("Query.once",i,r),o=new ke,a=(d,u)=>{let m=new Ao(this.database,d);e&&e.call(s.context,m,u),o.resolve(m)};a.userCallback=e,a.context=s.context;let c=d=>{s.cancel&&s.cancel.call(s.context,d),o.reject(d)};switch(t){case"value":sg(this._delegate,a,c,{onlyOnce:!0});break;case"child_added":$I(this._delegate,a,c,{onlyOnce:!0});break;case"child_removed":KI(this._delegate,a,c,{onlyOnce:!0});break;case"child_changed":WI(this._delegate,a,c,{onlyOnce:!0});break;case"child_moved":HI(this._delegate,a,c,{onlyOnce:!0});break;default:throw new Error(di("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(t){return ct("Query.limitToFirst",1,1,arguments.length),new n(this.database,ji(this._delegate,ZP(t)))}limitToLast(t){return ct("Query.limitToLast",1,1,arguments.length),new n(this.database,ji(this._delegate,JP(t)))}orderByChild(t){return ct("Query.orderByChild",1,1,arguments.length),new n(this.database,ji(this._delegate,tM(t)))}orderByKey(){return ct("Query.orderByKey",0,0,arguments.length),new n(this.database,ji(this._delegate,eM()))}orderByPriority(){return ct("Query.orderByPriority",0,0,arguments.length),new n(this.database,ji(this._delegate,iM()))}orderByValue(){return ct("Query.orderByValue",0,0,arguments.length),new n(this.database,ji(this._delegate,nM()))}startAt(t=null,e){return ct("Query.startAt",0,2,arguments.length),new n(this.database,ji(this._delegate,YP(t,e)))}startAfter(t=null,e){return ct("Query.startAfter",0,2,arguments.length),new n(this.database,ji(this._delegate,XP(t,e)))}endAt(t=null,e){return ct("Query.endAt",0,2,arguments.length),new n(this.database,ji(this._delegate,KP(t,e)))}endBefore(t=null,e){return ct("Query.endBefore",0,2,arguments.length),new n(this.database,ji(this._delegate,QP(t,e)))}equalTo(t,e){return ct("Query.equalTo",1,2,arguments.length),new n(this.database,ji(this._delegate,rM(t,e)))}toString(){return ct("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return ct("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if(ct("Query.isEqual",1,1,arguments.length),!(t instanceof n)){let e="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(e)}return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,e,i){let r={cancel:void 0,context:void 0};if(e&&i)r.cancel=e,Te(t,"cancel",r.cancel,!0),r.context=i,s_(t,"context",r.context,!0);else if(e)if(typeof e=="object"&&e!==null)r.context=e;else if(typeof e=="function")r.cancel=e;else throw new Error(di(t,"cancelOrContext")+" must either be a cancel callback or a context object.");return r}get ref(){return new sr(this.database,new Ti(this._delegate._repo,this._delegate._path))}},sr=class n extends og{constructor(t,e){super(t,new ai(e._repo,e._path,new Au,!1)),this.database=t,this._delegate=e}getKey(){return ct("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return ct("Reference.child",1,1,arguments.length),typeof t=="number"&&(t=String(t)),new n(this.database,hs(this._delegate,t))}getParent(){ct("Reference.parent",0,0,arguments.length);let t=this._delegate.parent;return t?new n(this.database,t):null}getRoot(){return ct("Reference.root",0,0,arguments.length),new n(this.database,this._delegate.root)}set(t,e){ct("Reference.set",1,2,arguments.length),Te("Reference.set","onComplete",e,!0);let i=rg(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}update(t,e){if(ct("Reference.update",1,2,arguments.length),Array.isArray(t)){let r={};for(let s=0;s<t.length;++s)r[""+s]=t[s];t=r,pM("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ei("Reference.update",this._delegate._path),Te("Reference.update","onComplete",e,!0);let i=WP(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){ct("Reference.setWithPriority",2,3,arguments.length),Te("Reference.setWithPriority","onComplete",i,!0);let r=$P(this._delegate,t,e);return i&&r.then(()=>i(null),s=>i(s)),r}remove(t){ct("Reference.remove",0,1,arguments.length),Te("Reference.remove","onComplete",t,!0);let e=qP(this._delegate);return t&&e.then(()=>t(null),i=>t(i)),e}transaction(t,e,i){ct("Reference.transaction",1,3,arguments.length),Te("Reference.transaction","transactionUpdate",t,!1),Te("Reference.transaction","onComplete",e,!0),Yq("Reference.transaction","applyLocally",i,!0);let r=fM(this._delegate,t,{applyLocally:i}).then(s=>new ZI(s.committed,new Ao(this.database,s.snapshot)));return e&&r.then(s=>e(null,s.committed,s.snapshot),s=>e(s,!1,null)),r}setPriority(t,e){ct("Reference.setPriority",1,2,arguments.length),Te("Reference.setPriority","onComplete",e,!0);let i=GP(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}push(t,e){ct("Reference.push",0,2,arguments.length),Te("Reference.push","onComplete",e,!0);let i=zP(this._delegate,t),r=i.then(o=>new n(this.database,o));e&&r.then(()=>e(null),o=>e(o));let s=new n(this.database,i);return s.then=r.then.bind(r),s.catch=r.catch.bind(r,void 0),s}onDisconnect(){return Ei("Reference.onDisconnect",this._delegate._path),new XI(new Vp(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}};var So=class{constructor(t,e){this._delegate=t,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:oM,forceLongPolling:aM}}useEmulator(t,e,i={}){cM(this._delegate,t,e,i)}ref(t){if(ct("database.ref",0,1,arguments.length),t instanceof sr){let e=GI(this._delegate,t.toString());return new sr(this,e)}else{let e=qI(this._delegate,t);return new sr(this,e)}}refFromURL(t){ct("database.refFromURL",1,1,arguments.length);let i=GI(this._delegate,t);return new sr(this,i)}goOffline(){return ct("database.goOffline",0,0,arguments.length),lM(this._delegate)}goOnline(){return ct("database.goOnline",0,0,arguments.length),dM(this._delegate)}};So.ServerValue={TIMESTAMP:hM(),increment:n=>mM(n)};function Zq({app:n,url:t,version:e,customAuthImpl:i,customAppCheckImpl:r,namespace:s,nodeAdmin:o=!1}){_I(e);let a=new o_("database-standalone"),c=new Ah("auth-internal",a);c.setComponent(new _i("auth-internal",()=>i,"PRIVATE"));let d;return r&&(d=new Ah("app-check-internal",a),d.setComponent(new _i("app-check-internal",()=>r,"PRIVATE"))),{instance:new So(YI(n,c,d,t,o),n),namespace:s}}var Jq=Object.freeze({__proto__:null,initStandalone:Zq});var t5=So.ServerValue;function e5(n){n.INTERNAL.registerComponent(new _i("database-compat",(t,{instanceIdentifier:e})=>{let i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("database").getImmediate({identifier:e});return new So(r,i)},"PUBLIC").setServiceProps({Reference:sr,Query:og,Database:So,DataSnapshot:Ao,enableLogging:uM,INTERNAL:Jq,ServerValue:t5}).setMultipleInstances(!0)),n.registerVersion(Hq,Kq)}e5(he);function Gu(n,t,e="on",i=Fo){return new Oe(r=>{let s=null;return s=n[e](t,(o,a)=>{i.schedule(()=>{r.next({snapshot:o,prevKey:a})}),e==="once"&&i.schedule(()=>r.complete())},o=>{i.schedule(()=>r.error(o))}),e==="on"?{unsubscribe(){s!=null&&n.off(t,s)}}:{unsubscribe(){}}}).pipe(X(r=>{let{snapshot:s,prevKey:o}=r,a=null;return s.exists()&&(a=s.key),{type:t,payload:s,prevKey:o,key:a}}),uh())}function i5(n){return typeof n=="string"}function n5(n){return typeof n.exportVal=="function"}function yM(n){return n==null}function wM(n){return typeof n.set=="function"}function gM(n,t){return wM(t)?t:n.ref(t)}function IM(n,t){if(i5(n))return t.stringCase();if(wM(n))return t.firebaseCase();if(n5(n))return t.snapshotCase();throw new Error(`Expects a string, snapshot, or reference. Got: ${typeof n}`)}function EM(n){return(yM(n)||n.length===0)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function xM(n,t,e){t=EM(t);let i=t.map(r=>Gu(n,r,"on",e));return kn(...i)}function r5(n,t,e){let i=xM(n,t).pipe(Dn((r,s)=>[...r,s],[]));return o5(n,i,e)}function s5(n,t){return Gu(n,"value","on",t).pipe(X(e=>{let i;return e.payload.forEach(r=>(i=r.key,!1)),{data:e,lastKeyToLoad:i}}))}function o5(n,t,e){return s5(n,e).pipe(ax(t),X(([r,s])=>{let o=r.lastKeyToLoad,a=s.map(c=>c.key);return{actions:s,lastKeyToLoad:o,loadedKeys:a}}),ox(r=>r.loadedKeys.indexOf(r.lastKeyToLoad)===-1),X(r=>r.actions))}function _M(n,t){return function(i,r){return IM(i,{stringCase:()=>n.child(i)[t](r),firebaseCase:()=>i[t](r),snapshotCase:()=>i.ref[t](r)})}}function a5(n){return function(e){return e?IM(e,{stringCase:()=>n.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):n.remove()}}function c5(n,t,e){return Gu(n,"value","once",e).pipe(Ht(i=>{let r=[tt(i)];return t.forEach(s=>r.push(Gu(n,s,"on",e))),kn(...r).pipe(Dn(d5,[]))}),jo())}function TM(n,t){let e=n.length;for(let i=0;i<e;i++)if(n[i].payload.key===t)return i;return-1}function l5(n,t){if(yM(t))return 0;{let e=TM(n,t);return e===-1?n.length:e+1}}function d5(n,t){let{payload:e,prevKey:i,key:r}=t,s=TM(n,r),o=l5(n,i);switch(t.type){case"value":if(t.payload?.exists()){let a=null;t.payload.forEach(c=>{let d={payload:c,type:"value",prevKey:a,key:c.key};return a=c.key,n=[...n,d],!1})}return n;case"child_added":if(s>-1)(n[s-1]?.key||null)!==i&&(n=n.filter(c=>c.payload.key!==e.key),n.splice(o,0,t));else{if(i==null)return[t,...n];n=n.slice(),n.splice(o,0,t)}return n;case"child_removed":return n.filter(a=>a.payload.key!==e.key);case"child_changed":return n.map(a=>a.payload.key===r?t:a);case"child_moved":if(s>-1){let a=n.splice(s,1)[0];return n=n.slice(),n.splice(o,0,a),n}return n;default:return n}}function vM(n,t,e){return t=EM(t),c5(n,t,e)}function u5(n,t){let e=t.schedulers.outsideAngular,i=t.schedulers.ngZone.run(()=>n.ref);return{query:n,update:_M(i,"update"),set:_M(i,"set"),push:r=>i.push(r),remove:a5(i),snapshotChanges(r){return vM(n,r,e).pipe(me)},stateChanges(r){return xM(n,r,e).pipe(me)},auditTrail(r){return r5(n,r,e).pipe(me)},valueChanges(r,s){return vM(n,r,e).pipe(X(a=>a.map(c=>s&&s.idField?wt(F({},c.payload.val()),{[s.idField]:c.key}):c.payload.val())),me)}}}function bM(n,t){return function(){return Gu(n,"value","on",t)}}function h5(n,t){return{query:n,snapshotChanges(){return bM(n,t.schedulers.outsideAngular)().pipe(me)},update(e){return n.ref.update(e)},set(e){return n.ref.set(e)},remove(){return n.ref.remove()},valueChanges(){return bM(n,t.schedulers.outsideAngular)().pipe(me,X(i=>i.payload.exists()?i.payload.val():null))}}}var m5=new G("angularfire2.realtimeDatabaseURL"),f5=new G("angularfire2.database.use-emulator"),p5=(()=>{class n{schedulers;database;constructor(e,i,r,s,o,a,c,d,u,m,p,_,w,A,x){this.schedulers=a;let V=c,H=Ms(e,o,i);d&&gd(H,o,u,p,_,w,m,A),this.database=wa(`${H.name}.database.${r}`,"AngularFireDatabase",H.name,()=>{let j=o.runOutsideAngular(()=>H.database(r||void 0));return V&&j.useEmulator(...V),j},[V])}list(e,i){let r=this.schedulers.ngZone.runOutsideAngular(()=>gM(this.database,e)),s=r;return i&&(s=i(r)),u5(s,this)}object(e){let i=this.schedulers.ngZone.runOutsideAngular(()=>gM(this.database,e));return h5(i,this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}static \u0275fac=function(i){return new(i||n)(k(Rr),k(Dr,8),k(m5,8),k(Fe),k(rt),k(ya),k(f5,8),k(Qi,8),k(dd,8),k(ud,8),k(hd,8),k(md,8),k(fd,8),k(pd,8),k(qn,8))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),CM=(()=>{class n{constructor(){he.registerVersion("angularfire",Gn.full,"rtdb-compat")}static \u0275fac=function(i){return new(i||n)};static \u0275mod=it({type:n});static \u0275inj=et({providers:[p5]})}return n})();var g5="@",_5=(()=>{let t=class t{constructor(i,r,s,o,a){this.doc=i,this.delegate=r,this.zone=s,this.animationType=o,this.moduleImpl=a,this._rendererFactoryPromise=null,this.scheduler=B(yx,{optional:!0}),this.loadingSchedulerFn=B(v5,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){let i=()=>this.moduleImpl??import("./chunk-IKNP3SOY.js").then(s=>s),r;return this.loadingSchedulerFn?r=this.loadingSchedulerFn(i):r=i(),r.catch(s=>{throw new jt(5300,!1)}).then(({\u0275createEngine:s,\u0275AnimationRendererFactory:o})=>{this._engine=s(this.animationType,this.doc);let a=new o(this.delegate,this._engine,this.zone);return this.delegate=a,a})}createRenderer(i,r){let s=this.delegate.createRenderer(i,r);if(s.\u0275type===0)return s;typeof s.throwOnSyntheticProps=="boolean"&&(s.throwOnSyntheticProps=!1);let o=new JI(s);return r?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(a=>{let c=a.createRenderer(i,r);o.use(c),this.scheduler?.notify(10)}).catch(a=>{o.use(s)}),o}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};t.\u0275fac=function(r){$o()},t.\u0275prov=$({token:t,factory:t.\u0275fac});let n=t;return n})(),JI=class{constructor(t){this.delegate=t,this.replay=[],this.\u0275type=1}use(t){if(this.delegate=t,this.replay!==null){for(let e of this.replay)e(t);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}get destroyNode(){return this.delegate.destroyNode}appendChild(t,e){this.delegate.appendChild(t,e)}insertBefore(t,e,i,r){this.delegate.insertBefore(t,e,i,r)}removeChild(t,e,i){this.delegate.removeChild(t,e,i)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,r){this.delegate.setAttribute(t,e,i,r)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,r){this.delegate.setStyle(t,e,i,r)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){this.shouldReplay(e)&&this.replay.push(r=>r.setProperty(t,e,i)),this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i){return this.shouldReplay(e)&&this.replay.push(r=>r.listen(t,e,i)),this.delegate.listen(t,e,i)}shouldReplay(t){return this.replay!==null&&t.startsWith(g5)}},v5=new G("");function AM(n="animations"){return Hg("NgAsyncAnimations"),fr([{provide:mh,useFactory:(t,e,i)=>new _5(t,e,i,n),deps:[kt,Oh,rt]},{provide:Je,useValue:n==="noop"?"NoopAnimations":"BrowserAnimations"}])}var ko=class ko{};ko.\u0275fac=function(e){return new(e||ko)},ko.\u0275mod=it({type:ko}),ko.\u0275inj=et({imports:[ie,i1]});var ag=ko;var Ro=class Ro{};Ro.\u0275fac=function(e){return new(e||Ro)},Ro.\u0275mod=it({type:Ro}),Ro.\u0275inj=et({imports:[ie,Ec,rs,Lr]});var cg=Ro;var Do=class Do{};Do.\u0275fac=function(e){return new(e||Do)},Do.\u0275mod=it({type:Do,bootstrap:[lp]}),Do.\u0275inj=et({providers:[AM()],imports:[TT,Ec,hp,fp,sA.initializeApp(n1.firebaseConfig),oA,CM,yD,ag,dA.forRoot(),cg]});var lg=Do;xT().bootstrapModule(lg,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));
